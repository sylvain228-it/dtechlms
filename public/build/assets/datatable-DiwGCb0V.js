import{j as e,R as n,L as x,a as y}from"./app-BzXwBPBx.js";import{B as d}from"./button-DpCkL2lj.js";import{C as h}from"./checkbox-Bkb6GjLX.js";import{D as C,a as b,b as w,c as D,d as V,e as o,f as k,g as c}from"./dropdown-menu-DlZS67It.js";import{u as F,T as P,a as T,b as g,c as I,f as p,d as z,e as j,E as A,g as H,h as q,i as E,j as K}from"./table-BPRttfHj.js";import{h as L}from"./tasks-BTAmnlgm.js";import{c as B,e as O,s as U,d as _}from"./index-DH9SVvWg.js";import{a as $}from"./index-CJeVcETn.js";import{F as G}from"./index-BGGtLgwn.js";import{F as J,a as Q}from"./index-DJeoZDrq.js";import{I as W}from"./index-CoBc6tAl.js";import{M as X}from"./index-DF2umSuw.js";import{C as Y}from"./chevron-down-eKEbewAb.js";import"./app-BlAWqAGg.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./utils-e8IeQt0G.js";import"./index-BWbkfBfC.js";import"./index-BZwf-zK1.js";import"./index-BtFGMy8Q.js";import"./index-BQPF0Rq9.js";import"./check-BHZKRPmL.js";import"./createLucideIcon-BboBuA9R.js";import"./index-VdYImSg5.js";import"./index-CJlYDfk2.js";import"./index-B2cDW95s.js";import"./index-DAHL75PX.js";import"./index-BucdvD4Q.js";import"./index-BRTuzqyl.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./lexical-headless-DaF8M3S2.js";import"./nodes-CSrlFqt9.js";import"./iconBase-BH9TG5R0.js";const f=[{id:"actions",enableHiding:!1,cell:({row:s})=>{const l=s.original,m=l.course?O([l.course?.slug??"",l.id]).url:"#";function u(a){a.preventDefault(),confirm("Êtes-vous sûr de vouloir supprimer ce module ?")&&l.course&&y.delete(_([l.course?.slug??"",l.id]))}return e.jsxs(C,{children:[e.jsx(b,{asChild:!0,children:e.jsxs(d,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Ouvrir"}),e.jsx(A,{})]})}),e.jsxs(w,{align:"end",children:[e.jsx(V,{children:"Actions"}),e.jsx(o,{onClick:()=>navigator.clipboard.writeText(l.title),children:"Copier le titre"}),e.jsx(k,{}),e.jsx(x,{href:l.course?U([l.course?.slug??"",l.id]):"#",children:e.jsxs(o,{children:["Détails",e.jsx(c,{children:e.jsx(J,{className:"text-blue-500"})})]})}),e.jsxs(o,{onClick:a=>L(a,l.syllabus??"",m),children:["Modifier",e.jsx(c,{children:e.jsx(G,{className:"text-blue-500"})})]}),e.jsx(x,{href:$.index([l.course?.slug??"",l.id]),children:e.jsxs(o,{children:["Séquences",e.jsx(c,{children:e.jsx(Q,{className:"text-blue-500"})})]})}),e.jsxs(o,{onClick:u,children:["Supprimer",e.jsx(c,{children:e.jsx(X,{className:"text-red-500"})})]})]})]})}},{id:"select",header:({table:s})=>e.jsx(h,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:l=>s.toggleAllPageRowsSelected(!!l),"aria-label":"Sélectionner tout"}),cell:({row:s})=>e.jsx(h,{checked:s.getIsSelected(),onCheckedChange:l=>s.toggleSelected(!!l),"aria-label":"Sélectionner la ligne"}),enableSorting:!1,enableHiding:!1},{accessorKey:"order",header:"Numéro",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.getValue("order")})},{accessorKey:"title",header:"Titre",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.getValue("title")})},{accessorKey:"is_visible",header:"Visibilité",cell:({row:s})=>e.jsx("div",{className:`capitalize ${s.getValue("is_visible")==1?"text-green-600":"text-red-600"}`,children:s.getValue("is_visible")==1?"Visible":"Invisible"})},{accessorKey:"sequences",header:"Sequences",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.getValue("sequences").length})}];function Ie({modules:s,course:l}){const[m,u]=n.useState([]),[a,v]=n.useState([]),[S,M]=n.useState({}),[N,R]=n.useState({}),i=F({data:s,columns:f,onSortingChange:u,onColumnFiltersChange:v,getCoreRowModel:K(),getPaginationRowModel:E(),getSortedRowModel:q(),getFilteredRowModel:H(),onColumnVisibilityChange:M,onRowSelectionChange:R,state:{sorting:m,columnFilters:a,columnVisibility:S,rowSelection:N}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-3 flex flex-col justify-between gap-2 lg:flex-row lg:gap-4",children:[e.jsxs("div",{className:"flex w-full flex-col items-center justify-between gap-4 sm:flex-row",children:[e.jsx("input",{placeholder:"Filtrer par titre...",value:i.getColumn("title")?.getFilterValue()??"",onChange:t=>i.getColumn("title")?.setFilterValue(t.target.value),className:"form-input w-full"}),e.jsxs(C,{children:[e.jsx(b,{asChild:!0,children:e.jsxs(d,{variant:"outline",children:["Colonne ",e.jsx(Y,{})]})}),e.jsx(w,{align:"end",children:i.getAllColumns().filter(t=>t.getCanHide()).map(t=>e.jsx(D,{className:"capitalize",checked:t.getIsVisible(),onCheckedChange:r=>t.toggleVisibility(!!r),children:t.id},t.id))})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(x,{href:B(l.slug),className:"btn-primary flex w-full items-center justify-center bg-cblue !py-1 text-center text-white",children:["Ajouter ",e.jsx(W,{size:30})]})})]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(P,{children:[e.jsx(T,{children:i.getHeaderGroups().map(t=>e.jsx(g,{children:t.headers.map(r=>e.jsx(I,{children:r.isPlaceholder?null:p(r.column.columnDef.header,r.getContext())},r.id))},t.id))}),e.jsx(z,{children:i.getRowModel().rows?.length?i.getRowModel().rows.map(t=>e.jsx(g,{"data-state":t.getIsSelected()&&"selected",children:t.getVisibleCells().map(r=>e.jsx(j,{children:p(r.column.columnDef.cell,r.getContext())},r.id))},t.id)):e.jsx(g,{children:e.jsx(j,{colSpan:f.length,className:"h-24 text-center",children:"Pas de résultats."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[i.getFilteredSelectedRowModel().rows.length," sur"," ",i.getFilteredRowModel().rows.length," ligne(s) sélectionné(s)."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>i.previousPage(),disabled:!i.getCanPreviousPage(),children:"Précédent"}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>i.nextPage(),disabled:!i.getCanNextPage(),children:"Suivant"})]})]})]})}export{f as columns,Ie as default};
