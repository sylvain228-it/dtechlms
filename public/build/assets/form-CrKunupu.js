import{c as Ue,u as We,b as Xe,r as Ye,j as t,H as Ze,a as ze}from"./app-klcUL3EL.js";import{I as ne,T as et,S as Ve}from"./form-CvObqJ4P.js";import{B as Ge}from"./button-Bh8WI1Ty.js";import{L as tt}from"./label-W6XNthsN.js";import{S as Ke}from"./spinner-2t8r_D1R.js";import{T as st}from"./teacher-layouts-iHncLP1a.js";import{a as it}from"./tasks-akZpNf8L.js";import{B as lt,u as ot,l as rt}from"./type-BKOnXlFr.js";import{u as at,a as mt}from"./index-DH9SVvWg.js";import nt from"./text-editor-D61F96I-.js";import"./app-Ci7uHgFL.js";import"./index-A7wesXx6.js";import"./index-Ds5qzORP.js";import"./index-CyaJm5Nq.js";import"./utils-e8IeQt0G.js";import"./index-DATr0Fl4.js";import"./createLucideIcon-DknjQr1d.js";import"./page-banner-DONW1mv1.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-BQcbsxov.js";import"./iconBase-BVw07lCS.js";import"./arrow-left-DMV9iy1g.js";import"./app-logo-icon-ijSwabQD.js";import"./user-profile-trigger-BnF5rMVz.js";import"./sun-UD3V7mlH.js";import"./avatar-BdB_hIma.js";import"./index-C7Q-OePl.js";import"./index-DkAn70oM.js";import"./avatar-fallback-BDH5mD5T.js";import"./use-initials-GDEZD6-s.js";import"./divider-Dzwd8ovy.js";import"./profile-svg-BWG5dZ33.js";import"./dropdown-menu-Buaj86n5.js";import"./index-hw-50Y8m.js";import"./index-D7xMndjq.js";import"./index-BrvB-LOg.js";import"./index-C9hgHX-E.js";import"./index-CPeTD8AP.js";import"./index-qHu87rw-.js";import"./check-9HY1vcbG.js";import"./logout-user-CTkV5_42.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-uPqsp4v0.js";import"./index-ClAXPadg.js";import"./index-DMEIf3eg.js";import"./index-B5Wz6g3U.js";import"./index-B_X-8rh8.js";import"./index-BSbDLIwT.js";import"./index-D-fKvoRm.js";import"./index-CJeVcETn.js";import"./index-CU8SWGOj.js";import"./index-BD3HuK-g.js";import"./index-C4OL-TuX.js";import"./index-Bwrcs2qz.js";import"./index-DerrCcFj.js";import"./index-Drn0ezkX.js";import"./index-DmWZapw3.js";import"./gauge-BODaeFnF.js";import"./calendar-CUp6x8Fo.js";import"./book-open-qbgfrGvc.js";import"./settings-C4I39P2J.js";import"./x-DGooslga.js";import"./menu-CTQlVSPW.js";import"./lexical-headless-BoxOyP-N.js";import"./nodes-CfCS7w2W.js";import"./editor-1mVTiBqv.js";import"./tooltip-BfRZZUzk.js";import"./index-CNnHLPwR.js";import"./content-editable-k0U21XP-.js";import"./dialog-CgQ1vonM.js";import"./index-DTV9AGlb.js";import"./command-DZlE8gfH.js";import"./search-lzJ3zhHt.js";import"./input-DzuxS5O4.js";import"./popover-YHBFhHiO.js";import"./trash-C-FiMWHJ.js";import"./separator-Dhwn2oUZ.js";import"./index-Y2kYg-Ir.js";import"./index-CJQLk1SD.js";import"./chevron-up-xXppIf4P.js";import"./chevron-down-BwnMHMwc.js";import"./list-BtZo7ljf.js";import"./image-dVCsMYpd.js";function $s(){const e=Ue.c(162),{module:r,course:a,newOrder:Qe}=We().props,m=!!r,de=r?.course_id??a?.id??"",ce=r?.title??"",ue=r?.description??"",pe=r?.syllabus??"",he=r?.order??Qe??1,fe=r?.estimated_hours??null,xe=r?.estimated_days??null,ge=r?.module_type??"",be=r?.modality??a.modality,ye=r?.is_mandatory??!1,_e=r?.has_evaluation??!1,je=r?.evaluation_weight??null,ve=r?.language??a.language,Ne=r?.is_visible??!0;let ee;e[0]!==de||e[1]!==ce||e[2]!==_e||e[3]!==je||e[4]!==ve||e[5]!==Ne||e[6]!==ue||e[7]!==pe||e[8]!==he||e[9]!==fe||e[10]!==xe||e[11]!==ge||e[12]!==be||e[13]!==ye?(ee={course_id:de,title:ce,description:ue,syllabus:pe,order:he,estimated_hours:fe,estimated_days:xe,module_type:ge,modality:be,is_mandatory:ye,has_evaluation:_e,evaluation_weight:je,language:ve,is_visible:Ne},e[0]=de,e[1]=ce,e[2]=_e,e[3]=je,e[4]=ve,e[5]=Ne,e[6]=ue,e[7]=pe,e[8]=he,e[9]=fe,e[10]=xe,e[11]=ge,e[12]=be,e[13]=ye,e[14]=ee):ee=e[14];const{data:s,setData:i,errors:l}=Xe(ee),[n,we]=Ye.useState(!1);let te;e[15]!==a.slug||e[16]!==s||e[17]!==m||e[18]!==r?(te=o=>{o.preventDefault(),we(!0),async function(){await it(m?r.id:0).then(()=>{const $e={...s,_method:m?"put":"post"};m?ze.put(at([a.slug,r.id]),$e,{onFinish:()=>we(!1)}):ze.post(mt(a.slug),$e,{onFinish:()=>we(!1)})})}()},e[15]=a.slug,e[16]=s,e[17]=m,e[18]=r,e[19]=te):te=e[19];const d=te;let se;e[20]!==d?(se=function(Re){Re.preventDefault(),d(Re)},e[20]=d,e[21]=se):se=e[21];const Ce=se,Je=s.title&&s.estimated_hours&&s.estimated_days&&s.module_type&&s.language&&s.syllabus&&s.modality,Se=m?"Modifier le module":"Nouveau module",Te=m?"Modifier module":"Nouveau module";let c;e[22]!==Te?(c=t.jsx(Ze,{title:Te}),e[22]=Te,e[23]=c):c=e[23];const ke=m?"Modifier le module":"Créer un module";let u;e[24]!==ke?(u=t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:ke}),e[24]=ke,e[25]=u):u=e[25];const Fe=n||!Je;let p;e[26]!==n?(p=n&&t.jsx(Ke,{}),e[26]=n,e[27]=p):p=e[27];let h;e[28]!==Ce||e[29]!==Fe||e[30]!==p?(h=t.jsxs(Ge,{className:"btn-primary",disabled:Fe,onClick:Ce,children:[p,"Enregistrer"]}),e[28]=Ce,e[29]=Fe,e[30]=p,e[31]=h):h=e[31];let f;e[32]!==u||e[33]!==h?(f=t.jsxs("div",{className:"mb-5 flex items-center justify-between border-b p-3",children:[u,h]}),e[32]=u,e[33]=h,e[34]=f):f=e[34];const Ee=s.course_id;let x;e[35]!==Ee?(x=t.jsx("input",{type:"hidden",name:"course_id",value:Ee}),e[35]=Ee,e[36]=x):x=e[36];let g;e[37]!==i?(g=o=>i("title",o),e[37]=i,e[38]=g):g=e[38];let b;e[39]!==s.title||e[40]!==l.title||e[41]!==g?(b=t.jsx("div",{children:t.jsx(ne,{label:"Titre",value:s.title,onChange:g,placeholder:"Titre du module",required:!0,error:l.title})}),e[39]=s.title,e[40]=l.title,e[41]=g,e[42]=b):b=e[42];let y;e[43]!==i?(y=o=>i("description",o),e[43]=i,e[44]=y):y=e[44];let _;e[45]!==s.description||e[46]!==l.description||e[47]!==y?(_=t.jsx("div",{children:t.jsx(et,{label:"Description",value:s.description,onChange:y,rows:3,placeholder:"Description du module",error:l.description})}),e[45]=s.description,e[46]=l.description,e[47]=y,e[48]=_):_=e[48];let j;e[49]!==b||e[50]!==_?(j=t.jsxs("div",{className:"mb-4 grid gap-3",children:[b,_]}),e[49]=b,e[50]=_,e[51]=j):j=e[51];let v;e[52]!==i?(v=o=>i("order",Number(o)),e[52]=i,e[53]=v):v=e[53];let N;e[54]!==s.order||e[55]!==l.order||e[56]!==v?(N=t.jsx("div",{children:t.jsx(ne,{label:"Ordre",type:"number",value:s.order,onChange:v,error:l.order,required:!0})}),e[54]=s.order,e[55]=l.order,e[56]=v,e[57]=N):N=e[57];const Le=s.estimated_hours??"";let w;e[58]!==i?(w=o=>i("estimated_hours",o?Number(o):null),e[58]=i,e[59]=w):w=e[59];let C;e[60]!==l.estimated_hours||e[61]!==Le||e[62]!==w?(C=t.jsx("div",{children:t.jsx(ne,{label:"Heures estimées",type:"number",value:Le,onChange:w,error:l.estimated_hours})}),e[60]=l.estimated_hours,e[61]=Le,e[62]=w,e[63]=C):C=e[63];const Ae=s.estimated_days??"";let S;e[64]!==i?(S=o=>i("estimated_days",o?Number(o):null),e[64]=i,e[65]=S):S=e[65];let T;e[66]!==l.estimated_days||e[67]!==Ae||e[68]!==S?(T=t.jsx("div",{children:t.jsx(ne,{label:"Jours estimés",type:"number",value:Ae,onChange:S,error:l.estimated_days})}),e[66]=l.estimated_days,e[67]=Ae,e[68]=S,e[69]=T):T=e[69];let k;e[70]!==N||e[71]!==C||e[72]!==T?(k=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-3",children:[N,C,T]}),e[70]=N,e[71]=C,e[72]=T,e[73]=k):k=e[73];const qe=s.module_type??"";let F;e[74]!==i?(F=o=>i("module_type",o),e[74]=i,e[75]=F):F=e[75];let E;e[76]!==l.module_type||e[77]!==qe||e[78]!==F?(E=t.jsx(Ve,{label:"Type de module",value:qe,onChange:F,required:!0,options:lt,error:l.module_type}),e[76]=l.module_type,e[77]=qe,e[78]=F,e[79]=E):E=e[79];let L;e[80]!==a.modality||e[81]!==s.modality||e[82]!==l.modality||e[83]!==i?(L=a.modality!="asynchronous"&&t.jsx("div",{className:"grid gap-2",children:t.jsx(Ve,{label:"Mode de déroulement",value:s.modality??"",onChange:o=>i("modality",o),required:!0,options:ot,error:l.modality})}),e[80]=a.modality,e[81]=s.modality,e[82]=l.modality,e[83]=i,e[84]=L):L=e[84];const Be=s.language??"";let A;e[85]!==i?(A=o=>i("language",o),e[85]=i,e[86]=A):A=e[86];let q;e[87]!==l.language||e[88]!==Be||e[89]!==A?(q=t.jsx("div",{className:"grid gap-2",children:t.jsx(Ve,{label:"Langue du module",value:Be,onChange:A,options:rt,error:l.language,required:!0})}),e[87]=l.language,e[88]=Be,e[89]=A,e[90]=q):q=e[90];let B;e[91]!==E||e[92]!==L||e[93]!==q?(B=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[E,L,q]}),e[91]=E,e[92]=L,e[93]=q,e[94]=B):B=e[94];const De=!!s.is_mandatory;let D;e[95]!==i?(D=o=>i("is_mandatory",o.target.checked),e[95]=i,e[96]=D):D=e[96];let M;e[97]!==De||e[98]!==D?(M=t.jsx("input",{type:"checkbox",checked:De,onChange:D,className:"h-4 w-4"}),e[97]=De,e[98]=D,e[99]=M):M=e[99];let ie;e[100]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("span",{className:"text-sm",children:"Obligatoire"}),e[100]=ie):ie=e[100];let O;e[101]!==M?(O=t.jsx("div",{className:"space-y-2",children:t.jsxs("label",{className:"inline-flex items-center gap-2",children:[M,ie]})}),e[101]=M,e[102]=O):O=e[102];const Me=!!s.has_evaluation;let P;e[103]!==i?(P=o=>i("has_evaluation",o.target.checked),e[103]=i,e[104]=P):P=e[104];let H;e[105]!==Me||e[106]!==P?(H=t.jsx("input",{type:"checkbox",checked:Me,onChange:P,className:"h-4 w-4"}),e[105]=Me,e[106]=P,e[107]=H):H=e[107];let le;e[108]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("span",{className:"text-sm",children:"Évaluation"}),e[108]=le):le=e[108];let I;e[109]!==H?(I=t.jsxs("label",{className:"inline-flex items-center gap-2",children:[H,le]}),e[109]=H,e[110]=I):I=e[110];let R;e[111]!==s.evaluation_weight||e[112]!==s.has_evaluation||e[113]!==l.evaluation_weight||e[114]!==i?(R=s.has_evaluation&&t.jsxs("div",{children:[t.jsx(tt,{children:"Poids de l'évaluation (%)"}),t.jsx("input",{type:"number",value:s.evaluation_weight??"",onChange:o=>i("evaluation_weight",o.target.value?Number(o.target.value):null),className:"form-input",min:0,max:100}),l.evaluation_weight&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.evaluation_weight})]}),e[111]=s.evaluation_weight,e[112]=s.has_evaluation,e[113]=l.evaluation_weight,e[114]=i,e[115]=R):R=e[115];let V;e[116]!==I||e[117]!==R?(V=t.jsxs("div",{className:"space-y-2",children:[I,R]}),e[116]=I,e[117]=R,e[118]=V):V=e[118];let J;e[119]!==O||e[120]!==V?(J=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[O,V]}),e[119]=O,e[120]=V,e[121]=J):J=e[121];const Oe=!!s.is_visible;let $;e[122]!==i?($=o=>i("is_visible",o.target.checked),e[122]=i,e[123]=$):$=e[123];let z;e[124]!==Oe||e[125]!==$?(z=t.jsx("input",{type:"checkbox",checked:Oe,onChange:$,className:"h-4 w-4"}),e[124]=Oe,e[125]=$,e[126]=z):z=e[126];let oe;e[127]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("span",{className:"text-sm",children:"Visible"}),e[127]=oe):oe=e[127];let G;e[128]!==z?(G=t.jsx("div",{className:"mb-4 grid gap-3 sm:grid-cols-3",children:t.jsx("div",{children:t.jsxs("label",{className:"inline-flex items-center gap-2",children:[z,oe]})})}),e[128]=z,e[129]=G):G=e[129];let re;e[130]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("h3",{className:"mb-3 text-2xl font-semibold",children:"Syllabus du module"}),e[130]=re):re=e[130];const Pe=!m;let K;e[131]!==Pe?(K=t.jsx(nt,{isNew:Pe}),e[131]=Pe,e[132]=K):K=e[132];let Q;e[133]!==l.syllabus?(Q=t.jsx("p",{className:"text-xs text-red-500",children:l.syllabus}),e[133]=l.syllabus,e[134]=Q):Q=e[134];let U;e[135]!==K||e[136]!==Q?(U=t.jsxs("div",{className:"my-4",children:[re,K,Q]}),e[135]=K,e[136]=Q,e[137]=U):U=e[137];let ae;e[138]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("button",{type:"button",onClick:dt,className:"rounded border px-4 py-2",children:"Annuler"}),e[138]=ae):ae=e[138];const He=n||!Je;let W;e[139]!==n?(W=n&&t.jsx(Ke,{}),e[139]=n,e[140]=W):W=e[140];const Ie=m?"Enregistrer":"Ajouter le module";let X;e[141]!==He||e[142]!==W||e[143]!==Ie?(X=t.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3 border-t pt-4",children:[ae,t.jsxs(Ge,{type:"submit",disabled:He,className:"btn-primary",children:[W,Ie]})]}),e[141]=He,e[142]=W,e[143]=Ie,e[144]=X):X=e[144];let Y;e[145]!==d||e[146]!==x||e[147]!==j||e[148]!==k||e[149]!==B||e[150]!==J||e[151]!==G||e[152]!==U||e[153]!==X?(Y=t.jsxs("form",{onSubmit:d,className:"rounded-lg border bg-white p-6 shadow",method:"POST",children:[x,j,k,B,J,G,U,X]}),e[145]=d,e[146]=x,e[147]=j,e[148]=k,e[149]=B,e[150]=J,e[151]=G,e[152]=U,e[153]=X,e[154]=Y):Y=e[154];let Z;e[155]!==f||e[156]!==Y?(Z=t.jsxs("div",{className:"mx-auto mt-8 max-w-3xl",children:[f,Y]}),e[155]=f,e[156]=Y,e[157]=Z):Z=e[157];let me;return e[158]!==Se||e[159]!==c||e[160]!==Z?(me=t.jsxs(st,{title:Se,children:[c,Z]}),e[158]=Se,e[159]=c,e[160]=Z,e[161]=me):me=e[161],me}function dt(){return history.back()}export{$s as default};
