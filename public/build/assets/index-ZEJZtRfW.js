import{c as se,u as ie,r as X,j as t,L as le}from"./app-BzXwBPBx.js";import{T as re}from"./student-layouts-t6pggq_i.js";import{B as ae,C as oe}from"./type-DhUEUhhk.js";import{d as me}from"./utils-e8IeQt0G.js";import{a as ne}from"./index-CQybyuYf.js";import{S as ce}from"./search-N_1dfqU-.js";import{F as de}from"./filter-B1NdrfWI.js";import{C as xe}from"./chevron-left-DL3k4XWV.js";import{C as pe}from"./chevron-right-eSmzK-Yr.js";import{E as fe}from"./eye-BYN-RAfN.js";import"./app-BlAWqAGg.js";import"./page-banner-CF78MDYO.js";import"./button-DpCkL2lj.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-DF2umSuw.js";import"./iconBase-BH9TG5R0.js";import"./arrow-left-AHTPeAno.js";import"./createLucideIcon-BboBuA9R.js";import"./app-logo-icon-C2LaG9_Q.js";import"./divider-B09NDvil.js";import"./profile-svg-DwoHoZ6q.js";import"./user-profile-trigger-Dk_TTr5J.js";import"./sun-D7S3RfEj.js";import"./avatar-BR3sBMG9.js";import"./index-BWbkfBfC.js";import"./index-BZwf-zK1.js";import"./index-B2cDW95s.js";import"./avatar-fallback-D5NPW7a4.js";import"./use-initials-GDEZD6-s.js";import"./dropdown-menu-DlZS67It.js";import"./index-VdYImSg5.js";import"./index-CJlYDfk2.js";import"./index-DAHL75PX.js";import"./index-BQPF0Rq9.js";import"./index-BucdvD4Q.js";import"./index-BRTuzqyl.js";import"./check-BHZKRPmL.js";import"./logout-user-Ce_sIJue.js";import"./spinner-CIZwnsdn.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-BkvcRscv.js";import"./index-Vl0f8Y-f.js";import"./index-DMEIf3eg.js";import"./index-BemDBUNW.js";import"./index-B_X-8rh8.js";import"./nav-items-Ccw_83S7.js";import"./index-BGGtLgwn.js";import"./settings-NUZ-cO65.js";import"./gauge-Cjf8cet3.js";import"./book-Br9QRIqO.js";import"./calendar-BjFjFj4e.js";import"./book-open-DAOtQgtK.js";import"./x-BWOBLZ9u.js";import"./menu-CWhsNS-k.js";const k=8;function wt(){const e=se.c(72),{submissions:E}=ie().props;let M;e[0]!==E?(M=E===void 0?[]:E,e[0]=E,e[1]=M):M=e[1];const A=M,[c,Y]=X.useState(""),[r,ee]=X.useState("all"),[i,J]=X.useState(1);let m;if(e[2]!==c||e[3]!==r||e[4]!==A){const n=c.trim().toLowerCase();if(m=Array.isArray(A)?A:[],r!=="all"){let o;e[6]!==r?(o=L=>(L.status??"").toLowerCase()===r,e[6]=r,e[7]=o):o=e[7],m=m.filter(o)}n&&(m=m.filter(o=>{const L=(o.activity?.title??"").toString().toLowerCase(),te=(o.title??"").toString().toLowerCase();return L.includes(n)||te.includes(n)})),e[2]=c,e[3]=r,e[4]=A,e[5]=m}else m=e[5];const a=m,l=Math.max(1,Math.ceil(a.length/k)),P=(i-1)*k;let T;e[8]!==a||e[9]!==P?(T=a.slice(P,P+k),e[8]=a,e[9]=P,e[10]=T):T=e[10];const F=T;let R;e[11]!==l?(R=function(o){const L=Math.min(Math.max(1,o),l);J(L)},e[11]=l,e[12]=R):R=e[12];const s=R;let q;e[13]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Mes soumissions"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Historique de vos envois et état des évaluations"})]}),e[13]=q):q=e[13];let $;e[14]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(ce,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),e[14]=$):$=e[14];let B;e[15]===Symbol.for("react.memo_cache_sentinel")?(B=n=>{Y(n.target.value),J(1)},e[15]=B):B=e[15];let d;e[16]!==c?(d=t.jsxs("label",{className:"relative w-full md:w-80",children:[$,t.jsx("input",{type:"search",value:c,onChange:B,placeholder:"Rechercher activité ou titre...",className:"w-full rounded-md border border-gray-200 bg-white py-2 pr-3 pl-9 text-sm shadow-sm placeholder:text-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]}),e[16]=c,e[17]=d):d=e[17];let D;e[18]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(de,{className:"h-5 w-5 text-gray-500"}),e[18]=D):D=e[18];let G;e[19]===Symbol.for("react.memo_cache_sentinel")?(G=n=>{ee(n.target.value),J(1)},e[19]=G):G=e[19];let H,I;e[20]===Symbol.for("react.memo_cache_sentinel")?(H=t.jsx("option",{value:"all",children:"Tous statuts"}),I=ae.map(he),e[20]=H,e[21]=I):(H=e[20],I=e[21]);let x;e[22]!==r?(x=t.jsxs("div",{className:"flex items-center gap-2",children:[D,t.jsxs("select",{value:r,onChange:G,className:"rounded-md border border-gray-200 bg-white px-3 py-2 text-sm shadow-sm",children:[H,I]})]}),e[22]=r,e[23]=x):x=e[23];let p;e[24]!==x||e[25]!==d?(p=t.jsxs("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[q,t.jsxs("div",{className:"flex w-full items-center gap-3 md:w-auto",children:[d,x]})]}),e[24]=x,e[25]=d,e[26]=p):p=e[26];let f;e[27]!==F?(f=F.length===0?t.jsx("div",{className:"col-span-full rounded-lg border border-gray-200 bg-white p-6 text-center text-sm text-gray-500",children:"Aucune soumission trouvée."}):F.map(ue),e[27]=F,e[28]=f):f=e[28];let u;e[29]!==f?(u=t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:f}),e[29]=f,e[30]=u):u=e[30];const K=Math.min((i-1)*k+1,a.length||0),O=Math.min(i*k,a.length||0);let h;e[31]!==a.length||e[32]!==K||e[33]!==O?(h=t.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage"," ",K,"–",O," sur"," ",a.length," soumission(s)"]}),e[31]=a.length,e[32]=K,e[33]=O,e[34]=h):h=e[34];let g;e[35]!==s||e[36]!==i?(g=()=>s(i-1),e[35]=s,e[36]=i,e[37]=g):g=e[37];const U=i<=1;let Q;e[38]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(xe,{className:"h-4 w-4"}),e[38]=Q):Q=e[38];let b;e[39]!==g||e[40]!==U?(b=t.jsx("button",{onClick:g,disabled:U,className:"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-3 py-1 text-sm disabled:opacity-50",children:Q}),e[39]=g,e[40]=U,e[41]=b):b=e[41];let y;e[42]!==s?(y=t.jsx("button",{onClick:()=>s(1),className:"px-2 text-sm",children:"1"}),e[42]=s,e[43]=y):y=e[43];let V;e[44]===Symbol.for("react.memo_cache_sentinel")?(V=t.jsx("div",{className:"px-2 text-sm",children:"…"}),e[44]=V):V=e[44];let j;e[45]!==s||e[46]!==l?(j=()=>s(l),e[45]=s,e[46]=l,e[47]=j):j=e[47];let v;e[48]!==j||e[49]!==l?(v=t.jsx("button",{onClick:j,className:"px-2 text-sm",children:l}),e[48]=j,e[49]=l,e[50]=v):v=e[50];let N;e[51]!==y||e[52]!==v?(N=t.jsxs("div",{className:"hidden items-center gap-1 rounded-md bg-gray-100 px-3 py-1 text-sm sm:flex",children:[y,V,v]}),e[51]=y,e[52]=v,e[53]=N):N=e[53];let w;e[54]!==s||e[55]!==i?(w=()=>s(i+1),e[54]=s,e[55]=i,e[56]=w):w=e[56];const W=i>=l;let Z;e[57]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(pe,{className:"h-4 w-4"}),e[57]=Z):Z=e[57];let S;e[58]!==w||e[59]!==W?(S=t.jsx("button",{onClick:w,disabled:W,className:"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-3 py-1 text-sm disabled:opacity-50",children:Z}),e[58]=w,e[59]=W,e[60]=S):S=e[60];let C;e[61]!==b||e[62]!==N||e[63]!==S?(C=t.jsxs("div",{className:"flex items-center gap-2",children:[b,N,S]}),e[61]=b,e[62]=N,e[63]=S,e[64]=C):C=e[64];let _;e[65]!==h||e[66]!==C?(_=t.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[h,C]}),e[65]=h,e[66]=C,e[67]=_):_=e[67];let z;return e[68]!==p||e[69]!==u||e[70]!==_?(z=t.jsx(re,{title:"Liste des soumissions",children:t.jsxs("div",{className:"mx-auto mt-6 max-w-7xl px-4",children:[p,u,_]})}),e[68]=p,e[69]=u,e[70]=_,e[71]=z):z=e[71],z}function ue(e){return t.jsxs("article",{className:"rounded-lg border bg-white p-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 pr-3",children:[t.jsx("h3",{className:"line-clamp-2 text-sm font-semibold text-gray-900 dark:text-white",children:e.activity?.title??"Activité inconnue"}),t.jsx("div",{className:"mt-1 text-xs text-gray-500",children:e.title??"—"})]}),t.jsxs("div",{className:"flex shrink-0 flex-col items-end gap-2",children:[t.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ${e.status==="graded"?"bg-green-50 text-green-700":e.status==="submitted"?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-700"}`,children:oe(e.status)}),t.jsx("div",{className:"text-xs text-gray-500",children:e.submitted_at?me(e.submitted_at):"—"})]})]}),t.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3",children:[t.jsx("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:t.jsxs("div",{className:"text-xs text-gray-500",children:["Note:"," ",t.jsx("span",{className:"font-medium text-gray-800",children:e.score??"—"})]})}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(le,{href:ne(e.activity?.slug??"").url,className:"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-3 py-1 text-sm hover:bg-gray-50",children:[t.jsx(fe,{className:"h-4 w-4"})," Voir"]})})]})]},e.id)}function he(e){return t.jsxs("option",{value:e.key,children:[" ",e.value," "]},e.value)}export{wt as default};
