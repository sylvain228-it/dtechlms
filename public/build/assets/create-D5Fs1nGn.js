import{u as g,r as n,j as e,F as C}from"./app-CjIWy3eH.js";import{I as b}from"./input-error-jFoP4u8y.js";import{I as N,C as y}from"./form-SFwPvtEA.js";import{B as x}from"./button-CExzQmZc.js";import{C as F,a as I,b as D,c as S,d as _,e as P}from"./command-B29qbcP4.js";import{I as j}from"./input-yCXFspsm.js";import{L as m}from"./label-eKQQEJaP.js";import{P as w,a as E,b as k}from"./popover-yphMsw6d.js";import{S as A}from"./spinner-Bb2x751J.js";import{c as L}from"./utils-AnTb9DBe.js";import{s as O,u as T}from"./index-JAqzrMCt.js";import{C as V}from"./chevrons-up-down-C379DVFF.js";import{C as B}from"./check-C6ufmhQW.js";import"./app-DfLmVDUM.js";import"./index-C4soMqjN.js";import"./index-BnYBuebb.js";import"./index-Bqid9ha0.js";import"./index-OYVf1Zwz.js";import"./index-DnZUlvAx.js";import"./index-DLvqQGle.js";import"./index-Cx1mEBwh.js";import"./search-Dx3AsdWN.js";import"./createLucideIcon-i13MEz2U.js";import"./index-CPWTBhsT.js";import"./index-DdCDBdhx.js";import"./index-CMWG4mbA.js";function ce({domaines:l,domaine:s}){const{errors:d}=g().props,[i,o]=n.useState({name:s?s.name:"",description:s?s.description:"",domaine_id:s?s.domaine_id:null,is_active:s?s.is_active:!0});function c(t){o({...i,[t.target.name]:t.target.value})}const[p,u]=n.useState(!1),[r,f]=n.useState(s!=null&&s.domaine_id!=null?s.domaine_id:0),v=i.name;return e.jsxs("div",{className:"mx-auto w-full rounded-xl p-5 shadow-sm",children:[e.jsx("h3",{className:"mb-3 font-bold",children:s==null?"Ajouter un domaine":"Modifier le domaine"}),e.jsx(C,{method:s==null?"POST":"PUT",action:s==null?O():T(s.id),onSuccess:()=>{o({...i,name:"",description:"",is_active:!0}),s=void 0},children:({processing:t})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-3 grid gap-3",children:[e.jsx(j,{type:"hidden",name:"domaine_id",id:"domaine_id",value:r===0?"":r,onChange:c}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"name",children:"Désignation"}),e.jsx(j,{type:"text",name:"name",id:"name",value:i.name,className:"form-input",placeholder:"Désignation",onChange:c}),e.jsx(b,{message:d.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(N,{type:"text",value:i.description??"",placeholder:"Description",label:"Description",onChange:a=>o({...i,description:a}),error:d.description})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(m,{children:"Domaine parent"}),e.jsxs(w,{open:p,onOpenChange:u,children:[e.jsx(E,{asChild:!0,children:e.jsxs(x,{variant:"outline",role:"combobox","aria-expanded":p,className:"w-full justify-between",children:[r?l.find(a=>a.id===r)?.name:"Sélectionner une catégorie...",e.jsx(V,{className:"opacity-50"})]})}),e.jsx(k,{className:"w-full p-0",children:e.jsxs(F,{children:[e.jsx(I,{placeholder:"Rechercher une catégorie...",className:"h-9"}),e.jsxs(D,{children:[e.jsx(S,{children:"Pas de catégorie trouvée."}),e.jsx(_,{children:l.map(a=>e.jsxs(P,{value:`${a.id}`,onSelect:h=>{f(h===r.toFixed()?0:parseInt(h)),u(!1)},children:[a.name,e.jsx(B,{className:L("ml-auto",r===a.id?"opacity-100":"opacity-0")})]},a.id))})]})]})})]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx(y,{checked:i.is_active??!1,onChange:a=>o({...i,is_active:a}),label:"Activer le domaine"})}),e.jsxs(x,{type:"submit",className:"btn-primary mt-4 w-full !py-6",tabIndex:4,disabled:t||!v,"data-test":"create-domaine-button",children:[t&&e.jsx(A,{}),s==null?"Ajouter la catégorie":"Mettre à jour la catégorie"]})]})})})]})}export{ce as default};
