import{j as e,R as n,L as h,a as k}from"./app-CjIWy3eH.js";import{B as c}from"./button-CExzQmZc.js";import{C as x}from"./checkbox-BgoqiFgf.js";import{D as b,a as w,b as C,c as D,d as V,e as a,f as T,g as d}from"./dropdown-menu-DUsmAPKS.js";import{u as F,T as P,a as A,b as g,c as I,f as p,d as z,e as j,E as H,g as q,h as E,i as K,j as L}from"./table-ChSHwvVD.js";import{h as B}from"./tasks-gWUZeaAY.js";import{w as _}from"./type-DDACwUq3.js";import{i as O}from"./index-CU8SWGOj.js";import{c as U,e as $,s as G,d as J}from"./index-CJeVcETn.js";import{F as Q}from"./index-lBAoiumE.js";import{F as W}from"./index-BijvCOwp.js";import{I as X}from"./index-B6s6UZ6a.js";import{M as Y}from"./index-CHnKU68i.js";import{C as Z}from"./chevron-down-B3Mn7iN-.js";import{A as v}from"./arrow-right-CHjFefCD.js";import"./app-DfLmVDUM.js";import"./index-C4soMqjN.js";import"./index-BnYBuebb.js";import"./utils-AnTb9DBe.js";import"./index-OYVf1Zwz.js";import"./index-DnZUlvAx.js";import"./index-WBmQTPp2.js";import"./index-DdCDBdhx.js";import"./check-C6ufmhQW.js";import"./createLucideIcon-i13MEz2U.js";import"./index-aXAQScOB.js";import"./index-CgNbq55-.js";import"./index-Cx1mEBwh.js";import"./index-CPWTBhsT.js";import"./index-DIo9abDA.js";import"./index-DLvqQGle.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./lexical-headless-BCA5NgA9.js";import"./nodes-B8QjlgCe.js";import"./iconBase-ZLoFHiO_.js";const f=[{id:"select",header:({table:l})=>e.jsx(x,{checked:l.getIsAllPageRowsSelected()||l.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:s=>l.toggleAllPageRowsSelected(!!s),"aria-label":"Sélectionner tout"}),cell:({row:l})=>e.jsx(x,{checked:l.getIsSelected(),onCheckedChange:s=>l.toggleSelected(!!s),"aria-label":"Sélectionner la ligne"}),enableSorting:!1,enableHiding:!1},{accessorKey:"order",header:"Numéro",cell:({row:l})=>e.jsx("div",{className:"capitalize",children:l.getValue("order")})},{accessorKey:"title",header:"Titre",cell:({row:l})=>e.jsx("div",{className:"capitalize",children:l.getValue("title")})},{accessorKey:"sequence_type",header:"Type",cell:({row:l})=>e.jsx("div",{className:"capitalize",children:_(l.getValue("sequence_type"))})},{accessorKey:"is_visible",header:"Visibilité",cell:({row:l})=>e.jsx("div",{className:`capitalize ${l.getValue("is_visible")==1?"text-green-600":"text-red-600"}`,children:l.getValue("is_visible")==1?"Visible":"Invisible"})},{accessorKey:"activities",header:"Total Activités",cell:({row:l})=>e.jsxs("div",{className:"capitalize",children:[l.getValue("activities")?.length??0," ","Activité(s)"]})},{id:"actions",enableHiding:!1,cell:({row:l})=>{const s=l.original,m=s.module&&s.module.course?$([s.module.course.slug,s.module?.id??"",s.id]).url:"#";function u(o){o.preventDefault(),confirm("Êtes-vous sûr de vouloir supprimer cette lesson ?")&&s.module&&s.module?.course&&k.delete(J([s.module.course.slug,s.module?.id??"",s.id]))}return e.jsxs(b,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Ouvrir"}),e.jsx(H,{})]})}),e.jsxs(C,{align:"end",children:[e.jsx(V,{children:"Actions"}),e.jsx(a,{onClick:()=>navigator.clipboard.writeText(s.title),children:"Copier le titre"}),e.jsx(T,{}),e.jsx(h,{href:s.module&&s.module.course?G([s.module.course.slug,s.module?.id??"",s.id]):"#",children:e.jsxs(a,{children:["Détails",e.jsx(d,{children:e.jsx(W,{className:"text-blue-500"})})]})}),e.jsx(h,{href:s.module&&s.module.course?O(s.slug):"#",children:e.jsxs(a,{children:["Voir les activités",e.jsx(d,{children:e.jsx(v,{className:"text-blue-500"})})]})}),e.jsxs(a,{onClick:o=>B(o,s.syllabus??"",m),children:["Modifier",e.jsx(d,{children:e.jsx(Q,{className:"text-blue-500"})})]}),e.jsxs(a,{onClick:u,children:["Supprimer",e.jsx(d,{children:e.jsx(Y,{className:"text-red-500"})})]})]})]})}}];function ze({sequences:l,module:s}){const[m,u]=n.useState([]),[o,S]=n.useState([]),[y,N]=n.useState({}),[M,R]=n.useState({}),i=F({data:l,columns:f,onSortingChange:u,onColumnFiltersChange:S,getCoreRowModel:L(),getPaginationRowModel:K(),getSortedRowModel:E(),getFilteredRowModel:q(),onColumnVisibilityChange:N,onRowSelectionChange:R,state:{sorting:m,columnFilters:o,columnVisibility:y,rowSelection:M}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-3 flex flex-col justify-between gap-2 lg:flex-row lg:gap-4",children:[e.jsxs("div",{className:"flex w-full flex-col items-center justify-between gap-4 sm:flex-row",children:[e.jsx("input",{placeholder:"Filtrer par titre...",value:i.getColumn("title")?.getFilterValue()??"",onChange:t=>i.getColumn("title")?.setFilterValue(t.target.value),className:"form-input w-full"}),e.jsxs(b,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(c,{variant:"outline",children:["Colonne ",e.jsx(Z,{})]})}),e.jsx(C,{align:"end",children:i.getAllColumns().filter(t=>t.getCanHide()).map(t=>e.jsx(D,{className:"capitalize",checked:t.getIsVisible(),onCheckedChange:r=>t.toggleVisibility(!!r),children:t.id},t.id))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{href:s.course?U([s.course?.slug,s.id]):"#",className:"btn-primary inline-block bg-app-blue !py-2 text-center text-white",children:["Ajouter ",e.jsx(X,{className:"inline-block h-7 w-7"})]}),e.jsx("button",{onClick:()=>history.back(),className:"rounded-md border border-gray-200 bg-white px-3 py-1 text-sm font-medium hover:bg-gray-50",children:e.jsx(v,{})})]})]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(P,{children:[e.jsx(A,{children:i.getHeaderGroups().map(t=>e.jsx(g,{children:t.headers.map(r=>e.jsx(I,{children:r.isPlaceholder?null:p(r.column.columnDef.header,r.getContext())},r.id))},t.id))}),e.jsx(z,{children:i.getRowModel().rows?.length?i.getRowModel().rows.map(t=>e.jsx(g,{"data-state":t.getIsSelected()&&"selected",children:t.getVisibleCells().map(r=>e.jsx(j,{children:p(r.column.columnDef.cell,r.getContext())},r.id))},t.id)):e.jsx(g,{children:e.jsx(j,{colSpan:f.length,className:"h-24 text-center",children:"Pas de résultats."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[i.getFilteredSelectedRowModel().rows.length," sur"," ",i.getFilteredRowModel().rows.length," ligne(s) sélectionné(s)."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>i.previousPage(),disabled:!i.getCanPreviousPage(),children:"Précédent"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>i.nextPage(),disabled:!i.getCanNextPage(),children:"Suivant"})]})]})]})}export{f as columns,ze as default};
