import{c as Ze,u as ze,b as et,r as Ie,j as l,a as Ge}from"./app-BzXwBPBx.js";import{I as Y,T as tt,S as He,C as Je}from"./form-B-fdkg48.js";import{S as Qe}from"./select-form-BjmGX0CS.js";import{B as Me}from"./button-DpCkL2lj.js";import{L as Ue}from"./label-D5CJeCuB.js";import{S as We}from"./spinner-CIZwnsdn.js";import{T as it}from"./teacher-layouts-C7E0jZE8.js";import{O as lt,l as ot}from"./type-DhUEUhhk.js";import{u as st,a as rt}from"./index-BD3HuK-g.js";import"./app-BlAWqAGg.js";import"./command-DSYCSJsJ.js";import"./index-ti3WiRrV.js";import"./index-BWbkfBfC.js";import"./index-CmvPZPYG.js";import"./index-BZwf-zK1.js";import"./index-BRTuzqyl.js";import"./index-B2cDW95s.js";import"./utils-e8IeQt0G.js";import"./search-N_1dfqU-.js";import"./createLucideIcon-BboBuA9R.js";import"./popover-DYCgjmhj.js";import"./index-DAHL75PX.js";import"./index-BQPF0Rq9.js";import"./chevrons-up-down-ouCvYvKh.js";import"./check-BHZKRPmL.js";import"./index-D1DaFm8C.js";import"./index-CyaJm5Nq.js";import"./page-banner-CF78MDYO.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-DF2umSuw.js";import"./iconBase-BH9TG5R0.js";import"./arrow-left-AHTPeAno.js";import"./app-logo-icon-C2LaG9_Q.js";import"./user-profile-trigger-Dk_TTr5J.js";import"./sun-D7S3RfEj.js";import"./avatar-BR3sBMG9.js";import"./avatar-fallback-D5NPW7a4.js";import"./use-initials-GDEZD6-s.js";import"./divider-B09NDvil.js";import"./profile-svg-DwoHoZ6q.js";import"./dropdown-menu-DlZS67It.js";import"./index-VdYImSg5.js";import"./index-CJlYDfk2.js";import"./index-BucdvD4Q.js";import"./logout-user-Ce_sIJue.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-BkvcRscv.js";import"./index-Vl0f8Y-f.js";import"./index-DMEIf3eg.js";import"./index-BemDBUNW.js";import"./index-CQybyuYf.js";import"./index-B_X-8rh8.js";import"./index-Ch72Gdeg.js";import"./index-D-fKvoRm.js";import"./index-DH9SVvWg.js";import"./index-CJeVcETn.js";import"./index-CU8SWGOj.js";import"./index-C4OL-TuX.js";import"./index-Bwrcs2qz.js";import"./index-DerrCcFj.js";import"./index-DqzhMcYD.js";import"./index-BGGtLgwn.js";import"./index-DXuqG7by.js";import"./gauge-Cjf8cet3.js";import"./calendar-BjFjFj4e.js";import"./book-open-DAOtQgtK.js";import"./settings-NUZ-cO65.js";import"./x-BWOBLZ9u.js";import"./menu-CWhsNS-k.js";function ki(){const e=Ze.c(156),{skill:r,domaines:p}=ze().props,c=!!r,{errors:o}=ze().props,re=r?.code??"",ae=r?.name??"",ne=r?.description??"",me=r?.domaine_id??null,ce=r?.sub_domaine_id??null,pe=r?.type??"",de=r?.level_min??null,ue=r?.level_max??null,fe=r?.framework??"",be=r?.is_active??!0,ge=r?.is_certifiable??!1,he=r?.language??"fr",xe=r?.source??"";let Z;e[0]!==re||e[1]!==ae||e[2]!==ge||e[3]!==he||e[4]!==xe||e[5]!==ne||e[6]!==me||e[7]!==ce||e[8]!==pe||e[9]!==de||e[10]!==ue||e[11]!==fe||e[12]!==be?(Z={code:re,name:ae,description:ne,domaine_id:me,sub_domaine_id:ce,type:pe,level_min:de,level_max:ue,framework:fe,is_active:be,is_certifiable:ge,language:he,source:xe},e[0]=re,e[1]=ae,e[2]=ge,e[3]=he,e[4]=xe,e[5]=ne,e[6]=me,e[7]=ce,e[8]=pe,e[9]=de,e[10]=ue,e[11]=fe,e[12]=be,e[13]=Z):Z=e[13];const{data:s,setData:i,reset:ve}=et(Z),[m,Oe]=Ie.useState(!1),[_e,Xe]=Ie.useState(r?r.domaine_id??null:null),[je,Ye]=Ie.useState(r?r.sub_domaine_id??null:null);let Se;e:{if(!s.domaine_id){let a;e[14]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[14]=a):a=e[14],Se=a;break e}let t;e[15]!==s.domaine_id||e[16]!==p?(t=p.find(a=>a.id===s.domaine_id)?.subdomaines||[],e[15]=s.domaine_id,e[16]=p,e[17]=t):t=e[17],Se=t}const ye=Se;let n;if(e[18]!==s||e[19]!==c||e[20]!==ve||e[21]!==r){let t=function(){c||ve(),Oe(!1)};n=a=>{a.preventDefault(),Oe(!0);const $e={...s,_method:c?"put":"post"};c&&r?.id?Ge.put(st(r.id),$e,{onFinish:t}):Ge.post(rt(),$e,{onFinish:t})},e[18]=s,e[19]=c,e[20]=ve,e[21]=r,e[22]=n}else n=e[22];let ee;e[23]!==i?(ee=function(a){Xe(a),i("domaine_id",a)},e[23]=i,e[24]=ee):ee=e[24];const Ce=ee;let te;e[25]!==i?(te=function(a){Ye(a),i("sub_domaine_id",a)},e[25]=i,e[26]=te):te=e[26];const Ne=te,Ke=s.code&&s.name&&s.type&&s.language,ke=c?"Modifier la compétence":"Nouvelle compétence",De=c?"Modifier la compétence":"Créer une compétence";let d;e[27]!==De?(d=l.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:De}),e[27]=De,e[28]=d):d=e[28];const we=!Ke||m;let u;e[29]!==n?(u=t=>{t.preventDefault(),n(t)},e[29]=n,e[30]=u):u=e[30];let f;e[31]!==m?(f=m&&l.jsx(We,{}),e[31]=m,e[32]=f):f=e[32];let b;e[33]!==we||e[34]!==u||e[35]!==f?(b=l.jsxs(Me,{className:"btn-primary",disabled:we,onClick:u,children:[f,"Enregistrer"]}),e[33]=we,e[34]=u,e[35]=f,e[36]=b):b=e[36];let g;e[37]!==d||e[38]!==b?(g=l.jsxs("div",{className:"mb-5 flex items-center justify-between border-b p-3",children:[d,b]}),e[37]=d,e[38]=b,e[39]=g):g=e[39];let h;e[40]!==i?(h=t=>i("code",t),e[40]=i,e[41]=h):h=e[41];let x;e[42]!==s.code||e[43]!==o.code||e[44]!==h?(x=l.jsx(Y,{label:"Code",value:s.code,onChange:h,required:!0,error:o.code,placeholder:"ex: SKL-001"}),e[42]=s.code,e[43]=o.code,e[44]=h,e[45]=x):x=e[45];let v;e[46]!==i?(v=t=>i("name",t),e[46]=i,e[47]=v):v=e[47];let _;e[48]!==s.name||e[49]!==o.name||e[50]!==v?(_=l.jsx(Y,{label:"Nom",value:s.name,onChange:v,required:!0,error:o.name,placeholder:"Nom de la compétence"}),e[48]=s.name,e[49]=o.name,e[50]=v,e[51]=_):_=e[51];let j;e[52]!==x||e[53]!==_?(j=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[x,_]}),e[52]=x,e[53]=_,e[54]=j):j=e[54];const Fe=s.description??"";let S;e[55]!==i?(S=t=>i("description",t),e[55]=i,e[56]=S):S=e[56];let y;e[57]!==o.description||e[58]!==Fe||e[59]!==S?(y=l.jsx("div",{className:"mb-4",children:l.jsx(tt,{label:"Description",value:Fe,onChange:S,rows:4,placeholder:"Courte description de la compétence",error:o.description})}),e[57]=o.description,e[58]=Fe,e[59]=S,e[60]=y):y=e[60];let ie;e[61]===Symbol.for("react.memo_cache_sentinel")?(ie=l.jsx(Ue,{children:"Domaine"}),e[61]=ie):ie=e[61];let C;e[62]!==Ce?(C=t=>Ce(t),e[62]=Ce,e[63]=C):C=e[63];let N;e[64]!==_e||e[65]!==p||e[66]!==C?(N=l.jsxs("div",{className:"grid gap-2",children:[ie,l.jsx(Qe,{options:p,label:"Sélectionner une catégorie",value:_e,onSelect:C})]}),e[64]=_e,e[65]=p,e[66]=C,e[67]=N):N=e[67];let le;e[68]===Symbol.for("react.memo_cache_sentinel")?(le=l.jsx(Ue,{children:"Sous Domaine"}),e[68]=le):le=e[68];let k;e[69]!==Ne?(k=t=>Ne(t),e[69]=Ne,e[70]=k):k=e[70];let D;e[71]!==je||e[72]!==ye||e[73]!==k?(D=l.jsxs("div",{className:"grid gap-2",children:[le,l.jsx(Qe,{options:ye,label:"Sélectionner une sous catégorie",value:je,onSelect:k})]}),e[71]=je,e[72]=ye,e[73]=k,e[74]=D):D=e[74];let w;e[75]!==N||e[76]!==D?(w=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[N,D]}),e[75]=N,e[76]=D,e[77]=w):w=e[77];const Le=s.type??"";let F;e[78]!==i?(F=t=>i("type",t),e[78]=i,e[79]=F):F=e[79];let L;e[80]!==o.type||e[81]!==Le||e[82]!==F?(L=l.jsx("div",{className:"mb-4",children:l.jsx(He,{label:"Type",value:Le,onChange:F,options:lt,required:!0,error:o.type})}),e[80]=o.type,e[81]=Le,e[82]=F,e[83]=L):L=e[83];const Te=s.level_min??"";let T;e[84]!==i?(T=t=>i("level_min",t?Number(t):null),e[84]=i,e[85]=T):T=e[85];let E;e[86]!==o.level_min||e[87]!==Te||e[88]!==T?(E=l.jsx(Y,{label:"Niveau min",type:"number",value:Te,onChange:T,error:o.level_min,placeholder:"ex: 1"}),e[86]=o.level_min,e[87]=Te,e[88]=T,e[89]=E):E=e[89];const Ee=s.level_max??"";let V;e[90]!==i?(V=t=>i("level_max",t?Number(t):null),e[90]=i,e[91]=V):V=e[91];let q;e[92]!==o.level_max||e[93]!==Ee||e[94]!==V?(q=l.jsx(Y,{label:"Niveau max",type:"number",value:Ee,onChange:V,error:o.level_max,placeholder:"ex: 5"}),e[92]=o.level_max,e[93]=Ee,e[94]=V,e[95]=q):q=e[95];const Ve=s.framework??"";let P;e[96]!==i?(P=t=>i("framework",t),e[96]=i,e[97]=P):P=e[97];let R;e[98]!==o.framework||e[99]!==Ve||e[100]!==P?(R=l.jsx(Y,{label:"Cadre / Framework",value:Ve,onChange:P,error:o.framework,placeholder:"ex: Référence européenne / internal"}),e[98]=o.framework,e[99]=Ve,e[100]=P,e[101]=R):R=e[101];let A;e[102]!==E||e[103]!==q||e[104]!==R?(A=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-3",children:[E,q,R]}),e[102]=E,e[103]=q,e[104]=R,e[105]=A):A=e[105];const qe=!!s.is_active;let B;e[106]!==i?(B=t=>i("is_active",t),e[106]=i,e[107]=B):B=e[107];let I;e[108]!==qe||e[109]!==B?(I=l.jsx("div",{children:l.jsx(Je,{label:"Active",checked:qe,onChange:B})}),e[108]=qe,e[109]=B,e[110]=I):I=e[110];const Pe=!!s.is_certifiable;let M;e[111]!==i?(M=t=>i("is_certifiable",t),e[111]=i,e[112]=M):M=e[112];let O;e[113]!==Pe||e[114]!==M?(O=l.jsx("div",{children:l.jsx(Je,{label:"Certifiable",checked:Pe,onChange:M})}),e[113]=Pe,e[114]=M,e[115]=O):O=e[115];let K;e[116]!==I||e[117]!==O?(K=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[I,O]}),e[116]=I,e[117]=O,e[118]=K):K=e[118];const Re=s.language??"";let $;e[119]!==i?($=t=>i("language",t),e[119]=i,e[120]=$):$=e[120];let z;e[121]!==o.language||e[122]!==Re||e[123]!==$?(z=l.jsx(He,{label:"Langue",value:Re,onChange:$,options:ot,required:!0,error:o.language}),e[121]=o.language,e[122]=Re,e[123]=$,e[124]=z):z=e[124];const Ae=s.source??"";let G;e[125]!==i?(G=t=>i("source",t),e[125]=i,e[126]=G):G=e[126];let H;e[127]!==o.source||e[128]!==Ae||e[129]!==G?(H=l.jsx(Y,{label:"Source",value:Ae,onChange:G,error:o.source,placeholder:"ex: bank, partner, manual"}),e[127]=o.source,e[128]=Ae,e[129]=G,e[130]=H):H=e[130];let J;e[131]!==z||e[132]!==H?(J=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[z,H]}),e[131]=z,e[132]=H,e[133]=J):J=e[133];let oe;e[134]===Symbol.for("react.memo_cache_sentinel")?(oe=l.jsx(Me,{variant:"ghost",onClick:at,className:"border",children:"Annuler"}),e[134]=oe):oe=e[134];const Be=!Ke||m;let Q;e[135]!==m?(Q=m&&l.jsx(We,{}),e[135]=m,e[136]=Q):Q=e[136];let U;e[137]!==Be||e[138]!==Q?(U=l.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[oe,l.jsxs(Me,{type:"submit",className:"btn-primary",disabled:Be,children:[Q,"Enregistrer"]})]}),e[137]=Be,e[138]=Q,e[139]=U):U=e[139];let W;e[140]!==n||e[141]!==j||e[142]!==y||e[143]!==w||e[144]!==L||e[145]!==A||e[146]!==K||e[147]!==J||e[148]!==U?(W=l.jsxs("form",{onSubmit:n,className:"rounded-lg border bg-white p-6 shadow",method:"POST",children:[j,y,w,L,A,K,J,U]}),e[140]=n,e[141]=j,e[142]=y,e[143]=w,e[144]=L,e[145]=A,e[146]=K,e[147]=J,e[148]=U,e[149]=W):W=e[149];let X;e[150]!==g||e[151]!==W?(X=l.jsxs("div",{className:"mx-auto mt-8 max-w-3xl",children:[g,W]}),e[150]=g,e[151]=W,e[152]=X):X=e[152];let se;return e[153]!==ke||e[154]!==X?(se=l.jsx(it,{title:ke,children:X}),e[153]=ke,e[154]=X,e[155]=se):se=e[155],se}function at(){return history.back()}export{ki as default};
