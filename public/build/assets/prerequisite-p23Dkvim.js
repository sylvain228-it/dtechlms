import{c as Q,u as U,R as L,b as V,j as t}from"./app-BzXwBPBx.js";import{S as $,I as W}from"./form-B-fdkg48.js";import{B as G}from"./button-DpCkL2lj.js";import{D as X,a as Y,b as Z,c as ee,d as J,e as te,f as ie,g as re}from"./dialog-BPFiSOET.js";import{S as se}from"./spinner-CIZwnsdn.js";import{p as le}from"./type-DhUEUhhk.js";import{P as oe}from"./pen-Fqdr7Zc8.js";import"./app-BlAWqAGg.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./utils-e8IeQt0G.js";import"./index-ti3WiRrV.js";import"./index-BWbkfBfC.js";import"./index-BZwf-zK1.js";import"./index-BRTuzqyl.js";import"./index-B2cDW95s.js";import"./x-BWOBLZ9u.js";import"./createLucideIcon-BboBuA9R.js";function ve(_){const e=Q.c(53),{prerequisite:r}=_,{errors:h}=U().props,[o,k]=L.useState(!1);let j;e[0]===Symbol.for("react.memo_cache_sentinel")?(j=[],e[0]=j):j=e[0];const[b]=L.useState(j),H=!!r,P=r?r.entity_type:"",T=r?r.entity_id:"",F=r?r.prerequisite_type:"",E=r?r.prerequisite_id:null,I=r?r.description:"";let S;e[1]!==P||e[2]!==T||e[3]!==F||e[4]!==E||e[5]!==I?(S={entity_type:P,entity_id:T,prerequisite_type:F,prerequisite_id:E,description:I},e[1]=P,e[2]=T,e[3]=F,e[4]=E,e[5]=I,e[6]=S):S=e[6];const{data:i,setData:l}=V(S);let D;e[7]===Symbol.for("react.memo_cache_sentinel")?(D=s=>{s.preventDefault(),k(!0),k(!1)},e[7]=D):D=e[7];const K=D;let N;e[8]!==i.prerequisite_type||e[9]!==l?(N=s=>{console.log("Selected prerequisite type:",s),l("prerequisite_type",s),console.log("prerequisite type:",i.prerequisite_type)},e[8]=i.prerequisite_type,e[9]=l,e[10]=N):N=e[10];const R=N;let C;e[11]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(X,{asChild:!0,children:t.jsx("button",{className:"cursor-pointer border bg-transparent p-1 text-gray-500 hover:text-gray-700",children:t.jsx(oe,{className:"text-blue-500"})})}),e[11]=C):C=e[11];const B=H?"Modifier le prérequis":"Ajouter un prérequis";let a;e[12]!==B?(a=t.jsx(Y,{className:"w-full",children:B}),e[12]=B,e[13]=a):a=e[13];const z=H?"Modifiez le prérequis du cours ici.":"Ajoutez un prérequis au cours ici.";let n;e[14]!==z?(n=t.jsx(Z,{className:"w-full",children:z}),e[14]=z,e[15]=n):n=e[15];let p;e[16]!==a||e[17]!==n?(p=t.jsxs(ee,{className:"w-full",children:[a,n]}),e[16]=a,e[17]=n,e[18]=p):p=e[18];const A=i.description??"";let c;e[19]!==l?(c=s=>l("description",s),e[19]=l,e[20]=c):c=e[20];const M=h.description,O=i.prerequisite_type==="custom";let u;e[21]!==A||e[22]!==c||e[23]!==M||e[24]!==O?(u=t.jsx(W,{label:"Description",type:"text",placeholder:"Donner une description",value:A,onChange:c,error:M,required:O}),e[21]=A,e[22]=c,e[23]=M,e[24]=O,e[25]=u):u=e[25];let m;e[26]!==R?(m=s=>R(s),e[26]=R,e[27]=m):m=e[27];let d;e[28]!==i.prerequisite_type||e[29]!==m?(d=t.jsx($,{options:le,value:i.prerequisite_type,label:"Type de prérequis",onChange:m}),e[28]=i.prerequisite_type,e[29]=m,e[30]=d):d=e[30];let f;e[31]!==i.prerequisite_id||e[32]!==i.prerequisite_type||e[33]!==h.prerequisite_id||e[34]!==b||e[35]!==l?(f=i.prerequisite_type&&b.length>0&&t.jsx($,{options:b.map(ae),value:i.prerequisite_id?.toString()??"",label:"Sélectionner le prérequis",onChange:s=>l("prerequisite_id",s?parseInt(s):null),error:h.prerequisite_id,required:!0}),e[31]=i.prerequisite_id,e[32]=i.prerequisite_type,e[33]=h.prerequisite_id,e[34]=b,e[35]=l,e[36]=f):f=e[36];let q;e[37]!==u||e[38]!==d||e[39]!==f?(q=t.jsx("div",{className:"mb-4 grid w-full gap-4",children:t.jsxs("div",{className:"grid gap-3",children:[u,d,f]})}),e[37]=u,e[38]=d,e[39]=f,e[40]=q):q=e[40];let v;e[41]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx(J,{asChild:!0,children:t.jsx(G,{variant:"outline",children:"Fermer"})}),e[41]=v):v=e[41];let y;e[42]!==o?(y=o&&t.jsx(se,{}),e[42]=o,e[43]=y):y=e[43];let g;e[44]!==o||e[45]!==y?(g=t.jsxs(te,{className:"mt-2",children:[v,t.jsx(J,{asChild:!0,children:t.jsxs(G,{type:"submit",className:"btn-primary w-full",tabIndex:4,disabled:o,"data-test":"create-category-button",children:[y,"Enregistrer"]})})]}),e[44]=o,e[45]=y,e[46]=g):g=e[46];let x;e[47]!==q||e[48]!==g?(x=t.jsxs("form",{method:"POST",onSubmit:K,children:[q,g]}),e[47]=q,e[48]=g,e[49]=x):x=e[49];let w;return e[50]!==p||e[51]!==x?(w=t.jsxs(ie,{children:[C,t.jsxs(re,{className:"max-w-[300px] sm:max-w-[425px]",children:[p,x]})]}),e[50]=p,e[51]=x,e[52]=w):w=e[52],w}function ae(_){return{key:_.id.toString(),value:_.title}}export{ve as default};
