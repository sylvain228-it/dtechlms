import{j as e,R as o,r as V,L as C,a as T}from"./app-BzXwBPBx.js";import{S as P}from"./form-B-fdkg48.js";import{B as n}from"./button-DpCkL2lj.js";import{C as h}from"./checkbox-Bkb6GjLX.js";import{D as w,a as v,b as S,c as I,d as _,e as c,f as z,g as p}from"./dropdown-menu-DlZS67It.js";import{u as A,T as E,a as H,b as u,c as L,f as j,d as K,e as f,E as B,g as O,h as U,i as $,j as q}from"./table-BPRttfHj.js";import{h as G,s as g}from"./tasks-BTAmnlgm.js";import{D as J,E as Q,m as W}from"./type-DhUEUhhk.js";import{c as X,e as Y,s as Z,d as ee}from"./index-CU8SWGOj.js";import{F as se}from"./index-BGGtLgwn.js";import{F as te}from"./index-DJeoZDrq.js";import{I as ie,b as le}from"./index-CoBc6tAl.js";import{M as re}from"./index-DF2umSuw.js";import{C as ae}from"./chevron-down-eKEbewAb.js";import"./app-BlAWqAGg.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./utils-e8IeQt0G.js";import"./index-BWbkfBfC.js";import"./index-BZwf-zK1.js";import"./index-BtFGMy8Q.js";import"./index-BQPF0Rq9.js";import"./check-BHZKRPmL.js";import"./createLucideIcon-BboBuA9R.js";import"./index-VdYImSg5.js";import"./index-CJlYDfk2.js";import"./index-B2cDW95s.js";import"./index-DAHL75PX.js";import"./index-BucdvD4Q.js";import"./index-BRTuzqyl.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./lexical-headless-DaF8M3S2.js";import"./nodes-CSrlFqt9.js";import"./iconBase-BH9TG5R0.js";const b=[{id:"actions",enableHiding:!1,cell:({row:s})=>{const i=s.original,d=i.parent_course?Y([i.parent_course?.slug??"",i.slug]).url:"#";function m(r){r.preventDefault(),confirm("Êtes-vous sûr de vouloir supprimer cette lesson ?")&&i.parent_course&&T.delete(ee([i.parent_course?.id??"",i.id]))}return e.jsxs(w,{children:[e.jsx(v,{asChild:!0,children:e.jsxs(n,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Ouvrir"}),e.jsx(B,{})]})}),e.jsxs(S,{align:"end",children:[e.jsx(_,{children:"Actions"}),e.jsx(c,{onClick:()=>navigator.clipboard.writeText(i.title),children:"Copier le titre"}),e.jsx(z,{}),e.jsx(C,{href:i.parent_course?Z([i.parent_course?.slug??"",i.slug]):"#",children:e.jsxs(c,{children:["Détails",e.jsx(p,{children:e.jsx(te,{className:"text-blue-500"})})]})}),e.jsxs(c,{onClick:r=>G(r,i.resources_summary??"",d),children:["Modifier",e.jsx(p,{children:e.jsx(se,{className:"text-blue-500"})})]}),e.jsxs(c,{onClick:m,children:["Supprimer",e.jsx(p,{children:e.jsx(re,{className:"text-red-500"})})]})]})]})}},{id:"select",header:({table:s})=>e.jsx(h,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:i=>s.toggleAllPageRowsSelected(!!i),"aria-label":"Sélectionner tout"}),cell:({row:s})=>e.jsx(h,{checked:s.getIsSelected(),onCheckedChange:i=>s.toggleSelected(!!i),"aria-label":"Sélectionner la ligne"}),enableSorting:!1,enableHiding:!1},{accessorKey:"title",header:"Titre",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:g(s.getValue("title"),0,40)})},{accessorKey:"scope",header:"Portée",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:g(Q(s.getValue("scope")),0,20)})},{accessorKey:"is_visible",header:"Visibilité",cell:({row:s})=>e.jsx("div",{className:`capitalize ${s.getValue("is_visible")==1?"text-green-600":"text-red-600"}`,children:s.getValue("is_visible")==1?"Visible":"Invisible"})},{accessorKey:"activity_type",header:"Type",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:g(W(s.getValue("activity_type")),0,20)})}];function Oe({activities:s,course:i}){const[d,m]=o.useState([]),[r,x]=o.useState(void 0),[y,N]=o.useState([]),[M,R]=o.useState({}),[D,k]=o.useState({}),F=V.useMemo(()=>r?(s||[]).filter(t=>t.scope==r):s,[s,r]),l=A({data:F,columns:b,onSortingChange:m,onColumnFiltersChange:N,getCoreRowModel:q(),getPaginationRowModel:$(),getSortedRowModel:U(),getFilteredRowModel:O(),onColumnVisibilityChange:R,onRowSelectionChange:k,state:{sorting:d,columnFilters:y,columnVisibility:M,rowSelection:D}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-3 flex flex-col justify-between gap-2 lg:flex-row lg:gap-4",children:[e.jsxs("div",{className:"flex w-full flex-col items-center justify-between gap-4 sm:flex-row",children:[e.jsx("input",{placeholder:"Filtrer par titre...",value:l.getColumn("title")?.getFilterValue()??"",onChange:t=>l.getColumn("title")?.setFilterValue(t.target.value),className:"form-input w-full"}),e.jsxs(w,{children:[e.jsx(v,{asChild:!0,children:e.jsxs(n,{variant:"outline",children:["Colonne ",e.jsx(ae,{})]})}),e.jsx(S,{align:"end",children:l.getAllColumns().filter(t=>t.getCanHide()).map(t=>e.jsx(I,{className:"capitalize",checked:t.getIsVisible(),onCheckedChange:a=>t.toggleVisibility(!!a),children:t.id},t.id))})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(C,{href:X(i.slug),className:"btn-primary flex w-full items-center justify-center bg-cblue !py-1 text-center text-white",children:["Ajouter ",e.jsx(ie,{size:30})]})})]}),e.jsxs("div",{className:"my-4 flex items-center gap-6",children:[e.jsx("div",{className:"w-full",children:e.jsx(P,{options:J,label:"",emptyOption:"Filtrer par portée",value:r??"",onChange:t=>{t!=r&&x(t)}})}),r&&e.jsx(n,{onClick:()=>{x(void 0)},className:"mt-2 bg-red-100 p-2",children:e.jsx(le,{size:25,className:"text-red-500"})})]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(E,{children:[e.jsx(H,{children:l.getHeaderGroups().map(t=>e.jsx(u,{children:t.headers.map(a=>e.jsx(L,{children:a.isPlaceholder?null:j(a.column.columnDef.header,a.getContext())},a.id))},t.id))}),e.jsx(K,{children:l.getRowModel().rows?.length?l.getRowModel().rows.map(t=>e.jsx(u,{"data-state":t.getIsSelected()&&"selected",children:t.getVisibleCells().map(a=>e.jsx(f,{children:j(a.column.columnDef.cell,a.getContext())},a.id))},t.id)):e.jsx(u,{children:e.jsx(f,{colSpan:b.length,className:"h-24 text-center",children:"Pas de résultats."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[l.getFilteredSelectedRowModel().rows.length," sur"," ",l.getFilteredRowModel().rows.length," ligne(s) sélectionné(s)."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),children:"Précédent"}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),children:"Suivant"})]})]})]})}export{b as columns,Oe as default};
