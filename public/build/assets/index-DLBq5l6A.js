import{c as we,u as Se,r as Z,j as t,L as Ce}from"./app-BzXwBPBx.js";import{T as ke}from"./student-layouts-t6pggq_i.js";import{B as _e,C as Le}from"./type-DhUEUhhk.js";import{d as Ae}from"./utils-e8IeQt0G.js";import{s as Fe}from"./index-DqzhMcYD.js";import{S as Me}from"./search-N_1dfqU-.js";import{F as Te}from"./filter-B1NdrfWI.js";import{C as Ee}from"./chevron-left-DL3k4XWV.js";import{C as Pe}from"./chevron-right-eSmzK-Yr.js";import{E as Re}from"./eye-BYN-RAfN.js";import"./app-BlAWqAGg.js";import"./page-banner-CF78MDYO.js";import"./button-DpCkL2lj.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-DF2umSuw.js";import"./iconBase-BH9TG5R0.js";import"./arrow-left-AHTPeAno.js";import"./createLucideIcon-BboBuA9R.js";import"./app-logo-icon-C2LaG9_Q.js";import"./divider-B09NDvil.js";import"./profile-svg-DwoHoZ6q.js";import"./user-profile-trigger-Dk_TTr5J.js";import"./sun-D7S3RfEj.js";import"./avatar-BR3sBMG9.js";import"./index-BWbkfBfC.js";import"./index-BZwf-zK1.js";import"./index-B2cDW95s.js";import"./avatar-fallback-D5NPW7a4.js";import"./use-initials-GDEZD6-s.js";import"./dropdown-menu-DlZS67It.js";import"./index-VdYImSg5.js";import"./index-CJlYDfk2.js";import"./index-DAHL75PX.js";import"./index-BQPF0Rq9.js";import"./index-BucdvD4Q.js";import"./index-BRTuzqyl.js";import"./check-BHZKRPmL.js";import"./logout-user-Ce_sIJue.js";import"./spinner-CIZwnsdn.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-BkvcRscv.js";import"./index-Vl0f8Y-f.js";import"./index-DMEIf3eg.js";import"./index-BemDBUNW.js";import"./index-CQybyuYf.js";import"./index-B_X-8rh8.js";import"./nav-items-Ccw_83S7.js";import"./index-BGGtLgwn.js";import"./settings-NUZ-cO65.js";import"./gauge-Cjf8cet3.js";import"./book-Br9QRIqO.js";import"./calendar-BjFjFj4e.js";import"./book-open-DAOtQgtK.js";import"./x-BWOBLZ9u.js";import"./menu-CWhsNS-k.js";const z=8;function is(){const e=we.c(121),{submissions:je}=Se().props,f=je===void 0?[]:je,[h,me]=Z.useState(""),[c,ce]=Z.useState("all"),[d,de]=Z.useState("all"),[u,ue]=Z.useState("all"),[p,pe]=Z.useState("all"),[o,i]=Z.useState(1),xe=Array.from(new Map(f.map(Oe).filter(Ke).map(Je)).values()),fe=Array.from(new Map(f.map(ze).filter(Ze).map(Ve)).values()),he=Array.from(new Map(f.map(Qe).filter(Ie).map(He)).values());let l;if(e[0]!==u||e[1]!==d||e[2]!==h||e[3]!==c||e[4]!==p||e[5]!==f){const r=h.trim().toLowerCase();if(l=Array.isArray(f)?f:[],c!=="all"){let s;e[7]!==c?(s=n=>(n.status??"").toLowerCase()===c,e[7]=c,e[8]=s):s=e[8],l=l.filter(s)}if(d!=="all"){let s;e[9]!==d?(s=n=>(n.parent_course?.id??"").toString()===d,e[9]=d,e[10]=s):s=e[10],l=l.filter(s)}if(u!=="all"){let s;e[11]!==u?(s=n=>(n.activity?.id??"").toString()===u,e[11]=u,e[12]=s):s=e[12],l=l.filter(s)}if(p!=="all"){let s;e[13]!==p?(s=n=>(n.student?.id??"").toString()===p,e[13]=p,e[14]=s):s=e[14],l=l.filter(s)}r&&(l=l.filter(s=>{const n=(s.activity?.title??"").toString().toLowerCase(),Ne=(s.title??"").toString().toLowerCase();return n.includes(r)||Ne.includes(r)})),e[0]=u,e[1]=d,e[2]=h,e[3]=c,e[4]=p,e[5]=f,e[6]=l}else l=e[6];const x=l,m=Math.max(1,Math.ceil(x.length/z)),J=(o-1)*z;let K;e[15]!==x||e[16]!==J?(K=x.slice(J,J+z),e[15]=x,e[16]=J,e[17]=K):K=e[17];const O=K;let U;e[18]!==i||e[19]!==m?(U=function(s){const n=Math.min(Math.max(1,s),m);i(n)},e[18]=i,e[19]=m,e[20]=U):U=e[20];const a=U;let W;e[21]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Les soumissions"}),t.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Historique des envois et état des évaluations"})]}),e[21]=W):W=e[21];let X;e[22]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(Me,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 text-gray-400"}),e[22]=X):X=e[22];let g;e[23]!==i||e[24]!==me?(g=r=>{me(r.target.value),i(1)},e[23]=i,e[24]=me,e[25]=g):g=e[25];let y;e[26]!==h||e[27]!==g?(y=t.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[W,t.jsxs("label",{className:"relative w-full md:w-80",children:[X,t.jsx("input",{type:"search",value:h,onChange:g,placeholder:"Rechercher activité ou titre...",className:"w-full rounded-md border border-gray-200 bg-white py-2 pr-3 pl-9 text-sm shadow-sm placeholder:text-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500"})]})]}),e[26]=h,e[27]=g,e[28]=y):y=e[28];let Y;e[29]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx(Te,{className:"h-5 w-5 text-gray-500"}),e[29]=Y):Y=e[29];let b;e[30]!==i||e[31]!==ce?(b=r=>{ce(r.target.value),i(1)},e[30]=i,e[31]=ce,e[32]=b):b=e[32];let ee,te;e[33]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("option",{value:"all",children:"Tous statuts"}),ee=_e.map(Ge),e[33]=ee,e[34]=te):(ee=e[33],te=e[34]);let v;e[35]!==c||e[36]!==b?(v=t.jsxs("div",{className:"flex items-center gap-2",children:[Y,t.jsxs("select",{value:c,onChange:b,className:"w-full rounded-md border border-gray-200 bg-white px-3 py-2 text-sm shadow-sm",children:[te,ee]})]}),e[35]=c,e[36]=b,e[37]=v):v=e[37];let j;e[38]!==de||e[39]!==i?(j=r=>{de(r.target.value),i(1)},e[38]=de,e[39]=i,e[40]=j):j=e[40];let se;e[41]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx("option",{value:"all",children:"Tous les cours"}),e[41]=se):se=e[41];let N;e[42]!==he?(N=he.map(De),e[42]=he,e[43]=N):N=e[43];let w;e[44]!==d||e[45]!==j||e[46]!==N?(w=t.jsxs("select",{value:d,onChange:j,className:"rounded-md border border-gray-200 bg-white px-3 py-2 text-sm shadow-sm",children:[se,N]}),e[44]=d,e[45]=j,e[46]=N,e[47]=w):w=e[47];let S;e[48]!==ue||e[49]!==i?(S=r=>{ue(r.target.value),i(1)},e[48]=ue,e[49]=i,e[50]=S):S=e[50];let ie;e[51]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("option",{value:"all",children:"Toutes les activités"}),e[51]=ie):ie=e[51];let C;e[52]!==xe?(C=xe.map(Be),e[52]=xe,e[53]=C):C=e[53];let k;e[54]!==u||e[55]!==S||e[56]!==C?(k=t.jsxs("select",{value:u,onChange:S,className:"rounded-md border border-gray-200 bg-white px-3 py-2 text-sm shadow-sm",children:[ie,C]}),e[54]=u,e[55]=S,e[56]=C,e[57]=k):k=e[57];let _;e[58]!==i||e[59]!==pe?(_=r=>{pe(r.target.value),i(1)},e[58]=i,e[59]=pe,e[60]=_):_=e[60];let le;e[61]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("option",{value:"all",children:"Tous les étudiants"}),e[61]=le):le=e[61];let L;e[62]!==fe?(L=fe.map($e),e[62]=fe,e[63]=L):L=e[63];let A;e[64]!==p||e[65]!==_||e[66]!==L?(A=t.jsxs("select",{value:p,onChange:_,className:"rounded-md border border-gray-200 bg-white px-3 py-2 text-sm shadow-sm",children:[le,L]}),e[64]=p,e[65]=_,e[66]=L,e[67]=A):A=e[67];let F;e[68]!==v||e[69]!==w||e[70]!==k||e[71]!==A?(F=t.jsxs("div",{className:"grid w-full grid-cols-1 items-center justify-between gap-3 sm:grid-cols-2 md:w-auto md:grid-cols-3",children:[v,w,k,A]}),e[68]=v,e[69]=w,e[70]=k,e[71]=A,e[72]=F):F=e[72];let M;e[73]!==F||e[74]!==y?(M=t.jsxs("div",{className:"mb-6 grid gap-4 md:items-center md:justify-between",children:[y,F]}),e[73]=F,e[74]=y,e[75]=M):M=e[75];let T;e[76]!==O?(T=O.length===0?t.jsx("div",{className:"col-span-full rounded-lg border border-gray-200 bg-white p-6 text-center text-sm text-gray-500",children:"Aucune soumission trouvée."}):O.map(qe),e[76]=O,e[77]=T):T=e[77];let E;e[78]!==T?(E=t.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:T}),e[78]=T,e[79]=E):E=e[79];const ge=Math.min((o-1)*z+1,x.length||0),ye=Math.min(o*z,x.length||0);let P;e[80]!==x.length||e[81]!==ge||e[82]!==ye?(P=t.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage"," ",ge,"–",ye," sur"," ",x.length," soumission(s)"]}),e[80]=x.length,e[81]=ge,e[82]=ye,e[83]=P):P=e[83];let R;e[84]!==a||e[85]!==o?(R=()=>a(o-1),e[84]=a,e[85]=o,e[86]=R):R=e[86];const be=o<=1;let re;e[87]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(Ee,{className:"h-4 w-4"}),e[87]=re):re=e[87];let q;e[88]!==R||e[89]!==be?(q=t.jsx("button",{onClick:R,disabled:be,className:"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-3 py-1 text-sm disabled:opacity-50",children:re}),e[88]=R,e[89]=be,e[90]=q):q=e[90];let $;e[91]!==a?($=t.jsx("button",{onClick:()=>a(1),className:"px-2 text-sm",children:"1"}),e[91]=a,e[92]=$):$=e[92];let ae;e[93]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("div",{className:"px-2 text-sm",children:"…"}),e[93]=ae):ae=e[93];let B;e[94]!==a||e[95]!==m?(B=()=>a(m),e[94]=a,e[95]=m,e[96]=B):B=e[96];let D;e[97]!==B||e[98]!==m?(D=t.jsx("button",{onClick:B,className:"px-2 text-sm",children:m}),e[97]=B,e[98]=m,e[99]=D):D=e[99];let G;e[100]!==$||e[101]!==D?(G=t.jsxs("div",{className:"hidden items-center gap-1 rounded-md bg-gray-100 px-3 py-1 text-sm sm:flex",children:[$,ae,D]}),e[100]=$,e[101]=D,e[102]=G):G=e[102];let H;e[103]!==a||e[104]!==o?(H=()=>a(o+1),e[103]=a,e[104]=o,e[105]=H):H=e[105];const ve=o>=m;let oe;e[106]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(Pe,{className:"h-4 w-4"}),e[106]=oe):oe=e[106];let I;e[107]!==H||e[108]!==ve?(I=t.jsx("button",{onClick:H,disabled:ve,className:"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-3 py-1 text-sm disabled:opacity-50",children:oe}),e[107]=H,e[108]=ve,e[109]=I):I=e[109];let Q;e[110]!==q||e[111]!==G||e[112]!==I?(Q=t.jsxs("div",{className:"flex items-center gap-2",children:[q,G,I]}),e[110]=q,e[111]=G,e[112]=I,e[113]=Q):Q=e[113];let V;e[114]!==P||e[115]!==Q?(V=t.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[P,Q]}),e[114]=P,e[115]=Q,e[116]=V):V=e[116];let ne;return e[117]!==M||e[118]!==E||e[119]!==V?(ne=t.jsx(ke,{title:"Liste des soumissions",children:t.jsxs("div",{className:"mx-auto mt-6 max-w-7xl px-4",children:[M,E,V]})}),e[117]=M,e[118]=E,e[119]=V,e[120]=ne):ne=e[120],ne}function qe(e){return t.jsxs("article",{className:"rounded-lg border bg-white p-4 shadow-sm",children:[t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1 pr-3",children:[t.jsx("h3",{className:"line-clamp-2 text-sm font-semibold text-gray-900 dark:text-white",children:e.activity?.title??"Activité inconnue"}),t.jsx("div",{className:"mt-1 text-xs text-gray-500",children:e.title??"—"})]}),t.jsxs("div",{className:"flex shrink-0 flex-col items-end gap-2",children:[t.jsx("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-medium ${e.status==="graded"?"bg-green-50 text-green-700":e.status==="submitted"?"bg-blue-50 text-blue-700":"bg-gray-100 text-gray-700"}`,children:Le(e.status)}),t.jsx("div",{className:"text-xs text-gray-500",children:e.submitted_at?Ae(e.submitted_at):"—"})]})]}),t.jsxs("div",{className:"mt-4 flex items-center justify-between gap-3",children:[t.jsx("div",{className:"flex items-center gap-3 text-sm text-gray-600",children:t.jsxs("div",{className:"text-xs text-gray-500",children:["Note:"," ",t.jsx("span",{className:"font-medium text-gray-800",children:e.score??"—"})]})}),t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(Ce,{href:Fe(e.activity?.slug??"").url,className:"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-3 py-1 text-sm hover:bg-gray-50",children:[t.jsx(Re,{className:"h-4 w-4"})," Voir"]})})]}),t.jsx("div",{children:t.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Soumis par:"," ",t.jsxs("span",{className:"font-medium text-gray-800",children:[e.student?.first_name," ",e.student?.last_name]})]})})]},e.id)}function $e(e){return t.jsx("option",{value:e.key,children:e.value},e.key)}function Be(e){return t.jsx("option",{value:e.key,children:e.value},e.key)}function De(e){return t.jsx("option",{value:e.key,children:e.value},e.key)}function Ge(e){return t.jsxs("option",{value:e.key,children:[" ",e.value," "]},e.value)}function He(e){return[e.id.toString(),{key:e.id.toString(),value:e.title}]}function Ie(e){return e}function Qe(e){return e.parent_course}function Ve(e){return[e.id.toString(),{key:e.id.toString(),value:e.first_name+" "+e.last_name}]}function Ze(e){return e}function ze(e){return e.student}function Je(e){return[e.id.toString(),{key:e.id.toString(),value:e.title}]}function Ke(e){return e}function Oe(e){return e.activity}export{is as default};
