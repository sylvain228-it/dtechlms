import{c as nt,u as ct,b as dt,r as pt,j as t,H as ut,a as lt}from"./app-CjIWy3eH.js";import{S as tt,C as rt}from"./form-SFwPvtEA.js";import{B as at}from"./button-CExzQmZc.js";import{L as c}from"./label-eKQQEJaP.js";import{S as ot}from"./spinner-Bb2x751J.js";import{T as ft}from"./teacher-layouts-C060YcPY.js";import{a as ht}from"./tasks-gWUZeaAY.js";import{l as xt,C as gt,u as yt}from"./type-DDACwUq3.js";import{u as bt,b as _t}from"./index-CJeVcETn.js";import jt from"./text-editor-CwL_ygOO.js";import"./app-DfLmVDUM.js";import"./index-C4soMqjN.js";import"./index-BnYBuebb.js";import"./utils-AnTb9DBe.js";import"./index-DnZUlvAx.js";import"./createLucideIcon-i13MEz2U.js";import"./page-banner-IgGXIOfs.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-CHnKU68i.js";import"./iconBase-ZLoFHiO_.js";import"./arrow-left-DAnQtW-a.js";import"./app-logo-icon-hvVxL52x.js";import"./divider-D-eLoZ7M.js";import"./profile-svg-Cv26bH6a.js";import"./user-profile-trigger-CmjyThd_.js";import"./avatar-8Q0-AYNg.js";import"./index-OYVf1Zwz.js";import"./index-Cx1mEBwh.js";import"./avatar-fallback-DKyWtIhb.js";import"./use-initials-GDEZD6-s.js";import"./dropdown-menu-DUsmAPKS.js";import"./index-aXAQScOB.js";import"./index-CgNbq55-.js";import"./index-CPWTBhsT.js";import"./index-DdCDBdhx.js";import"./index-DIo9abDA.js";import"./index-DLvqQGle.js";import"./check-C6ufmhQW.js";import"./logout-user-BBug3-28.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-Bz_ayeBV.js";import"./index-5dwg6Nh6.js";import"./index-DMEIf3eg.js";import"./index-BCspIYgb.js";import"./index-V0aQkvK_.js";import"./index-DtNXQYgP.js";import"./index-D-fKvoRm.js";import"./index-DH9SVvWg.js";import"./index-CU8SWGOj.js";import"./index-51Gsxs9j.js";import"./index-Ba98UH71.js";import"./index-Bwrcs2qz.js";import"./index-DerrCcFj.js";import"./index-Cer0vd8q.js";import"./index-DXT9ONqy.js";import"./index-lBAoiumE.js";import"./index-Di1vi8wQ.js";import"./gauge-au9SJ6qx.js";import"./calendar-Bfdj--jJ.js";import"./message-circle-CqdwJGEq.js";import"./settings-P3TSVHSR.js";import"./x-CvJE1FTX.js";import"./menu-F5M2EXT6.js";import"./lexical-headless-BCA5NgA9.js";import"./nodes-B8QjlgCe.js";import"./editor-DqwDuJ7D.js";import"./tooltip-DoU2t7pu.js";import"./index-B1o4au5T.js";import"./content-editable-BWYCC2c_.js";import"./dialog-fqGBwwd6.js";import"./index-Bqid9ha0.js";import"./command-B29qbcP4.js";import"./search-Dx3AsdWN.js";import"./input-yCXFspsm.js";import"./popover-yphMsw6d.js";import"./trash-BDwK7Xc3.js";import"./separator-HymLw8Zt.js";import"./index-DKwhJhfi.js";import"./index-WBmQTPp2.js";import"./chevron-up-CFIZDqiI.js";import"./chevron-down-B3Mn7iN-.js";import"./list-BEo5ViXo.js";import"./image-C0wZYFBi.js";function si(){const e=nt.c(186),{module:a,newOrder:mt,sequence:o,c_modality:Ne}=ct().props,m=!!o,Se=o?.title??"",qe=o?.description??"",Ce=o?.sequence_type??"",we=o?.order??mt??0,Te=o?.is_visible??!0,ke=o?.syllabus??"",Fe=o?.estimated_hours??null,Ee=o?.estimated_days??null,Le=o?.modality??a.modality,Ae=o?.is_mandatory==1,De=o?.has_assessment==1,Be=o?.assessment_weight??null,Me=o?.language??a.language;let ce;e[0]!==a.id||e[1]!==Se||e[2]!==qe||e[3]!==De||e[4]!==Be||e[5]!==Me||e[6]!==Ce||e[7]!==we||e[8]!==Te||e[9]!==ke||e[10]!==Fe||e[11]!==Ee||e[12]!==Le||e[13]!==Ae?(ce={module_id:a.id,title:Se,description:qe,sequence_type:Ce,order:we,is_visible:Te,syllabus:ke,estimated_hours:Fe,estimated_days:Ee,modality:Le,is_mandatory:Ae,has_assessment:De,assessment_weight:Be,language:Me},e[0]=a.id,e[1]=Se,e[2]=qe,e[3]=De,e[4]=Be,e[5]=Me,e[6]=Ce,e[7]=we,e[8]=Te,e[9]=ke,e[10]=Fe,e[11]=Ee,e[12]=Le,e[13]=Ae,e[14]=ce):ce=e[14];const{data:s,setData:i,errors:l}=dt(ce),[n,Oe]=pt.useState(!1);let de;e[15]!==s||e[16]!==m||e[17]!==a.course||e[18]!==a.id||e[19]!==o?(de=r=>{r.preventDefault(),Oe(!0),async function(){await ht(m?a.id:0).then(()=>{const it={...s,_method:m?"put":"post"};m?lt.put(bt([a.course.slug,a.id,o.id]),it,{onFinish:()=>Oe(!1)}):lt.post(_t([a.course.slug,a.id]),it,{onFinish:()=>Oe(!1)})})}()},e[15]=s,e[16]=m,e[17]=a.course,e[18]=a.id,e[19]=o,e[20]=de):de=e[20];const d=de;let pe;e[21]!==d?(pe=function(et){et.preventDefault(),d(et)},e[21]=d,e[22]=pe):pe=e[22];const Pe=pe,st=s.description&&s.title&&s.estimated_hours&&s.estimated_days&&s.sequence_type&&s.language&&s.syllabus&&s.modality,He=m?"Modifier la séquence":"Créer une séquence",Re=m?"Modifier séquence":"Nouvelle séquence";let p;e[23]!==Re?(p=t.jsx(ut,{title:Re}),e[23]=Re,e[24]=p):p=e[24];const Ve=m?"Modifier la séquence":"Nouvelle séquence";let u;e[25]!==Ve?(u=t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:Ve}),e[25]=Ve,e[26]=u):u=e[26];const Je=n||!st;let f;e[27]!==n?(f=n&&t.jsx(ot,{}),e[27]=n,e[28]=f):f=e[28];let h;e[29]!==Pe||e[30]!==Je||e[31]!==f?(h=t.jsxs(at,{className:"btn-primary",disabled:Je,onClick:Pe,children:[f,"Enregistrer"]}),e[29]=Pe,e[30]=Je,e[31]=f,e[32]=h):h=e[32];let x;e[33]!==u||e[34]!==h?(x=t.jsxs("div",{className:"mb-5 flex items-center justify-between border-b p-3",children:[u,h]}),e[33]=u,e[34]=h,e[35]=x):x=e[35];let ue;e[36]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(c,{children:"Cours/Séquence"}),e[36]=ue):ue=e[36];const $e=a.course?.title;let g;e[37]!==$e?(g=t.jsx("span",{className:"text-[14px]",children:$e}),e[37]=$e,e[38]=g):g=e[38];let y;e[39]!==a.title?(y=t.jsx("div",{className:"text-[18px] font-bold",children:a.title}),e[39]=a.title,e[40]=y):y=e[40];let b;e[41]!==g||e[42]!==y?(b=t.jsxs("div",{className:"grid gap-2",children:[ue,t.jsxs("div",{className:"rounded-sm border p-2",children:[g,y]})]}),e[41]=g,e[42]=y,e[43]=b):b=e[43];let fe;e[44]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(c,{children:"Titre"}),e[44]=fe):fe=e[44];let _;e[45]!==i?(_=r=>i("title",r.target.value),e[45]=i,e[46]=_):_=e[46];let j;e[47]!==s.title||e[48]!==_?(j=t.jsx("input",{value:s.title,onChange:_,className:"form-input w-full"}),e[47]=s.title,e[48]=_,e[49]=j):j=e[49];let v;e[50]!==l.title?(v=l.title&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.title}),e[50]=l.title,e[51]=v):v=e[51];let N;e[52]!==j||e[53]!==v?(N=t.jsxs("div",{children:[fe,j,v]}),e[52]=j,e[53]=v,e[54]=N):N=e[54];let he;e[55]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(c,{children:"Description"}),e[55]=he):he=e[55];let S;e[56]!==i?(S=r=>i("description",r.target.value),e[56]=i,e[57]=S):S=e[57];let q;e[58]!==s.description||e[59]!==S?(q=t.jsx("textarea",{value:s.description,onChange:S,className:"form-input w-full",rows:4}),e[58]=s.description,e[59]=S,e[60]=q):q=e[60];let C;e[61]!==l.description?(C=l.description&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.description}),e[61]=l.description,e[62]=C):C=e[62];let w;e[63]!==q||e[64]!==C?(w=t.jsxs("div",{className:"",children:[he,q,C]}),e[63]=q,e[64]=C,e[65]=w):w=e[65];let xe;e[66]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(c,{children:"Ordre"}),e[66]=xe):xe=e[66];let T;e[67]!==i?(T=r=>i("order",Number(r.target.value)),e[67]=i,e[68]=T):T=e[68];let k;e[69]!==s.order||e[70]!==T?(k=t.jsx("input",{type:"number",value:s.order,onChange:T,className:"form-input",min:1}),e[69]=s.order,e[70]=T,e[71]=k):k=e[71];let F;e[72]!==l.order?(F=l.order&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.order}),e[72]=l.order,e[73]=F):F=e[73];let E;e[74]!==k||e[75]!==F?(E=t.jsxs("div",{children:[xe,k,F]}),e[74]=k,e[75]=F,e[76]=E):E=e[76];let ge;e[77]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(c,{children:"Heures estimées"}),e[77]=ge):ge=e[77];const ze=s.estimated_hours??"";let L;e[78]!==i?(L=r=>i("estimated_hours",r.target.value?Number(r.target.value):null),e[78]=i,e[79]=L):L=e[79];let A;e[80]!==ze||e[81]!==L?(A=t.jsx("input",{type:"number",value:ze,onChange:L,className:"form-input",min:0}),e[80]=ze,e[81]=L,e[82]=A):A=e[82];let D;e[83]!==l.estimated_hours?(D=l.estimated_hours&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.estimated_hours}),e[83]=l.estimated_hours,e[84]=D):D=e[84];let B;e[85]!==A||e[86]!==D?(B=t.jsxs("div",{children:[ge,A,D]}),e[85]=A,e[86]=D,e[87]=B):B=e[87];let ye;e[88]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(c,{children:"Jours estimés"}),e[88]=ye):ye=e[88];const Ge=s.estimated_days??"";let M;e[89]!==i?(M=r=>i("estimated_days",r.target.value?Number(r.target.value):null),e[89]=i,e[90]=M):M=e[90];let O;e[91]!==Ge||e[92]!==M?(O=t.jsx("input",{type:"number",value:Ge,onChange:M,className:"form-input",min:0}),e[91]=Ge,e[92]=M,e[93]=O):O=e[93];let P;e[94]!==l.estimated_days?(P=l.estimated_days&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.estimated_days}),e[94]=l.estimated_days,e[95]=P):P=e[95];let H;e[96]!==O||e[97]!==P?(H=t.jsxs("div",{children:[ye,O,P]}),e[96]=O,e[97]=P,e[98]=H):H=e[98];let R;e[99]!==E||e[100]!==B||e[101]!==H?(R=t.jsxs("div",{className:"grid gap-3 sm:grid-cols-3",children:[E,B,H]}),e[99]=E,e[100]=B,e[101]=H,e[102]=R):R=e[102];const Ie=s.language??"";let V;e[103]!==i?(V=r=>i("language",r),e[103]=i,e[104]=V):V=e[104];let J;e[105]!==l.language||e[106]!==Ie||e[107]!==V?(J=t.jsx("div",{className:"grid gap-2",children:t.jsx(tt,{label:"Langue de la séquence",value:Ie,onChange:V,options:xt,error:l.language})}),e[105]=l.language,e[106]=Ie,e[107]=V,e[108]=J):J=e[108];const Ke=s.sequence_type??"";let $;e[109]!==i?($=r=>i("sequence_type",r),e[109]=i,e[110]=$):$=e[110];let z;e[111]!==l.sequence_type||e[112]!==Ke||e[113]!==$?(z=t.jsx("div",{className:"grid gap-2",children:t.jsx(tt,{label:"Type de séquence",value:Ke,onChange:$,options:gt,error:l.sequence_type})}),e[111]=l.sequence_type,e[112]=Ke,e[113]=$,e[114]=z):z=e[114];let G;e[115]!==Ne||e[116]!==s.modality||e[117]!==l.modality||e[118]!==i?(G=Ne!="asynchronous"&&t.jsx("div",{className:"grid gap-2",children:t.jsx(tt,{label:"Mode de déroulement",value:s.modality??"",onChange:r=>i("modality",r),required:!0,options:yt,error:l.modality})}),e[115]=Ne,e[116]=s.modality,e[117]=l.modality,e[118]=i,e[119]=G):G=e[119];const Qe=!!s.has_assessment;let I;e[120]!==i?(I=r=>i("has_assessment",r.target.checked),e[120]=i,e[121]=I):I=e[121];let K;e[122]!==Qe||e[123]!==I?(K=t.jsx("input",{type:"checkbox",checked:Qe,onChange:I,className:"h-4 w-4"}),e[122]=Qe,e[123]=I,e[124]=K):K=e[124];let be;e[125]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx("span",{className:"text-sm",children:"Évaluation"}),e[125]=be):be=e[125];let Q;e[126]!==K?(Q=t.jsxs("label",{className:"inline-flex items-center gap-2",children:[K,be]}),e[126]=K,e[127]=Q):Q=e[127];let U;e[128]!==s.assessment_weight||e[129]!==s.has_assessment||e[130]!==l.assessment_weight||e[131]!==i?(U=s.has_assessment&&t.jsxs("div",{children:[t.jsx(c,{children:"Poids de l'évaluation (%)"}),t.jsx("input",{type:"number",value:s.assessment_weight??"",onChange:r=>i("assessment_weight",r.target.value?Number(r.target.value):null),className:"form-input",min:0,max:100}),l.assessment_weight&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.assessment_weight})]}),e[128]=s.assessment_weight,e[129]=s.has_assessment,e[130]=l.assessment_weight,e[131]=i,e[132]=U):U=e[132];let W;e[133]!==Q||e[134]!==U?(W=t.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:t.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[Q,U]})}),e[133]=Q,e[134]=U,e[135]=W):W=e[135];const Ue=!!s.is_mandatory;let X;e[136]!==i?(X=r=>i("is_mandatory",r),e[136]=i,e[137]=X):X=e[137];let Y;e[138]!==Ue||e[139]!==X?(Y=t.jsx("div",{className:"space-y-2",children:t.jsx(rt,{label:"Obligatoire",checked:Ue,onChange:X})}),e[138]=Ue,e[139]=X,e[140]=Y):Y=e[140];const We=!!s.is_visible;let Z;e[141]!==i?(Z=r=>i("is_visible",r),e[141]=i,e[142]=Z):Z=e[142];let ee;e[143]!==We||e[144]!==Z?(ee=t.jsx("div",{children:t.jsx(rt,{label:"Visible",checked:We,onChange:Z})}),e[143]=We,e[144]=Z,e[145]=ee):ee=e[145];let te;e[146]!==Y||e[147]!==ee?(te=t.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[Y,ee]}),e[146]=Y,e[147]=ee,e[148]=te):te=e[148];let se;e[149]!==b||e[150]!==N||e[151]!==w||e[152]!==R||e[153]!==J||e[154]!==z||e[155]!==G||e[156]!==W||e[157]!==te?(se=t.jsxs("div",{className:"grid gap-3",children:[b,N,w,R,J,z,G,W,te]}),e[149]=b,e[150]=N,e[151]=w,e[152]=R,e[153]=J,e[154]=z,e[155]=G,e[156]=W,e[157]=te,e[158]=se):se=e[158];let _e;e[159]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("h3",{className:"mb-3 text-2xl font-semibold",children:"Syllabus de la séquence"}),e[159]=_e):_e=e[159];const Xe=!m;let ie;e[160]!==Xe?(ie=t.jsx(jt,{isNew:Xe}),e[160]=Xe,e[161]=ie):ie=e[161];let le;e[162]!==l.syllabus?(le=t.jsx("p",{className:"text-xs text-red-500",children:l.syllabus}),e[162]=l.syllabus,e[163]=le):le=e[163];let re;e[164]!==ie||e[165]!==le?(re=t.jsxs("div",{className:"my-4",children:[_e,ie,le]}),e[164]=ie,e[165]=le,e[166]=re):re=e[166];let je;e[167]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("button",{type:"button",onClick:vt,className:"rounded border px-4 py-2",children:"Annuler"}),e[167]=je):je=e[167];const Ye=n||!st;let ae;e[168]!==n?(ae=n&&t.jsx(ot,{}),e[168]=n,e[169]=ae):ae=e[169];const Ze=m?"Enregistrer":"Ajouter le chapitre";let oe;e[170]!==Ye||e[171]!==ae||e[172]!==Ze?(oe=t.jsxs("div",{className:"flex items-center justify-end gap-3 border-t pt-4",children:[je,t.jsxs(at,{type:"submit",disabled:Ye,className:"btn-primary",children:[ae,Ze]})]}),e[170]=Ye,e[171]=ae,e[172]=Ze,e[173]=oe):oe=e[173];let me;e[174]!==d||e[175]!==se||e[176]!==re||e[177]!==oe?(me=t.jsxs("form",{onSubmit:d,className:"rounded-lg border bg-white p-6 shadow",method:"POST",children:[se,re,oe]}),e[174]=d,e[175]=se,e[176]=re,e[177]=oe,e[178]=me):me=e[178];let ne;e[179]!==x||e[180]!==me?(ne=t.jsxs("div",{className:"mx-auto mt-8 max-w-3xl",children:[x,me]}),e[179]=x,e[180]=me,e[181]=ne):ne=e[181];let ve;return e[182]!==He||e[183]!==p||e[184]!==ne?(ve=t.jsxs(ft,{title:He,children:[p,ne]}),e[182]=He,e[183]=p,e[184]=ne,e[185]=ve):ve=e[185],ve}function vt(){return history.back()}export{si as default};
