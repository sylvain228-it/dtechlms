import{c as Ue,u as We,b as Xe,r as Ye,j as t,H as Ze,a as $e}from"./app-BzXwBPBx.js";import{I as ne,T as et,S as Ve}from"./form-B-fdkg48.js";import{B as ze}from"./button-DpCkL2lj.js";import{L as tt}from"./label-D5CJeCuB.js";import{S as Ke}from"./spinner-CIZwnsdn.js";import{T as st}from"./teacher-layouts-C7E0jZE8.js";import{a as it}from"./tasks-BTAmnlgm.js";import{G as lt,v as ot,l as rt}from"./type-DhUEUhhk.js";import{u as at,a as mt}from"./index-DH9SVvWg.js";import nt from"./text-editor-BXdr65je.js";import"./app-BlAWqAGg.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./utils-e8IeQt0G.js";import"./index-BZwf-zK1.js";import"./createLucideIcon-BboBuA9R.js";import"./page-banner-CF78MDYO.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-DF2umSuw.js";import"./iconBase-BH9TG5R0.js";import"./arrow-left-AHTPeAno.js";import"./app-logo-icon-C2LaG9_Q.js";import"./user-profile-trigger-Dk_TTr5J.js";import"./sun-D7S3RfEj.js";import"./avatar-BR3sBMG9.js";import"./index-BWbkfBfC.js";import"./index-B2cDW95s.js";import"./avatar-fallback-D5NPW7a4.js";import"./use-initials-GDEZD6-s.js";import"./divider-B09NDvil.js";import"./profile-svg-DwoHoZ6q.js";import"./dropdown-menu-DlZS67It.js";import"./index-VdYImSg5.js";import"./index-CJlYDfk2.js";import"./index-DAHL75PX.js";import"./index-BQPF0Rq9.js";import"./index-BucdvD4Q.js";import"./index-BRTuzqyl.js";import"./check-BHZKRPmL.js";import"./logout-user-Ce_sIJue.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-BkvcRscv.js";import"./index-Vl0f8Y-f.js";import"./index-DMEIf3eg.js";import"./index-BemDBUNW.js";import"./index-CQybyuYf.js";import"./index-B_X-8rh8.js";import"./index-Ch72Gdeg.js";import"./index-D-fKvoRm.js";import"./index-CJeVcETn.js";import"./index-CU8SWGOj.js";import"./index-BD3HuK-g.js";import"./index-C4OL-TuX.js";import"./index-Bwrcs2qz.js";import"./index-DerrCcFj.js";import"./index-DqzhMcYD.js";import"./index-BGGtLgwn.js";import"./index-DXuqG7by.js";import"./gauge-Cjf8cet3.js";import"./calendar-BjFjFj4e.js";import"./book-open-DAOtQgtK.js";import"./settings-NUZ-cO65.js";import"./x-BWOBLZ9u.js";import"./menu-CWhsNS-k.js";import"./lexical-headless-DaF8M3S2.js";import"./nodes-CSrlFqt9.js";import"./editor-CtaAfrVO.js";import"./tooltip-4iVuFll3.js";import"./index-BzRNNGYp.js";import"./content-editable-ByXDa-st.js";import"./dialog-BPFiSOET.js";import"./index-ti3WiRrV.js";import"./command-DSYCSJsJ.js";import"./search-N_1dfqU-.js";import"./trash-2-BNIFS4ij.js";import"./input-Dbi88rSi.js";import"./popover-DYCgjmhj.js";import"./trash-EdiUFurY.js";import"./separator-KQUxJ4_U.js";import"./index-QfX0IA0x.js";import"./index-BtFGMy8Q.js";import"./chevron-up-CefL2SWm.js";import"./chevron-down-eKEbewAb.js";import"./list-DzzLKJvF.js";import"./image-Gtj0aFvc.js";import"./plus-B-26VCmn.js";function Qs(){const e=Ue.c(162),{module:r,course:a,newOrder:Qe}=We().props,m=!!r,de=r?.course_id??a?.id??"",ce=r?.title??"",pe=r?.description??"",ue=r?.syllabus??"",he=r?.order??Qe??1,fe=r?.estimated_hours??null,xe=r?.estimated_days??null,ge=r?.module_type??"",be=r?.modality??a.modality,ye=r?.is_mandatory??!1,_e=r?.has_evaluation??!1,je=r?.evaluation_weight??null,ve=r?.language??a.language,Ne=r?.is_visible??!0;let ee;e[0]!==de||e[1]!==ce||e[2]!==_e||e[3]!==je||e[4]!==ve||e[5]!==Ne||e[6]!==pe||e[7]!==ue||e[8]!==he||e[9]!==fe||e[10]!==xe||e[11]!==ge||e[12]!==be||e[13]!==ye?(ee={course_id:de,title:ce,description:pe,syllabus:ue,order:he,estimated_hours:fe,estimated_days:xe,module_type:ge,modality:be,is_mandatory:ye,has_evaluation:_e,evaluation_weight:je,language:ve,is_visible:Ne},e[0]=de,e[1]=ce,e[2]=_e,e[3]=je,e[4]=ve,e[5]=Ne,e[6]=pe,e[7]=ue,e[8]=he,e[9]=fe,e[10]=xe,e[11]=ge,e[12]=be,e[13]=ye,e[14]=ee):ee=e[14];const{data:s,setData:i,errors:l}=Xe(ee),[n,we]=Ye.useState(!1);let te;e[15]!==a.slug||e[16]!==s||e[17]!==m||e[18]!==r?(te=o=>{o.preventDefault(),we(!0),async function(){await it(m?r.id:0).then(()=>{const Je={...s,_method:m?"put":"post"};m?$e.put(at([a.slug,r.id]),Je,{onFinish:()=>we(!1)}):$e.post(mt(a.slug),Je,{onFinish:()=>we(!1)})})}()},e[15]=a.slug,e[16]=s,e[17]=m,e[18]=r,e[19]=te):te=e[19];const d=te;let se;e[20]!==d?(se=function(Re){Re.preventDefault(),d(Re)},e[20]=d,e[21]=se):se=e[21];const Ce=se,Ge=s.title&&s.estimated_hours&&s.estimated_days&&s.module_type&&s.language&&s.syllabus&&s.modality,Se=m?"Modifier le module":"Nouveau module",Te=m?"Modifier module":"Nouveau module";let c;e[22]!==Te?(c=t.jsx(Ze,{title:Te}),e[22]=Te,e[23]=c):c=e[23];const ke=m?"Modifier le module":"Créer un module";let p;e[24]!==ke?(p=t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:ke}),e[24]=ke,e[25]=p):p=e[25];const Fe=n||!Ge;let u;e[26]!==n?(u=n&&t.jsx(Ke,{}),e[26]=n,e[27]=u):u=e[27];let h;e[28]!==Ce||e[29]!==Fe||e[30]!==u?(h=t.jsxs(ze,{className:"btn-primary",disabled:Fe,onClick:Ce,children:[u,"Enregistrer"]}),e[28]=Ce,e[29]=Fe,e[30]=u,e[31]=h):h=e[31];let f;e[32]!==p||e[33]!==h?(f=t.jsxs("div",{className:"mb-5 flex items-center justify-between border-b p-3",children:[p,h]}),e[32]=p,e[33]=h,e[34]=f):f=e[34];const Ee=s.course_id;let x;e[35]!==Ee?(x=t.jsx("input",{type:"hidden",name:"course_id",value:Ee}),e[35]=Ee,e[36]=x):x=e[36];let g;e[37]!==i?(g=o=>i("title",o),e[37]=i,e[38]=g):g=e[38];let b;e[39]!==s.title||e[40]!==l.title||e[41]!==g?(b=t.jsx("div",{children:t.jsx(ne,{label:"Titre",value:s.title,onChange:g,placeholder:"Titre du module",required:!0,error:l.title})}),e[39]=s.title,e[40]=l.title,e[41]=g,e[42]=b):b=e[42];let y;e[43]!==i?(y=o=>i("description",o),e[43]=i,e[44]=y):y=e[44];let _;e[45]!==s.description||e[46]!==l.description||e[47]!==y?(_=t.jsx("div",{children:t.jsx(et,{label:"Description",value:s.description,onChange:y,rows:3,placeholder:"Description du module",error:l.description})}),e[45]=s.description,e[46]=l.description,e[47]=y,e[48]=_):_=e[48];let j;e[49]!==b||e[50]!==_?(j=t.jsxs("div",{className:"mb-4 grid gap-3",children:[b,_]}),e[49]=b,e[50]=_,e[51]=j):j=e[51];let v;e[52]!==i?(v=o=>i("order",Number(o)),e[52]=i,e[53]=v):v=e[53];let N;e[54]!==s.order||e[55]!==l.order||e[56]!==v?(N=t.jsx("div",{children:t.jsx(ne,{label:"Ordre",type:"number",value:s.order,onChange:v,error:l.order,required:!0})}),e[54]=s.order,e[55]=l.order,e[56]=v,e[57]=N):N=e[57];const Le=s.estimated_hours??"";let w;e[58]!==i?(w=o=>i("estimated_hours",o?Number(o):null),e[58]=i,e[59]=w):w=e[59];let C;e[60]!==l.estimated_hours||e[61]!==Le||e[62]!==w?(C=t.jsx("div",{children:t.jsx(ne,{label:"Heures estimées",type:"number",value:Le,onChange:w,error:l.estimated_hours})}),e[60]=l.estimated_hours,e[61]=Le,e[62]=w,e[63]=C):C=e[63];const Ae=s.estimated_days??"";let S;e[64]!==i?(S=o=>i("estimated_days",o?Number(o):null),e[64]=i,e[65]=S):S=e[65];let T;e[66]!==l.estimated_days||e[67]!==Ae||e[68]!==S?(T=t.jsx("div",{children:t.jsx(ne,{label:"Jours estimés",type:"number",value:Ae,onChange:S,error:l.estimated_days})}),e[66]=l.estimated_days,e[67]=Ae,e[68]=S,e[69]=T):T=e[69];let k;e[70]!==N||e[71]!==C||e[72]!==T?(k=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-3",children:[N,C,T]}),e[70]=N,e[71]=C,e[72]=T,e[73]=k):k=e[73];const qe=s.module_type??"";let F;e[74]!==i?(F=o=>i("module_type",o),e[74]=i,e[75]=F):F=e[75];let E;e[76]!==l.module_type||e[77]!==qe||e[78]!==F?(E=t.jsx(Ve,{label:"Type de module",value:qe,onChange:F,required:!0,options:lt,error:l.module_type}),e[76]=l.module_type,e[77]=qe,e[78]=F,e[79]=E):E=e[79];let L;e[80]!==a.modality||e[81]!==s.modality||e[82]!==l.modality||e[83]!==i?(L=a.modality!="asynchronous"&&t.jsx("div",{className:"grid gap-2",children:t.jsx(Ve,{label:"Mode de déroulement",value:s.modality??"",onChange:o=>i("modality",o),required:!0,options:ot,error:l.modality})}),e[80]=a.modality,e[81]=s.modality,e[82]=l.modality,e[83]=i,e[84]=L):L=e[84];const De=s.language??"";let A;e[85]!==i?(A=o=>i("language",o),e[85]=i,e[86]=A):A=e[86];let q;e[87]!==l.language||e[88]!==De||e[89]!==A?(q=t.jsx("div",{className:"grid gap-2",children:t.jsx(Ve,{label:"Langue du module",value:De,onChange:A,options:rt,error:l.language,required:!0})}),e[87]=l.language,e[88]=De,e[89]=A,e[90]=q):q=e[90];let D;e[91]!==E||e[92]!==L||e[93]!==q?(D=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[E,L,q]}),e[91]=E,e[92]=L,e[93]=q,e[94]=D):D=e[94];const Me=!!s.is_mandatory;let M;e[95]!==i?(M=o=>i("is_mandatory",o.target.checked),e[95]=i,e[96]=M):M=e[96];let B;e[97]!==Me||e[98]!==M?(B=t.jsx("input",{type:"checkbox",checked:Me,onChange:M,className:"h-4 w-4"}),e[97]=Me,e[98]=M,e[99]=B):B=e[99];let ie;e[100]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("span",{className:"text-sm",children:"Obligatoire"}),e[100]=ie):ie=e[100];let O;e[101]!==B?(O=t.jsx("div",{className:"space-y-2",children:t.jsxs("label",{className:"inline-flex items-center gap-2",children:[B,ie]})}),e[101]=B,e[102]=O):O=e[102];const Be=!!s.has_evaluation;let P;e[103]!==i?(P=o=>i("has_evaluation",o.target.checked),e[103]=i,e[104]=P):P=e[104];let H;e[105]!==Be||e[106]!==P?(H=t.jsx("input",{type:"checkbox",checked:Be,onChange:P,className:"h-4 w-4"}),e[105]=Be,e[106]=P,e[107]=H):H=e[107];let le;e[108]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("span",{className:"text-sm",children:"Évaluation"}),e[108]=le):le=e[108];let I;e[109]!==H?(I=t.jsxs("label",{className:"inline-flex items-center gap-2",children:[H,le]}),e[109]=H,e[110]=I):I=e[110];let R;e[111]!==s.evaluation_weight||e[112]!==s.has_evaluation||e[113]!==l.evaluation_weight||e[114]!==i?(R=s.has_evaluation&&t.jsxs("div",{children:[t.jsx(tt,{children:"Poids de l'évaluation (%)"}),t.jsx("input",{type:"number",value:s.evaluation_weight??"",onChange:o=>i("evaluation_weight",o.target.value?Number(o.target.value):null),className:"form-input",min:0,max:100}),l.evaluation_weight&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.evaluation_weight})]}),e[111]=s.evaluation_weight,e[112]=s.has_evaluation,e[113]=l.evaluation_weight,e[114]=i,e[115]=R):R=e[115];let V;e[116]!==I||e[117]!==R?(V=t.jsxs("div",{className:"space-y-2",children:[I,R]}),e[116]=I,e[117]=R,e[118]=V):V=e[118];let G;e[119]!==O||e[120]!==V?(G=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[O,V]}),e[119]=O,e[120]=V,e[121]=G):G=e[121];const Oe=!!s.is_visible;let J;e[122]!==i?(J=o=>i("is_visible",o.target.checked),e[122]=i,e[123]=J):J=e[123];let $;e[124]!==Oe||e[125]!==J?($=t.jsx("input",{type:"checkbox",checked:Oe,onChange:J,className:"h-4 w-4"}),e[124]=Oe,e[125]=J,e[126]=$):$=e[126];let oe;e[127]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("span",{className:"text-sm",children:"Visible"}),e[127]=oe):oe=e[127];let z;e[128]!==$?(z=t.jsx("div",{className:"mb-4 grid gap-3 sm:grid-cols-3",children:t.jsx("div",{children:t.jsxs("label",{className:"inline-flex items-center gap-2",children:[$,oe]})})}),e[128]=$,e[129]=z):z=e[129];let re;e[130]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("h3",{className:"mb-3 text-2xl font-semibold",children:"Syllabus du module"}),e[130]=re):re=e[130];const Pe=!m;let K;e[131]!==Pe?(K=t.jsx(nt,{isNew:Pe}),e[131]=Pe,e[132]=K):K=e[132];let Q;e[133]!==l.syllabus?(Q=t.jsx("p",{className:"text-xs text-red-500",children:l.syllabus}),e[133]=l.syllabus,e[134]=Q):Q=e[134];let U;e[135]!==K||e[136]!==Q?(U=t.jsxs("div",{className:"my-4",children:[re,K,Q]}),e[135]=K,e[136]=Q,e[137]=U):U=e[137];let ae;e[138]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("button",{type:"button",onClick:dt,className:"rounded border px-4 py-2",children:"Annuler"}),e[138]=ae):ae=e[138];const He=n||!Ge;let W;e[139]!==n?(W=n&&t.jsx(Ke,{}),e[139]=n,e[140]=W):W=e[140];const Ie=m?"Enregistrer":"Ajouter le module";let X;e[141]!==He||e[142]!==W||e[143]!==Ie?(X=t.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3 border-t pt-4",children:[ae,t.jsxs(ze,{type:"submit",disabled:He,className:"btn-primary",children:[W,Ie]})]}),e[141]=He,e[142]=W,e[143]=Ie,e[144]=X):X=e[144];let Y;e[145]!==d||e[146]!==x||e[147]!==j||e[148]!==k||e[149]!==D||e[150]!==G||e[151]!==z||e[152]!==U||e[153]!==X?(Y=t.jsxs("form",{onSubmit:d,className:"rounded-lg border bg-white p-6 shadow",method:"POST",children:[x,j,k,D,G,z,U,X]}),e[145]=d,e[146]=x,e[147]=j,e[148]=k,e[149]=D,e[150]=G,e[151]=z,e[152]=U,e[153]=X,e[154]=Y):Y=e[154];let Z;e[155]!==f||e[156]!==Y?(Z=t.jsxs("div",{className:"mx-auto mt-8 max-w-3xl",children:[f,Y]}),e[155]=f,e[156]=Y,e[157]=Z):Z=e[157];let me;return e[158]!==Se||e[159]!==c||e[160]!==Z?(me=t.jsxs(st,{title:Se,children:[c,Z]}),e[158]=Se,e[159]=c,e[160]=Z,e[161]=me):me=e[161],me}function dt(){return history.back()}export{Qs as default};
