import{c as Ze,u as $e,b as et,r as Ie,j as l,a as ze}from"./app-klcUL3EL.js";import{I as Y,T as tt,S as Ge,C as Je}from"./form-CvObqJ4P.js";import{S as Qe}from"./select-form-DOngjurq.js";import{B as Me}from"./button-Bh8WI1Ty.js";import{L as Ue}from"./label-W6XNthsN.js";import{S as We}from"./spinner-2t8r_D1R.js";import{T as it}from"./teacher-layouts-iHncLP1a.js";import{H as lt,l as st}from"./type-BKOnXlFr.js";import{u as ot,a as rt}from"./index-BD3HuK-g.js";import"./app-Ci7uHgFL.js";import"./command-DZlE8gfH.js";import"./index-DTV9AGlb.js";import"./index-C7Q-OePl.js";import"./index-Ds5qzORP.js";import"./index-DATr0Fl4.js";import"./index-qHu87rw-.js";import"./index-DkAn70oM.js";import"./utils-e8IeQt0G.js";import"./search-lzJ3zhHt.js";import"./createLucideIcon-DknjQr1d.js";import"./popover-YHBFhHiO.js";import"./index-BrvB-LOg.js";import"./index-C9hgHX-E.js";import"./chevrons-up-down-CF9ckTaN.js";import"./check-9HY1vcbG.js";import"./index-A7wesXx6.js";import"./index-CyaJm5Nq.js";import"./page-banner-DONW1mv1.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-BQcbsxov.js";import"./iconBase-BVw07lCS.js";import"./arrow-left-DMV9iy1g.js";import"./app-logo-icon-ijSwabQD.js";import"./user-profile-trigger-BnF5rMVz.js";import"./sun-UD3V7mlH.js";import"./avatar-BdB_hIma.js";import"./avatar-fallback-BDH5mD5T.js";import"./use-initials-GDEZD6-s.js";import"./divider-Dzwd8ovy.js";import"./profile-svg-BWG5dZ33.js";import"./dropdown-menu-Buaj86n5.js";import"./index-hw-50Y8m.js";import"./index-D7xMndjq.js";import"./index-CPeTD8AP.js";import"./logout-user-CTkV5_42.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-uPqsp4v0.js";import"./index-ClAXPadg.js";import"./index-DMEIf3eg.js";import"./index-B5Wz6g3U.js";import"./index-B_X-8rh8.js";import"./index-BSbDLIwT.js";import"./index-D-fKvoRm.js";import"./index-DH9SVvWg.js";import"./index-CJeVcETn.js";import"./index-CU8SWGOj.js";import"./index-C4OL-TuX.js";import"./index-Bwrcs2qz.js";import"./index-DerrCcFj.js";import"./index-Drn0ezkX.js";import"./index-DmWZapw3.js";import"./gauge-BODaeFnF.js";import"./calendar-CUp6x8Fo.js";import"./book-open-qbgfrGvc.js";import"./settings-C4I39P2J.js";import"./x-DGooslga.js";import"./menu-CTQlVSPW.js";function Ci(){const e=Ze.c(156),{skill:r,domaines:d}=$e().props,c=!!r,{errors:s}=$e().props,re=r?.code??"",ae=r?.name??"",ne=r?.description??"",me=r?.domaine_id??null,ce=r?.sub_domaine_id??null,de=r?.type??"",pe=r?.level_min??null,ue=r?.level_max??null,fe=r?.framework??"",be=r?.is_active??!0,ge=r?.is_certifiable??!1,he=r?.language??"fr",xe=r?.source??"";let Z;e[0]!==re||e[1]!==ae||e[2]!==ge||e[3]!==he||e[4]!==xe||e[5]!==ne||e[6]!==me||e[7]!==ce||e[8]!==de||e[9]!==pe||e[10]!==ue||e[11]!==fe||e[12]!==be?(Z={code:re,name:ae,description:ne,domaine_id:me,sub_domaine_id:ce,type:de,level_min:pe,level_max:ue,framework:fe,is_active:be,is_certifiable:ge,language:he,source:xe},e[0]=re,e[1]=ae,e[2]=ge,e[3]=he,e[4]=xe,e[5]=ne,e[6]=me,e[7]=ce,e[8]=de,e[9]=pe,e[10]=ue,e[11]=fe,e[12]=be,e[13]=Z):Z=e[13];const{data:o,setData:i,reset:ve}=et(Z),[m,He]=Ie.useState(!1),[_e,Xe]=Ie.useState(r?r.domaine_id??null:null),[je,Ye]=Ie.useState(r?r.sub_domaine_id??null:null);let Se;e:{if(!o.domaine_id){let a;e[14]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[14]=a):a=e[14],Se=a;break e}let t;e[15]!==o.domaine_id||e[16]!==d?(t=d.find(a=>a.id===o.domaine_id)?.subdomaines||[],e[15]=o.domaine_id,e[16]=d,e[17]=t):t=e[17],Se=t}const ye=Se;let n;if(e[18]!==o||e[19]!==c||e[20]!==ve||e[21]!==r){let t=function(){c||ve(),He(!1)};n=a=>{a.preventDefault(),He(!0);const Oe={...o,_method:c?"put":"post"};c&&r?.id?ze.put(ot(r.id),Oe,{onFinish:t}):ze.post(rt(),Oe,{onFinish:t})},e[18]=o,e[19]=c,e[20]=ve,e[21]=r,e[22]=n}else n=e[22];let ee;e[23]!==i?(ee=function(a){Xe(a),i("domaine_id",a)},e[23]=i,e[24]=ee):ee=e[24];const Ce=ee;let te;e[25]!==i?(te=function(a){Ye(a),i("sub_domaine_id",a)},e[25]=i,e[26]=te):te=e[26];const Ne=te,Ke=o.code&&o.name&&o.type&&o.language,ke=c?"Modifier la compétence":"Nouvelle compétence",De=c?"Modifier la compétence":"Créer une compétence";let p;e[27]!==De?(p=l.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:De}),e[27]=De,e[28]=p):p=e[28];const we=!Ke||m;let u;e[29]!==n?(u=t=>{t.preventDefault(),n(t)},e[29]=n,e[30]=u):u=e[30];let f;e[31]!==m?(f=m&&l.jsx(We,{}),e[31]=m,e[32]=f):f=e[32];let b;e[33]!==we||e[34]!==u||e[35]!==f?(b=l.jsxs(Me,{className:"btn-primary",disabled:we,onClick:u,children:[f,"Enregistrer"]}),e[33]=we,e[34]=u,e[35]=f,e[36]=b):b=e[36];let g;e[37]!==p||e[38]!==b?(g=l.jsxs("div",{className:"mb-5 flex items-center justify-between border-b p-3",children:[p,b]}),e[37]=p,e[38]=b,e[39]=g):g=e[39];let h;e[40]!==i?(h=t=>i("code",t),e[40]=i,e[41]=h):h=e[41];let x;e[42]!==o.code||e[43]!==s.code||e[44]!==h?(x=l.jsx(Y,{label:"Code",value:o.code,onChange:h,required:!0,error:s.code,placeholder:"ex: SKL-001"}),e[42]=o.code,e[43]=s.code,e[44]=h,e[45]=x):x=e[45];let v;e[46]!==i?(v=t=>i("name",t),e[46]=i,e[47]=v):v=e[47];let _;e[48]!==o.name||e[49]!==s.name||e[50]!==v?(_=l.jsx(Y,{label:"Nom",value:o.name,onChange:v,required:!0,error:s.name,placeholder:"Nom de la compétence"}),e[48]=o.name,e[49]=s.name,e[50]=v,e[51]=_):_=e[51];let j;e[52]!==x||e[53]!==_?(j=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[x,_]}),e[52]=x,e[53]=_,e[54]=j):j=e[54];const Fe=o.description??"";let S;e[55]!==i?(S=t=>i("description",t),e[55]=i,e[56]=S):S=e[56];let y;e[57]!==s.description||e[58]!==Fe||e[59]!==S?(y=l.jsx("div",{className:"mb-4",children:l.jsx(tt,{label:"Description",value:Fe,onChange:S,rows:4,placeholder:"Courte description de la compétence",error:s.description})}),e[57]=s.description,e[58]=Fe,e[59]=S,e[60]=y):y=e[60];let ie;e[61]===Symbol.for("react.memo_cache_sentinel")?(ie=l.jsx(Ue,{children:"Domaine"}),e[61]=ie):ie=e[61];let C;e[62]!==Ce?(C=t=>Ce(t),e[62]=Ce,e[63]=C):C=e[63];let N;e[64]!==_e||e[65]!==d||e[66]!==C?(N=l.jsxs("div",{className:"grid gap-2",children:[ie,l.jsx(Qe,{options:d,label:"Sélectionner une catégorie",value:_e,onSelect:C})]}),e[64]=_e,e[65]=d,e[66]=C,e[67]=N):N=e[67];let le;e[68]===Symbol.for("react.memo_cache_sentinel")?(le=l.jsx(Ue,{children:"Sous Domaine"}),e[68]=le):le=e[68];let k;e[69]!==Ne?(k=t=>Ne(t),e[69]=Ne,e[70]=k):k=e[70];let D;e[71]!==je||e[72]!==ye||e[73]!==k?(D=l.jsxs("div",{className:"grid gap-2",children:[le,l.jsx(Qe,{options:ye,label:"Sélectionner une sous catégorie",value:je,onSelect:k})]}),e[71]=je,e[72]=ye,e[73]=k,e[74]=D):D=e[74];let w;e[75]!==N||e[76]!==D?(w=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[N,D]}),e[75]=N,e[76]=D,e[77]=w):w=e[77];const Le=o.type??"";let F;e[78]!==i?(F=t=>i("type",t),e[78]=i,e[79]=F):F=e[79];let L;e[80]!==s.type||e[81]!==Le||e[82]!==F?(L=l.jsx("div",{className:"mb-4",children:l.jsx(Ge,{label:"Type",value:Le,onChange:F,options:lt,required:!0,error:s.type})}),e[80]=s.type,e[81]=Le,e[82]=F,e[83]=L):L=e[83];const Te=o.level_min??"";let T;e[84]!==i?(T=t=>i("level_min",t?Number(t):null),e[84]=i,e[85]=T):T=e[85];let E;e[86]!==s.level_min||e[87]!==Te||e[88]!==T?(E=l.jsx(Y,{label:"Niveau min",type:"number",value:Te,onChange:T,error:s.level_min,placeholder:"ex: 1"}),e[86]=s.level_min,e[87]=Te,e[88]=T,e[89]=E):E=e[89];const Ee=o.level_max??"";let V;e[90]!==i?(V=t=>i("level_max",t?Number(t):null),e[90]=i,e[91]=V):V=e[91];let q;e[92]!==s.level_max||e[93]!==Ee||e[94]!==V?(q=l.jsx(Y,{label:"Niveau max",type:"number",value:Ee,onChange:V,error:s.level_max,placeholder:"ex: 5"}),e[92]=s.level_max,e[93]=Ee,e[94]=V,e[95]=q):q=e[95];const Ve=o.framework??"";let P;e[96]!==i?(P=t=>i("framework",t),e[96]=i,e[97]=P):P=e[97];let R;e[98]!==s.framework||e[99]!==Ve||e[100]!==P?(R=l.jsx(Y,{label:"Cadre / Framework",value:Ve,onChange:P,error:s.framework,placeholder:"ex: Référence européenne / internal"}),e[98]=s.framework,e[99]=Ve,e[100]=P,e[101]=R):R=e[101];let A;e[102]!==E||e[103]!==q||e[104]!==R?(A=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-3",children:[E,q,R]}),e[102]=E,e[103]=q,e[104]=R,e[105]=A):A=e[105];const qe=!!o.is_active;let B;e[106]!==i?(B=t=>i("is_active",t),e[106]=i,e[107]=B):B=e[107];let I;e[108]!==qe||e[109]!==B?(I=l.jsx("div",{children:l.jsx(Je,{label:"Active",checked:qe,onChange:B})}),e[108]=qe,e[109]=B,e[110]=I):I=e[110];const Pe=!!o.is_certifiable;let M;e[111]!==i?(M=t=>i("is_certifiable",t),e[111]=i,e[112]=M):M=e[112];let H;e[113]!==Pe||e[114]!==M?(H=l.jsx("div",{children:l.jsx(Je,{label:"Certifiable",checked:Pe,onChange:M})}),e[113]=Pe,e[114]=M,e[115]=H):H=e[115];let K;e[116]!==I||e[117]!==H?(K=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[I,H]}),e[116]=I,e[117]=H,e[118]=K):K=e[118];const Re=o.language??"";let O;e[119]!==i?(O=t=>i("language",t),e[119]=i,e[120]=O):O=e[120];let $;e[121]!==s.language||e[122]!==Re||e[123]!==O?($=l.jsx(Ge,{label:"Langue",value:Re,onChange:O,options:st,required:!0,error:s.language}),e[121]=s.language,e[122]=Re,e[123]=O,e[124]=$):$=e[124];const Ae=o.source??"";let z;e[125]!==i?(z=t=>i("source",t),e[125]=i,e[126]=z):z=e[126];let G;e[127]!==s.source||e[128]!==Ae||e[129]!==z?(G=l.jsx(Y,{label:"Source",value:Ae,onChange:z,error:s.source,placeholder:"ex: bank, partner, manual"}),e[127]=s.source,e[128]=Ae,e[129]=z,e[130]=G):G=e[130];let J;e[131]!==$||e[132]!==G?(J=l.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[$,G]}),e[131]=$,e[132]=G,e[133]=J):J=e[133];let se;e[134]===Symbol.for("react.memo_cache_sentinel")?(se=l.jsx(Me,{variant:"ghost",onClick:at,className:"border",children:"Annuler"}),e[134]=se):se=e[134];const Be=!Ke||m;let Q;e[135]!==m?(Q=m&&l.jsx(We,{}),e[135]=m,e[136]=Q):Q=e[136];let U;e[137]!==Be||e[138]!==Q?(U=l.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[se,l.jsxs(Me,{type:"submit",className:"btn-primary",disabled:Be,children:[Q,"Enregistrer"]})]}),e[137]=Be,e[138]=Q,e[139]=U):U=e[139];let W;e[140]!==n||e[141]!==j||e[142]!==y||e[143]!==w||e[144]!==L||e[145]!==A||e[146]!==K||e[147]!==J||e[148]!==U?(W=l.jsxs("form",{onSubmit:n,className:"rounded-lg border bg-white p-6 shadow",method:"POST",children:[j,y,w,L,A,K,J,U]}),e[140]=n,e[141]=j,e[142]=y,e[143]=w,e[144]=L,e[145]=A,e[146]=K,e[147]=J,e[148]=U,e[149]=W):W=e[149];let X;e[150]!==g||e[151]!==W?(X=l.jsxs("div",{className:"mx-auto mt-8 max-w-3xl",children:[g,W]}),e[150]=g,e[151]=W,e[152]=X):X=e[152];let oe;return e[153]!==ke||e[154]!==X?(oe=l.jsx(it,{title:ke,children:X}),e[153]=ke,e[154]=X,e[155]=oe):oe=e[155],oe}function at(){return history.back()}export{Ci as default};
