import{c as R,r as z,j as s,L as $}from"./app-CjIWy3eH.js";import{f as i,a as S,C as B,p as O}from"./calendar-BEyvh_5Y.js";import{P as W,a as G,b as I}from"./popover-yphMsw6d.js";import{T as J,a as Q,b as U,c as V}from"./tooltip-DoU2t7pu.js";import{a as X}from"./type-DDACwUq3.js";import{b as P,f as Y}from"./utils-AnTb9DBe.js";import{d as q}from"./index-BCspIYgb.js";import"./app-DfLmVDUM.js";import"./button-CExzQmZc.js";import"./index-C4soMqjN.js";import"./index-BnYBuebb.js";import"./chevron-left-iWJVIUX2.js";import"./createLucideIcon-i13MEz2U.js";import"./chevron-right-B6oGBQYy.js";import"./chevron-down-B3Mn7iN-.js";import"./index-OYVf1Zwz.js";import"./index-DnZUlvAx.js";import"./index-Cx1mEBwh.js";import"./index-DLvqQGle.js";import"./index-CPWTBhsT.js";import"./index-DdCDBdhx.js";import"./index-B1o4au5T.js";import"./index-CMWG4mbA.js";function Me(g){const e=R.c(37),{activities:r}=g,[N,k]=z.useState(null);let n;e[0]!==r?(n={},r.forEach(t=>{const a=new Date(t.start_at??""),j=i(a,"yyyy-MM-dd");n[j]||(n[j]=[]),n[j].push(t)}),e[0]=r,e[1]=n):n=e[1];const l=n;let b;e[2]!==l?(b=Object.keys(l).map(ee),e[2]=l,e[3]=b):b=e[3];const A=b;let y;e[4]!==l?(y=t=>{const a=i(t,"yyyy-MM-dd");return l[a]||[]},e[4]=l,e[5]=y):y=e[5];const o=y;let v;e[6]!==o?(v=t=>{o(t).length>0&&k(t)},e[6]=o,e[7]=v):v=e[7];const H=v,K=Z;let D;e[8]===Symbol.for("react.memo_cache_sentinel")?(D=t=>{const a=new Date(t.start_at??""),j=K(t.start_at??"",t.duration_minutes??0),_=i(a,"HH:mm",{locale:S});if(j){const F=i(j,"HH:mm",{locale:S});return`${_} - ${F}`}return _},e[8]=D):D=e[8];const L=D;let M;e[9]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx("h1",{className:"mb-2 text-3xl font-bold",children:"Calendrier des activités avenirs"}),e[9]=M):M=e[9];const E=r.length!==1?"s":"";let d;e[10]!==r.length||e[11]!==E?(d=s.jsxs("p",{className:"mb-4 text-sm text-muted-foreground",children:[r.length," activité",E," ","à venir"]}),e[10]=r.length,e[11]=E,e[12]=d):d=e[12];let m;e[13]!==H?(m=t=>{t&&t.length>0&&H(t[0])},e[13]=H,e[14]=m):m=e[14];let C;e[15]===Symbol.for("react.memo_cache_sentinel")?(C=t=>k(t),e[15]=C):C=e[15];let c;e[16]!==l?(c=t=>{const a=i(t,"yyyy-MM-dd");return!l[a]},e[16]=l,e[17]=c):c=e[17];let x;e[18]!==A||e[19]!==c||e[20]!==m?(x=s.jsx("div",{className:"lg:col-span-2",children:s.jsx(B,{mode:"multiple",selected:A,onSelect:m,onDayClick:C,className:"w-full rounded-lg",disabled:c})}),e[18]=A,e[19]=c,e[20]=m,e[21]=x):x=e[21];let T;e[22]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Activités"}),e[22]=T):T=e[22];let h;e[23]!==o||e[24]!==N?(h=s.jsx("div",{className:"lg:col-span-1",children:s.jsxs("div",{className:"border-l pl-4",children:[T,N?s.jsxs("div",{children:[s.jsx("p",{className:"mb-4 text-sm text-muted-foreground",children:i(N,"d MMMM yyyy",{locale:S})}),s.jsx("div",{className:"space-y-4",children:o(N).map(t=>s.jsxs(W,{children:[s.jsx(G,{asChild:!0,children:s.jsxs("div",{className:"cursor-pointer rounded-lg border border-blue-200 bg-blue-50 p-3 transition-colors hover:bg-blue-100",children:[s.jsx("h4",{className:"truncate text-sm font-medium text-blue-900",children:t.title}),s.jsx("p",{className:"mt-1 text-xs text-blue-700",children:L(t)})]})}),s.jsx(I,{className:"w-80",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold",children:t.title}),s.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:t.description})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Date/Heure:"}),s.jsxs("p",{className:"text-muted-foreground",children:[i(new Date(t.start_at??""),"d MMMM yyyy HH:mm",{locale:S}),t.duration_minutes&&s.jsxs(s.Fragment,{children:[" - ",P(K(t.start_at??"",t.duration_minutes??0).toString())]})]})]}),X(t.modality),t.duration_minutes&&s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Durée:"}),s.jsx("p",{className:"text-muted-foreground",children:Y(t.duration_minutes)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Type:"}),s.jsx("p",{className:"text-muted-foreground",children:t.is_synchronous?"Synchrone":"Asynchrone"})]}),s.jsx($,{className:"mt-2 text-blue-600 hover:underline",href:q(t.slug),children:"Consulter"})]})]})})]},t.id))})]}):s.jsx("p",{className:"text-sm text-muted-foreground",children:"Cliquez sur une date marquée pour voir les activités"})]})}),e[23]=o,e[24]=N,e[25]=h):h=e[25];let u;e[26]!==x||e[27]!==h?(u=s.jsxs("div",{className:"grid grid-cols-1 items-center gap-6 lg:grid-cols-3",children:[x,h]}),e[26]=x,e[27]=h,e[28]=u):u=e[28];let p;e[29]!==r?(p=r.length>0&&s.jsxs("div",{className:"mt-8 border-t pt-8",children:[s.jsx("h3",{className:"mb-4 text-lg font-semibold",children:"Tous les activités à venir"}),s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(t=>s.jsxs(J,{children:[s.jsx(Q,{asChild:!0,children:s.jsxs("div",{className:"cursor-pointer rounded-lg border p-4 transition-shadow hover:shadow-md",children:[s.jsx("h4",{className:"truncate text-sm font-medium",children:t.title}),s.jsx("p",{className:"mt-2 text-xs text-muted-foreground",children:P(t.start_at??"")}),s.jsx("p",{className:"text-xs text-muted-foreground",children:L(t)}),s.jsx($,{className:"mt-2 text-blue-600 hover:underline",href:q(t.slug),children:"Consulter"})]})}),s.jsx(U,{children:s.jsxs("div",{className:"max-w-sm",children:[s.jsx("p",{className:"font-medium",children:t.title}),s.jsx("p",{className:"mt-1 text-sm",children:t.description}),s.jsx("p",{className:"mt-2 text-sm",children:P(t.start_at??"")})]})})]},t.id))})]}),e[29]=r,e[30]=p):p=e[30];let f;e[31]!==u||e[32]!==p?(f=s.jsx(V,{children:s.jsx("div",{className:"my-4",children:s.jsxs("div",{className:"rounded-lg border bg-white p-4 shadow-sm",children:[u,p]})})}),e[31]=u,e[32]=p,e[33]=f):f=e[33];let w;return e[34]!==f||e[35]!==d?(w=s.jsxs("div",{children:[M,d,f]}),e[34]=f,e[35]=d,e[36]=w):w=e[36],w}function Z(g,e){return new Date(new Date(g??"").getTime()+(e??0)*6e4)}function ee(g){return O(g,"yyyy-MM-dd",new Date)}export{Me as default};
