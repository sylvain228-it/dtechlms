import{r as t,f as g}from"./app-klcUL3EL.js";import{G as S}from"./iconBase-BVw07lCS.js";function F(a={}){const[v,l]=t.useState(null),[o,n]=t.useState(""),[c,i]=t.useState(null),[U,u]=t.useState(0),[R,d]=t.useState(!1),[w,p]=t.useState(!1),f=t.useCallback(async e=>{if(!e)return;d(!0),l(e),i(URL.createObjectURL(e));const r=new FormData;r.append("file",e);try{const s=await g.post("/upload-to-tmp",r,{onUploadProgress:h=>{const C=Math.round(h.loaded*100/(h.total||1));u(C)}});n(s.data.path),a.onUploadSuccess?.(s.data)}catch(s){throw a.onUploadError?.(s),s}finally{d(!1)}},[a]),m=t.useCallback(async()=>{if(o){p(!0);try{const e=new FormData;e.append("tmp_path",o),await g.post("/remove-from-tmp",e),n(""),l(null),i(null),u(0),a.onRemoveSuccess?.()}catch(e){throw a.onRemoveError?.(e),e}finally{p(!1)}}},[o,a]);return t.useEffect(()=>()=>{c&&URL.revokeObjectURL(c)},[c]),{file:v,tmpPath:o,filePreview:c,uploadProgress:U,isUploading:R,isRemoving:w,handleFileChange:e=>{const r=e.target.files?.[0]??null;o&&m(),r?f(r):(l(null),i(null),n(""))},upload:f,remove:m,setTmpPath:n,setFile:l,setPreview:i}}function _(a){return S({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Circle_Remove"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M9.525,13.765a.5.5,0,0,0,.71.71c.59-.59,1.175-1.18,1.765-1.76l1.765,1.76a.5.5,0,0,0,.71-.71c-.59-.58-1.18-1.175-1.76-1.765.41-.42.82-.825,1.23-1.235.18-.18.35-.36.53-.53a.5.5,0,0,0-.71-.71L12,11.293,10.235,9.525a.5.5,0,0,0-.71.71L11.293,12Z"},child:[]},{tag:"path",attr:{d:"M12,21.933A9.933,9.933,0,1,1,21.934,12,9.945,9.945,0,0,1,12,21.933ZM12,3.067A8.933,8.933,0,1,0,20.934,12,8.944,8.944,0,0,0,12,3.067Z"},child:[]}]}]}]})(a)}export{_ as C,F as u};
