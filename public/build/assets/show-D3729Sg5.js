import{c as Fe,u as Ae,b as Te,j as t,a as Ee}from"./app-BzXwBPBx.js";import{I as Le,S as Re,T as Ue}from"./form-B-fdkg48.js";import{U as $e}from"./upload-list-shared-D3_j6EXi.js";import{B as De}from"./button-DpCkL2lj.js";import{S as Be}from"./spinner-CIZwnsdn.js";import{T as Ie}from"./teacher-layouts-C7E0jZE8.js";import{B as Pe,C as Oe}from"./type-DhUEUhhk.js";import{d as qe}from"./utils-e8IeQt0G.js";import"./app-BlAWqAGg.js";import"./createLucideIcon-BboBuA9R.js";import"./download-DP38PM1j.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./page-banner-CF78MDYO.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-DF2umSuw.js";import"./iconBase-BH9TG5R0.js";import"./arrow-left-AHTPeAno.js";import"./app-logo-icon-C2LaG9_Q.js";import"./user-profile-trigger-Dk_TTr5J.js";import"./sun-D7S3RfEj.js";import"./avatar-BR3sBMG9.js";import"./index-BWbkfBfC.js";import"./index-BZwf-zK1.js";import"./index-B2cDW95s.js";import"./avatar-fallback-D5NPW7a4.js";import"./use-initials-GDEZD6-s.js";import"./divider-B09NDvil.js";import"./profile-svg-DwoHoZ6q.js";import"./dropdown-menu-DlZS67It.js";import"./index-VdYImSg5.js";import"./index-CJlYDfk2.js";import"./index-DAHL75PX.js";import"./index-BQPF0Rq9.js";import"./index-BucdvD4Q.js";import"./index-BRTuzqyl.js";import"./check-BHZKRPmL.js";import"./logout-user-Ce_sIJue.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-BkvcRscv.js";import"./index-Vl0f8Y-f.js";import"./index-DMEIf3eg.js";import"./index-BemDBUNW.js";import"./index-CQybyuYf.js";import"./index-B_X-8rh8.js";import"./index-Ch72Gdeg.js";import"./index-D-fKvoRm.js";import"./index-DH9SVvWg.js";import"./index-CJeVcETn.js";import"./index-CU8SWGOj.js";import"./index-BD3HuK-g.js";import"./index-C4OL-TuX.js";import"./index-Bwrcs2qz.js";import"./index-DerrCcFj.js";import"./index-DqzhMcYD.js";import"./index-BGGtLgwn.js";import"./index-DXuqG7by.js";import"./gauge-Cjf8cet3.js";import"./calendar-BjFjFj4e.js";import"./book-open-DAOtQgtK.js";import"./settings-NUZ-cO65.js";import"./x-BWOBLZ9u.js";import"./menu-CWhsNS-k.js";function ss(){const e=Fe.c(124),{submission:s,submissionUploads:a,activity:M,parentCourse:Ce,student:K}=Ae().props;let Q;e[0]!==a?(Q=a??[],e[0]=a,e[1]=Q):Q=e[1];const ne=Q.length>0,de=s?.score??null,xe=s?.feedback??"",pe=s?.status??"graded";let V;e[2]!==de||e[3]!==xe||e[4]!==pe?(V={score:de,feedback:xe,status:pe},e[2]=de,e[3]=xe,e[4]=pe,e[5]=V):V=e[5];const{data:l,setData:i,processing:m,errors:o,reset:fe}=Te(V);let W;e[6]!==l||e[7]!==s.id?(W=r=>{r.preventDefault(),Ee.post(`/teachers/submissions/${s.id}/grade`,l,{onFinish:ze})},e[6]=l,e[7]=s.id,e[8]=W):W=e[8];const he=W,ue=`Détails de la soumission - ${M.title} (${Ce.title})`;let X;e[9]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("h1",{className:"mt-2 text-2xl font-bold text-gray-900 dark:text-white",children:"Détails de la soumission"}),e[9]=X):X=e[9];let c;e[10]!==M.title?(c=t.jsx("span",{className:"font-medium text-gray-700",children:M.title}),e[10]=M.title,e[11]=c):c=e[11];let Y;e[12]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("span",{className:"mx-2 text-gray-300",children:"•"}),e[12]=Y):Y=e[12];const je=Ce?.title;let n;e[13]!==je?(n=t.jsx("span",{className:"font-medium text-gray-700",children:je}),e[13]=je,e[14]=n):n=e[14];let d;e[15]!==n||e[16]!==c?(d=t.jsx("div",{className:"mb-6 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:t.jsxs("div",{children:[X,t.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Activité:"," ",c,Y,"Cours:"," ",n]})]})}),e[15]=n,e[16]=c,e[17]=d):d=e[17];let Z;e[18]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Soumis par"}),e[18]=Z):Z=e[18];const be=K?.first_name??"";let x;e[19]!==be?(x=be.charAt(0),e[19]=be,e[20]=x):x=e[20];const ge=K?.last_name??"";let p;e[21]!==ge?(p=ge.charAt(0),e[21]=ge,e[22]=p):p=e[22];let f;e[23]!==x||e[24]!==p?(f=t.jsxs("div",{className:"rounded-full bg-gray-100 p-3 text-sm font-semibold text-gray-700",children:[x,p]}),e[23]=x,e[24]=p,e[25]=f):f=e[25];const Ne=K?.first_name,ve=K?.last_name;let h;e[26]!==Ne||e[27]!==ve?(h=t.jsxs("div",{className:"font-semibold text-gray-900",children:[Ne," ",ve]}),e[26]=Ne,e[27]=ve,e[28]=h):h=e[28];const ye=K?.email??"-";let u;e[29]!==ye?(u=t.jsx("div",{className:"text-sm text-gray-500",children:ye}),e[29]=ye,e[30]=u):u=e[30];let j;e[31]!==h||e[32]!==u?(j=t.jsxs("div",{children:[h,u]}),e[31]=h,e[32]=u,e[33]=j):j=e[33];let b;e[34]!==f||e[35]!==j?(b=t.jsxs("div",{className:"mb-4 border-b pb-4",children:[Z,t.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[f,j]})]}),e[34]=f,e[35]=j,e[36]=b):b=e[36];let ee;e[37]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("h3",{className:"text-md font-medium text-gray-900",children:"Détails de la soumission"}),e[37]=ee):ee=e[37];let g;e[38]!==s.title?(g=s?.title&&t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s.title}),e[38]=s.title,e[39]=g):g=e[39];let te;e[40]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx("h4",{className:"mb-2 font-medium text-gray-800",children:"Description / Commentaires"}),e[40]=te):te=e[40];let N;e[41]!==s.description?(N=t.jsxs("div",{className:"mt-3 text-sm text-gray-700",children:[te,s?.description?t.jsx("div",{className:"prose max-w-none text-sm text-gray-700",children:s.description}):t.jsx("div",{className:"text-sm text-gray-400",children:"Aucun commentaire fourni."})]}),e[41]=s.description,e[42]=N):N=e[42];let v;e[43]!==g||e[44]!==N?(v=t.jsxs("div",{className:"mb-4",children:[ee,g,N]}),e[43]=g,e[44]=N,e[45]=v):v=e[45];let se;e[46]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx("h4",{className:"mb-3 text-sm font-medium text-gray-700",children:"Fichiers joints"}),e[46]=se):se=e[46];let y;e[47]!==ne||e[48]!==a?(y=t.jsxs("div",{className:"mt-4",children:[se,ne?t.jsx($e,{submissionUploads:a}):t.jsx("div",{className:"text-sm text-gray-400",children:"Aucun fichier joint pour cette soumission."})]}),e[47]=ne,e[48]=a,e[49]=y):y=e[49];let _;e[50]!==b||e[51]!==v||e[52]!==y?(_=t.jsxs("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[b,v,y]}),e[50]=b,e[51]=v,e[52]=y,e[53]=_):_=e[53];let ie;e[54]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("h3",{className:"mb-4 text-lg font-medium text-gray-900",children:"Évaluer l'étudiant"}),e[54]=ie):ie=e[54];const _e=l.score??"";let S;e[55]!==i?(S=r=>i("score",r),e[55]=i,e[56]=S):S=e[56];let w;e[57]!==o.score||e[58]!==_e||e[59]!==S?(w=t.jsx("div",{className:"sm:col-span-1",children:t.jsx(Le,{label:"Note",type:"number",value:_e,onChange:S,placeholder:"Ex: 14",error:o.score})}),e[57]=o.score,e[58]=_e,e[59]=S,e[60]=w):w=e[60];let k;e[61]!==i?(k=r=>i("status",r),e[61]=i,e[62]=k):k=e[62];let C;e[63]!==l.status||e[64]!==k?(C=t.jsx("div",{className:"sm:col-span-2",children:t.jsx(Re,{label:"Statut",value:l.status,options:Pe,onChange:k})}),e[63]=l.status,e[64]=k,e[65]=C):C=e[65];let D;e[66]!==w||e[67]!==C?(D=t.jsxs("div",{className:"grid gap-4 sm:grid-cols-3",children:[w,C]}),e[66]=w,e[67]=C,e[68]=D):D=e[68];const Se=l.feedback??"";let F;e[69]!==i?(F=r=>i("feedback",r),e[69]=i,e[70]=F):F=e[70];let A;e[71]!==o.feedback||e[72]!==Se||e[73]!==F?(A=t.jsx("div",{className:"mt-4",children:t.jsx(Ue,{label:"Feedback / Commentaires",value:Se,onChange:F,rows:5,placeholder:"Retour détaillé pour l'étudiant",error:o.feedback})}),e[71]=o.feedback,e[72]=Se,e[73]=F,e[74]=A):A=e[74];let T;e[75]!==m?(T=m?t.jsx(Be,{}):"Enregistrer la note",e[75]=m,e[76]=T):T=e[76];let E;e[77]!==m||e[78]!==T?(E=t.jsx(De,{className:"btn-primary",disabled:m,children:T}),e[77]=m,e[78]=T,e[79]=E):E=e[79];let L;e[80]!==fe?(L=t.jsx(De,{type:"button",variant:"ghost",onClick:()=>fe(),children:"Réinitialiser"}),e[80]=fe,e[81]=L):L=e[81];let R;e[82]!==E||e[83]!==L?(R=t.jsxs("div",{className:"mt-4 flex items-center gap-3",children:[E,L]}),e[82]=E,e[83]=L,e[84]=R):R=e[84];let U;e[85]!==he||e[86]!==D||e[87]!==A||e[88]!==R?(U=t.jsxs("form",{onSubmit:he,className:"rounded-lg border bg-white p-6 shadow-sm",children:[ie,D,A,R]}),e[85]=he,e[86]=D,e[87]=A,e[88]=R,e[89]=U):U=e[89];let $;e[90]!==_||e[91]!==U?($=t.jsxs("div",{className:"space-y-4 lg:col-span-2",children:[_,U]}),e[90]=_,e[91]=U,e[92]=$):$=e[92];let le;e[93]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Informations"}),e[93]=le):le=e[93];let re;e[94]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("div",{className:"text-xs text-gray-500",children:"Statut"}),e[94]=re):re=e[94];let B;e[95]!==s?(B=s?Oe(s.status):"Pas de soumission",e[95]=s,e[96]=B):B=e[96];let I;e[97]!==B?(I=t.jsxs("div",{children:[re,t.jsx("div",{className:"mt-1 font-medium",children:B})]}),e[97]=B,e[98]=I):I=e[98];let ae;e[99]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("div",{className:"text-xs text-gray-500",children:"Soumis le"}),e[99]=ae):ae=e[99];let P;e[100]!==s.submitted_at?(P=s?.submitted_at?qe(s.submitted_at):"-",e[100]=s.submitted_at,e[101]=P):P=e[101];let O;e[102]!==P?(O=t.jsxs("div",{children:[ae,t.jsx("div",{className:"mt-1 font-medium",children:P})]}),e[102]=P,e[103]=O):O=e[103];let me;e[104]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("div",{className:"text-xs text-gray-500",children:"Soumission tardive"}),e[104]=me):me=e[104];const we=s?.late_submission?"Oui":"Non";let q;e[105]!==we?(q=t.jsxs("div",{children:[me,t.jsx("div",{className:"mt-1 font-medium",children:we})]}),e[105]=we,e[106]=q):q=e[106];let oe;e[107]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("div",{className:"text-xs text-gray-500",children:"Note actuelle"}),e[107]=oe):oe=e[107];const ke=s?.score??"—";let z;e[108]!==ke?(z=t.jsxs("div",{children:[oe,t.jsx("div",{className:"mt-1 font-medium text-green-600",children:ke})]}),e[108]=ke,e[109]=z):z=e[109];let G;e[110]!==I||e[111]!==O||e[112]!==q||e[113]!==z?(G=t.jsx("aside",{className:"col-span-1",children:t.jsxs("div",{className:"sticky top-20 rounded-lg border bg-white p-6 shadow-sm",children:[le,t.jsxs("div",{className:"mt-4 space-y-3 text-sm text-gray-700",children:[I,O,q,z]})]})}),e[110]=I,e[111]=O,e[112]=q,e[113]=z,e[114]=G):G=e[114];let H;e[115]!==$||e[116]!==G?(H=t.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[$,G]}),e[115]=$,e[116]=G,e[117]=H):H=e[117];let J;e[118]!==d||e[119]!==H?(J=t.jsxs("div",{className:"mx-auto mt-6 max-w-6xl px-4",children:[d,H]}),e[118]=d,e[119]=H,e[120]=J):J=e[120];let ce;return e[121]!==ue||e[122]!==J?(ce=t.jsx(Ie,{title:ue,children:J}),e[121]=ue,e[122]=J,e[123]=ce):ce=e[123],ce}function ze(){}export{ss as default};
