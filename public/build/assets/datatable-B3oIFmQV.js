import{j as e,R as r,L as R,a as S}from"./app-BOmU1wmL.js";import{B as a}from"./button-BXeYMGgI.js";import{D as f,a as w,b,c as q,d as z,e as m,f as D,g as p}from"./dropdown-menu-DRIWHMxB.js";import{I as T}from"./input-BasXNOLM.js";import{u as V,T as F,a as P,b as u,c as I,f as x,d as k,e as g,E as Q,g as H,h as _,i as A,j as K}from"./table-B7Ziw1w4.js";import{s as h}from"./tasks-WJQL2uDA.js";import{y as L}from"./type-DDACwUq3.js";import{d as B}from"./index-Bwrcs2qz.js";import{i as E}from"./index-DerrCcFj.js";import{M as O}from"./index-fxZgv_cA.js";import C from"./add-question-dialog-D4bC-I92.js";import{C as G}from"./chevron-down-Cr3D6SAa.js";import{A as J}from"./arrow-right-CBOQb_Du.js";import"./app-VvtKnDwK.js";import"./index-sq8JxwLA.js";import"./index-CtUadT9n.js";import"./index-CyaJm5Nq.js";import"./utils-e8IeQt0G.js";import"./index-BwiOEFi6.js";import"./index-DdNxHDY2.js";import"./index-BdIQ-kbR.js";import"./index-XA1OJB6Q.js";import"./index-C6gdkV91.js";import"./index-B-fAkSq4.js";import"./index-DTrOkFw6.js";import"./index-1aSE4XS9.js";import"./index-CXwkwjvO.js";import"./check-D2RIYBP2.js";import"./createLucideIcon-DUOuwx2-.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./lexical-headless-CJI_HsZI.js";import"./nodes-CImg-T9u.js";import"./iconBase-CPalTnLO.js";import"./form-Cdl3Pe45.js";import"./dialog-4kNTCLrK.js";import"./index-CTyL-A3x.js";import"./x-Cxqud0xV.js";import"./spinner--AHlGxP7.js";import"./index-CrUFx6LV.js";import"./square-pen-8vdK-jEI.js";const j=[{accessorKey:"question_type",header:"Type",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:h(L(s.getValue("question_type")??""),0,20)})},{accessorKey:"question_text",header:"Question",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:h(s.getValue("question_text"),0,30)})},{accessorKey:"order",header:"Ordre",cell:({row:s})=>e.jsx("div",{className:"capitalize",children:s.getValue("order")})},{accessorKey:"points",header:"Points",cell:({row:s})=>e.jsxs("div",{className:"capitalize",children:[parseInt(s.getValue("points")),"pts"]})},{id:"actions",enableHiding:!1,cell:({row:s})=>{const l=s.original,n=l.quize?.slug??"";function d(c){c.preventDefault(),confirm("Êtes-vous sûr de vouloir supprimer cette question ?")&&S.delete(B([n,l.id]))}return e.jsxs(f,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(a,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Ouvrir"}),e.jsx(Q,{})]})}),e.jsxs(b,{align:"end",children:[e.jsx(z,{children:"Actions"}),e.jsx(m,{onClick:()=>navigator.clipboard.writeText(l.question_text),children:"Copier le texte de la question"}),e.jsx(D,{}),e.jsx(R,{href:E([l.quize?.slug??"",l.id]),children:e.jsxs(m,{children:["Réponses",e.jsx(p,{children:e.jsx(J,{className:"text-blue-500"})})]})}),e.jsxs("div",{className:"flex items-center justify-between gap-2 px-2",children:[e.jsx("h3",{children:"Détails"}),e.jsx(C,{quizId:l.quize?.id??0,title:l.quize?.title??"",question:l,triggerTexte:!1,iconSize:20,className:"text-cblue flex items-center justify-between !py-2 text-center"})]}),e.jsxs(m,{onClick:d,children:["Supprimer",e.jsx(p,{children:e.jsx(O,{className:"text-red-500"})})]})]})]})}}];function Ie({quizQuests:s}){const[l,n]=r.useState([]),[d,c]=r.useState([]),[v,y]=r.useState({}),[M,N]=r.useState({}),i=V({data:s,columns:j,onSortingChange:n,onColumnFiltersChange:c,getCoreRowModel:K(),getPaginationRowModel:A(),getSortedRowModel:_(),getFilteredRowModel:H(),onColumnVisibilityChange:y,onRowSelectionChange:N,state:{sorting:l,columnFilters:d,columnVisibility:v,rowSelection:M}});return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-3 flex flex-col justify-between gap-2 lg:flex-row lg:gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 sm:flex-row",children:[e.jsx(T,{placeholder:"Filtrer par question...",value:i.getColumn("question_text")?.getFilterValue()??"",onChange:t=>i.getColumn("question_text")?.setFilterValue(t.target.value),className:"max-w-sm"}),e.jsxs(f,{children:[e.jsx(w,{asChild:!0,children:e.jsxs(a,{variant:"outline",children:["Colonne ",e.jsx(G,{})]})}),e.jsx(b,{align:"end",children:i.getAllColumns().filter(t=>t.getCanHide()).map(t=>e.jsx(q,{className:"capitalize",checked:t.getIsVisible(),onCheckedChange:o=>t.toggleVisibility(!!o),children:t.id},t.id))})]})]}),e.jsx(C,{quizId:s[0].quize?.id??0,title:s[0].quize?.title??"",className:"btn-primary bg-cblue flex items-center !py-2 text-center text-white"})]}),e.jsx("div",{className:"overflow-hidden rounded-md border",children:e.jsxs(F,{children:[e.jsx(P,{children:i.getHeaderGroups().map(t=>e.jsx(u,{children:t.headers.map(o=>e.jsx(I,{children:o.isPlaceholder?null:x(o.column.columnDef.header,o.getContext())},o.id))},t.id))}),e.jsx(k,{children:i.getRowModel().rows?.length?i.getRowModel().rows.map(t=>e.jsx(u,{"data-state":t.getIsSelected()&&"selected",children:t.getVisibleCells().map(o=>e.jsx(g,{children:x(o.column.columnDef.cell,o.getContext())},o.id))},t.id)):e.jsx(u,{children:e.jsx(g,{colSpan:j.length,className:"h-24 text-center",children:"Pas de résultats."})})})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[i.getFilteredSelectedRowModel().rows.length," sur"," ",i.getFilteredRowModel().rows.length," ligne(s) sélectionné(s)."]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>i.previousPage(),disabled:!i.getCanPreviousPage(),children:"Précédent"}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>i.nextPage(),disabled:!i.getCanNextPage(),children:"Suivant"})]})]})]})}export{j as columns,Ie as default};
