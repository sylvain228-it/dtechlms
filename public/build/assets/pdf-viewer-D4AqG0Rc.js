const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/worker-engine-Ch3J8jLj-Biw_9ENV.js","assets/browser-awZxztMA-DP8ttsSz-e-hp4THE.js","assets/app-BOmU1wmL.js","assets/app-VvtKnDwK.js","assets/app-B0CeYrZw.css","assets/direct-engine-m4-HnUa2-B7YafoK6.js"])))=>i.map(i=>d[i]);
import{_ as zr,r as An,j as gi,c as Ih,u as kh}from"./app-BOmU1wmL.js";function pi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}function Tr(e,t,n,o,i,r,a){try{var s=e[r](a),c=s.value}catch(d){return void n(d)}s.done?t(c):Promise.resolve(c).then(o,i)}function Zs(e){return function(){var t=this,n=arguments;return new Promise(function(o,i){var r=e.apply(t,n);function a(c){Tr(r,o,i,a,s,"next",c)}function s(c){Tr(r,o,i,a,s,"throw",c)}a(void 0)})}}function Ys(e,t,n){return t=yo(t),(function(o,i){if(i&&(typeof i=="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r})(o)})(e,Qs()?Reflect.construct(t,n||[],yo(e).constructor):t.apply(e,n))}function ji(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hi(e,t,n){return t&&(function(o,i){for(var r=0;r<i.length;r++){var a=i[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,el(a.key),a)}})(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xt(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ui(e))||t){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var r,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return a=c.done,c},e:function(c){s=!0,r=c},f:function(){try{a||n.return==null||n.return()}finally{if(s)throw r}}}}function q(e,t,n){return(t=el(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yo(e){return yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yo(e)}function Xs(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fi(e,t)}function Qs(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qs=function(){return!!e})()}function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,o)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Er(Object(n),!0).forEach(function(o){q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Oo(e,t){if(e==null)return{};var n,o,i=(function(a,s){if(a==null)return{};var c={};for(var d in a)if({}.hasOwnProperty.call(a,d)){if(s.indexOf(d)!==-1)continue;c[d]=a[d]}return c})(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function On(){var e,t,n=typeof Symbol=="function"?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function r(g,p,f,v){var y=p&&p.prototype instanceof s?p:s,b=Object.create(y.prototype);return lt(b,"_invoke",(function(x,w,C){var I,k,S,M=0,P=C||[],E=!1,A={p:0,n:0,v:e,a:j,f:j.bind(e,4),d:function(L,H){return I=L,k=0,S=e,A.n=H,a}};function j(L,H){for(k=L,S=H,t=0;!E&&M&&!R&&t<P.length;t++){var R,U=P[t],F=A.p,V=U[2];L>3?(R=V===H)&&(S=U[(k=U[4])?5:(k=3,3)],U[4]=U[5]=e):U[0]<=F&&((R=L<2&&F<U[1])?(k=0,A.v=H,A.n=U[1]):F<V&&(R=L<3||U[0]>H||H>V)&&(U[4]=L,U[5]=H,A.n=V,k=0))}if(R||L>1)return a;throw E=!0,H}return function(L,H,R){if(M>1)throw TypeError("Generator is already running");for(E&&H===1&&j(H,R),k=H,S=R;(t=k<2?e:S)||!E;){I||(k?k<3?(k>1&&(A.n=-1),j(k,S)):A.n=S:A.v=S);try{if(M=2,I){if(k||(L="next"),t=I[L]){if(!(t=t.call(I,S)))throw TypeError("iterator result is not an object");if(!t.done)return t;S=t.value,k<2&&(k=0)}else k===1&&(t=I.return)&&t.call(I),k<2&&(S=TypeError("The iterator does not provide a '"+L+"' method"),k=1);I=e}else if((t=(E=A.n<0)?S:x.call(w,A))!==a)break}catch(U){I=e,k=1,S=U}finally{M=1}}return{value:t,done:E}}})(g,f,v),!0),b}var a={};function s(){}function c(){}function d(){}t=Object.getPrototypeOf;var u=[][o]?t(t([][o]())):(lt(t={},o,function(){return this}),t),m=d.prototype=s.prototype=Object.create(u);function h(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,d):(g.__proto__=d,lt(g,i,"GeneratorFunction")),g.prototype=Object.create(m),g}return c.prototype=d,lt(m,"constructor",d),lt(d,"constructor",c),c.displayName="GeneratorFunction",lt(d,i,"GeneratorFunction"),lt(m),lt(m,i,"Generator"),lt(m,o,function(){return this}),lt(m,"toString",function(){return"[object Generator]"}),(On=function(){return{w:r,m:h}})()}function lt(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}lt=function(r,a,s,c){function d(u,m){lt(r,u,function(h){return this._invoke(u,m,h)})}a?i?i(r,a,{value:s,enumerable:!c,configurable:!c,writable:!c}):r[a]=s:(d("next",0),d("throw",1),d("return",2))},lt(e,t,n,o)}function fi(e,t){return fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},fi(e,t)}function $(e,t){return(function(n){if(Array.isArray(n))return n})(e)||(function(n,o){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var r,a,s,c,d=[],u=!0,m=!1;try{if(s=(i=i.call(n)).next,o!==0)for(;!(u=(r=s.call(i)).done)&&(d.push(r.value),d.length!==o);u=!0);}catch(h){m=!0,a=h}finally{try{if(!u&&i.return!=null&&(c=i.return(),Object(c)!==c))return}finally{if(m)throw a}}return d}})(e,t)||Ui(e,t)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Js(e){return(function(t){if(Array.isArray(t))return pi(t)})(e)||(function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)})(e)||Ui(e)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function el(e){var t=(function(n,o){if(typeof n!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var r=i.call(n,o);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(n)})(e,"string");return typeof t=="symbol"?t:t+""}function bo(e){return bo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(e)}function Ui(e,t){if(e){if(typeof e=="string")return pi(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pi(e,t):void 0}}var Lo,se,tl,Zt,_r,nl,ol,il,Wi,vi,yi,rl,Ln={},al=[],Sh=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Wn=Array.isArray;function Tt(e,t){for(var n in t)e[n]=t[n];return e}function Bi(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function l(e,t,n){var o,i,r,a={};for(r in t)r=="key"?o=t[r]:r=="ref"?i=t[r]:a[r]=t[r];if(arguments.length>2&&(a.children=arguments.length>3?Lo.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)a[r]===void 0&&(a[r]=e.defaultProps[r]);return ho(e,a,o,i,null)}function ho(e,t,n,o,i){var r={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++tl,__i:-1,__u:0};return i==null&&se.vnode!=null&&se.vnode(r),r}function Y(e){return e.children}function Ct(e,t){this.props=e,this.context=t}function xn(e,t){if(t==null)return e.__?xn(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?xn(e):null}function sl(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return sl(e)}}function bi(e){(!e.__d&&(e.__d=!0)&&Zt.push(e)&&!wo.__r++||_r!=se.debounceRendering)&&((_r=se.debounceRendering)||nl)(wo)}function wo(){for(var e,t,n,o,i,r,a,s=1;Zt.length;)Zt.length>s&&Zt.sort(ol),e=Zt.shift(),s=Zt.length,e.__d&&(n=void 0,o=void 0,i=(o=(t=e).__v).__e,r=[],a=[],t.__P&&((n=Tt({},o)).__v=o.__v+1,se.vnode&&se.vnode(n),qi(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[i]:null,r,i??xn(o),!!(32&o.__u),a),n.__v=o.__v,n.__.__k[n.__i]=n,dl(r,n,a),o.__e=o.__=null,n.__e!=i&&sl(n)));wo.__r=0}function ll(e,t,n,o,i,r,a,s,c,d,u){var m,h,g,p,f,v,y,b=o&&o.__k||al,x=t.length;for(c=(function(w,C,I,k,S){var M,P,E,A,j,L=I.length,H=L,R=0;for(w.__k=new Array(S),M=0;M<S;M++)(P=C[M])!=null&&typeof P!="boolean"&&typeof P!="function"?(typeof P=="string"||typeof P=="number"||typeof P=="bigint"||P.constructor==String?P=w.__k[M]=ho(null,P,null,null,null):Wn(P)?P=w.__k[M]=ho(Y,{children:P},null,null,null):P.constructor==null&&P.__b>0?P=w.__k[M]=ho(P.type,P.props,P.key,P.ref?P.ref:null,P.__v):w.__k[M]=P,A=M+R,P.__=w,P.__b=w.__b+1,(j=P.__i=Ph(P,I,A,H))!=-1&&(H--,(E=I[j])&&(E.__u|=2)),E==null||E.__v==null?(j==-1&&(S>L?R--:S<L&&R++),typeof P.type!="function"&&(P.__u|=4)):j!=A&&(j==A-1?R--:j==A+1?R++:(j>A?R--:R++,P.__u|=4))):w.__k[M]=null;if(H)for(M=0;M<L;M++)(E=I[M])!=null&&!(2&E.__u)&&(E.__e==k&&(k=xn(E)),ml(E,E));return k})(n,t,b,c,x),m=0;m<x;m++)(g=n.__k[m])!=null&&(h=g.__i==-1?Ln:b[g.__i]||Ln,g.__i=m,v=qi(e,g,h,i,r,a,s,c,d,u),p=g.__e,g.ref&&h.ref!=g.ref&&(h.ref&&Gi(h.ref,null,g),u.push(g.ref,g.__c||p,g)),f==null&&p!=null&&(f=p),(y=!!(4&g.__u))||h.__k===g.__k?c=cl(g,c,e,y):typeof g.type=="function"&&v!==void 0?c=v:p&&(c=p.nextSibling),g.__u&=-7);return n.__e=f,c}function cl(e,t,n,o){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=cl(i[r],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=xn(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function xo(e,t){return t=t||[],e==null||typeof e=="boolean"||(Wn(e)?e.some(function(n){xo(n,t)}):t.push(e)),t}function Ph(e,t,n,o){var i,r,a,s=e.key,c=e.type,d=t[n],u=d!=null&&!(2&d.__u);if(d===null&&s==null||u&&s==d.key&&c==d.type)return n;if(o>(u?1:0)){for(i=n-1,r=n+1;i>=0||r<t.length;)if((d=t[a=i>=0?i--:r++])!=null&&!(2&d.__u)&&s==d.key&&c==d.type)return a}return-1}function Rr(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||Sh.test(t)?n:n+"px"}function Yn(e,t,n,o,i){var r,a;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||Rr(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||Rr(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")r=t!=(t=t.replace(il,"$1")),a=t.toLowerCase(),t=a in e||t=="onFocusOut"||t=="onFocusIn"?a.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+r]=n,n?o?n.u=o.u:(n.u=Wi,e.addEventListener(t,r?yi:vi,r)):e.removeEventListener(t,r?yi:vi,r);else{if(i=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Nr(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Wi++;else if(t.t<n.u)return;return n(se.event?se.event(t):t)}}}function qi(e,t,n,o,i,r,a,s,c,d){var u,m,h,g,p,f,v,y,b,x,w,C,I,k,S,M,P,E=t.type;if(t.constructor!=null)return null;128&n.__u&&(c=!!(32&n.__u),r=[s=t.__e=n.__e]),(u=se.__b)&&u(t);e:if(typeof E=="function")try{if(y=t.props,b="prototype"in E&&E.prototype.render,x=(u=E.contextType)&&o[u.__c],w=u?x?x.props.value:u.__:o,n.__c?v=(m=t.__c=n.__c).__=m.__E:(b?t.__c=m=new E(y,w):(t.__c=m=new Ct(y,w),m.constructor=E,m.render=Mh),x&&x.sub(m),m.state||(m.state={}),m.__n=o,h=m.__d=!0,m.__h=[],m._sb=[]),b&&m.__s==null&&(m.__s=m.state),b&&E.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=Tt({},m.__s)),Tt(m.__s,E.getDerivedStateFromProps(y,m.__s))),g=m.props,p=m.state,m.__v=t,h)b&&E.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),b&&m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(b&&E.getDerivedStateFromProps==null&&y!==g&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(y,w),t.__v==n.__v||!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(y,m.__s,w)===!1){for(t.__v!=n.__v&&(m.props=y,m.state=m.__s,m.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(A){A&&(A.__=t)}),C=0;C<m._sb.length;C++)m.__h.push(m._sb[C]);m._sb=[],m.__h.length&&a.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(y,m.__s,w),b&&m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(g,p,f)})}if(m.context=w,m.props=y,m.__P=e,m.__e=!1,I=se.__r,k=0,b){for(m.state=m.__s,m.__d=!1,I&&I(t),u=m.render(m.props,m.state,m.context),S=0;S<m._sb.length;S++)m.__h.push(m._sb[S]);m._sb=[]}else do m.__d=!1,I&&I(t),u=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++k<25);m.state=m.__s,m.getChildContext!=null&&(o=Tt(Tt({},o),m.getChildContext())),b&&!h&&m.getSnapshotBeforeUpdate!=null&&(f=m.getSnapshotBeforeUpdate(g,p)),M=u,u!=null&&u.type===Y&&u.key==null&&(M=ul(u.props.children)),s=ll(e,Wn(M)?M:[M],t,n,o,i,r,a,s,c,d),m.base=t.__e,t.__u&=-161,m.__h.length&&a.push(m),v&&(m.__E=m.__=null)}catch(A){if(t.__v=null,c||r!=null)if(A.then){for(t.__u|=c?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;r[r.indexOf(s)]=null,t.__e=s}else{for(P=r.length;P--;)Bi(r[P]);wi(t)}else t.__e=n.__e,t.__k=n.__k,A.then||wi(t);se.__e(A,t,n)}else r==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):s=t.__e=Dh(n.__e,t,n,o,i,r,a,c,d);return(u=se.diffed)&&u(t),128&t.__u?void 0:s}function wi(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(wi)}function dl(e,t,n){for(var o=0;o<n.length;o++)Gi(n[o],n[++o],n[++o]);se.__c&&se.__c(t,e),e.some(function(i){try{e=i.__h,i.__h=[],e.some(function(r){r.call(i)})}catch(r){se.__e(r,i.__v)}})}function ul(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Wn(e)?e.map(ul):Tt({},e)}function Dh(e,t,n,o,i,r,a,s,c){var d,u,m,h,g,p,f,v=n.props||Ln,y=t.props,b=t.type;if(b=="svg"?i="http://www.w3.org/2000/svg":b=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),r!=null){for(d=0;d<r.length;d++)if((g=r[d])&&"setAttribute"in g==!!b&&(b?g.localName==b:g.nodeType==3)){e=g,r[d]=null;break}}if(e==null){if(b==null)return document.createTextNode(y);e=document.createElementNS(i,b,y.is&&y),s&&(se.__m&&se.__m(t,r),s=!1),r=null}if(b==null)v===y||s&&e.data==y||(e.data=y);else{if(r=r&&Lo.call(e.childNodes),!s&&r!=null)for(v={},d=0;d<e.attributes.length;d++)v[(g=e.attributes[d]).name]=g.value;for(d in v)if(g=v[d],d!="children"){if(d=="dangerouslySetInnerHTML")m=g;else if(!(d in y)){if(d=="value"&&"defaultValue"in y||d=="checked"&&"defaultChecked"in y)continue;Yn(e,d,null,g,i)}}for(d in y)g=y[d],d=="children"?h=g:d=="dangerouslySetInnerHTML"?u=g:d=="value"?p=g:d=="checked"?f=g:s&&typeof g!="function"||v[d]===g||Yn(e,d,g,v[d],i);if(u)s||m&&(u.__html==m.__html||u.__html==e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(m&&(e.innerHTML=""),ll(t.type=="template"?e.content:e,Wn(h)?h:[h],t,n,o,b=="foreignObject"?"http://www.w3.org/1999/xhtml":i,r,a,r?r[0]:n.__k&&xn(n,0),s,c),r!=null)for(d=r.length;d--;)Bi(r[d]);s||(d="value",b=="progress"&&p==null?e.removeAttribute("value"):p!=null&&(p!==e[d]||b=="progress"&&!p||b=="option"&&p!=v[d])&&Yn(e,d,p,v[d],i),d="checked",f!=null&&f!=e[d]&&Yn(e,d,f,v[d],i))}return e}function Gi(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(i){se.__e(i,n)}}function ml(e,t,n){var o,i;if(se.unmount&&se.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||Gi(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(r){se.__e(r,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&ml(o[i],t,n||typeof e.type!="function");n||Bi(e.__e),e.__c=e.__=e.__e=void 0}function Mh(e,t,n){return this.constructor(e,n)}function xi(e,t,n){var o,i,r;t==document&&(t=document.documentElement),se.__&&se.__(e,t),o=t.__k,i=[],r=[],qi(t,e=t.__k=l(Y,null,[e]),o||Ln,Ln,t.namespaceURI,o?null:t.firstChild?Lo.call(t.childNodes):null,i,o?o.__e:t.firstChild,!1,r),dl(i,e,r)}function rn(e){function t(n){var o,i;return this.getChildContext||(o=new Set,(i={})[t.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){o=null},this.shouldComponentUpdate=function(r){this.props.value!=r.value&&o.forEach(function(a){a.__e=!0,bi(a)})},this.sub=function(r){o.add(r);var a=r.componentWillUnmount;r.componentWillUnmount=function(){o&&o.delete(r),a&&a.call(r)}}),n.children}return t.__c="__cC"+rl++,t.__=e,t.Provider=t.__l=(t.Consumer=function(n,o){return n.children(o)}).contextType=t,t}Lo=al.slice,se={__e:function(e,t,n,o){for(var i,r,a;t=t.__;)if((i=t.__c)&&!i.__)try{if((r=i.constructor)&&r.getDerivedStateFromError!=null&&(i.setState(r.getDerivedStateFromError(e)),a=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(e,o||{}),a=i.__d),a)return i.__E=i}catch(s){e=s}throw e}},tl=0,Ct.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Tt({},this.state),typeof e=="function"&&(e=e(Tt({},n),this.props)),e&&Tt(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),bi(this))},Ct.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),bi(this))},Ct.prototype.render=Y,Zt=[],nl=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ol=function(e,t){return e.__v.__b-t.__v.__b},wo.__r=0,il=/(PointerCapture)$|Capture$/i,Wi=0,vi=Nr(!1),yi=Nr(!0),rl=0;var en,Te,ei,Or,$n=0,hl=[],Re=se,Lr=Re.__b,$r=Re.__r,Fr=Re.diffed,jr=Re.__c,Hr=Re.unmount,Ur=Re.__;function Bn(e,t){Re.__h&&Re.__h(Te,e,$n||t),$n=0;var n=Te.__H||(Te.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function z(e){return $n=1,gl(pl,e)}function gl(e,t,n){var o=Bn(en++,2);if(o.t=e,!o.__c&&(o.__=[pl(void 0,t),function(s){var c=o.__N?o.__N[0]:o.__[0],d=o.t(c,s);c!==d&&(o.__N=[d,o.__[1]],o.__c.setState({}))}],o.__c=Te,!Te.__f)){var i=function(s,c,d){if(!o.__c.__H)return!0;var u=o.__c.__H.__.filter(function(h){return!!h.__c});if(u.every(function(h){return!h.__N}))return!r||r.call(this,s,c,d);var m=o.__c.props!==s;return u.forEach(function(h){if(h.__N){var g=h.__[0];h.__=h.__N,h.__N=void 0,g!==h.__[0]&&(m=!0)}}),r&&r.call(this,s,c,d)||m};Te.__f=!0;var r=Te.shouldComponentUpdate,a=Te.componentWillUpdate;Te.componentWillUpdate=function(s,c,d){if(this.__e){var u=r;r=void 0,i(s,c,d),r=u}a&&a.call(this,s,c,d)},Te.shouldComponentUpdate=i}return o.__N||o.__}function T(e,t){var n=Bn(en++,3);!Re.__s&&Vi(n.__H,t)&&(n.__=e,n.u=t,Te.__H.__h.push(n))}function $o(e,t){var n=Bn(en++,4);!Re.__s&&Vi(n.__H,t)&&(n.__=e,n.u=t,Te.__h.push(n))}function K(e){return $n=5,X(function(){return{current:e}},[])}function X(e,t){var n=Bn(en++,7);return Vi(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function te(e,t){return $n=8,X(function(){return e},t)}function an(e){var t=Te.context[e.__c],n=Bn(en++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(Te)),t.props.value):e.__}function Ah(){for(var e;e=hl.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(go),e.__H.__h.forEach(Ci),e.__H.__h=[]}catch(t){e.__H.__h=[],Re.__e(t,e.__v)}}Re.__b=function(e){Te=null,Lr&&Lr(e)},Re.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ur&&Ur(e,t)},Re.__r=function(e){$r&&$r(e),en=0;var t=(Te=e.__c).__H;t&&(ei===Te?(t.__h=[],Te.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(go),t.__h.forEach(Ci),t.__h=[],en=0)),ei=Te},Re.diffed=function(e){Fr&&Fr(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(hl.push(t)!==1&&Or===Re.requestAnimationFrame||((Or=Re.requestAnimationFrame)||zh)(Ah)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ei=Te=null},Re.__c=function(e,t){t.some(function(n){try{n.__h.forEach(go),n.__h=n.__h.filter(function(o){return!o.__||Ci(o)})}catch(o){t.some(function(i){i.__h&&(i.__h=[])}),t=[],Re.__e(o,n.__v)}}),jr&&jr(e,t)},Re.unmount=function(e){Hr&&Hr(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{go(o)}catch(i){t=i}}),n.__H=void 0,t&&Re.__e(t,n.__v))};var Wr=typeof requestAnimationFrame=="function";function zh(e){var t,n=function(){clearTimeout(o),Wr&&cancelAnimationFrame(t),setTimeout(e)},o=setTimeout(n,35);Wr&&(t=requestAnimationFrame(n))}function go(e){var t=Te,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),Te=t}function Ci(e){var t=Te;e.__c=e.__(),Te=t}function Vi(e,t){return!e||e.length!==t.length||t.some(function(n,o){return n!==e[o]})}function pl(e,t){return typeof t=="function"?t(e):t}var Th=`/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */
@layer properties;
@layer theme, base, components, utilities;
@layer theme {
  :root, :host {
    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",
      "Courier New", monospace;
    --color-red-500: oklch(63.7% 0.237 25.331);
    --color-yellow-500: oklch(79.5% 0.184 86.047);
    --color-green-500: oklch(72.3% 0.219 149.579);
    --color-teal-500: oklch(70.4% 0.14 182.503);
    --color-blue-500: oklch(62.3% 0.214 259.815);
    --color-indigo-500: oklch(58.5% 0.233 277.117);
    --color-purple-500: oklch(62.7% 0.265 303.9);
    --color-pink-500: oklch(65.6% 0.241 354.308);
    --color-gray-300: oklch(87.2% 0.01 258.338);
    --color-white: #fff;
    --spacing: 0.25rem;
    --container-sm: 24rem;
    --text-xs: 0.75rem;
    --text-xs--line-height: calc(1 / 0.75);
    --text-sm: 0.875rem;
    --text-sm--line-height: calc(1.25 / 0.875);
    --text-base: 1rem;
    --text-base--line-height: calc(1.5 / 1);
    --text-lg: 1.125rem;
    --text-lg--line-height: calc(1.75 / 1.125);
    --text-xl: 1.25rem;
    --text-xl--line-height: calc(1.75 / 1.25);
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;
    --leading-relaxed: 1.625;
    --radius-md: 0.375rem;
    --radius-lg: 0.5rem;
    --radius-xl: 0.75rem;
    --radius-2xl: 1rem;
    --ease-out: cubic-bezier(0, 0, 0.2, 1);
    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
    --animate-spin: spin 1s linear infinite;
    --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    --default-transition-duration: 150ms;
    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    --default-font-family: var(--font-sans);
    --default-mono-font-family: var(--font-mono);
    --color-bg-app: var(--ep-background-app);
    --color-bg-surface: var(--ep-background-surface);
    --color-bg-surface-alt: var(--ep-background-surface-alt);
    --color-bg-elevated: var(--ep-background-elevated);
    --color-bg-overlay: var(--ep-background-overlay);
    --color-bg-input: var(--ep-background-input);
    --color-fg-primary: var(--ep-foreground-primary);
    --color-fg-secondary: var(--ep-foreground-secondary);
    --color-fg-muted: var(--ep-foreground-muted);
    --color-fg-disabled: var(--ep-foreground-disabled);
    --color-fg-on-accent: var(--ep-foreground-on-accent);
    --color-border-default: var(--ep-border-default);
    --color-border-subtle: var(--ep-border-subtle);
    --color-border-strong: var(--ep-border-strong);
    --color-accent: var(--ep-accent-primary);
    --color-accent-hover: var(--ep-accent-primary-hover);
    --color-accent-light: var(--ep-accent-primary-light);
    --color-accent-fg: var(--ep-accent-primary-foreground);
    --color-interactive-hover: var(--ep-interactive-hover);
    --color-interactive-active: var(--ep-interactive-active);
    --color-interactive-selected: var(--ep-interactive-selected);
    --color-interactive-focus-ring: var(--ep-interactive-focus-ring);
    --color-state-error: var(--ep-state-error);
    --color-state-error-light: var(--ep-state-error-light);
    --color-state-warning: var(--ep-state-warning);
    --color-state-warning-light: var(--ep-state-warning-light);
    --color-state-success: var(--ep-state-success);
    --color-state-success-light: var(--ep-state-success-light);
    --color-state-info-light: var(--ep-state-info-light);
    --color-tooltip-bg: var(--ep-tooltip-background);
    --color-tooltip-fg: var(--ep-tooltip-foreground);
  }
}
@layer base {
  *, ::after, ::before, ::backdrop, ::file-selector-button {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
    border: 0 solid;
  }
  html, :host {
    line-height: 1.5;
    -webkit-text-size-adjust: 100%;
    -moz-tab-size: 4;
      -o-tab-size: 4;
         tab-size: 4;
    font-family: var(--default-font-family, ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji");
    font-feature-settings: var(--default-font-feature-settings, normal);
    font-variation-settings: var(--default-font-variation-settings, normal);
    -webkit-tap-highlight-color: transparent;
  }
  hr {
    height: 0;
    color: inherit;
    border-top-width: 1px;
  }
  abbr:where([title]) {
    -webkit-text-decoration: underline dotted;
    text-decoration: underline dotted;
  }
  h1, h2, h3, h4, h5, h6 {
    font-size: inherit;
    font-weight: inherit;
  }
  a {
    color: inherit;
    -webkit-text-decoration: inherit;
    text-decoration: inherit;
  }
  b, strong {
    font-weight: bolder;
  }
  code, kbd, samp, pre {
    font-family: var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace);
    font-feature-settings: var(--default-mono-font-feature-settings, normal);
    font-variation-settings: var(--default-mono-font-variation-settings, normal);
    font-size: 1em;
  }
  small {
    font-size: 80%;
  }
  sub, sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
  }
  sub {
    bottom: -0.25em;
  }
  sup {
    top: -0.5em;
  }
  table {
    text-indent: 0;
    border-color: inherit;
    border-collapse: collapse;
  }
  :-moz-focusring {
    outline: auto;
  }
  progress {
    vertical-align: baseline;
  }
  summary {
    display: list-item;
  }
  ol, ul, menu {
    list-style: none;
  }
  img, svg, video, canvas, audio, iframe, embed, object {
    display: block;
    vertical-align: middle;
  }
  img, video {
    max-width: 100%;
    height: auto;
  }
  button, input, select, optgroup, textarea, ::file-selector-button {
    font: inherit;
    font-feature-settings: inherit;
    font-variation-settings: inherit;
    letter-spacing: inherit;
    color: inherit;
    border-radius: 0;
    background-color: transparent;
    opacity: 1;
  }
  :where(select:is([multiple], [size])) optgroup {
    font-weight: bolder;
  }
  :where(select:is([multiple], [size])) optgroup option {
    padding-inline-start: 20px;
  }
  ::file-selector-button {
    margin-inline-end: 4px;
  }
  ::-moz-placeholder {
    opacity: 1;
  }
  ::placeholder {
    opacity: 1;
  }
  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {
    ::-moz-placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
    ::placeholder {
      color: currentcolor;
      @supports (color: color-mix(in lab, red, red)) {
        color: color-mix(in oklab, currentcolor 50%, transparent);
      }
    }
  }
  textarea {
    resize: vertical;
  }
  ::-webkit-search-decoration {
    -webkit-appearance: none;
  }
  ::-webkit-date-and-time-value {
    min-height: 1lh;
    text-align: inherit;
  }
  ::-webkit-datetime-edit {
    display: inline-flex;
  }
  ::-webkit-datetime-edit-fields-wrapper {
    padding: 0;
  }
  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {
    padding-block: 0;
  }
  ::-webkit-calendar-picker-indicator {
    line-height: 1;
  }
  :-moz-ui-invalid {
    box-shadow: none;
  }
  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {
    -webkit-appearance: button;
       -moz-appearance: button;
            appearance: button;
  }
  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {
    height: auto;
  }
  [hidden]:where(:not([hidden="until-found"])) {
    display: none !important;
  }
}
@layer utilities {
  .pointer-events-auto {
    pointer-events: auto;
  }
  .pointer-events-none {
    pointer-events: none;
  }
  .visible {
    visibility: visible;
  }
  .absolute {
    position: absolute;
  }
  .fixed {
    position: fixed;
  }
  .relative {
    position: relative;
  }
  .static {
    position: static;
  }
  .sticky {
    position: sticky;
  }
  .inset-0 {
    inset: calc(var(--spacing) * 0);
  }
  .inset-x-0 {
    inset-inline: calc(var(--spacing) * 0);
  }
  .inset-y-0 {
    inset-block: calc(var(--spacing) * 0);
  }
  .top-0 {
    top: calc(var(--spacing) * 0);
  }
  .top-1\\/2 {
    top: calc(1/2 * 100%);
  }
  .top-4 {
    top: calc(var(--spacing) * 4);
  }
  .top-6 {
    top: calc(var(--spacing) * 6);
  }
  .right-0 {
    right: calc(var(--spacing) * 0);
  }
  .right-1 {
    right: calc(var(--spacing) * 1);
  }
  .right-2 {
    right: calc(var(--spacing) * 2);
  }
  .right-4 {
    right: calc(var(--spacing) * 4);
  }
  .bottom-0 {
    bottom: calc(var(--spacing) * 0);
  }
  .left-0 {
    left: calc(var(--spacing) * 0);
  }
  .left-1\\/2 {
    left: calc(1/2 * 100%);
  }
  .z-10 {
    z-index: 10;
  }
  .z-40 {
    z-index: 40;
  }
  .z-50 {
    z-index: 50;
  }
  .z-100 {
    z-index: 100;
  }
  .col-start-1 {
    grid-column-start: 1;
  }
  .row-start-1 {
    grid-row-start: 1;
  }
  .container {
    width: 100%;
    @media (width >= 40rem) {
      max-width: 40rem;
    }
    @media (width >= 48rem) {
      max-width: 48rem;
    }
    @media (width >= 64rem) {
      max-width: 64rem;
    }
    @media (width >= 80rem) {
      max-width: 80rem;
    }
    @media (width >= 96rem) {
      max-width: 96rem;
    }
  }
  .mx-4 {
    margin-inline: calc(var(--spacing) * 4);
  }
  .my-2 {
    margin-block: calc(var(--spacing) * 2);
  }
  .my-4 {
    margin-block: calc(var(--spacing) * 4);
  }
  .-mt-1 {
    margin-top: calc(var(--spacing) * -1);
  }
  .mt-0\\.5 {
    margin-top: calc(var(--spacing) * 0.5);
  }
  .mt-1 {
    margin-top: calc(var(--spacing) * 1);
  }
  .mt-2 {
    margin-top: calc(var(--spacing) * 2);
  }
  .mt-3 {
    margin-top: calc(var(--spacing) * 3);
  }
  .mt-4 {
    margin-top: calc(var(--spacing) * 4);
  }
  .mt-5 {
    margin-top: calc(var(--spacing) * 5);
  }
  .mt-6 {
    margin-top: calc(var(--spacing) * 6);
  }
  .-mr-1 {
    margin-right: calc(var(--spacing) * -1);
  }
  .mr-2 {
    margin-right: calc(var(--spacing) * 2);
  }
  .mr-3 {
    margin-right: calc(var(--spacing) * 3);
  }
  .mr-4 {
    margin-right: calc(var(--spacing) * 4);
  }
  .mb-1 {
    margin-bottom: calc(var(--spacing) * 1);
  }
  .mb-1\\.5 {
    margin-bottom: calc(var(--spacing) * 1.5);
  }
  .mb-2 {
    margin-bottom: calc(var(--spacing) * 2);
  }
  .mb-3 {
    margin-bottom: calc(var(--spacing) * 3);
  }
  .mb-4 {
    margin-bottom: calc(var(--spacing) * 4);
  }
  .mb-6 {
    margin-bottom: calc(var(--spacing) * 6);
  }
  .ml-1 {
    margin-left: calc(var(--spacing) * 1);
  }
  .block {
    display: block;
  }
  .contents {
    display: contents;
  }
  .flex {
    display: flex;
  }
  .grid {
    display: grid;
  }
  .hidden {
    display: none;
  }
  .inline {
    display: inline;
  }
  .inline-block {
    display: inline-block;
  }
  .inline-flex {
    display: inline-flex;
  }
  .h-1 {
    height: calc(var(--spacing) * 1);
  }
  .h-1\\.5 {
    height: calc(var(--spacing) * 1.5);
  }
  .h-2 {
    height: calc(var(--spacing) * 2);
  }
  .h-3 {
    height: calc(var(--spacing) * 3);
  }
  .h-3\\.5 {
    height: calc(var(--spacing) * 3.5);
  }
  .h-4 {
    height: calc(var(--spacing) * 4);
  }
  .h-5 {
    height: calc(var(--spacing) * 5);
  }
  .h-6 {
    height: calc(var(--spacing) * 6);
  }
  .h-7 {
    height: calc(var(--spacing) * 7);
  }
  .h-8 {
    height: calc(var(--spacing) * 8);
  }
  .h-9 {
    height: calc(var(--spacing) * 9);
  }
  .h-10 {
    height: calc(var(--spacing) * 10);
  }
  .h-16 {
    height: calc(var(--spacing) * 16);
  }
  .h-18 {
    height: calc(var(--spacing) * 18);
  }
  .h-\\[32px\\] {
    height: 32px;
  }
  .h-full {
    height: 100%;
  }
  .h-px {
    height: 1px;
  }
  .max-h-48 {
    max-height: calc(var(--spacing) * 48);
  }
  .max-h-60 {
    max-height: calc(var(--spacing) * 60);
  }
  .min-h-0 {
    min-height: calc(var(--spacing) * 0);
  }
  .\\!w-full {
    width: 100% !important;
  }
  .w-2 {
    width: calc(var(--spacing) * 2);
  }
  .w-3 {
    width: calc(var(--spacing) * 3);
  }
  .w-3\\.5 {
    width: calc(var(--spacing) * 3.5);
  }
  .w-4 {
    width: calc(var(--spacing) * 4);
  }
  .w-5 {
    width: calc(var(--spacing) * 5);
  }
  .w-6 {
    width: calc(var(--spacing) * 6);
  }
  .w-8 {
    width: calc(var(--spacing) * 8);
  }
  .w-9 {
    width: calc(var(--spacing) * 9);
  }
  .w-10 {
    width: calc(var(--spacing) * 10);
  }
  .w-12 {
    width: calc(var(--spacing) * 12);
  }
  .w-16 {
    width: calc(var(--spacing) * 16);
  }
  .w-18 {
    width: calc(var(--spacing) * 18);
  }
  .w-32 {
    width: calc(var(--spacing) * 32);
  }
  .w-36 {
    width: calc(var(--spacing) * 36);
  }
  .w-\\[32px\\] {
    width: 32px;
  }
  .w-auto {
    width: auto;
  }
  .w-full {
    width: 100%;
  }
  .w-px {
    width: 1px;
  }
  .max-w-\\[150px\\] {
    max-width: 150px;
  }
  .max-w-\\[240px\\] {
    max-width: 240px;
  }
  .max-w-sm {
    max-width: var(--container-sm);
  }
  .min-w-0 {
    min-width: calc(var(--spacing) * 0);
  }
  .min-w-\\[8rem\\] {
    min-width: 8rem;
  }
  .min-w-\\[32px\\] {
    min-width: 32px;
  }
  .min-w-\\[120px\\] {
    min-width: 120px;
  }
  .min-w-\\[200px\\] {
    min-width: 200px;
  }
  .flex-1 {
    flex: 1;
  }
  .flex-shrink-0 {
    flex-shrink: 0;
  }
  .shrink-0 {
    flex-shrink: 0;
  }
  .-translate-x-1\\/2 {
    --tw-translate-x: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-x-\\[1px\\] {
    --tw-translate-x: 1px;
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .-translate-y-1\\/2 {
    --tw-translate-y: calc(calc(1/2 * 100%) * -1);
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .translate-y-\\[1px\\] {
    --tw-translate-y: 1px;
    translate: var(--tw-translate-x) var(--tw-translate-y);
  }
  .scale-95 {
    --tw-scale-x: 95%;
    --tw-scale-y: 95%;
    --tw-scale-z: 95%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .scale-100 {
    --tw-scale-x: 100%;
    --tw-scale-y: 100%;
    --tw-scale-z: 100%;
    scale: var(--tw-scale-x) var(--tw-scale-y);
  }
  .rotate-45 {
    rotate: 45deg;
  }
  .transform {
    transform: var(--tw-rotate-x,) var(--tw-rotate-y,) var(--tw-rotate-z,) var(--tw-skew-x,) var(--tw-skew-y,);
  }
  .animate-pulse {
    animation: var(--animate-pulse);
  }
  .animate-spin {
    animation: var(--animate-spin);
  }
  .cursor-default {
    cursor: default;
  }
  .cursor-grab {
    cursor: grab;
  }
  .cursor-not-allowed {
    cursor: not-allowed;
  }
  .cursor-pointer {
    cursor: pointer;
  }
  .touch-none {
    touch-action: none;
  }
  .resize {
    resize: both;
  }
  .appearance-none {
    -webkit-appearance: none;
       -moz-appearance: none;
            appearance: none;
  }
  .grid-cols-1 {
    grid-template-columns: repeat(1, minmax(0, 1fr));
  }
  .grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .grid-cols-6 {
    grid-template-columns: repeat(6, minmax(0, 1fr));
  }
  .flex-col {
    flex-direction: column;
  }
  .flex-row {
    flex-direction: row;
  }
  .flex-wrap {
    flex-wrap: wrap;
  }
  .items-center {
    align-items: center;
  }
  .items-end {
    align-items: flex-end;
  }
  .items-start {
    align-items: flex-start;
  }
  .justify-between {
    justify-content: space-between;
  }
  .justify-center {
    justify-content: center;
  }
  .justify-end {
    justify-content: flex-end;
  }
  .justify-start {
    justify-content: flex-start;
  }
  .gap-1 {
    gap: calc(var(--spacing) * 1);
  }
  .gap-2 {
    gap: calc(var(--spacing) * 2);
  }
  .gap-3 {
    gap: calc(var(--spacing) * 3);
  }
  .gap-4 {
    gap: calc(var(--spacing) * 4);
  }
  .space-y-2 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-3 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 3) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-4 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 4) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 4) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-5 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 5) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 5) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .space-y-6 {
    :where(& > :not(:last-child)) {
      --tw-space-y-reverse: 0;
      margin-block-start: calc(calc(var(--spacing) * 6) * var(--tw-space-y-reverse));
      margin-block-end: calc(calc(var(--spacing) * 6) * calc(1 - var(--tw-space-y-reverse)));
    }
  }
  .gap-x-1 {
    -moz-column-gap: calc(var(--spacing) * 1);
         column-gap: calc(var(--spacing) * 1);
  }
  .space-x-2 {
    :where(& > :not(:last-child)) {
      --tw-space-x-reverse: 0;
      margin-inline-start: calc(calc(var(--spacing) * 2) * var(--tw-space-x-reverse));
      margin-inline-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-x-reverse)));
    }
  }
  .space-x-3 {
    :where(& > :not(:last-child)) {
      --tw-space-x-reverse: 0;
      margin-inline-start: calc(calc(var(--spacing) * 3) * var(--tw-space-x-reverse));
      margin-inline-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-x-reverse)));
    }
  }
  .gap-y-4 {
    row-gap: calc(var(--spacing) * 4);
  }
  .divide-y {
    :where(& > :not(:last-child)) {
      --tw-divide-y-reverse: 0;
      border-bottom-style: var(--tw-border-style);
      border-top-style: var(--tw-border-style);
      border-top-width: calc(1px * var(--tw-divide-y-reverse));
      border-bottom-width: calc(1px * calc(1 - var(--tw-divide-y-reverse)));
    }
  }
  .divide-border-subtle {
    :where(& > :not(:last-child)) {
      border-color: var(--color-border-subtle);
    }
  }
  .truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .overflow-auto {
    overflow: auto;
  }
  .overflow-hidden {
    overflow: hidden;
  }
  .overflow-x-auto {
    overflow-x: auto;
  }
  .overflow-y-auto {
    overflow-y: auto;
  }
  .rounded {
    border-radius: 0.25rem;
  }
  .rounded-\\[3px\\] {
    border-radius: 3px;
  }
  .rounded-full {
    border-radius: calc(infinity * 1px);
  }
  .rounded-lg {
    border-radius: var(--radius-lg);
  }
  .rounded-md {
    border-radius: var(--radius-md);
  }
  .rounded-none {
    border-radius: 0;
  }
  .rounded-xl {
    border-radius: var(--radius-xl);
  }
  .rounded-t-2xl {
    border-top-left-radius: var(--radius-2xl);
    border-top-right-radius: var(--radius-2xl);
  }
  .rounded-t-lg {
    border-top-left-radius: var(--radius-lg);
    border-top-right-radius: var(--radius-lg);
  }
  .rounded-l-md {
    border-top-left-radius: var(--radius-md);
    border-bottom-left-radius: var(--radius-md);
  }
  .rounded-r-md {
    border-top-right-radius: var(--radius-md);
    border-bottom-right-radius: var(--radius-md);
  }
  .border {
    border-style: var(--tw-border-style);
    border-width: 1px;
  }
  .border-0 {
    border-style: var(--tw-border-style);
    border-width: 0px;
  }
  .border-2 {
    border-style: var(--tw-border-style);
    border-width: 2px;
  }
  .border-3 {
    border-style: var(--tw-border-style);
    border-width: 3px;
  }
  .border-4 {
    border-style: var(--tw-border-style);
    border-width: 4px;
  }
  .border-t {
    border-top-style: var(--tw-border-style);
    border-top-width: 1px;
  }
  .border-r {
    border-right-style: var(--tw-border-style);
    border-right-width: 1px;
  }
  .border-r-0 {
    border-right-style: var(--tw-border-style);
    border-right-width: 0px;
  }
  .border-b {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 1px;
  }
  .border-b-2 {
    border-bottom-style: var(--tw-border-style);
    border-bottom-width: 2px;
  }
  .border-l {
    border-left-style: var(--tw-border-style);
    border-left-width: 1px;
  }
  .border-none {
    --tw-border-style: none;
    border-style: none;
  }
  .border-\\[\\#cfd4da\\] {
    border-color: #cfd4da;
  }
  .border-accent {
    border-color: var(--color-accent);
  }
  .border-border-default {
    border-color: var(--color-border-default);
  }
  .border-border-strong {
    border-color: var(--color-border-strong);
  }
  .border-border-subtle {
    border-color: var(--color-border-subtle);
  }
  .border-gray-300 {
    border-color: var(--color-gray-300);
  }
  .border-state-error {
    border-color: var(--color-state-error);
  }
  .border-transparent {
    border-color: transparent;
  }
  .border-t-accent {
    border-top-color: var(--color-accent);
  }
  .border-r-accent {
    border-right-color: var(--color-accent);
  }
  .border-b-accent {
    border-bottom-color: var(--color-accent);
  }
  .border-b-transparent {
    border-bottom-color: transparent;
  }
  .bg-\\[\\#f8f9fa\\] {
    background-color: #f8f9fa;
  }
  .bg-accent {
    background-color: var(--color-accent);
  }
  .bg-accent-light {
    background-color: var(--color-accent-light);
  }
  .bg-accent\\/10 {
    background-color: var(--color-accent);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-accent) 10%, transparent);
    }
  }
  .bg-bg-app {
    background-color: var(--color-bg-app);
  }
  .bg-bg-elevated {
    background-color: var(--color-bg-elevated);
  }
  .bg-bg-input {
    background-color: var(--color-bg-input);
  }
  .bg-bg-overlay {
    background-color: var(--color-bg-overlay);
  }
  .bg-bg-surface {
    background-color: var(--color-bg-surface);
  }
  .bg-bg-surface-alt {
    background-color: var(--color-bg-surface-alt);
  }
  .bg-bg-surface\\/80 {
    background-color: var(--color-bg-surface);
    @supports (color: color-mix(in lab, red, red)) {
      background-color: color-mix(in oklab, var(--color-bg-surface) 80%, transparent);
    }
  }
  .bg-blue-500 {
    background-color: var(--color-blue-500);
  }
  .bg-border-default {
    background-color: var(--color-border-default);
  }
  .bg-border-subtle {
    background-color: var(--color-border-subtle);
  }
  .bg-green-500 {
    background-color: var(--color-green-500);
  }
  .bg-indigo-500 {
    background-color: var(--color-indigo-500);
  }
  .bg-inherit {
    background-color: inherit;
  }
  .bg-interactive-hover {
    background-color: var(--color-interactive-hover);
  }
  .bg-interactive-selected {
    background-color: var(--color-interactive-selected);
  }
  .bg-pink-500 {
    background-color: var(--color-pink-500);
  }
  .bg-purple-500 {
    background-color: var(--color-purple-500);
  }
  .bg-red-500 {
    background-color: var(--color-red-500);
  }
  .bg-state-error {
    background-color: var(--color-state-error);
  }
  .bg-state-error-light {
    background-color: var(--color-state-error-light);
  }
  .bg-state-info-light {
    background-color: var(--color-state-info-light);
  }
  .bg-state-success-light {
    background-color: var(--color-state-success-light);
  }
  .bg-state-warning-light {
    background-color: var(--color-state-warning-light);
  }
  .bg-teal-500 {
    background-color: var(--color-teal-500);
  }
  .bg-tooltip-bg {
    background-color: var(--color-tooltip-bg);
  }
  .bg-transparent {
    background-color: transparent;
  }
  .bg-white {
    background-color: var(--color-white);
  }
  .bg-yellow-500 {
    background-color: var(--color-yellow-500);
  }
  .p-0 {
    padding: calc(var(--spacing) * 0);
  }
  .p-1 {
    padding: calc(var(--spacing) * 1);
  }
  .p-1\\.5 {
    padding: calc(var(--spacing) * 1.5);
  }
  .p-2 {
    padding: calc(var(--spacing) * 2);
  }
  .p-3 {
    padding: calc(var(--spacing) * 3);
  }
  .p-4 {
    padding: calc(var(--spacing) * 4);
  }
  .p-5 {
    padding: calc(var(--spacing) * 5);
  }
  .p-6 {
    padding: calc(var(--spacing) * 6);
  }
  .p-8 {
    padding: calc(var(--spacing) * 8);
  }
  .p-\\[5px\\] {
    padding: 5px;
  }
  .px-1 {
    padding-inline: calc(var(--spacing) * 1);
  }
  .px-2 {
    padding-inline: calc(var(--spacing) * 2);
  }
  .px-3 {
    padding-inline: calc(var(--spacing) * 3);
  }
  .px-4 {
    padding-inline: calc(var(--spacing) * 4);
  }
  .px-5 {
    padding-inline: calc(var(--spacing) * 5);
  }
  .px-6 {
    padding-inline: calc(var(--spacing) * 6);
  }
  .py-1 {
    padding-block: calc(var(--spacing) * 1);
  }
  .py-1\\.5 {
    padding-block: calc(var(--spacing) * 1.5);
  }
  .py-2 {
    padding-block: calc(var(--spacing) * 2);
  }
  .py-2\\.5 {
    padding-block: calc(var(--spacing) * 2.5);
  }
  .py-3 {
    padding-block: calc(var(--spacing) * 3);
  }
  .py-4 {
    padding-block: calc(var(--spacing) * 4);
  }
  .pt-2 {
    padding-top: calc(var(--spacing) * 2);
  }
  .pt-4 {
    padding-top: calc(var(--spacing) * 4);
  }
  .pr-2 {
    padding-right: calc(var(--spacing) * 2);
  }
  .pr-3 {
    padding-right: calc(var(--spacing) * 3);
  }
  .pr-7 {
    padding-right: calc(var(--spacing) * 7);
  }
  .pr-9 {
    padding-right: calc(var(--spacing) * 9);
  }
  .pr-10 {
    padding-right: calc(var(--spacing) * 10);
  }
  .pb-3 {
    padding-bottom: calc(var(--spacing) * 3);
  }
  .pb-4 {
    padding-bottom: calc(var(--spacing) * 4);
  }
  .pl-2 {
    padding-left: calc(var(--spacing) * 2);
  }
  .pl-3 {
    padding-left: calc(var(--spacing) * 3);
  }
  .pl-4 {
    padding-left: calc(var(--spacing) * 4);
  }
  .pl-6 {
    padding-left: calc(var(--spacing) * 6);
  }
  .pl-8 {
    padding-left: calc(var(--spacing) * 8);
  }
  .text-center {
    text-align: center;
  }
  .text-left {
    text-align: left;
  }
  .text-right {
    text-align: right;
  }
  .text-base {
    font-size: var(--text-base);
    line-height: var(--tw-leading, var(--text-base--line-height));
  }
  .text-lg {
    font-size: var(--text-lg);
    line-height: var(--tw-leading, var(--text-lg--line-height));
  }
  .text-sm {
    font-size: var(--text-sm);
    line-height: var(--tw-leading, var(--text-sm--line-height));
  }
  .text-xl {
    font-size: var(--text-xl);
    line-height: var(--tw-leading, var(--text-xl--line-height));
  }
  .text-xs {
    font-size: var(--text-xs);
    line-height: var(--tw-leading, var(--text-xs--line-height));
  }
  .text-\\[13px\\] {
    font-size: 13px;
  }
  .leading-none {
    --tw-leading: 1;
    line-height: 1;
  }
  .leading-relaxed {
    --tw-leading: var(--leading-relaxed);
    line-height: var(--leading-relaxed);
  }
  .font-bold {
    --tw-font-weight: var(--font-weight-bold);
    font-weight: var(--font-weight-bold);
  }
  .font-medium {
    --tw-font-weight: var(--font-weight-medium);
    font-weight: var(--font-weight-medium);
  }
  .font-semibold {
    --tw-font-weight: var(--font-weight-semibold);
    font-weight: var(--font-weight-semibold);
  }
  .whitespace-nowrap {
    white-space: nowrap;
  }
  .text-accent {
    color: var(--color-accent);
  }
  .text-accent-fg {
    color: var(--color-accent-fg);
  }
  .text-fg-disabled {
    color: var(--color-fg-disabled);
  }
  .text-fg-muted {
    color: var(--color-fg-muted);
  }
  .text-fg-on-accent {
    color: var(--color-fg-on-accent);
  }
  .text-fg-primary {
    color: var(--color-fg-primary);
  }
  .text-fg-secondary {
    color: var(--color-fg-secondary);
  }
  .text-state-error {
    color: var(--color-state-error);
  }
  .text-state-success {
    color: var(--color-state-success);
  }
  .text-state-warning {
    color: var(--color-state-warning);
  }
  .text-tooltip-fg {
    color: var(--color-tooltip-fg);
  }
  .text-white {
    color: var(--color-white);
  }
  .uppercase {
    text-transform: uppercase;
  }
  .italic {
    font-style: italic;
  }
  .underline {
    text-decoration-line: underline;
  }
  .placeholder-fg-muted {
    &::-moz-placeholder {
      color: var(--color-fg-muted);
    }
    &::placeholder {
      color: var(--color-fg-muted);
    }
  }
  .accent-accent {
    accent-color: var(--color-accent);
  }
  .opacity-0 {
    opacity: 0%;
  }
  .opacity-50 {
    opacity: 50%;
  }
  .opacity-100 {
    opacity: 100%;
  }
  .shadow {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-2xl {
    --tw-shadow: 0 25px 50px -12px var(--tw-shadow-color, rgb(0 0 0 / 0.25));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-lg {
    --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-md {
    --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .shadow-sm {
    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-1 {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-2 {
    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
  }
  .ring-accent {
    --tw-ring-color: var(--color-accent);
  }
  .ring-border-default {
    --tw-ring-color: var(--color-border-default);
  }
  .ring-interactive-focus-ring {
    --tw-ring-color: var(--color-interactive-focus-ring);
  }
  .outline {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .outline-1 {
    outline-style: var(--tw-outline-style);
    outline-width: 1px;
  }
  .outline-2 {
    outline-style: var(--tw-outline-style);
    outline-width: 2px;
  }
  .-outline-offset-1 {
    outline-offset: calc(1px * -1);
  }
  .outline-offset-2 {
    outline-offset: 2px;
  }
  .outline-accent {
    outline-color: var(--color-accent);
  }
  .outline-border-default {
    outline-color: var(--color-border-default);
  }
  .backdrop-blur {
    --tw-backdrop-blur: blur(8px);
    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);
  }
  .transition {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to, opacity, box-shadow, transform, translate, scale, rotate, filter, backdrop-filter, display, content-visibility, overlay, pointer-events;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-\\[height\\] {
    transition-property: height;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-all {
    transition-property: all;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-colors {
    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-opacity {
    transition-property: opacity;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .transition-transform {
    transition-property: transform, translate, scale, rotate;
    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));
    transition-duration: var(--tw-duration, var(--default-transition-duration));
  }
  .duration-150 {
    --tw-duration: 150ms;
    transition-duration: 150ms;
  }
  .duration-200 {
    --tw-duration: 200ms;
    transition-duration: 200ms;
  }
  .duration-300 {
    --tw-duration: 300ms;
    transition-duration: 300ms;
  }
  .ease-in-out {
    --tw-ease: var(--ease-in-out);
    transition-timing-function: var(--ease-in-out);
  }
  .ease-out {
    --tw-ease: var(--ease-out);
    transition-timing-function: var(--ease-out);
  }
  .outline-none {
    --tw-outline-style: none;
    outline-style: none;
  }
  .select-none {
    -webkit-user-select: none;
    -moz-user-select: none;
         user-select: none;
  }
  .group-hover\\:opacity-100 {
    &:is(:where(.group):hover *) {
      @media (hover: hover) {
        opacity: 100%;
      }
    }
  }
  .peer-checked\\:opacity-100 {
    &:is(:where(.peer):checked ~ *) {
      opacity: 100%;
    }
  }
  .placeholder\\:text-fg-muted {
    &::-moz-placeholder {
      color: var(--color-fg-muted);
    }
    &::placeholder {
      color: var(--color-fg-muted);
    }
  }
  .first\\:mt-0 {
    &:first-child {
      margin-top: calc(var(--spacing) * 0);
    }
  }
  .checked\\:border-accent {
    &:checked {
      border-color: var(--color-accent);
    }
  }
  .checked\\:bg-accent {
    &:checked {
      background-color: var(--color-accent);
    }
  }
  .hover\\:border-accent {
    &:hover {
      @media (hover: hover) {
        border-color: var(--color-accent);
      }
    }
  }
  .hover\\:border-state-error {
    &:hover {
      @media (hover: hover) {
        border-color: var(--color-state-error);
      }
    }
  }
  .hover\\:border-b-accent {
    &:hover {
      @media (hover: hover) {
        border-bottom-color: var(--color-accent);
      }
    }
  }
  .hover\\:border-b-fg-muted {
    &:hover {
      @media (hover: hover) {
        border-bottom-color: var(--color-fg-muted);
      }
    }
  }
  .hover\\:\\!bg-accent-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent-hover) !important;
      }
    }
  }
  .hover\\:bg-accent {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent);
      }
    }
  }
  .hover\\:bg-accent-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-accent-hover);
      }
    }
  }
  .hover\\:bg-bg-surface {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-bg-surface);
      }
    }
  }
  .hover\\:bg-border-default {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-border-default);
      }
    }
  }
  .hover\\:bg-interactive-hover {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-interactive-hover);
      }
    }
  }
  .hover\\:bg-state-error-light {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-state-error-light);
      }
    }
  }
  .hover\\:bg-state-error\\/90 {
    &:hover {
      @media (hover: hover) {
        background-color: var(--color-state-error);
        @supports (color: color-mix(in lab, red, red)) {
          background-color: color-mix(in oklab, var(--color-state-error) 90%, transparent);
        }
      }
    }
  }
  .hover\\:bg-transparent {
    &:hover {
      @media (hover: hover) {
        background-color: transparent;
      }
    }
  }
  .hover\\:text-accent-hover {
    &:hover {
      @media (hover: hover) {
        color: var(--color-accent-hover);
      }
    }
  }
  .hover\\:text-fg-on-accent {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-on-accent);
      }
    }
  }
  .hover\\:text-fg-primary {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-primary);
      }
    }
  }
  .hover\\:text-fg-secondary {
    &:hover {
      @media (hover: hover) {
        color: var(--color-fg-secondary);
      }
    }
  }
  .hover\\:shadow-md {
    &:hover {
      @media (hover: hover) {
        --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring {
    &:hover {
      @media (hover: hover) {
        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring-0 {
    &:hover {
      @media (hover: hover) {
        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
      }
    }
  }
  .hover\\:ring-accent {
    &:hover {
      @media (hover: hover) {
        --tw-ring-color: var(--color-accent);
      }
    }
  }
  .hover\\:ring-transparent {
    &:hover {
      @media (hover: hover) {
        --tw-ring-color: transparent;
      }
    }
  }
  .focus\\:border-accent {
    &:focus {
      border-color: var(--color-accent);
    }
  }
  .focus\\:border-blue-500 {
    &:focus {
      border-color: var(--color-blue-500);
    }
  }
  .focus\\:border-state-error {
    &:focus {
      border-color: var(--color-state-error);
    }
  }
  .focus\\:border-transparent {
    &:focus {
      border-color: transparent;
    }
  }
  .focus\\:ring-1 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-2 {
    &:focus {
      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
  .focus\\:ring-accent {
    &:focus {
      --tw-ring-color: var(--color-accent);
    }
  }
  .focus\\:ring-blue-500 {
    &:focus {
      --tw-ring-color: var(--color-blue-500);
    }
  }
  .focus\\:outline-none {
    &:focus {
      --tw-outline-style: none;
      outline-style: none;
    }
  }
  .active\\:cursor-grabbing {
    &:active {
      cursor: grabbing;
    }
  }
  .active\\:bg-interactive-active {
    &:active {
      background-color: var(--color-interactive-active);
    }
  }
  .disabled\\:cursor-not-allowed {
    &:disabled {
      cursor: not-allowed;
    }
  }
  .disabled\\:opacity-40 {
    &:disabled {
      opacity: 40%;
    }
  }
  .disabled\\:opacity-50 {
    &:disabled {
      opacity: 50%;
    }
  }
  .disabled\\:hover\\:bg-transparent {
    &:disabled {
      &:hover {
        @media (hover: hover) {
          background-color: transparent;
        }
      }
    }
  }
  .disabled\\:hover\\:ring-0 {
    &:disabled {
      &:hover {
        @media (hover: hover) {
          --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentcolor);
          box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
        }
      }
    }
  }
  .sm\\:grid-cols-2 {
    @media (width >= 40rem) {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }
  .md\\:flex {
    @media (width >= 48rem) {
      display: flex;
    }
  }
  .md\\:h-auto {
    @media (width >= 48rem) {
      height: auto;
    }
  }
  .md\\:max-h-\\[80vh\\] {
    @media (width >= 48rem) {
      max-height: 80vh;
    }
  }
  .md\\:w-\\[28rem\\] {
    @media (width >= 48rem) {
      width: 28rem;
    }
  }
  .md\\:w-\\[32rem\\] {
    @media (width >= 48rem) {
      width: 32rem;
    }
  }
  .md\\:w-\\[36rem\\] {
    @media (width >= 48rem) {
      width: 36rem;
    }
  }
  .md\\:w-\\[48rem\\] {
    @media (width >= 48rem) {
      width: 48rem;
    }
  }
  .md\\:max-w-\\[90vw\\] {
    @media (width >= 48rem) {
      max-width: 90vw;
    }
  }
  .md\\:flex-none {
    @media (width >= 48rem) {
      flex: none;
    }
  }
  .md\\:items-center {
    @media (width >= 48rem) {
      align-items: center;
    }
  }
  .md\\:justify-center {
    @media (width >= 48rem) {
      justify-content: center;
    }
  }
  .md\\:rounded-lg {
    @media (width >= 48rem) {
      border-radius: var(--radius-lg);
    }
  }
  .md\\:border {
    @media (width >= 48rem) {
      border-style: var(--tw-border-style);
      border-width: 1px;
    }
  }
  .md\\:border-border-subtle {
    @media (width >= 48rem) {
      border-color: var(--color-border-subtle);
    }
  }
  .md\\:shadow-lg {
    @media (width >= 48rem) {
      --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));
      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);
    }
  }
}
@import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap');
:host {
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-translate-z: 0;
  --tw-rotate-x: rotateX(0);
  --tw-rotate-y: rotateY(0);
  --tw-rotate-z: rotateZ(0);
  --tw-skew-x: skewX(0);
  --tw-skew-y: skewY(0);
  --tw-border-style: solid;
  --tw-gradient-from: #0000;
  --tw-gradient-via: #0000;
  --tw-gradient-to: #0000;
  --tw-gradient-from-position: 0%;
  --tw-gradient-via-position: 50%;
  --tw-gradient-to-position: 100%;
  --tw-shadow: 0 0 #0000;
  --tw-inset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-inset-ring-shadow: 0 0 #0000;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-outline-style: solid;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  width: 100%;
  height: 100%;
  font-family: 'Open Sans', system-ui, sans-serif;
  color: var(--ep-foreground-primary);
  background-color: var(--ep-background-surface);
}
:host *::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}
:host *::-webkit-scrollbar-track {
  background: var(--ep-scrollbar-track);
}
:host *::-webkit-scrollbar-thumb {
  background: var(--ep-scrollbar-thumb);
  border-radius: 4px;
}
:host *::-webkit-scrollbar-thumb:hover {
  background: var(--ep-scrollbar-thumb-hover);
}
@property --tw-translate-x {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-y {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-translate-z {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-scale-x {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-y {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-scale-z {
  syntax: "*";
  inherits: false;
  initial-value: 1;
}
@property --tw-rotate-x {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-y {
  syntax: "*";
  inherits: false;
}
@property --tw-rotate-z {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-x {
  syntax: "*";
  inherits: false;
}
@property --tw-skew-y {
  syntax: "*";
  inherits: false;
}
@property --tw-space-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-space-x-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-divide-y-reverse {
  syntax: "*";
  inherits: false;
  initial-value: 0;
}
@property --tw-border-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-leading {
  syntax: "*";
  inherits: false;
}
@property --tw-font-weight {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-inset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-shadow-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-shadow-alpha {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}
@property --tw-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-inset-ring-color {
  syntax: "*";
  inherits: false;
}
@property --tw-inset-ring-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-ring-inset {
  syntax: "*";
  inherits: false;
}
@property --tw-ring-offset-width {
  syntax: "<length>";
  inherits: false;
  initial-value: 0px;
}
@property --tw-ring-offset-color {
  syntax: "*";
  inherits: false;
  initial-value: #fff;
}
@property --tw-ring-offset-shadow {
  syntax: "*";
  inherits: false;
  initial-value: 0 0 #0000;
}
@property --tw-outline-style {
  syntax: "*";
  inherits: false;
  initial-value: solid;
}
@property --tw-backdrop-blur {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-brightness {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-contrast {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-grayscale {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-hue-rotate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-invert {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-opacity {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-saturate {
  syntax: "*";
  inherits: false;
}
@property --tw-backdrop-sepia {
  syntax: "*";
  inherits: false;
}
@property --tw-duration {
  syntax: "*";
  inherits: false;
}
@property --tw-ease {
  syntax: "*";
  inherits: false;
}
@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}
@keyframes pulse {
  50% {
    opacity: 0.5;
  }
}
@layer properties {
  @supports ((-webkit-hyphens: none) and (not (margin-trim: inline))) or ((-moz-orient: inline) and (not (color:rgb(from red r g b)))) {
    *, ::before, ::after, ::backdrop {
      --tw-translate-x: 0;
      --tw-translate-y: 0;
      --tw-translate-z: 0;
      --tw-scale-x: 1;
      --tw-scale-y: 1;
      --tw-scale-z: 1;
      --tw-rotate-x: initial;
      --tw-rotate-y: initial;
      --tw-rotate-z: initial;
      --tw-skew-x: initial;
      --tw-skew-y: initial;
      --tw-space-y-reverse: 0;
      --tw-space-x-reverse: 0;
      --tw-divide-y-reverse: 0;
      --tw-border-style: solid;
      --tw-leading: initial;
      --tw-font-weight: initial;
      --tw-shadow: 0 0 #0000;
      --tw-shadow-color: initial;
      --tw-shadow-alpha: 100%;
      --tw-inset-shadow: 0 0 #0000;
      --tw-inset-shadow-color: initial;
      --tw-inset-shadow-alpha: 100%;
      --tw-ring-color: initial;
      --tw-ring-shadow: 0 0 #0000;
      --tw-inset-ring-color: initial;
      --tw-inset-ring-shadow: 0 0 #0000;
      --tw-ring-inset: initial;
      --tw-ring-offset-width: 0px;
      --tw-ring-offset-color: #fff;
      --tw-ring-offset-shadow: 0 0 #0000;
      --tw-outline-style: solid;
      --tw-backdrop-blur: initial;
      --tw-backdrop-brightness: initial;
      --tw-backdrop-contrast: initial;
      --tw-backdrop-grayscale: initial;
      --tw-backdrop-hue-rotate: initial;
      --tw-backdrop-invert: initial;
      --tw-backdrop-opacity: initial;
      --tw-backdrop-saturate: initial;
      --tw-backdrop-sepia: initial;
      --tw-duration: initial;
      --tw-ease: initial;
    }
  }
}
`,Eh=0;function D(e,t,n,o,i,r){t||(t={});var a,s,c=t;if("ref"in c)for(s in c={},t)s=="ref"?a=t[s]:c[s]=t[s];var d={type:e,props:c,key:n,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Eh,__i:-1,__u:0,__source:i,__self:r};if(typeof e=="function"&&(a=e.defaultProps))for(s in a)c[s]===void 0&&(c[s]=a[s]);return se.vnode&&se.vnode(d),d}var sn=(e=>(e[e.Degree0=0]="Degree0",e[e.Degree90=1]="Degree90",e[e.Degree180=2]="Degree180",e[e.Degree270=3]="Degree270",e))(sn||{});function _h(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function Rh(e){return{width:Math.ceil(e.width),height:Math.ceil(e.height)}}function N0(e){return{origin:_h(e.origin),size:Rh(e.size)}}function Ii(e){const{width:t,height:n}=e;return{width:n,height:t}}function Co(e,t,n){return{width:(e=t%2==0?e:Ii(e)).width*n,height:e.height*n}}function O0(e){const t=[e.p1.x,e.p2.x,e.p3.x,e.p4.x],n=[e.p1.y,e.p2.y,e.p3.y,e.p4.y];return{origin:{x:Math.min(...t),y:Math.min(...n)},size:{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}}}function L0(e){return{p1:{x:e.origin.x,y:e.origin.y},p2:{x:e.origin.x+e.size.width,y:e.origin.y},p3:{x:e.origin.x+e.size.width,y:e.origin.y+e.size.height},p4:{x:e.origin.x,y:e.origin.y+e.size.height}}}function fl(e,t,n){let o=t.x,i=t.y;switch(n){case 0:o=t.x,i=t.y;break;case 1:o=e.height-t.y,i=t.x;break;case 2:o=e.width-t.x,i=e.height-t.y;break;case 3:o=t.y,i=e.width-t.x}return{x:o,y:i}}function po(e,t){return{x:e.x*t,y:e.y*t}}function jt(e){if(e.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};const t=e.map(r=>r.x),n=e.map(r=>r.y),o=Math.min(...t),i=Math.min(...n);return{origin:{x:o,y:i},size:{width:Math.max(...t)-o,height:Math.max(...n)-i}}}function Ht(e,t){return{origin:{x:e.origin.x-t,y:e.origin.y-t},size:{width:e.size.width+2*t,height:e.size.height+2*t}}}function Ki(e,t,n){let o=t.origin.x,i=t.origin.y,r=t.size;switch(n){case 0:break;case 1:o=e.height-t.origin.y-t.size.height,i=t.origin.x,r=Ii(t.size);break;case 2:o=e.width-t.origin.x-t.size.width,i=e.height-t.origin.y-t.size.height;break;case 3:o=t.origin.y,i=e.width-t.origin.x-t.size.width,r=Ii(t.size)}return{origin:{x:o,y:i},size:{width:r.width,height:r.height}}}function vl(e,t){return{origin:{x:e.origin.x*t,y:e.origin.y*t},size:{width:e.size.width*t,height:e.size.height*t}}}function Nh(e,t,n,o){return vl(Ki(e,t,n),o)}function yl(e){if(e.length===0)return null;let t=e[0].origin.x,n=e[0].origin.y,o=e[0].origin.x+e[0].size.width,i=e[0].origin.y+e[0].size.height;for(const r of e)t=Math.min(t,r.origin.x),n=Math.min(n,r.origin.y),o=Math.max(o,r.origin.x+r.size.width),i=Math.max(i,r.origin.y+r.size.height);return{origin:{x:t,y:n},size:{width:o-t,height:i-n}}}function $0(e,t,n,o){const i=e.origin.x,r=e.origin.y,a=e.size.width,s=e.size.height,c=n/a,d=o/s,u=n/s,m=o/a;switch(t){case 0:return{a:c,b:0,c:0,d,e:-c*i,f:-d*r};case 3:return{a:0,b:-m,c:u,d:0,e:-u*r,f:m*(i+a)};case 2:return{a:-c,b:0,c:0,d:-d,e:c*(i+a),f:d*(r+s)};case 1:return{a:0,b:m,c:-u,d:0,e:u*(r+s),f:-m*i}}}class bl{isEnabled(){return!1}debug(){}info(){}warn(){}error(){}perf(){}}class wl{isEnabled(){return!0}debug(t,n,...o){console.debug(`${t}.${n}`,...o)}info(t,n,...o){console.info(`${t}.${n}`,...o)}warn(t,n,...o){console.warn(`${t}.${n}`,...o)}error(t,n,...o){console.error(`${t}.${n}`,...o)}perf(t,n,o,i,...r){console.info(`${t}.${n}.${o}.${i}`,...r)}}class Oh{constructor(t,n){this.logger=t,this.level=n}isEnabled(t){return this.level<={debug:0,info:1,warn:2,error:3}[t]}debug(t,n,...o){this.level<=0&&this.logger.debug(t,n,...o)}info(t,n,...o){this.level<=1&&this.logger.info(t,n,...o)}warn(t,n,...o){this.level<=2&&this.logger.warn(t,n,...o)}error(t,n,...o){this.level<=3&&this.logger.error(t,n,...o)}perf(t,n,o,i,...r){this.logger.perf(t,n,o,i,...r)}}class xl{constructor(){this.marks=new Map}isEnabled(){return!1}debug(t,n,...o){}info(t,n,...o){}warn(t,n,...o){}error(t,n,...o){}perf(t,n,o,i,r,...a){const s=`${t}.${n}.${o}.${i}.${r}`;switch(i){case"Begin":globalThis.performance.mark(s,{detail:a}),this.marks.set(`${t}.${n}.${o}.${r}`,Date.now());break;case"End":globalThis.performance.mark(s,{detail:a});const c=`${t}.${n}.${o}.Measure.${r}`,d=`${t}.${n}.${o}.Begin.${r}`;globalThis.performance.measure(c,d,s);const u=this.marks.get(`${t}.${n}.${o}.${r}`);if(u){const m=Date.now()-u;console.info(` ${t}.${n}.${o}.${r}: ${m}ms`),this.marks.delete(`${t}.${n}.${o}.${r}`)}}}}class Cl{constructor(t){this.loggers=t}isEnabled(t){return this.loggers.some(n=>n.isEnabled(t))}debug(t,n,...o){for(const i of this.loggers)i.debug(t,n,...o)}info(t,n,...o){for(const i of this.loggers)i.info(t,n,...o)}warn(t,n,...o){for(const i of this.loggers)i.warn(t,n,...o)}error(t,n,...o){for(const i of this.loggers)i.error(t,n,...o)}perf(t,n,o,i,...r){for(const a of this.loggers)a.perf(t,n,o,i,...r)}}var En=(e=>(e[e.Pending=0]="Pending",e[e.Resolved=1]="Resolved",e[e.Rejected=2]="Rejected",e[e.Aborted=3]="Aborted",e))(En||{});class Lh extends Error{constructor(t){super(`Task aborted: ${JSON.stringify(t)}`),this.name="TaskAbortedError",this.reason=t}}class $h extends Error{constructor(t){super(`Task rejected: ${JSON.stringify(t)}`),this.name="TaskRejectedError",this.reason=t}}class Ce{constructor(){this.state={stage:0},this.resolvedCallbacks=[],this.rejectedCallbacks=[],this._promise=null,this.progressCbs=[]}toPromise(){return this._promise||(this._promise=new Promise((t,n)=>{this.wait(o=>t(o),o=>{o.type==="abort"?n(new Lh(o.reason)):n(new $h(o.reason))})})),this._promise}wait(t,n){switch(this.state.stage){case 0:this.resolvedCallbacks.push(t),this.rejectedCallbacks.push(n);break;case 1:t(this.state.result);break;case 2:n({type:"reject",reason:this.state.reason});break;case 3:n({type:"abort",reason:this.state.reason})}}resolve(t){if(this.state.stage===0){this.state={stage:1,result:t};for(const n of this.resolvedCallbacks)try{n(t)}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}reject(t){if(this.state.stage===0){this.state={stage:2,reason:t};for(const n of this.rejectedCallbacks)try{n({type:"reject",reason:t})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}abort(t){if(this.state.stage===0){this.state={stage:3,reason:t};for(const n of this.rejectedCallbacks)try{n({type:"abort",reason:t})}catch{}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}fail(t){t.type==="abort"?this.abort(t.reason):this.reject(t.reason)}onProgress(t){this.progressCbs.push(t)}progress(t){for(const n of this.progressCbs)n(t)}static all(t){const n=new Ce;if(t.length===0)return n.resolve([]),n;const o=new Array(t.length);let i=0,r=!1;return t.forEach((a,s)=>{a.wait(c=>{r||(o[s]=c,i++,i===t.length&&(r=!0,n.resolve(o)))},c=>{r||(r=!0,c.type==="abort"?n.abort(c.reason):n.reject(c.reason))})}),n}static allSettled(t){const n=new Ce;if(t.length===0)return n.resolve([]),n;const o=new Array(t.length);let i=0;return t.forEach((r,a)=>{r.wait(s=>{o[a]={status:"resolved",value:s},i++,i===t.length&&n.resolve(o)},s=>{o[a]={status:s.type==="abort"?"aborted":"rejected",reason:s.reason},i++,i===t.length&&n.resolve(o)})}),n}static race(t){const n=new Ce;if(t.length===0)return n.reject("No tasks provided"),n;let o=!1;return t.forEach(i=>{i.wait(r=>{o||(o=!0,n.resolve(r))},r=>{o||(o=!0,r.type==="abort"?n.abort(r.reason):n.reject(r.reason))})}),n}static withProgress(t,n){const o=Ce.all(t);if(n){let i=0;t.forEach(r=>{r.wait(()=>{i++,n(i,t.length)},()=>{i++,n(i,t.length)})})}return o}}const Fh=Object.freeze(["","","","\uFEFF","",""]),jh=new RegExp(`[${Fh.join("")}]`,"g");function F0(e){return e.replace(jh,"")}var Il=(e=>(e[e.Unknown=0]="Unknown",e[e.XYZ=1]="XYZ",e[e.FitPage=2]="FitPage",e[e.FitHorizontal=3]="FitHorizontal",e[e.FitVertical=4]="FitVertical",e[e.FitRectangle=5]="FitRectangle",e[e.FitBoundingBox=6]="FitBoundingBox",e[e.FitBoundingBoxHorizontal=7]="FitBoundingBoxHorizontal",e[e.FitBoundingBoxVertical=8]="FitBoundingBoxVertical",e))(Il||{}),Hh=(e=>(e[e.NotSet=0]="NotSet",e[e.True=1]="True",e[e.False=2]="False",e[e.Unknown=3]="Unknown",e))(Hh||{}),We=(e=>(e[e.Unknown=-1]="Unknown",e[e.Courier=0]="Courier",e[e.Courier_Bold=1]="Courier_Bold",e[e.Courier_BoldOblique=2]="Courier_BoldOblique",e[e.Courier_Oblique=3]="Courier_Oblique",e[e.Helvetica=4]="Helvetica",e[e.Helvetica_Bold=5]="Helvetica_Bold",e[e.Helvetica_BoldOblique=6]="Helvetica_BoldOblique",e[e.Helvetica_Oblique=7]="Helvetica_Oblique",e[e.Times_Roman=8]="Times_Roman",e[e.Times_Bold=9]="Times_Bold",e[e.Times_BoldItalic=10]="Times_BoldItalic",e[e.Times_Italic=11]="Times_Italic",e[e.Symbol=12]="Symbol",e[e.ZapfDingbats=13]="ZapfDingbats",e))(We||{}),it=(e=>(e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right",e))(it||{}),mt=(e=>(e[e.Top=0]="Top",e[e.Middle=1]="Middle",e[e.Bottom=2]="Bottom",e))(mt||{}),Z=(e=>(e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay",e[e.Darken=4]="Darken",e[e.Lighten=5]="Lighten",e[e.ColorDodge=6]="ColorDodge",e[e.ColorBurn=7]="ColorBurn",e[e.HardLight=8]="HardLight",e[e.SoftLight=9]="SoftLight",e[e.Difference=10]="Difference",e[e.Exclusion=11]="Exclusion",e[e.Hue=12]="Hue",e[e.Saturation=13]="Saturation",e[e.Color=14]="Color",e[e.Luminosity=15]="Luminosity",e))(Z||{}),Uh=(e=>(e[e.Contain=0]="Contain",e[e.Cover=1]="Cover",e[e.Stretch=2]="Stretch",e))(Uh||{}),fo=(e=>(e[e.Unsupported=0]="Unsupported",e[e.Goto=1]="Goto",e[e.RemoteGoto=2]="RemoteGoto",e[e.URI=3]="URI",e[e.LaunchAppOrOpenFile=4]="LaunchAppOrOpenFile",e))(fo||{}),_=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.LINK=2]="LINK",e[e.FREETEXT=3]="FREETEXT",e[e.LINE=4]="LINE",e[e.SQUARE=5]="SQUARE",e[e.CIRCLE=6]="CIRCLE",e[e.POLYGON=7]="POLYGON",e[e.POLYLINE=8]="POLYLINE",e[e.HIGHLIGHT=9]="HIGHLIGHT",e[e.UNDERLINE=10]="UNDERLINE",e[e.SQUIGGLY=11]="SQUIGGLY",e[e.STRIKEOUT=12]="STRIKEOUT",e[e.STAMP=13]="STAMP",e[e.CARET=14]="CARET",e[e.INK=15]="INK",e[e.POPUP=16]="POPUP",e[e.FILEATTACHMENT=17]="FILEATTACHMENT",e[e.SOUND=18]="SOUND",e[e.MOVIE=19]="MOVIE",e[e.WIDGET=20]="WIDGET",e[e.SCREEN=21]="SCREEN",e[e.PRINTERMARK=22]="PRINTERMARK",e[e.TRAPNET=23]="TRAPNET",e[e.WATERMARK=24]="WATERMARK",e[e.THREED=25]="THREED",e[e.RICHMEDIA=26]="RICHMEDIA",e[e.XFAWIDGET=27]="XFAWIDGET",e[e.REDACT=28]="REDACT",e))(_||{}),Wh=(e=>(e[e.Normal=0]="Normal",e[e.Rollover=1]="Rollover",e[e.Down=2]="Down",e))(Wh||{}),Zi=(e=>(e[e.Unknown=-1]="Unknown",e[e.Comment=0]="Comment",e[e.Key=1]="Key",e[e.Note=2]="Note",e[e.Help=3]="Help",e[e.NewParagraph=4]="NewParagraph",e[e.Paragraph=5]="Paragraph",e[e.Insert=6]="Insert",e[e.Graph=7]="Graph",e[e.PushPin=8]="PushPin",e[e.Paperclip=9]="Paperclip",e[e.Tag=10]="Tag",e[e.Speaker=11]="Speaker",e[e.Mic=12]="Mic",e[e.Approved=13]="Approved",e[e.Experimental=14]="Experimental",e[e.NotApproved=15]="NotApproved",e[e.AsIs=16]="AsIs",e[e.Expired=17]="Expired",e[e.NotForPublicRelease=18]="NotForPublicRelease",e[e.Confidential=19]="Confidential",e[e.Final=20]="Final",e[e.Sold=21]="Sold",e[e.Departmental=22]="Departmental",e[e.ForComment=23]="ForComment",e[e.TopSecret=24]="TopSecret",e[e.Draft=25]="Draft",e[e.ForPublicRelease=26]="ForPublicRelease",e))(Zi||{}),Q=(e=>(e[e.None=0]="None",e[e.Square=1]="Square",e[e.Circle=2]="Circle",e[e.Diamond=3]="Diamond",e[e.OpenArrow=4]="OpenArrow",e[e.ClosedArrow=5]="ClosedArrow",e[e.Butt=6]="Butt",e[e.ROpenArrow=7]="ROpenArrow",e[e.RClosedArrow=8]="RClosedArrow",e[e.Slash=9]="Slash",e[e.Unknown=10]="Unknown",e))(Q||{}),Bh=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PUSHBUTTON=1]="PUSHBUTTON",e[e.CHECKBOX=2]="CHECKBOX",e[e.RADIOBUTTON=3]="RADIOBUTTON",e[e.COMBOBOX=4]="COMBOBOX",e[e.LISTBOX=5]="LISTBOX",e[e.TEXTFIELD=6]="TEXTFIELD",e[e.SIGNATURE=7]="SIGNATURE",e[e.XFA=8]="XFA",e[e.XFA_CHECKBOX=9]="XFA_CHECKBOX",e[e.XFA_COMBOBOX=10]="XFA_COMBOBOX",e[e.XFA_IMAGEFIELD=11]="XFA_IMAGEFIELD",e[e.XFA_LISTBOX=12]="XFA_LISTBOX",e[e.XFA_PUSHBUTTON=13]="XFA_PUSHBUTTON",e[e.XFA_SIGNATURE=14]="XFA_SIGNATURE",e[e.XFA_TEXTFIELD=15]="XFA_TEXTFIELD",e))(Bh||{}),qh=(e=>(e[e.Color=0]="Color",e[e.InteriorColor=1]="InteriorColor",e))(qh||{}),Ie=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.SOLID=1]="SOLID",e[e.DASHED=2]="DASHED",e[e.BEVELED=3]="BEVELED",e[e.INSET=4]="INSET",e[e.UNDERLINE=5]="UNDERLINE",e[e.CLOUDY=6]="CLOUDY",e))(Ie||{}),Gh=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.PATH=2]="PATH",e[e.IMAGE=3]="IMAGE",e[e.SHADING=4]="SHADING",e[e.FORM=5]="FORM",e))(Gh||{});const ki=Object.freeze({1:"invisible",2:"hidden",4:"print",8:"noZoom",16:"noRotate",32:"noView",64:"readOnly",128:"locked",256:"toggleNoView"}),Vh=Object.entries(ki).reduce((e,[t,n])=>(e[n]=Number(t),e),{});function j0(e){return Object.keys(ki).filter(t=>(e&t)!==0).map(t=>ki[t])}function H0(e){return e.reduce((t,n)=>t|Vh[n],0)}var Kh=(e=>(e[e.Create=0]="Create",e[e.Read=1]="Read",e[e.Update=2]="Update",e[e.Delete=3]="Delete",e))(Kh||{}),_n=(e=>(e[e.None=0]="None",e[e.MatchCase=1]="MatchCase",e[e.MatchWholeWord=2]="MatchWholeWord",e[e.MatchConsecutive=4]="MatchConsecutive",e))(_n||{}),N=(e=>(e[e.Print=4]="Print",e[e.ModifyContents=8]="ModifyContents",e[e.CopyContents=16]="CopyContents",e[e.ModifyAnnotations=32]="ModifyAnnotations",e[e.FillForms=256]="FillForms",e[e.ExtractForAccessibility=512]="ExtractForAccessibility",e[e.AssembleDocument=1024]="AssembleDocument",e[e.PrintHighQuality=2048]="PrintHighQuality",e[e.AllowAll=3900]="AllowAll",e))(N||{});class Zh extends Error{constructor(t,n){const o=t.map(i=>N[i]).join(", ");super(`Permission denied. Required: ${o}`),this.requiredFlags=t,this.currentPermissions=n,this.name="PermissionDeniedError"}}var Yh=(e=>(e[e.Display=0]="Display",e[e.Print=1]="Print",e))(Yh||{}),ee=(e=>(e[e.Ok=0]="Ok",e[e.Unknown=1]="Unknown",e[e.NotFound=2]="NotFound",e[e.WrongFormat=3]="WrongFormat",e[e.Password=4]="Password",e[e.Security=5]="Security",e[e.PageError=6]="PageError",e[e.XFALoad=7]="XFALoad",e[e.XFALayout=8]="XFALayout",e[e.Cancelled=9]="Cancelled",e[e.Initialization=10]="Initialization",e[e.NotReady=11]="NotReady",e[e.NotSupport=12]="NotSupport",e[e.LoadDoc=13]="LoadDoc",e[e.DocNotOpen=14]="DocNotOpen",e[e.CantCloseDoc=15]="CantCloseDoc",e[e.CantCreateNewDoc=16]="CantCreateNewDoc",e[e.CantImportPages=17]="CantImportPages",e[e.CantCreateAnnot=18]="CantCreateAnnot",e[e.CantSetAnnotRect=19]="CantSetAnnotRect",e[e.CantSetAnnotContent=20]="CantSetAnnotContent",e[e.CantRemoveInkList=21]="CantRemoveInkList",e[e.CantAddInkStoke=22]="CantAddInkStoke",e[e.CantReadAttachmentSize=23]="CantReadAttachmentSize",e[e.CantReadAttachmentContent=24]="CantReadAttachmentContent",e[e.CantFocusAnnot=25]="CantFocusAnnot",e[e.CantSelectText=26]="CantSelectText",e[e.CantSelectOption=27]="CantSelectOption",e[e.CantCheckField=28]="CantCheckField",e[e.CantSetAnnotString=29]="CantSetAnnotString",e))(ee||{});class ge{static create(){return new Ce}static resolve(t){const n=new Ce;return n.resolve(t),n}static reject(t){const n=new Ce;return n.reject(t),n}static abort(t){const n=new Ce;return n.reject(t),n}}function U0(e){const t=n=>(o=>Math.max(0,Math.min(255,o)))(n).toString(16).padStart(2,"0");return`#${t(e.red)}${t(e.green)}${t(e.blue)}`}function W0(e){/^#?[0-9a-f]{3}$/i.test(e)&&(e=e.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"#$1$1$2$2$3$3").toLowerCase());const[,t,n,o]=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e)??(()=>{throw new Error(`Invalid hex colour: "${e}"`)})();return{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16)}}function B0(e){return(t=>Math.max(0,Math.min(255,t)))(e)/255}function q0(e){return((t,n=255)=>Math.max(0,Math.min(n,t)))(Math.round(255*e))}function G0(e){if(!e?.startsWith("D:")||e.length<16)return;const t=+e.slice(2,6),n=+e.slice(6,8)-1,o=+e.slice(8,10),i=+e.slice(10,12),r=+e.slice(12,14),a=+e.slice(14,16);return new Date(Date.UTC(t,n,o,i,r,a))}function V0(e=new Date){const t=(n,o=2)=>n.toString().padStart(o,"0");return`D:${e.getUTCFullYear()}${t(e.getUTCMonth()+1)}${t(e.getUTCDate())}${t(e.getUTCHours())}${t(e.getUTCMinutes())}${t(e.getUTCSeconds())}`}const Si=Object.freeze([{id:it.Left,label:"Left",css:"left"},{id:it.Center,label:"Center",css:"center"},{id:it.Right,label:"Right",css:"right"}]),Br=Si.reduce((e,t)=>(e[t.id]=t,e),{});function Xh(e){return(function(t){return Br[t]??Br[it.Left]})(e).css}Si.reduce((e,t)=>(e[t.css]=t.id,e),{}),Si.map(e=>({value:e.id,label:e.label}));var kl=(e=>(e.Courier="Courier",e.Helvetica="Helvetica",e.Times="Times",e.Symbol="Symbol",e.ZapfDingbats="ZapfDingbats",e.Unknown="Unknown",e))(kl||{});const Qh=We.Helvetica,Sl={id:We.Helvetica,family:"Helvetica",bold:!1,italic:!1,label:"Helvetica",css:"Helvetica, Arial, sans-serif"},Yi=Object.freeze([{id:We.Courier,family:"Courier",bold:!1,italic:!1,label:"Courier",css:"Courier, monospace"},{id:We.Courier_Bold,family:"Courier",bold:!0,italic:!1,label:"Courier Bold",css:'"Courier-Bold", Courier, monospace'},{id:We.Courier_BoldOblique,family:"Courier",bold:!0,italic:!0,label:"Courier Bold Oblique",css:'"Courier-BoldOblique", Courier, monospace'},{id:We.Courier_Oblique,family:"Courier",bold:!1,italic:!0,label:"Courier Oblique",css:'"Courier-Oblique", Courier, monospace'},Sl,{id:We.Helvetica_Bold,family:"Helvetica",bold:!0,italic:!1,label:"Helvetica Bold",css:'"Helvetica-Bold", Arial, sans-serif'},{id:We.Helvetica_BoldOblique,family:"Helvetica",bold:!0,italic:!0,label:"Helvetica Bold Oblique",css:'"Helvetica-BoldOblique", Arial, sans-serif'},{id:We.Helvetica_Oblique,family:"Helvetica",bold:!1,italic:!0,label:"Helvetica Oblique",css:'"Helvetica-Oblique", Arial, sans-serif'},{id:We.Times_Roman,family:"Times",bold:!1,italic:!1,label:"Times Roman",css:'"Times New Roman", Times, serif'},{id:We.Times_Bold,family:"Times",bold:!0,italic:!1,label:"Times Bold",css:'"Times New Roman Bold", Times, serif'},{id:We.Times_BoldItalic,family:"Times",bold:!0,italic:!0,label:"Times Bold Italic",css:'"Times New Roman Bold Italic", Times, serif'},{id:We.Times_Italic,family:"Times",bold:!1,italic:!0,label:"Times Italic",css:'"Times New Roman Italic", Times, serif'},{id:We.Symbol,family:"Symbol",bold:!1,italic:!1,label:"Symbol",css:"Symbol"},{id:We.ZapfDingbats,family:"ZapfDingbats",bold:!1,italic:!1,label:"Zapf Dingbats",css:"ZapfDingbats"}]),Jh=Yi.reduce((e,t)=>(e[t.id]=t,e),{}),Pl=new Map;for(const e of Yi)Pl.set(`${e.family}_${e.bold}_${e.italic}`,e.id);function Fo(e){return Jh[e]??Sl}function Xn(e){return Fo(e).bold}function Qn(e){return Fo(e).italic}function qt(e,{bold:t,italic:n}){return Pl.get(`${e}_${t}_${n}`)??Qh}Object.values(kl).filter(e=>e!=="Unknown").map(e=>({value:e,label:e}));const eg=[...new Set(Yi.map(e=>e.family))];function qr(e){switch(e){case"Courier":return"Courier";case"Helvetica":default:return"Helvetica";case"Times":return"Times";case"Symbol":return"Symbol";case"ZapfDingbats":return"ZapfDingbats"}}const Io=Object.freeze([{id:Z.Normal,label:"Normal",css:"normal"},{id:Z.Multiply,label:"Multiply",css:"multiply"},{id:Z.Screen,label:"Screen",css:"screen"},{id:Z.Overlay,label:"Overlay",css:"overlay"},{id:Z.Darken,label:"Darken",css:"darken"},{id:Z.Lighten,label:"Lighten",css:"lighten"},{id:Z.ColorDodge,label:"Color Dodge",css:"color-dodge"},{id:Z.ColorBurn,label:"Color Burn",css:"color-burn"},{id:Z.HardLight,label:"Hard Light",css:"hard-light"},{id:Z.SoftLight,label:"Soft Light",css:"soft-light"},{id:Z.Difference,label:"Difference",css:"difference"},{id:Z.Exclusion,label:"Exclusion",css:"exclusion"},{id:Z.Hue,label:"Hue",css:"hue"},{id:Z.Saturation,label:"Saturation",css:"saturation"},{id:Z.Color,label:"Color",css:"color"},{id:Z.Luminosity,label:"Luminosity",css:"luminosity"}]),Gr=Io.reduce((e,t)=>(e[t.id]=t,e),{});function Ke(e){return(function(t){return Gr[t]??Gr[Z.Normal]})(e).css}Io.reduce((e,t)=>(e[t.css]=t.id,e),{}),Io.map(e=>({value:e.id,label:e.label}));const tg=Io.map(e=>e.id);function Vr(e){if(e instanceof bl)return{type:"noop"};if(e instanceof wl)return{type:"console"};if(e instanceof xl)return{type:"perf"};if(e instanceof Oh){const t=e;return{type:"level",config:{level:t.level,logger:Vr(t.logger)}}}return e instanceof Cl?{type:"all",config:{loggers:e.loggers.map(Vr)}}:{type:"noop"}}const ng=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function K0(e){return ng.test(e)}function Ne(){var e;if(typeof((e=globalThis.crypto)==null?void 0:e.randomUUID)=="function")return globalThis.crypto.randomUUID();const t=(function(o){var i;if(typeof((i=globalThis.crypto)==null?void 0:i.getRandomValues)=="function")return globalThis.crypto.getRandomValues(new Uint8Array(o));if(typeof require=="function")try{const{randomBytes:a}=require("crypto");return a(o)}catch{}const r=new Uint8Array(o);for(let a=0;a<o;a++)r[a]=Math.floor(256*Math.random());return r})(16);t[6]=15&t[6]|64,t[8]=63&t[8]|128;const n=Array.from(t,o=>o.toString(16).padStart(2,"0")).join("");return`${n.slice(0,8)}-${n.slice(8,12)}-${n.slice(12,16)}-${n.slice(16,20)}-${n.slice(20)}`}class Rn extends Ce{constructor(t={}){super(),this.children=new Map,this.childResults=[],this.completedCount=0,this.expectedCount=0,this.isFinalized=!1,this.config={aggregate:t.aggregate??(n=>n),onChildComplete:t.onChildComplete??(()=>{}),failFast:t.failFast??!0}}addChild(t,n){if(this.state.stage!==En.Pending)return this.state.stage===En.Aborted&&t.abort(this.state.reason),this;const o=n??this.expectedCount;return this.expectedCount=Math.max(this.expectedCount,o+1),this.children.set(t,o),t.wait(i=>this.handleChildSuccess(t,i,o),i=>this.handleChildError(t,i,o)),this}finalize(){return this.isFinalized||(this.isFinalized=!0,this.expectedCount===0&&this.resolve(this.config.aggregate([]))),this}handleChildSuccess(t,n,o){if(this.state.stage!==En.Pending)return;this.childResults[o]=n,this.completedCount++,this.children.delete(t);const i=this.config.onChildComplete(this.completedCount,this.expectedCount,n,o);if(i!==void 0&&this.progress(i),this.completedCount===this.expectedCount){const r=this.config.aggregate(this.childResults);this.resolve(r)}}handleChildError(t,n,o){if(this.state.stage===En.Pending){if(this.children.delete(t),this.config.failFast){for(const[i]of this.children)i.abort("Sibling task failed");this.children.clear(),this.fail(n)}else if(this.childResults[o]=void 0,this.completedCount++,this.completedCount===this.expectedCount){const i=this.config.aggregate(this.childResults);this.resolve(i)}}}abort(t){for(const[n]of this.children)n.abort(t);this.children.clear(),super.abort(t)}reject(t){for(const[n]of this.children)n.abort(t);this.children.clear(),super.reject(t)}getPendingCount(){return this.children.size}getCompletedCount(){return this.completedCount}static gather(t){const n=new Rn({aggregate:o=>o,onChildComplete:(o,i)=>({completed:o,total:i})});return t.forEach((o,i)=>n.addChild(o,i)),n.finalize(),n}static gatherIndexed(t){const n=new Rn({aggregate:o=>{const i={};return o.forEach((r,a)=>{i[a]=r}),i},onChildComplete:(o,i,r,a)=>({page:a,result:r})});return t.forEach((o,i)=>n.addChild(o,i)),n.finalize(),n}static gatherFrom(t,n){const o=new Rn(n);return t.forEach((i,r)=>o.addChild(i,r)),o.finalize(),o}static first(t){let n=!1;const o=new Rn({aggregate:i=>i[0],failFast:!1});return o.handleChildSuccess=(i,r)=>{if(!n){n=!0;for(const[a]of o.children)a!==i&&a.abort("Race won by sibling");o.resolve(r)}},t.forEach((i,r)=>o.addChild(i,r)),o.finalize(),o}}function Oe(){}class Kr{constructor(){this.dependencyGraph=new Map}addNode(t,n=[]){this.dependencyGraph.set(t,new Set(n))}hasCircularDependencies(){const t=new Set,n=new Set,o=i=>{t.add(i),n.add(i);const r=this.dependencyGraph.get(i)||new Set;for(const a of r)if(t.has(a)){if(n.has(a))return!0}else if(o(a))return!0;return n.delete(i),!1};for(const i of this.dependencyGraph.keys())if(!t.has(i)&&o(i))return!0;return!1}resolveLoadOrder(){if(this.hasCircularDependencies())throw new Error("Circular dependencies detected");const t=[],n=new Set,o=new Set,i=r=>{if(o.has(r))throw new Error("Circular dependency");if(n.has(r))return;o.add(r);const a=this.dependencyGraph.get(r)||new Set;for(const s of a)i(s);o.delete(r),n.add(r),t.push(r)};for(const r of this.dependencyGraph.keys())n.has(r)||i(r);return t}}class ot extends Error{constructor(t){super(t),this.name="PluginRegistrationError"}}class hn extends Error{constructor(t){super(t),this.name="PluginNotFoundError"}}class og extends Error{constructor(t){super(t),this.name="CircularDependencyError"}}class ig extends Error{constructor(t){super(t),this.name="PluginConfigurationError"}}class rg{constructor(t,n){this.store=t,this.pluginId=n}getState(){return this.store.getState().plugins[this.pluginId]}dispatch(t){return this.store.dispatchToPlugin(this.pluginId,t)}subscribeToState(t){return this.store.subscribeToPlugin(this.pluginId,(n,o,i)=>{t(n,o,i)})}onAction(t,n){return this.store.onAction(t,(o,i,r)=>{n(o,i.plugins[this.pluginId],r.plugins[this.pluginId])})}}const jo="START_LOADING_DOCUMENT",Dl="UPDATE_DOCUMENT_LOADING_PROGRESS",Ho="SET_DOCUMENT_LOADED",Xi="SET_DOCUMENT_ERROR",Qi="RETRY_LOADING_DOCUMENT",Uo="CLOSE_DOCUMENT",Ji="SET_ACTIVE_DOCUMENT",er="REORDER_DOCUMENTS",tr="MOVE_DOCUMENT",nr="UPDATE_DOCUMENT_SECURITY",kn="REFRESH_PAGES",Wo="SET_SCALE",Bo="SET_ROTATION",ag=[jo,Dl,Ho,Uo,Ji,Xi,Qi,"REFRESH_DOCUMENT",kn,"SET_PAGES",Wo,Bo,"SET_DEFAULT_SCALE","SET_DEFAULT_ROTATION",er,tr,nr],Zr=(e,t,n,o,i,r,a)=>({type:jo,payload:{documentId:e,name:t,scale:n,rotation:o,passwordProvided:i,autoActivate:r,permissions:a}}),Yr=(e,t)=>({type:Uo,payload:{documentId:e,nextActiveDocumentId:t}}),Xr=(e,t)=>({type:kn,payload:{documentId:e,pageIndexes:t}}),Qr=(e,t)=>({type:Bo,payload:{rotation:e,documentId:t}});class sg{constructor(t,n){this.initialCoreState=n,this.pluginReducers={},this.listeners=[],this.pluginListeners={},this.isDispatching=!1,this.state={core:n,plugins:{}},this.coreReducer=t}addPluginReducer(t,n,o){this.state.plugins[t]=o,this.pluginReducers[t]=n}dispatchToCore(t){if(!this.coreReducer)return this.getState();if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const n=this.getState();try{this.isDispatching=!0,this.state.core=this.coreReducer(this.state.core,t)}finally{this.isDispatching=!1}return this.listeners.forEach(o=>{const i=this.getState();o(t,i,n)}),this.getState()}dispatchToPlugin(t,n,o=!0){if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const i=this.getState(),r=this.pluginReducers[t];if(!r)return i.plugins[t];const a=i.plugins[t];try{this.isDispatching=!0;const s=r(a,n);this.state.plugins[t]=s}finally{this.isDispatching=!1}return o&&this.listeners.forEach(s=>{const c=this.getState();s(n,c,i)}),this.pluginListeners[t]&&this.pluginListeners[t].forEach(s=>{const c=this.getState().plugins[t];s(n,c,a)}),this.getState().plugins[t]}dispatch(t){if(this.isDispatching)throw new Error("Reducers may not dispatch actions. To trigger cascading actions, dispatch from a listener callback instead.");const n=this.getState();try{this.isDispatching=!0,this.isCoreAction(t)&&(this.state.core=this.coreReducer(this.state.core,t));for(const o in this.pluginReducers){const i=this.pluginReducers[o],r=n.plugins[o];i&&(this.state.plugins[o]=i(r,t))}}finally{this.isDispatching=!1}return this.listeners.forEach(o=>{const i=this.getState();o(t,i,n)}),this.getState()}getState(){if(this.isDispatching)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return{core:{...this.state.core},plugins:{...this.state.plugins}}}subscribe(t){if(this.isDispatching)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state.");return this.listeners.push(t),()=>{if(this.isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing.");this.listeners=this.listeners.filter(n=>n!==t)}}subscribeToPlugin(t,n){if(!(t in this.state.plugins))throw new Error(`Plugin state not found for plugin "${t}". Did you forget to call addPluginReducer?`);if(this.isDispatching)throw new Error("You may not call store.subscribeToPlugin() while the reducer is executing.");return this.pluginListeners[t]||(this.pluginListeners[t]=[]),this.pluginListeners[t].push(n),()=>{if(this.isDispatching)throw new Error("You may not unsubscribe from a store listener while the reducer is executing.");this.pluginListeners[t]=this.pluginListeners[t].filter(o=>o!==n),this.pluginListeners[t].length===0&&delete this.pluginListeners[t]}}onAction(t,n){return this.subscribe((o,i,r)=>{o.type===t&&n(o,i,r)})}getPluginStore(t){if(!(t in this.state.plugins))throw new Error(`Plugin state not found for plugin "${t}". Did you forget to call addPluginReducer?`);return new rg(this,t)}isCoreAction(t){return ag.includes(t.type)}destroy(){var t,n;this.listeners.length=0;for(const o in this.pluginListeners)(n=(t=this.pluginListeners[o])==null?void 0:t.splice)==null||n.call(t,0);this.pluginListeners={},this.pluginReducers={},this.state.plugins={},this.state.core={...this.initialCoreState}}}N.Print,N.ModifyContents,N.CopyContents,N.ModifyAnnotations,N.FillForms,N.ExtractForAccessibility,N.AssembleDocument,N.PrintHighQuality;const lg=[N.Print,N.ModifyContents,N.CopyContents,N.ModifyAnnotations,N.FillForms,N.ExtractForAccessibility,N.AssembleDocument,N.PrintHighQuality],cg={[N.Print]:"print",[N.ModifyContents]:"modifyContents",[N.CopyContents]:"copyContents",[N.ModifyAnnotations]:"modifyAnnotations",[N.FillForms]:"fillForms",[N.ExtractForAccessibility]:"extractForAccessibility",[N.AssembleDocument]:"assembleDocument",[N.PrintHighQuality]:"printHighQuality"};function Jr(e,t){if(!e)return;if(t in e)return e[t];const n=cg[t];return n&&n in e?e[n]:void 0}function ko(e,t,n){var o;const i=e.documents[t],r=i?.permissions,a=e.globalPermissions,s=((o=i?.document)==null?void 0:o.permissions)??N.AllowAll,c=Jr(r?.overrides,n);if(c!==void 0)return c;const d=Jr(a?.overrides,n);return d!==void 0?d:!(r?.enforceDocumentPermissions??a?.enforceDocumentPermissions??!0)||(s&n)!==0}function ea(e,t){return lg.reduce((n,o)=>ko(e,t,o)?n|o:n,0)}function dg(e,t,n){const o=e.activeDocumentId;if(o!==t)return o;if(n!==void 0)return n&&e.documents[n]?n:null;const i=e.documentOrder.indexOf(t);return i===-1?null:i>0?e.documentOrder[i-1]:i<e.documentOrder.length-1?e.documentOrder[i+1]:null}const ug=(e,t)=>{switch(t.type){case jo:{const{documentId:n,name:o,scale:i,rotation:r,passwordProvided:a,autoActivate:s=!0,permissions:c}=t.payload,d={id:n,name:o,status:"loading",loadingProgress:0,error:null,document:null,scale:i??e.defaultScale,rotation:r??e.defaultRotation,passwordProvided:a??!1,pageRefreshVersions:{},permissions:c,loadStartedAt:Date.now()};return{...e,documents:{...e.documents,[n]:d},documentOrder:[...e.documentOrder,n],activeDocumentId:s||!e.activeDocumentId?n:e.activeDocumentId}}case Dl:{const{documentId:n,progress:o}=t.payload,i=e.documents[n];return i&&i.status==="loading"?{...e,documents:{...e.documents,[n]:{...i,loadingProgress:o}}}:e}case Ho:{const{documentId:n,document:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,status:"loaded",document:o,error:null,errorCode:void 0,errorDetails:void 0,passwordProvided:void 0,loadedAt:Date.now()}}}:e}case Xi:{const{documentId:n,error:o,errorCode:i,errorDetails:r}=t.payload,a=e.documents[n];return a?{...e,documents:{...e.documents,[n]:{...a,status:"error",error:o,errorCode:i,errorDetails:r}}}:e}case Qi:{const{documentId:n,passwordProvided:o}=t.payload,i=e.documents[n];return i&&i.status==="error"?{...e,documents:{...e.documents,[n]:{...i,status:"loading",loadingProgress:0,error:null,errorCode:void 0,errorDetails:void 0,passwordProvided:o??!1,loadStartedAt:Date.now()}}}:e}case Uo:{const{documentId:n,nextActiveDocumentId:o}=t.payload,{[n]:i,...r}=e.documents;return{...e,documents:r,documentOrder:e.documentOrder.filter(a=>a!==n),activeDocumentId:dg(e,n,o)}}case tr:{const{documentId:n,toIndex:o}=t.payload,i=(function(r,a,s){const c=r.indexOf(a);if(c===-1||s<0||s>=r.length||c===s)return null;const d=[...r];return d.splice(c,1),d.splice(s,0,a),d})(e.documentOrder,n,o);return i?{...e,documentOrder:i}:e}case er:return{...e,documentOrder:t.payload};case Ji:return{...e,activeDocumentId:t.payload};case Wo:{const{scale:n,documentId:o}=t.payload,i=o??e.activeDocumentId;if(!i)return e;const r=e.documents[i];return r?{...e,documents:{...e.documents,[i]:{...r,scale:n}}}:e}case Bo:{const{rotation:n,documentId:o}=t.payload,i=o??e.activeDocumentId;if(!i)return e;const r=e.documents[i];return r?{...e,documents:{...e.documents,[i]:{...r,rotation:n}}}:e}case kn:{const{documentId:n,pageIndexes:o}=t.payload,i=e.documents[n];if(!i)return e;const r={...i.pageRefreshVersions};for(const a of o)r[a]=(r[a]||0)+1;return{...e,documents:{...e.documents,[n]:{...i,pageRefreshVersions:r}}}}case nr:{const{documentId:n,permissions:o,isOwnerUnlocked:i}=t.payload,r=e.documents[n];return r?.document?{...e,documents:{...e.documents,[n]:{...r,document:{...r.document,permissions:o,isOwnerUnlocked:i}}}}:e}default:return e}};class mg{constructor(t,n){this.plugins=new Map,this.manifests=new Map,this.capabilities=new Map,this.status=new Map,this.configurations=new Map,this.initPromise=null,this.pendingRegistrations=[],this.processingRegistrations=[],this.initialized=!1,this.isInitializing=!1,this.pluginsReadyPromise=null,this.destroyed=!1,this.resolver=new Kr,this.engine=t,this.initialCoreState=(o=>({documents:{},documentOrder:[],activeDocumentId:null,defaultScale:o?.defaultScale??1,defaultRotation:o?.defaultRotation??sn.Degree0,globalPermissions:o?.permissions}))(n),this.store=new sg(ug,this.initialCoreState),this.logger=n?.logger??new bl}getLogger(){return this.logger}registerPlugin(t,n){if(this.initialized&&!this.isInitializing)throw new ot("Cannot register plugins after initialization");this.validateManifest(t.manifest),this.store.addPluginReducer(t.manifest.id,t.reducer,typeof t.initialState=="function"?t.initialState(this.initialCoreState,{...t.manifest.defaultConfig,...n}):t.initialState),this.pendingRegistrations.push({package:t,config:n})}getStore(){return this.store}getEngine(){return this.engine}pluginsReady(){return this.pluginsReadyPromise||(this.pluginsReadyPromise=(async()=>{this.initialized||await this.initialize();const t=Array.from(this.plugins.values()).map(n=>typeof n.ready=="function"?n.ready():Promise.resolve());await Promise.all(t)})()),this.pluginsReadyPromise}async initialize(){if(this.destroyed)throw new ot("Registry has been destroyed");return this.initPromise||(this.initPromise=(async()=>{if(this.initialized)throw new ot("Registry is already initialized");this.isInitializing=!0;try{if(this.destroyed)return;for(;this.pendingRegistrations.length>0;){if(this.destroyed)return;this.processingRegistrations=[...this.pendingRegistrations],this.pendingRegistrations=[];for(const n of this.processingRegistrations){const o=new Set,i=[...n.package.manifest.requires,...n.package.manifest.optional];for(const r of i){const a=this.processingRegistrations.find(s=>s.package.manifest.provides.includes(r));a&&o.add(a.package.manifest.id)}this.resolver.addNode(n.package.manifest.id,[...o])}const t=this.resolver.resolveLoadOrder();for(const n of t){const o=this.processingRegistrations.find(i=>i.package.manifest.id===n);this.instantiatePlugin(o.package.manifest,o.package.create,o.config)}for(const n of t)await this.runPluginInitialization(n);this.processingRegistrations=[],this.resolver=new Kr}this.initialized=!0}catch(t){throw t instanceof Error?new og(`Failed to resolve plugin dependencies: ${t.message}`):t}finally{this.isInitializing=!1}})()),this.initPromise}instantiatePlugin(t,n,o){const i={...t.defaultConfig,...o};this.validateConfig(t.id,i,t.defaultConfig);const r=n(this,i);this.validatePlugin(r);for(const a of t.provides){if(this.capabilities.has(a))throw new ot(`Capability ${a} is already provided by plugin ${this.capabilities.get(a)}`);this.capabilities.set(a,t.id)}this.plugins.set(t.id,r),this.manifests.set(t.id,t),this.status.set(t.id,"registered"),this.configurations.set(t.id,i)}async runPluginInitialization(t){const n=this.plugins.get(t);if(!n)return;const o=this.manifests.get(t),i=this.configurations.get(t);for(const r of o.requires)if(!this.capabilities.has(r))throw new ot(`Missing required capability: ${r} for plugin ${t}`);this.logger.debug("PluginRegistry","InitializePlugin",`Initializing plugin ${t}`);try{n.initialize&&await n.initialize(i),this.status.set(t,"active"),this.logger.info("PluginRegistry","PluginInitialized",`Plugin ${t} initialized successfully`)}catch(r){throw this.status.set(t,"error"),this.logger.error("PluginRegistry","InitializationFailed",`Plugin ${t} initialization failed`,{error:r}),r}}getPluginConfig(t){const n=this.configurations.get(t);if(!n)throw new hn(`Configuration for plugin ${t} not found`);return n}validateConfig(t,n,o){const i=Object.keys(o).filter(r=>!n.hasOwnProperty(r));if(i.length>0)throw new ig(`Missing required configuration keys for plugin ${t}: ${i.join(", ")}`)}async updatePluginConfig(t,n){const o=this.getPlugin(t);if(!o)throw new hn(`Plugin ${t} not found`);const i=this.manifests.get(t),r=this.configurations.get(t);if(!i||!r)throw new hn(`Plugin ${t} not found`);const a={...r,...n};this.validateConfig(t,a,i.defaultConfig),this.configurations.set(t,a),o.initialize&&await o.initialize(a)}registerPluginBatch(t){for(const n of t)this.registerPlugin(n.package,n.config)}async unregisterPlugin(t){const n=this.plugins.get(t);if(!n)throw new hn(`Plugin ${t} is not registered`);const o=this.manifests.get(t);if(!o)throw new hn(`Manifest for plugin ${t} not found`);for(const[i,r]of this.manifests.entries())if(i!==t&&[...r.requires,...r.optional].some(a=>o.provides.includes(a)))throw new ot(`Cannot unregister plugin ${t}: plugin ${i} depends on it`);try{n.destroy&&await n.destroy();for(const i of o.provides)this.capabilities.delete(i);this.plugins.delete(t),this.manifests.delete(t),this.status.delete(t)}catch(i){throw i instanceof Error?new Error(`Failed to unregister plugin ${t}: ${i.message}`):i}}getPlugin(t){return this.plugins.get(t)||null}getCapabilityProvider(t){const n=this.capabilities.get(t);return n?this.getPlugin(n):null}hasCapability(t){return this.capabilities.has(t)}getAllPlugins(){return Array.from(this.plugins.values())}getPluginStatus(t){const n=this.status.get(t);if(!n)throw new hn(`Plugin ${t} not found`);return n}validatePlugin(t){if(!t.id)throw new ot("Plugin must have an id")}validateManifest(t){if(!t.id)throw new ot("Manifest must have an id");if(!t.name)throw new ot("Manifest must have a name");if(!t.version)throw new ot("Manifest must have a version");if(!Array.isArray(t.provides))throw new ot("Manifest must have a provides array");if(!Array.isArray(t.requires))throw new ot("Manifest must have a requires array");if(!Array.isArray(t.optional))throw new ot("Manifest must have an optional array")}isDestroyed(){return this.destroyed}async destroy(){var t;if(this.destroyed)throw new ot("Registry has already been destroyed");this.destroyed=!0;try{await this.initPromise}catch{}for(const n of Array.from(this.plugins.values()).reverse())await((t=n.destroy)==null?void 0:t.call(n));this.store.destroy(),this.plugins.clear(),this.manifests.clear(),this.capabilities.clear(),this.status.clear(),this.pendingRegistrations.length=0,this.processingRegistrations.length=0}}function Pe(e,t){return{package:e,config:t}}function hg(e){return"autoMountElements"in e&&typeof e.autoMountElements=="function"}class Me{constructor(t,n){if(this.id=t,this.registry=n,this.cooldownActions={},this.debouncedTimeouts={},this.unsubscribeFromState=null,this.unsubscribeFromCoreStore=null,this.unsubscribeFromStartLoadingDocument=null,this.unsubscribeFromSetDocumentLoaded=null,this.unsubscribeFromCloseDocument=null,this.unsubscribeFromSetScale=null,this.unsubscribeFromSetRotation=null,t!==this.constructor.id)throw new Error(`Plugin ID mismatch: ${t} !== ${this.constructor.id}`);this.engine=this.registry.getEngine(),this.logger=this.registry.getLogger(),this.coreStore=this.registry.getStore(),this.pluginStore=this.coreStore.getPluginStore(this.id),this.unsubscribeFromState=this.pluginStore.subscribeToState((o,i,r)=>{this.onStoreUpdated(r,i)}),this.unsubscribeFromCoreStore=this.coreStore.subscribe((o,i,r)=>{this.onCoreStoreUpdated(r,i),i.core.activeDocumentId!==r.core.activeDocumentId&&this.onActiveDocumentChanged(r.core.activeDocumentId,i.core.activeDocumentId)}),this.unsubscribeFromStartLoadingDocument=this.coreStore.onAction(jo,o=>{this.onDocumentLoadingStarted(o.payload.documentId)}),this.unsubscribeFromSetDocumentLoaded=this.coreStore.onAction(Ho,o=>{this.onDocumentLoaded(o.payload.documentId)}),this.unsubscribeFromCloseDocument=this.coreStore.onAction(Uo,o=>{this.onDocumentClosed(o.payload.documentId)}),this.unsubscribeFromSetScale=this.coreStore.onAction(Wo,(o,i)=>{const r=o.payload.documentId??i.core.activeDocumentId;r&&this.onScaleChanged(r,o.payload.scale)}),this.unsubscribeFromSetRotation=this.coreStore.onAction(Bo,(o,i)=>{const r=o.payload.documentId??i.core.activeDocumentId;r&&this.onRotationChanged(r,o.payload.rotation)}),this.readyPromise=new Promise(o=>{this.readyResolve=o}),this.readyResolve()}provides(){if(!this._capability){const t=this.buildCapability();this._capability=Object.freeze(t)}return this._capability}get state(){return this.pluginStore.getState()}get coreState(){return this.coreStore.getState()}getState(){return this.pluginStore.getState()}getCoreState(){return this.coreStore.getState()}dispatchCoreAction(t){return this.coreStore.dispatchToCore(t)}dispatchToAllPlugins(t){return this.coreStore.dispatch(t)}dispatch(t){return this.pluginStore.dispatch(t)}cooldownDispatch(t,n=100){const o=Date.now();return o-(this.cooldownActions[t.type]||0)>=n&&(this.cooldownActions[t.type]=o,this.dispatch(t),!0)}debouncedDispatch(t,n=100){const o=t.type;this.debouncedTimeouts[o]&&clearTimeout(this.debouncedTimeouts[o]),this.debouncedTimeouts[o]=setTimeout(()=>{this.dispatch(t),delete this.debouncedTimeouts[o]},n)}cancelDebouncedDispatch(t){this.debouncedTimeouts[t]&&(clearTimeout(this.debouncedTimeouts[t]),delete this.debouncedTimeouts[t])}subscribe(t){return this.pluginStore.subscribeToState(t)}subscribeToCoreStore(t){return this.coreStore.subscribe(t)}onStoreUpdated(t,n){}onCoreStoreUpdated(t,n){}onDocumentLoadingStarted(t){}onDocumentLoaded(t){}onDocumentClosed(t){}onActiveDocumentChanged(t,n){}onScaleChanged(t,n){}onRotationChanged(t,n){}destroy(){Object.values(this.debouncedTimeouts).forEach(t=>{clearTimeout(t)}),this.debouncedTimeouts={},this.unsubscribeFromState&&(this.unsubscribeFromState(),this.unsubscribeFromState=null),this.unsubscribeFromCoreStore&&(this.unsubscribeFromCoreStore(),this.unsubscribeFromCoreStore=null),this.unsubscribeFromStartLoadingDocument&&(this.unsubscribeFromStartLoadingDocument(),this.unsubscribeFromStartLoadingDocument=null),this.unsubscribeFromSetDocumentLoaded&&(this.unsubscribeFromSetDocumentLoaded(),this.unsubscribeFromSetDocumentLoaded=null),this.unsubscribeFromCloseDocument&&(this.unsubscribeFromCloseDocument(),this.unsubscribeFromCloseDocument=null),this.unsubscribeFromSetScale&&(this.unsubscribeFromSetScale(),this.unsubscribeFromSetScale=null),this.unsubscribeFromSetRotation&&(this.unsubscribeFromSetRotation(),this.unsubscribeFromSetRotation=null)}ready(){return this.readyPromise}markReady(){this.readyResolve()}resetReady(){this.readyPromise=new Promise(t=>{this.readyResolve=t})}getActiveDocumentId(){const t=this.coreState.core.activeDocumentId;if(!t)throw new Error("No active document");return t}getActiveDocumentIdOrNull(){return this.coreState.core.activeDocumentId}getCoreDocument(t){const n=t??this.getActiveDocumentIdOrNull();return n?this.coreState.core.documents[n]??null:null}getCoreDocumentOrThrow(t){const n=this.getCoreDocument(t);if(!n)throw new Error(`Document not found: ${t??"active"}`);return n}getDocumentPermissions(t){const n=t??this.coreState.core.activeDocumentId;return n?ea(this.coreState.core,n):N.AllowAll}checkPermission(t,...n){const o=t??this.coreState.core.activeDocumentId;return!o||n.every(i=>ko(this.coreState.core,o,i))}requirePermission(t,...n){const o=t??this.coreState.core.activeDocumentId;if(!o)return;const i=[];for(const r of n)ko(this.coreState.core,o,r)||i.push(r);if(i.length>0){const r=ea(this.coreState.core,o);throw new Zh(i,r)}}}class So{constructor(t,n){this.handler=t,this.options=n,this.lastRun=0,this.handle=o=>{this.options.mode==="debounce"?this.debounce(o):this.throttle(o)}}debounce(t){this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(t),this.timeoutId=void 0},this.options.wait)}throttle(t){if(this.options.mode==="debounce")return;const n=Date.now(),o=this.options.throttleMode||"leading-trailing";n-this.lastRun>=this.options.wait&&(o==="leading-trailing"&&this.handler(t),this.lastRun=n),this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(()=>{this.handler(t),this.lastRun=Date.now(),this.timeoutId=void 0},this.options.wait-(n-this.lastRun))}destroy(){this.timeoutId&&window.clearTimeout(this.timeoutId)}}class Pi{constructor(t,n){this.handler=t,this.options=n,this.controls=new Map,this.handle=o=>{const i=String(this.options.keyExtractor(o));let r=this.controls.get(i);r||(r=new So(this.handler,this.baseOptions),this.controls.set(i,r)),r.handle(o)},this.baseOptions={mode:n.mode,wait:n.wait,...n.mode==="throttle"&&"throttleMode"in n?{throttleMode:n.throttleMode}:{}}}destroy(){for(const t of this.controls.values())t.destroy();this.controls.clear()}}function Di(e){return"keyExtractor"in e}function ve(e,t,n){return e<t?t:e>n?n:e}function tn(e,t,n){if(e===t)return!0;if(e==null||t==null)return e===t;const o=typeof e;if(o!==typeof t)return!1;if(o==="object"){n||(n=new Set);const i=(function(s,c){return`${ta(s)}__${ta(c)}`})(e,t);if(n.has(i))return!0;n.add(i);const r=Array.isArray(e),a=Array.isArray(t);return r&&a?(function(s,c,d){if(s.length!==c.length)return!1;const u=new Array(c.length).fill(!1);e:for(let m=0;m<s.length;m++){const h=s[m];for(let g=0;g<c.length;g++)if(!u[g]&&tn(h,c[g],d)){u[g]=!0;continue e}return!1}return!0})(e,t,n):!r&&!a&&(function(s,c,d){const u=Object.keys(s).sort(),m=Object.keys(c).sort();if(u.length!==m.length)return!1;for(let h=0;h<u.length;h++)if(u[h]!==m[h])return!1;for(const h of u)if(!tn(s[h],c[h],d))return!1;return!0})(e,t,n)}return!1}let gg=0;const ti=new WeakMap;function ta(e){return ti.has(e)||ti.set(e,++gg),ti.get(e)}function Ye(){const e=new Set;return{emit:(t=void 0)=>e.forEach(n=>n(t)),on:t=>(e.add(t),()=>e.delete(t)),off:t=>e.delete(t),clear:()=>e.clear()}}function re(e,t=tn){const n=new Set,o=new Map;let i=e;const r=(a,s)=>{let c=a,d=()=>{};if(s){if(Di(s)){const u=new Pi(a,s);c=u.handle,d=()=>u.destroy()}else{const u=new So(a,s);c=u.handle,d=()=>u.destroy()}o.set(a,{wrapped:c,destroy:d})}return i!==void 0&&c(i),n.add(c),()=>{n.delete(c),d(),o.delete(a)}};return{get value(){return i},emit(a=void 0){i!==void 0&&t(i,a)||(i=a,(s=>{n.forEach(c=>c(s))})(a))},on:r,off(a){const s=o.get(a);s?(n.delete(s.wrapped),s.destroy(),o.delete(a)):n.delete(a)},clear(){n.clear(),o.forEach(a=>a.destroy()),o.clear()},select:(a,s=tn)=>(c,d)=>{let u;if(i!==void 0){const m=a(i);u=m,c(m)}return r(m=>{const h=a(m);u!==void 0&&s(u,h)||(u=h,c(h))},d)}}}function tt(e,t){const n=t?.cache??!0,o=t?.equality??tn,i=new Map,r=new Map,a=new Map,s=new Set,c=new Map,d=u=>String(u);return{emit(u,m){const h=d(u);if(n){const f=i.get(h);if(f!==void 0&&o(f,m))return;i.set(h,m)}const g=r.get(h);g&&g.forEach(f=>f(m));const p=e(u,m);s.forEach(f=>f(p))},forScope(u){const m=d(u);return(h,g)=>{const p=(b=>{let x=r.get(b);return x||(x=new Set,r.set(b,x)),x})(m),f=(b=>{let x=a.get(b);return x||(x=new Map,a.set(b,x)),x})(m);let v=h,y=()=>{};if(g){if(Di(g)){const b=new Pi(h,g);v=b.handle,y=()=>b.destroy()}else{const b=new So(h,g);v=b.handle,y=()=>b.destroy()}f.set(h,{wrapped:v,destroy:y})}if(n){const b=i.get(m);b!==void 0&&v(b)}return p.add(v),()=>{p.delete(v),y(),f.delete(h),p.size===0&&r.delete(m),f.size===0&&a.delete(m)}}},onGlobal:(u,m)=>{let h=u,g=()=>{};if(m){if(Di(m)){const p=new Pi(u,m);h=p.handle,g=()=>p.destroy()}else{const p=new So(u,m);h=p.handle,g=()=>p.destroy()}c.set(u,{wrapped:h,destroy:g})}return s.add(h),()=>{s.delete(h),g(),c.delete(u)}},getValue:u=>n?i.get(d(u)):void 0,getScopes:()=>n?Array.from(i.keys()):Array.from(r.keys()),clearScope(u){const m=d(u);n&&i.delete(m);const h=r.get(m);h&&(h.clear(),r.delete(m));const g=a.get(m);g&&(g.forEach(p=>p.destroy()),g.clear(),a.delete(m))},clear(){n&&i.clear(),r.forEach(u=>u.clear()),r.clear(),a.forEach(u=>{u.forEach(m=>m.destroy()),u.clear()}),a.clear(),s.clear(),c.forEach(u=>u.destroy()),c.clear()}}}class pg{constructor(t){this.autoMountElements=[],this.package=t}addUtility(t){return this.autoMountElements.push({component:t,type:"utility"}),this}addWrapper(t){return this.autoMountElements.push({component:t,type:"wrapper"}),this}build(){return{...this.package,autoMountElements:()=>this.autoMountElements}}}function ln(e){return new pg(e)}const or=rn({registry:null,coreState:null,isInitializing:!0,pluginsReady:!1,activeDocumentId:null,activeDocument:null,documents:{},documentStates:[]});function fg({plugins:e,children:t}){const{utilities:n,wrappers:o}=X(()=>{const i=[],r=[];for(const a of e){const s=a.package;if(hg(s)){const c=s.autoMountElements()||[];for(const d of c)d.type==="utility"?i.push(d.component):d.type==="wrapper"&&r.push(d.component)}}return{utilities:i,wrappers:r}},[e]);return D(Y,{children:[o.reduce((i,r)=>D(r,{children:i}),t),n.map((i,r)=>D(i,{},`utility-${r}`))]})}function vg({engine:e,config:t,logger:n,onInitialized:o,plugins:i,children:r,autoMountDomElements:a=!0}){const[s,c]=z(null),[d,u]=z(null),[m,h]=z(!0),[g,p]=z(!1),f=K(o);T(()=>{f.current=o},[o]),T(()=>{const b={...t,logger:t?.logger??n},x=new mg(e,b);x.registerPluginBatch(i);let w;return(async()=>{var C;if(await x.initialize(),x.isDestroyed())return;const I=x.getStore();u(I.getState().core);const k=I.subscribe((S,M,P)=>{I.isCoreAction(S)&&M.core!==P.core&&u(M.core)});if(await((C=f.current)==null?void 0:C.call(f,x)),!x.isDestroyed())return x.pluginsReady().then(()=>{x.isDestroyed()||p(!0)}),c(x),h(!1),k;k()})().then(C=>{w=C}).catch(console.error),()=>{w?.(),x.destroy(),c(null),u(null),h(!0),p(!1)}},[e,i]);const v=X(()=>{const b=d?.activeDocumentId??null,x=d?.documents??{},w=d?.documentOrder??[],C=b&&x[b]?x[b]:null,I=w.map(k=>x[k]).filter(k=>k!=null);return{registry:s,coreState:d,isInitializing:m,pluginsReady:g,activeDocumentId:b,activeDocument:C,documents:x,documentStates:I}},[s,d,m,g]),y=typeof r=="function"?r(v):r;return D(or.Provider,{value:v,children:g&&a?D(fg,{plugins:i,children:y}):y})}function st(e){const{registry:t}=(function(){const o=an(or);if(o===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:i,isInitializing:r}=o;if(r)return o;if(i===null)throw new Error("PDF registry failed to initialize properly");return o})();if(t===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const n=t.getPlugin(e);if(!n)throw new Error(`Plugin ${e} not found`);return{plugin:n,isLoading:!1,ready:n.ready()}}function Le(e){const{plugin:t,isLoading:n,ready:o}=st(e);if(!t)return{provides:null,isLoading:n,ready:o};if(!t.provides)throw new Error(`Plugin ${e} does not provide a capability`);return{provides:t.provides(),isLoading:n,ready:o}}function Po(){const{coreState:e}=an(or);return e}function Xe(e){const t=Po();return X(()=>t&&e?t.documents[e]??null:null,[t,e])}N.Print,N.ModifyContents,N.CopyContents,N.ModifyAnnotations,N.FillForms,N.ExtractForAccessibility,N.AssembleDocument,N.PrintHighQuality;const yg=[N.Print,N.ModifyContents,N.CopyContents,N.ModifyAnnotations,N.FillForms,N.ExtractForAccessibility,N.AssembleDocument,N.PrintHighQuality],bg={[N.Print]:"print",[N.ModifyContents]:"modifyContents",[N.CopyContents]:"copyContents",[N.ModifyAnnotations]:"modifyAnnotations",[N.FillForms]:"fillForms",[N.ExtractForAccessibility]:"extractForAccessibility",[N.AssembleDocument]:"assembleDocument",[N.PrintHighQuality]:"printHighQuality"};function na(e,t){if(!e)return;if(t in e)return e[t];const n=bg[t];return n&&n in e?e[n]:void 0}function ni(e,t,n){var o;const i=e.documents[t],r=i?.permissions,a=e.globalPermissions,s=((o=i?.document)==null?void 0:o.permissions)??N.AllowAll,c=na(r?.overrides,n);if(c!==void 0)return c;const d=na(a?.overrides,n);return d!==void 0?d:!(r?.enforceDocumentPermissions??a?.enforceDocumentPermissions??!0)||(s&n)!==0}function Ml(e){const t=Po();return X(()=>{var n,o;if(!t)return{permissions:N.AllowAll,pdfPermissions:N.AllowAll,hasPermission:()=>!0,hasAllPermissions:()=>!0,canPrint:!0,canModifyContents:!0,canCopyContents:!0,canModifyAnnotations:!0,canFillForms:!0,canExtractForAccessibility:!0,canAssembleDocument:!0,canPrintHighQuality:!0};const i=(function(a,s){return yg.reduce((c,d)=>ni(a,s,d)?c|d:c,0)})(t,e),r=a=>ni(t,e,a);return{permissions:i,pdfPermissions:((o=(n=t.documents[e])==null?void 0:n.document)==null?void 0:o.permissions)??N.AllowAll,hasPermission:r,hasAllPermissions:(...a)=>a.every(s=>ni(t,e,s)),canPrint:r(N.Print),canModifyContents:r(N.ModifyContents),canCopyContents:r(N.CopyContents),canModifyAnnotations:r(N.ModifyAnnotations),canFillForms:r(N.FillForms),canExtractForAccessibility:r(N.ExtractForAccessibility),canAssembleDocument:r(N.AssembleDocument),canPrintHighQuality:r(N.PrintHighQuality)}},[t,e])}const wg="https://cdn.jsdelivr.net/npm/@embedpdf/pdfium@2.2.0/dist/pdfium.wasm";rn(void 0);const Al="viewport",xg={id:Al,name:"Viewport Plugin",version:"1.0.0",provides:["viewport"],requires:[],optional:[],defaultConfig:{viewportGap:10,scrollEndDelay:300}},zl="INIT_VIEWPORT_STATE",Tl="CLEANUP_VIEWPORT_STATE",El="REGISTER_VIEWPORT",_l="UNREGISTER_VIEWPORT",Rl="SET_VIEWPORT_METRICS",Nl="SET_VIEWPORT_SCROLL_METRICS",Ol="SET_VIEWPORT_GAP",Ll="SET_SCROLL_ACTIVITY",$l="SET_SMOOTH_SCROLL_ACTIVITY",Fl="ADD_VIEWPORT_GATE",jl="REMOVE_VIEWPORT_GATE";function oa(e,t){return{type:$l,payload:{documentId:e,isSmoothScrolling:t}}}const Cg={viewportMetrics:{width:0,height:0,scrollTop:0,scrollLeft:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0,clientLeft:0,clientTop:0,relativePosition:{x:0,y:0}},isScrolling:!1,isSmoothScrolling:!1,gates:new Set},ia={viewportGap:0,documents:{},activeViewports:new Set,activeDocumentId:null},Hl=class extends Me{constructor(e,t,n){var o;super(e,t),this.id=e,this.viewportResize$=re(),this.viewportMetrics$=re(),this.scrollMetrics$=re(),this.scrollActivity$=re(),this.gateState$=re(),this.scrollRequests$=new Map,n.viewportGap&&this.dispatch((o=n.viewportGap,{type:Ol,payload:o})),this.scrollEndDelay=n.scrollEndDelay||100}onDocumentLoadingStarted(e){this.dispatch((function(t){return{type:zl,payload:{documentId:t}}})(e)),this.scrollRequests$.set(e,Ye()),this.logger.debug("ViewportPlugin","DocumentOpened",`Initialized viewport state for document: ${e}`)}onDocumentClosed(e){var t;this.dispatch((function(n){return{type:Tl,payload:{documentId:n}}})(e)),(t=this.scrollRequests$.get(e))==null||t.clear(),this.scrollRequests$.delete(e),this.logger.debug("ViewportPlugin","DocumentClosed",`Cleaned up viewport state for document: ${e}`)}buildCapability(){return{getViewportGap:()=>this.state.viewportGap,getMetrics:()=>this.getMetrics(),scrollTo:e=>this.scrollTo(e),isScrolling:()=>this.isScrolling(),isSmoothScrolling:()=>this.isSmoothScrolling(),isGated:e=>this.isGated(e),hasGate:(e,t)=>this.hasGate(e,t),getGates:e=>this.getGates(e),forDocument:e=>this.createViewportScope(e),gate:(e,t)=>this.gate(e,t),releaseGate:(e,t)=>this.releaseGate(e,t),isViewportMounted:e=>this.state.activeViewports.has(e),onViewportChange:this.viewportMetrics$.on,onViewportResize:this.viewportResize$.on,onScrollChange:this.scrollMetrics$.on,onScrollActivity:this.scrollActivity$.on,onGateChange:this.gateState$.on}}createViewportScope(e){return{getMetrics:()=>this.getMetrics(e),scrollTo:t=>this.scrollTo(t,e),isScrolling:()=>this.isScrolling(e),isSmoothScrolling:()=>this.isSmoothScrolling(e),isGated:()=>this.isGated(e),hasGate:t=>this.hasGate(t,e),getGates:()=>this.getGates(e),gate:t=>this.gate(t,e),releaseGate:t=>this.releaseGate(t,e),onViewportChange:t=>this.viewportMetrics$.on(n=>{n.documentId===e&&t(n.metrics)}),onScrollChange:t=>this.scrollMetrics$.on(n=>{n.documentId===e&&t(n.scrollMetrics)}),onScrollActivity:t=>this.scrollActivity$.on(n=>{n.documentId===e&&t(n.activity)}),onGateChange:t=>this.gateState$.on(n=>{n?.documentId===e&&t(n)})}}registerViewport(e){if(!this.state.documents[e])throw new Error(`Cannot register viewport for ${e}: document state not found. Document must be opened before registering viewport.`);this.state.activeViewports.has(e)||(this.dispatch((function(t){return{type:El,payload:{documentId:t}}})(e)),this.logger.debug("ViewportPlugin","RegisterViewport",`Registered viewport (DOM mounted) for document: ${e}`))}unregisterViewport(e){this.registry.isDestroyed()||this.state.activeViewports.has(e)&&(this.dispatch((function(t){return{type:_l,payload:{documentId:t}}})(e)),this.logger.debug("ViewportPlugin","UnregisterViewport",`Unregistered viewport (DOM unmounted) for document: ${e}. State preserved.`))}setViewportResizeMetrics(e,t){if(this.registry.isDestroyed())return;this.dispatch((function(o,i){return{type:Rl,payload:{documentId:o,metrics:i}}})(e,t));const n=this.state.documents[e];n&&this.viewportResize$.emit({documentId:e,metrics:n.viewportMetrics})}setViewportScrollMetrics(e,t){if(this.registry.isDestroyed())return;const n=this.state.documents[e];n&&(t.scrollTop===n.viewportMetrics.scrollTop&&t.scrollLeft===n.viewportMetrics.scrollLeft||(this.dispatch((function(o,i){return{type:Nl,payload:{documentId:o,scrollMetrics:i}}})(e,t)),this.bumpScrollActivity(e),this.scrollMetrics$.emit({documentId:e,scrollMetrics:t})))}onScrollRequest(e,t){const n=this.scrollRequests$.get(e);if(!n)throw new Error(`Cannot subscribe to scroll requests for ${e}: document state not initialized`);return n.on(t)}gate(e,t){const n=this.state.documents[t];n?n.gates.has(e)||(this.dispatch((function(o,i){return{type:Fl,payload:{documentId:o,key:i}}})(t,e)),this.logger.debug("ViewportPlugin","GateAdded",`Added gate '${e}' for document: ${t}. Total gates: ${n.gates.size+1}`)):this.logger.warn("ViewportPlugin","GateViewport",`Cannot gate viewport for ${t}: document not found`)}releaseGate(e,t){const n=this.state.documents[t];n?n.gates.has(e)&&(this.dispatch((function(o,i){return{type:jl,payload:{documentId:o,key:i}}})(t,e)),this.logger.debug("ViewportPlugin","GateReleased",`Released gate '${e}' for document: ${t}. Remaining gates: ${n.gates.size-1}`)):this.logger.warn("ViewportPlugin","ReleaseGate",`Cannot release gate for ${t}: document not found`)}getViewportState(e){const t=e??this.getActiveDocumentId(),n=this.state.documents[t];if(!n)throw new Error(`Viewport state not found for document: ${t}`);return n}getMetrics(e){return this.getViewportState(e).viewportMetrics}isScrolling(e){return this.getViewportState(e).isScrolling}isSmoothScrolling(e){return this.getViewportState(e).isSmoothScrolling}isGated(e){return this.getViewportState(e).gates.size>0}hasGate(e,t){return this.getViewportState(t).gates.has(e)}getGates(e){const t=this.getViewportState(e);return Array.from(t.gates)}scrollTo(e,t){const n=t??this.getActiveDocumentId(),o=this.getViewportState(n),{x:i,y:r,alignX:a,alignY:s,behavior:c="auto"}=e;c==="smooth"&&this.dispatch(oa(n,!0));const d=o.viewportMetrics;let u=i,m=r;a!==void 0&&(u=i-d.clientWidth*(a/100)),s!==void 0&&(m=r-d.clientHeight*(s/100));const h=this.scrollRequests$.get(n);h&&h.emit({x:u,y:m,behavior:c})}bumpScrollActivity(e){this.debouncedDispatch((function(t,n){return{type:Ll,payload:{documentId:t,isScrolling:n}}})(e,!1),this.scrollEndDelay),this.debouncedDispatch(oa(e,!1),this.scrollEndDelay)}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];if(o!==i&&(this.viewportMetrics$.emit({documentId:n,metrics:i.viewportMetrics}),!o||o.isScrolling===i.isScrolling&&o.isSmoothScrolling===i.isSmoothScrolling||this.scrollActivity$.emit({documentId:n,activity:{isScrolling:i.isScrolling,isSmoothScrolling:i.isSmoothScrolling}}),o&&o.gates!==i.gates)){const r=Array.from(o.gates),a=Array.from(i.gates),s=a.find(d=>!r.includes(d)),c=r.find(d=>!a.includes(d));this.gateState$.emit({documentId:n,isGated:i.gates.size>0,gates:a,addedGate:s,removedGate:c}),this.logger.debug("ViewportPlugin","GateStateChanged",`Gate state changed for document ${n}. Gates: [${a.join(", ")}], Gated: ${i.gates.size>0}`)}}}async initialize(e){this.logger.info("ViewportPlugin","Initialize","Viewport plugin initialized")}async destroy(){this.viewportMetrics$.clear(),this.viewportResize$.clear(),this.scrollMetrics$.clear(),this.scrollActivity$.clear(),this.gateState$.clear(),this.scrollRequests$.forEach(e=>e.clear()),this.scrollRequests$.clear(),super.destroy()}};Hl.id="viewport";let qo=Hl;const Ig={manifest:xg,create:(e,t)=>new qo(Al,e,t),reducer:(e=ia,t)=>{switch(t.type){case zl:{const{documentId:n}=t.payload;return{...e,documents:{...e.documents,[n]:{...Cg,gates:new Set}}}}case Tl:{const{documentId:n}=t.payload,{[n]:o,...i}=e.documents,r=new Set(e.activeViewports);return r.delete(n),{...e,documents:i,activeViewports:r,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case El:{const{documentId:n}=t.payload,o=new Set(e.activeViewports);return o.add(n),{...e,activeViewports:o,activeDocumentId:e.activeDocumentId??n}}case _l:{const{documentId:n}=t.payload,o=new Set(e.activeViewports);return o.delete(n),{...e,activeViewports:o}}case"SET_ACTIVE_VIEWPORT_DOCUMENT":return{...e,activeDocumentId:t.payload};case Ol:return{...e,viewportGap:t.payload};case Rl:{const{documentId:n,metrics:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,viewportMetrics:{width:o.width,height:o.height,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft,clientWidth:o.clientWidth,clientHeight:o.clientHeight,scrollWidth:o.scrollWidth,scrollHeight:o.scrollHeight,clientLeft:o.clientLeft,clientTop:o.clientTop,relativePosition:{x:o.scrollWidth<=o.clientWidth?0:o.scrollLeft/(o.scrollWidth-o.clientWidth),y:o.scrollHeight<=o.clientHeight?0:o.scrollTop/(o.scrollHeight-o.clientHeight)}}}}}:e}case Nl:{const{documentId:n,scrollMetrics:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,viewportMetrics:{...i.viewportMetrics,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft},isScrolling:!0}}}:e}case Ll:{const{documentId:n,isScrolling:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isScrolling:o}}}:e}case $l:{const{documentId:n,isSmoothScrolling:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isSmoothScrolling:o}}}:e}case Fl:{const{documentId:n,key:o}=t.payload,i=e.documents[n];if(!i)return e;const r=new Set(i.gates);return r.add(o),{...e,documents:{...e.documents,[n]:{...i,gates:r}}}}case jl:{const{documentId:n,key:o}=t.payload,i=e.documents[n];if(!i)return e;const r=new Set(i.gates);return r.delete(o),{...e,documents:{...e.documents,[n]:{...i,gates:r}}}}default:return e}},initialState:ia},Ul=rn(null),Mi=()=>Le(qo.id);function kg(e){const{plugin:t}=st(qo.id),n=K(null);return $o(()=>{if(!t)return;const o=n.current;if(!o)return;try{t.registerViewport(e)}catch(s){return void console.error(`Failed to register viewport for document ${e}:`,s)}const i=()=>{t.setViewportScrollMetrics(e,{scrollTop:o.scrollTop,scrollLeft:o.scrollLeft})};o.addEventListener("scroll",i);const r=new ResizeObserver(()=>{t.setViewportResizeMetrics(e,{width:o.offsetWidth,height:o.offsetHeight,clientWidth:o.clientWidth,clientHeight:o.clientHeight,scrollTop:o.scrollTop,scrollLeft:o.scrollLeft,scrollWidth:o.scrollWidth,scrollHeight:o.scrollHeight,clientLeft:o.clientLeft,clientTop:o.clientTop})});r.observe(o);const a=t.onScrollRequest(e,({x:s,y:c,behavior:d="auto"})=>{requestAnimationFrame(()=>{o.scrollTo({left:s,top:c,behavior:d})})});return()=>{t.unregisterViewport(e),r.disconnect(),o.removeEventListener("scroll",i),a()}},[t,e]),n}function Sg({children:e,documentId:t,...n}){const[o,i]=z(0),r=kg(t),{provides:a}=Mi(),s=(u=>{const{provides:m}=Mi(),[h,g]=z(m?.isGated(u)??!1);return T(()=>{if(m)return g(m.isGated(u)),m.onGateChange(p=>{p.documentId===u&&g(p.isGated)})},[m,u]),h})(t);T(()=>{a&&i(a.getViewportGap())},[a]);const{style:c,...d}=n;return D(Ul.Provider,{value:r,children:D("div",{...d,ref:r,style:{width:"100%",height:"100%",overflow:"auto",...typeof c=="object"?c:{},padding:`${o}px`},children:!s&&e})})}var ct=(e=>(e.Vertical="vertical",e.Horizontal="horizontal",e))(ct||{});class Wl{constructor(t){this.pageGap=t.pageGap??20,this.viewportGap=t.viewportGap??20,this.bufferSize=t.bufferSize??2}getVisibleRange(t,n,o){const i=this.getScrollOffset(t),r=i,a=i+this.getClientSize(t);let s=0;for(;s<n.length&&(n[s].offset+n[s].height)*o<=r;)s++;let c=s;for(;c<n.length&&n[c].offset*o<=a;)c++;return{start:Math.max(0,s-this.bufferSize),end:Math.min(n.length-1,c+this.bufferSize-1)}}handleScroll(t,n,o){const i=this.getVisibleRange(t,n,o),r=n.slice(i.start,i.end+1),a=this.calculatePageVisibility(r,t,o),s=a.map(p=>p.pageNumber),c=n.slice(i.start,i.end+1).flatMap(p=>p.index),d=this.determineCurrentPage(a),u=n[i.start],m=n[i.end],h=u?u.offset*o:0,g=m?(n[n.length-1].offset+n[n.length-1].height)*o-(m.offset+m.height)*o:0;return{currentPage:d,visiblePages:s,pageVisibilityMetrics:a,renderedPageIndexes:c,scrollOffset:{x:t.scrollLeft,y:t.scrollTop},startSpacing:h,endSpacing:g}}calculatePageVisibility(t,n,o){const i=[];return t.forEach(r=>{r.pageLayouts.forEach(a=>{const s=r.x*o,c=r.y*o,d=s+a.x*o,u=c+a.y*o,m=a.rotatedWidth*o,h=a.rotatedHeight*o,g=n.scrollLeft,p=n.scrollTop,f=g+n.clientWidth,v=p+n.clientHeight,y=Math.max(d,g),b=Math.max(u,p),x=Math.min(d+m,f),w=Math.min(u+h,v);if(y<x&&b<w){const C=x-y,I=w-b,k=m*h,S=C*I;i.push({pageNumber:a.pageNumber,viewportX:y-g,viewportY:b-p,visiblePercentage:S/k*100,original:{pageX:(y-d)/o,pageY:(b-u)/o,visibleWidth:C/o,visibleHeight:I/o,scale:1},scaled:{pageX:y-d,pageY:b-u,visibleWidth:C,visibleHeight:I,scale:o}})}})}),i}determineCurrentPage(t){if(t.length===0)return 1;const n=Math.max(...t.map(i=>i.visiblePercentage)),o=t.filter(i=>i.visiblePercentage===n);return o.length===1?o[0].pageNumber:o.sort((i,r)=>i.pageNumber-r.pageNumber)[0].pageNumber}getRectLocationForPage(t,n,o){const i=n.find(s=>s.pageNumbers.includes(t));if(!i)return null;const r=i.pageLayouts.find(s=>s.pageNumber===t);if(!r)return null;let a=0;if(o){const s=o.width;i.width<s&&(a=(s-i.width)/2)}return{origin:{x:i.x+r.x+a,y:i.y+r.y},size:{width:r.width,height:r.height}}}getScrollPositionForPage(t,n,o,i,r){const a=this.getTotalContentSize(n),s=this.getRectLocationForPage(t,n,a);if(!s)return null;const c=po(s.origin,o);if(r){const d=(function(u,m,h,g){return po(fl(u,m,h),g)})({width:s.size.width,height:s.size.height},{x:r.x,y:r.y},i,o);return{x:c.x+d.x+this.viewportGap,y:c.y+d.y+this.viewportGap}}return{x:c.x+this.viewportGap,y:c.y+this.viewportGap}}getRectPositionForPage(t,n,o,i,r){const a=this.getTotalContentSize(n),s=this.getRectLocationForPage(t,n,a);if(!s)return null;const c=po(s.origin,o),d=Nh({width:s.size.width,height:s.size.height},r,i,o);return{origin:{x:c.x+d.origin.x,y:c.y+d.origin.y},size:d.size}}}class Pg extends Wl{constructor(t){super(t)}createVirtualItems(t){let n=0;return t.map((o,i)=>{let r=0;const a=o.map(u=>{const m={pageNumber:u.index+1,pageIndex:u.index,x:r,y:0,width:u.size.width,height:u.size.height,rotatedWidth:u.rotatedSize.width,rotatedHeight:u.rotatedSize.height};return r+=u.rotatedSize.width+this.pageGap,m}),s=o.reduce((u,m,h)=>u+m.rotatedSize.width+(h<o.length-1?this.pageGap:0),0),c=Math.max(...o.map(u=>u.rotatedSize.height)),d={id:`item-${i}`,x:0,y:n,offset:n,width:s,height:c,pageLayouts:a,pageNumbers:o.map(u=>u.index+1),index:i};return n+=c+this.pageGap,d})}getTotalContentSize(t){return t.length===0?{width:0,height:0}:{width:Math.max(...t.map(n=>n.width)),height:t[t.length-1].y+t[t.length-1].height}}getScrollOffset(t){return t.scrollTop}getClientSize(t){return t.clientHeight}}class Dg extends Wl{constructor(t){super(t)}createVirtualItems(t){let n=0;return t.map((o,i)=>{let r=0;const a=o.map(u=>{const m={pageNumber:u.index+1,pageIndex:u.index,x:r,y:0,width:u.size.width,height:u.size.height,rotatedWidth:u.rotatedSize.width,rotatedHeight:u.rotatedSize.height};return r+=u.rotatedSize.width+this.pageGap,m}),s=o.reduce((u,m,h)=>u+m.rotatedSize.width+(h<o.length-1?this.pageGap:0),0),c=Math.max(...o.map(u=>u.rotatedSize.height)),d={id:`item-${i}`,x:n,y:0,offset:n,width:s,height:c,pageLayouts:a,pageNumbers:o.map(u=>u.index+1),index:i};return n+=s+this.pageGap,d})}getTotalContentSize(t){return t.length===0?{width:0,height:0}:{width:t[t.length-1].x+t[t.length-1].width,height:Math.max(...t.map(n=>n.height))}}getScrollOffset(t){return t.scrollLeft}getClientSize(t){return t.clientWidth}}const Bl="INIT_SCROLL_STATE",ql="CLEANUP_SCROLL_STATE",Gl="UPDATE_DOCUMENT_SCROLL_STATE",Vl="SET_SCROLL_STRATEGY";function zn(e,t){return{type:Gl,payload:{documentId:e,state:t}}}const Mg={isChanging:!1,targetPage:1,fromPage:1,startTime:0},Kl=class extends Me{constructor(e,t,n){var o,i;super(e,t),this.id=e,this.config=n,this.strategies=new Map,this.layoutReady=new Set,this.initialLayoutFired=new Set,this.scrollerLayoutEmitters=new Map,this.pageChange$=re(),this.scroll$=re(),this.layoutChange$=re(),this.pageChangeState$=re(),this.layoutReady$=re(),this.state$=re(),this.viewport=this.registry.getPlugin("viewport").provides(),this.spread=((o=this.registry.getPlugin("spread"))==null?void 0:o.provides())??null,this.viewport.onScrollActivity(r=>{const a=this.getDocumentState(r.documentId);a?.pageChangeState.isChanging&&!r.activity.isSmoothScrolling&&this.completePageChange(r.documentId)}),(i=this.spread)==null||i.onSpreadChange(r=>{this.refreshDocumentLayout(r.documentId)}),this.viewport.onViewportChange(r=>{const a=this.getDocumentState(r.documentId);if(!a)return;const s=this.computeMetrics(r.documentId,r.metrics);this.layoutReady.has(r.documentId)?this.commitMetrics(r.documentId,s):this.commitMetrics(r.documentId,{...s,scrollOffset:a.scrollOffset})})}onDocumentLoadingStarted(e){const t=this.getCoreDocument(e);if(!t)return;const n=this.createDocumentState(t);this.dispatch((function(i,r){return{type:Bl,payload:{documentId:i,state:r}}})(e,n));const o=this.createStrategy(n.strategy);this.strategies.set(e,o),this.scrollerLayoutEmitters.set(e,re())}onDocumentLoaded(e){var t;const n=this.getCoreDocument(e);n&&(this.dispatch(zn(e,{totalPages:((t=n.document)==null?void 0:t.pageCount)??0})),this.refreshDocumentLayout(e),this.logger.debug("ScrollPlugin","DocumentOpened",`Initialized scroll state for document: ${e}`))}onDocumentClosed(e){this.strategies.delete(e),this.layoutReady.delete(e),this.initialLayoutFired.delete(e);const t=this.scrollerLayoutEmitters.get(e);t&&(t.clear(),this.scrollerLayoutEmitters.delete(e)),this.dispatch((function(n){return{type:ql,payload:n}})(e)),this.logger.debug("ScrollPlugin","DocumentClosed",`Cleaned up scroll state for document: ${e}`)}onScaleChanged(e){const t=this.coreState.core.documents[e];if(!t||t.status!=="loaded")return;const n=this.viewport.forDocument(e),o=this.computeMetrics(e,n.getMetrics());this.commitMetrics(e,o)}onRotationChanged(e){this.refreshDocumentLayout(e)}onScrollerData(e,t){const n=this.scrollerLayoutEmitters.get(e);if(!n)throw new Error(`No scroller layout emitter found for document: ${e}`);return n.on(t)}getScrollerLayout(e){const t=this.getDocumentState(e),n=this.getCoreDocumentOrThrow(e);if(!t||!n)throw new Error(`Cannot get scroller layout for document: ${e}`);return o=t,i=n.scale,{startSpacing:o.startSpacing,endSpacing:o.endSpacing,totalWidth:o.totalContentSize.width*i,totalHeight:o.totalContentSize.height*i,pageGap:o.pageGap*i,strategy:o.strategy,items:o.renderedPageIndexes.map(r=>({...o.virtualItems[r],pageLayouts:o.virtualItems[r].pageLayouts.map(a=>({...a,rotatedWidth:a.rotatedWidth*i,rotatedHeight:a.rotatedHeight*i,width:a.width*i,height:a.height*i}))}))};var o,i}setLayoutReady(e){if(this.layoutReady.has(e))return;const t=this.getDocumentState(e);if(!t)return;this.layoutReady.add(e);const n=!this.initialLayoutFired.has(e);n&&this.initialLayoutFired.add(e),this.viewport.forDocument(e).scrollTo({...t.scrollOffset,behavior:"instant"}),this.layoutReady$.emit({documentId:e,isInitial:n,pageNumber:t.currentPage,totalPages:t.totalPages})}clearLayoutReady(e){this.layoutReady.delete(e)}buildCapability(){return{getCurrentPage:()=>this.getCurrentPage(),getTotalPages:()=>this.getTotalPages(),getPageChangeState:()=>this.getPageChangeState(),scrollToPage:e=>this.scrollToPage(e),scrollToNextPage:e=>this.scrollToNextPage(e),scrollToPreviousPage:e=>this.scrollToPreviousPage(e),getMetrics:e=>this.getMetrics(e),getLayout:()=>this.getLayout(),getRectPositionForPage:(e,t,n,o)=>this.getRectPositionForPage(e,t,n,o),forDocument:e=>this.createScrollScope(e),setScrollStrategy:(e,t)=>this.setScrollStrategyForDocument(e,t),getPageGap:()=>this.state.defaultPageGap,onPageChange:this.pageChange$.on,onScroll:this.scroll$.on,onLayoutChange:this.layoutChange$.on,onLayoutReady:this.layoutReady$.on,onPageChangeState:this.pageChangeState$.on,onStateChange:this.state$.on}}createScrollScope(e){return{getCurrentPage:()=>this.getCurrentPage(e),getTotalPages:()=>this.getTotalPages(e),getPageChangeState:()=>this.getPageChangeState(e),scrollToPage:t=>this.scrollToPage(t,e),scrollToNextPage:t=>this.scrollToNextPage(t,e),scrollToPreviousPage:t=>this.scrollToPreviousPage(t,e),getSpreadPagesWithRotatedSize:()=>this.getSpreadPagesWithRotatedSize(e),getMetrics:t=>this.getMetrics(t,e),getLayout:()=>this.getLayout(e),getRectPositionForPage:(t,n,o,i)=>this.getRectPositionForPage(t,n,o,i,e),setScrollStrategy:t=>this.setScrollStrategyForDocument(t,e),onPageChange:t=>this.pageChange$.on(n=>{n.documentId===e&&t(n)}),onScroll:t=>this.scroll$.on(n=>{n.documentId===e&&t(n.metrics)}),onLayoutChange:t=>this.layoutChange$.on(n=>{n.documentId===e&&t(n.layout)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Scroll state not found for document: ${e??"active"}`);return t}getStrategy(e){const t=e??this.getActiveDocumentId(),n=this.strategies.get(t);if(!n)throw new Error(`Strategy not found for document: ${t}`);return n}createStrategy(e){const t={pageGap:this.state.defaultPageGap,viewportGap:this.viewport.getViewportGap(),bufferSize:this.state.defaultBufferSize};return e===ct.Horizontal?new Dg(t):new Pg(t)}createDocumentState(e){var t;return{virtualItems:[],totalPages:((t=e.document)==null?void 0:t.pageCount)??0,currentPage:1,totalContentSize:{width:0,height:0},strategy:this.state.defaultStrategy,pageGap:this.state.defaultPageGap,visiblePages:[],pageVisibilityMetrics:[],renderedPageIndexes:[],scrollOffset:{x:0,y:0},startSpacing:0,endSpacing:0,pageChangeState:Mg}}startPageChange(e,t,n="smooth"){const o=this.getDocumentState(e);if(!o)return;const i={isChanging:!0,targetPage:t,fromPage:o.currentPage,startTime:Date.now()};this.dispatch(zn(e,{pageChangeState:i})),n==="instant"&&this.completePageChange(e)}completePageChange(e){const t=this.getDocumentState(e);if(!t||!t.pageChangeState.isChanging)return;const n={isChanging:!1,targetPage:t.pageChangeState.targetPage,fromPage:t.pageChangeState.fromPage,startTime:t.pageChangeState.startTime};this.dispatch(zn(e,{pageChangeState:n}))}computeLayout(e,t){const n=this.getStrategy(e),o=n.createVirtualItems(t);return{virtualItems:o,totalContentSize:n.getTotalContentSize(o)}}computeMetrics(e,t,n){const o=this.getCoreDocumentOrThrow(e),i=this.getDocumentState(e),r=this.getStrategy(e);if(!i)throw new Error(`Document state not found: ${e}`);return r.handleScroll(t,n??i.virtualItems,o.scale)}commitMetrics(e,t){const n=this.getDocumentState(e);n&&(this.dispatch(zn(e,t)),this.scroll$.emit({documentId:e,metrics:t}),t.currentPage!==n.currentPage&&this.pageChange$.emit({documentId:e,pageNumber:t.currentPage,totalPages:n.totalPages}),this.pushScrollerLayout(e))}pushScrollerLayout(e){const t=this.scrollerLayoutEmitters.get(e);if(t)try{const n=this.getScrollerLayout(e);t.emit(n)}catch{}}refreshDocumentLayout(e){const t=this.coreState.core.documents[e],n=this.getDocumentState(e);if(!t||!n||t.status!=="loaded")return;const o=this.getSpreadPagesWithRotatedSize(e),i=this.computeLayout(e,o),r=this.viewport.forDocument(e),a=this.computeMetrics(e,r.getMetrics(),i.virtualItems);this.dispatch(zn(e,{...i,...a})),this.layoutChange$.emit({documentId:e,layout:i}),this.pushScrollerLayout(e)}getSpreadPagesWithRotatedSize(e){var t,n;const o=e??this.getActiveDocumentId(),i=this.coreState.core.documents[o];if(!i)throw new Error(`Document ${o} not loaded`);return(((t=this.spread)==null?void 0:t.forDocument(o).getSpreadPages())||((n=i.document)==null?void 0:n.pages.map(r=>[r]))||[]).map(r=>r.map(a=>({...a,rotatedSize:Co(a.size,i.rotation,1)})))}getCurrentPage(e){return this.getDocumentStateOrThrow(e).currentPage}getTotalPages(e){return this.getDocumentStateOrThrow(e).totalPages}getPageChangeState(e){return this.getDocumentStateOrThrow(e).pageChangeState}scrollToPage(e,t){const n=t??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),r=this.getCoreDocumentOrThrow(n),{pageNumber:a,behavior:s="smooth",pageCoordinates:c,alignX:d,alignY:u}=e;this.startPageChange(n,a,s);const m=i.getScrollPositionForPage(a,o.virtualItems,r.scale,r.rotation,c);m?this.viewport.forDocument(n).scrollTo({...m,behavior:s,alignX:d,alignY:u}):this.completePageChange(n)}scrollToNextPage(e="smooth",t){const n=t??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),r=this.getCoreDocumentOrThrow(n),a=o.virtualItems.findIndex(s=>s.pageNumbers.includes(o.currentPage));if(a>=0&&a<o.virtualItems.length-1){const s=o.virtualItems[a+1].pageNumbers[0];this.startPageChange(n,s,e);const c=i.getScrollPositionForPage(s,o.virtualItems,r.scale,r.rotation);c?this.viewport.forDocument(n).scrollTo({...c,behavior:e}):this.completePageChange(n)}}scrollToPreviousPage(e="smooth",t){const n=t??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(n),i=this.getStrategy(n),r=this.coreState.core.documents[n],a=o.virtualItems.findIndex(s=>s.pageNumbers.includes(o.currentPage));if(a>0){const s=o.virtualItems[a-1].pageNumbers[0];this.startPageChange(n,s,e);const c=i.getScrollPositionForPage(s,o.virtualItems,r.scale,r.rotation);c?this.viewport.forDocument(n).scrollTo({...c,behavior:e}):this.completePageChange(n)}}getMetrics(e,t){const n=t??this.getActiveDocumentId();if(e)return this.computeMetrics(n,e);const o=this.viewport.forDocument(n);return this.computeMetrics(n,o.getMetrics())}getLayout(e){const t=this.getDocumentStateOrThrow(e);return{virtualItems:t.virtualItems,totalContentSize:t.totalContentSize}}getRectPositionForPage(e,t,n,o,i){const r=i??this.getActiveDocumentId(),a=this.getDocumentStateOrThrow(r),s=this.getStrategy(r),c=this.getCoreDocumentOrThrow(r);return s.getRectPositionForPage(e+1,a.virtualItems,n??c.scale,o??c.rotation,t)}setScrollStrategyForDocument(e,t){const n=t??this.getActiveDocumentId(),o=this.getDocumentState(n);if(!o||o.strategy===e)return;const i=this.createStrategy(e);this.strategies.set(n,i),this.dispatch((function(r,a){return{type:Vl,payload:{documentId:r,strategy:a}}})(n,e)),this.refreshDocumentLayout(n)}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&(this.state$.emit(i),o?.pageChangeState!==i.pageChangeState&&this.pageChangeState$.emit({documentId:n,state:i.pageChangeState}),this.pushScrollerLayout(n))}}async initialize(){this.logger.info("ScrollPlugin","Initialize","Scroll plugin initialized")}async destroy(){this.strategies.clear(),this.layoutReady.clear(),this.initialLayoutFired.clear();for(const e of this.scrollerLayoutEmitters.values())e.clear();this.scrollerLayoutEmitters.clear(),this.pageChange$.clear(),this.scroll$.clear(),this.layoutChange$.clear(),this.pageChangeState$.clear(),this.layoutReady$.clear(),this.state$.clear(),super.destroy()}};Kl.id="scroll";let ir=Kl;const ra="scroll",Ag={manifest:{id:ra,name:"Scroll Plugin",version:"1.0.0",provides:["scroll"],requires:["viewport"],optional:["spread"],defaultConfig:{defaultPageGap:10,defaultBufferSize:4,defaultStrategy:ct.Vertical}},create:(e,t)=>new ir(ra,e,t),reducer:(e,t)=>{switch(t.type){case Bl:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o}}}case ql:{const{[t.payload]:n,...o}=e.documents;return{...e,documents:o}}case Gl:{const{documentId:n,state:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,...o}}}:e}case Vl:{const{documentId:n,strategy:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,strategy:o}}}:e}default:return e}},initialState:(e,t)=>((n,o)=>({defaultStrategy:o.defaultStrategy??ct.Vertical,defaultPageGap:o.defaultPageGap??10,defaultBufferSize:o.defaultBufferSize??2,documents:{}}))(0,t)},qn=()=>Le(ir.id),Zl=e=>{const{provides:t}=qn(),[n,o]=z(1),[i,r]=z(1);return T(()=>{if(!t||!e)return;const a=t.forDocument(e);return o(a.getCurrentPage()),r(a.getTotalPages()),t.onPageChange(s=>{s.documentId===e&&(o(s.pageNumber),r(s.totalPages))})},[t,e]),{provides:t?.forDocument(e)??null,state:{currentPage:n,totalPages:i}}};function zg({documentId:e,renderPage:t,...n}){const{plugin:o}=st(ir.id),[i,r]=z({layout:null,docId:null});T(()=>{if(!o||!e)return;const s=o.onScrollerData(e,c=>{r({layout:c,docId:e})});return()=>{s(),r({layout:null,docId:null}),o.clearLayoutReady(e)}},[o,e]);const a=i.docId===e?i.layout:null;return $o(()=>{o&&e&&a&&o.setLayoutReady(e)},[o,e,a]),a?D("div",{...n,style:{width:`${a.totalWidth}px`,height:`${a.totalHeight}px`,position:"relative",boxSizing:"border-box",margin:"0 auto",...a.strategy===ct.Horizontal&&{display:"flex",flexDirection:"row"}},children:[D("div",{style:{...a.strategy===ct.Horizontal?{width:a.startSpacing,height:"100%",flexShrink:0}:{height:a.startSpacing,width:"100%"}}}),D("div",{style:{gap:a.pageGap,display:"flex",alignItems:"center",position:"relative",boxSizing:"border-box",...a.strategy===ct.Horizontal?{flexDirection:"row",minHeight:"100%"}:{flexDirection:"column",minWidth:"fit-content"}},children:a.items.map(s=>D("div",{style:{display:"flex",justifyContent:"center",gap:a.pageGap},children:s.pageLayouts.map(c=>D("div",{style:{width:`${c.rotatedWidth}px`,height:`${c.rotatedHeight}px`},children:t({...c})},c.pageNumber))},s.pageNumbers[0]))}),D("div",{style:{...a.strategy===ct.Horizontal?{width:a.endSpacing,height:"100%",flexShrink:0}:{height:a.endSpacing,width:"100%"}}})]}):null}var rt=(e=>(e.None="none",e.Odd="odd",e.Even="even",e))(rt||{});const Yl="SPREAD/INIT_STATE",Xl="SPREAD/CLEANUP_STATE",Ql="SPREAD/SET_SPREAD_MODE",Jl="SPREAD/SET_PAGE_GROUPING";function aa(e,t){return{type:Jl,payload:{documentId:e,grouping:t}}}const ec=class extends Me{constructor(e,t,n){var o;super(e,t),this.spreadEmitter$=re(),this.defaultSpreadMode=n.defaultSpreadMode??rt.None,this.viewport=((o=t.getPlugin("viewport"))==null?void 0:o.provides())??null}onDocumentLoadingStarted(e){var t;const n={spreadMode:this.defaultSpreadMode};this.dispatch((function(o,i){return{type:Yl,payload:{documentId:o,state:i}}})(e,n)),(t=this.viewport)==null||t.gate("spread",e),this.logger.debug("SpreadPlugin","DocumentOpened",`Initialized spread state for document: ${e}`)}onDocumentLoaded(e){var t;const n=this.coreState.core.documents[e];if(n?.document){const o=this.calculatePageGrouping(e,n.document.pages.length);this.dispatch(aa(e,o))}(t=this.viewport)==null||t.releaseGate("spread",e)}onDocumentClosed(e){this.dispatch((function(t){return{type:Xl,payload:t}})(e)),this.logger.debug("SpreadPlugin","DocumentClosed",`Cleaned up spread state for document: ${e}`)}buildCapability(){return{setSpreadMode:e=>this.setSpreadModeForDocument(e),getSpreadMode:()=>this.getSpreadModeForDocument(),getSpreadPages:()=>this.getSpreadPages(),forDocument:e=>this.createSpreadScope(e),onSpreadChange:this.spreadEmitter$.on}}createSpreadScope(e){return{setSpreadMode:t=>this.setSpreadModeForDocument(t,e),getSpreadMode:()=>this.getSpreadModeForDocument(e),getSpreadPages:()=>this.getSpreadPages(e),onSpreadChange:t=>this.spreadEmitter$.on(n=>{n.documentId===e&&t(n.spreadMode)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Spread state not found for document: ${e??"active"}`);return t}setSpreadModeForDocument(e,t){const n=t??this.getActiveDocumentId(),o=this.getDocumentStateOrThrow(n),i=this.coreState.core.documents[n];if(!i?.document)throw new Error(`Document ${n} not loaded`);if(o.spreadMode!==e){this.dispatch((function(a,s){return{type:Ql,payload:{documentId:a,spreadMode:s}}})(n,e));const r=this.calculatePageGrouping(n,i.document.pages.length);this.dispatch(aa(n,r)),this.spreadEmitter$.emit({documentId:n,spreadMode:e})}}getSpreadModeForDocument(e){return this.getDocumentStateOrThrow(e).spreadMode}calculatePageGrouping(e,t){switch(this.getDocumentStateOrThrow(e).spreadMode){case rt.None:return Array.from({length:t},(n,o)=>[o]);case rt.Odd:return Array.from({length:Math.ceil(t/2)},(n,o)=>{const i=[2*o];return 2*o+1<t&&i.push(2*o+1),i});case rt.Even:return[[0],...Array.from({length:Math.ceil((t-1)/2)},(n,o)=>{const i=[1+2*o];return 1+2*o+1<t&&i.push(1+2*o+1),i})];default:return Array.from({length:t},(n,o)=>[o])}}getSpreadPages(e){const t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t],o=this.getDocumentStateOrThrow(t);if(!n?.document)throw new Error(`Document ${t} not loaded`);const i=o.pageGrouping??[],r=n.document.pages;return i.map(a=>a.map(s=>r[s]).filter(Boolean))}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o?.spreadMode!==i.spreadMode&&this.logger.debug("SpreadPlugin","SpreadModeChanged",`Spread mode changed for document ${n}: ${o?.spreadMode??rt.None} -> ${i.spreadMode}`)}}async initialize(e){this.logger.info("SpreadPlugin","Initialize","Spread plugin initialized")}async destroy(){this.spreadEmitter$.clear(),super.destroy()}};ec.id="spread";let Tg=ec;const tc="spread",Eg={id:tc,name:"Spread Plugin",version:"1.0.0",provides:["spread"],requires:[],optional:["viewport"],defaultConfig:{}};rt.None;const sa={documents:{},activeDocumentId:null},_g={manifest:Eg,create:(e,t)=>new Tg(tc,e,t),reducer:(e=sa,t)=>{switch(t.type){case Yl:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case Xl:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"SPREAD/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Ql:{const{documentId:n,spreadMode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,spreadMode:o}}}:e}case Jl:{const{documentId:n,grouping:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,pageGrouping:o}}}:e}default:return e}},initialState:sa},At="ui",Rg={id:At,name:"UI Plugin",version:"1.0.0",provides:["ui"],requires:["commands"],optional:["i18n"],defaultConfig:{schema:{id:"empty",version:"1.0.0",toolbars:{},menus:{},sidebars:{},modals:{},selectionMenus:{}}}},nc="UI/INIT_STATE",oc="UI/CLEANUP_STATE",ic="UI/SET_ACTIVE_TOOLBAR",rc="UI/CLOSE_TOOLBAR_SLOT",ac="UI/SET_ACTIVE_SIDEBAR",sc="UI/CLOSE_SIDEBAR_SLOT",lc="UI/SET_SIDEBAR_TAB",cc="UI/OPEN_MODAL",dc="UI/CLOSE_MODAL",uc="UI/CLEAR_MODAL",mc="UI/OPEN_MENU",hc="UI/CLOSE_MENU",gc="UI/CLOSE_ALL_MENUS",pc="UI/SET_OVERLAY_ENABLED",fc="UI/SET_DISABLED_CATEGORIES",vc="UI/SET_HIDDEN_ITEMS",la=(e,t,n,o,i)=>({type:ac,payload:{documentId:e,placement:t,slot:n,sidebarId:o,activeTab:i}}),ca=(e,t,n)=>({type:sc,payload:{documentId:e,placement:t,slot:n}}),da=(e,t)=>({type:mc,payload:{documentId:e,menuState:t}}),ua=(e,t)=>({type:hc,payload:{documentId:e,menuId:t}}),ma=(e,t,n)=>({type:pc,payload:{documentId:e,overlayId:t,enabled:n}}),Jn=e=>({type:fc,payload:{categories:e}}),eo=e=>({type:vc,payload:{hiddenItems:e}});function Ng(e,t){if(!t)return e;const n={...e};for(const[o,i]of Object.entries(t))n[o]?n[o]={...n[o],...i,items:i.items??n[o].items,responsive:i.responsive??n[o].responsive}:n[o]=i;return n}function Og(e,t){if(!t)return e;const n={...e};for(const[o,i]of Object.entries(t))n[o]?n[o]={...n[o],...i,items:i.items??n[o].items}:n[o]=i;return n}function Lg(e,t){if(!t)return e;const n={...e};for(const[o,i]of Object.entries(t))n[o]?n[o]={...n[o],...i,content:i.content??n[o].content}:n[o]=i;return n}function Do(e,t){var n;if(!((n=e.responsive)!=null&&n.breakpoints))return null;const o=(function(c,d,u){if(!u||!d?.groups)return c;const m=d.groups.find(g=>g.locales.includes(u));if(!m)return c;const h={};for(const[g,p]of Object.entries(c)){const f=m.breakpoints[g];f?h[g]={minWidth:p.minWidth,maxWidth:p.maxWidth,hide:f.replaceHide?f.replaceHide:[...p.hide||[],...f.hide||[]],show:f.replaceShow?f.replaceShow:[...p.show||[],...f.show||[]]}:h[g]=p}return h})(e.responsive.breakpoints,e.responsive.localeOverrides,t),i=new Map,r=new Map;for(const[c,d]of Object.entries(o))r.set(c,{minWidth:d.minWidth,maxWidth:d.maxWidth});const a=new Set,s=c=>{c.forEach(d=>{a.add(d.id),d.type==="group"&&d.items&&s(d.items),d.type==="tab-group"&&d.tabs&&s(d.tabs),d.type==="section"&&d.items&&s(d.items)})};s(e.items);for(const c of a){const d=[];let u=!0;Array.from(Object.entries(o)).sort((h,g)=>(h[1].minWidth??0)-(g[1].minWidth??0)).forEach(([h,g],p)=>{var f,v;const y=(f=g.hide)==null?void 0:f.includes(c),b=(v=g.show)==null?void 0:v.includes(c);(y||b)&&(d.push({breakpointId:h,minWidth:g.minWidth,maxWidth:g.maxWidth,visible:b||!y,priority:p}),p===0&&(u=b||!y))}),d.length>0&&i.set(c,{itemId:c,shouldRender:!0,visibilityRules:d,defaultVisible:u})}return{items:i,breakpoints:r}}const yc="data-epdf",bc="data-epdf-s",wc="data-epdf-i",rr="data-epdf-cat",ar="data-epdf-dis",xc="data-epdf-hid",zt={ROOT:`[${yc}]`,STYLES:`[${bc}]`,ITEM:e=>`[${wc}="${e}"]`,CATEGORIES:e=>`[${rr}~="${e}"]`,DISABLED_CATEGORY:e=>`[${ar}~="${e}"]`,HIDDEN_ITEM:e=>`[${xc}~="${e}"]`},$g={useContainerQueries:!0};function Fg(e,t={}){const n={...$g,...t.config},o=t.locale,i=Cc(e,o),r=[];r.push((function(d){return`/*  */
/* EmbedPDF UI Stylesheet - Auto-generated${d?` (locale: ${d})`:""}                         */
/* DO NOT EDIT MANUALLY - This file is generated from your UI schema            */
/*  */`})(o));const a=(function(d,u){const m=[],h=u.useContainerQueries?"@container":"@media",g=new Set;return d.responsiveItems.forEach((p,f)=>{if(g.has(f))return;g.add(f);const v=(function(y,b,x){if(b.visibilityRules.length===0)return null;const w=[],C=zt.ITEM(y);b.defaultVisible||w.push(`${C} { display: none; }`);for(const I of b.visibilityRules){const k=[];if(I.minWidth!==void 0&&k.push(`(min-width: ${I.minWidth}px)`),I.maxWidth!==void 0&&k.push(`(max-width: ${I.maxWidth}px)`),k.length>0){const S=I.visible?"flex":"none";w.push(`${x} ${k.join(" and ")} {
  ${C} { display: ${S}; }
}`)}}return w.length>0?w.join(`
`):null})(f,p,h);v&&m.push(v)}),m.length===0?"":`/*  Responsive Visibility Rules  */
/* Items show/hide based on container width */

${m.join(`

`)}`})(i,n);a&&r.push(a);const s=(function(d){if(d.categories.size===0)return"";const u=[],m=Array.from(d.categories).sort();for(const h of m)u.push(`${zt.ROOT}[${ar}~="${h}"] [${rr}~="${h}"] {
  display: none !important;
}`);return`/*  Category Visibility Rules  */
/* Items hide when ANY of their categories is disabled */
/* Use: data-disabled-categories="category1 category2" on root element */

${u.join(`

`)}`})(i);s&&r.push(s);const c=(function(d,u){if(d.dependencies.length===0)return"";const m=[],h=u.useContainerQueries?"@container":"@media";for(const g of d.dependencies){const p=Gg(g,d,h);p.length>0&&m.push(...p)}return m.length===0?"":`/*  Dependency Visibility Rules  */
/* Container elements hide when all their dependencies are hidden */

${m.join(`

`)}`})(i,n);return c&&r.push(c),r.filter(d=>d.trim()).join(`

`)}function to(e,t){const n=new Set(t),o=[];return e.forEach((i,r)=>{i.some(a=>n.has(a))&&o.push(r)}),o}function Cc(e,t){const n=new Set,o=new Map,i=[],r=new Map,a=new Map;for(const[s,c]of Object.entries(e.menus))jg(s,c,n,o,i,r,a,t);for(const[s,c]of Object.entries(e.toolbars))Ug(s,c,n,o,i,a,t);for(const[s,c]of Object.entries(e.sidebars))Bg(s,c,n,o,i);for(const[s,c]of Object.entries(e.selectionMenus||{}))qg(s,c,n,o,i,a,t);return{categories:n,itemCategories:o,dependencies:i,menuBreakpoints:r,responsiveItems:a}}function jg(e,t,n,o,i,r,a,s){Et(e,t.categories,t.visibilityDependsOn,n,o,i),Ic(t.items,n,o,i);const c=Do(t,s);c&&c.items.forEach((u,m)=>{a.set(m,u)});const d=(function(u,m,h){var g;const p=[],f=Do(u,h);if((g=u.responsive)!=null&&g.breakpoints&&f){const v=Array.from(f.breakpoints.entries()).sort((y,b)=>(y[1].minWidth??0)-(b[1].minWidth??0));for(const[y,b]of v){const x=Hg(f,b),w=new Set;for(const C of x){const I=m.get(C);I&&I.forEach(k=>w.add(k))}p.push({minWidth:b.minWidth,maxWidth:b.maxWidth,visibleItemIds:x,visibleCategories:w})}}else{const v=[],y=new Set;kc(u.items,m,v,y),p.push({visibleItemIds:v,visibleCategories:y})}return p})(t,o,s);r.set(e,d)}function Ic(e,t,n,o){for(const i of e)Et(i.id,i.categories,i.visibilityDependsOn,t,n,o),i.type==="section"&&Ic(i.items,t,n,o)}function kc(e,t,n,o){for(const i of e){n.push(i.id);const r=t.get(i.id);r&&r.forEach(a=>o.add(a)),i.type==="section"&&kc(i.items,t,n,o)}}function Hg(e,t){const n=[];return e.items.forEach((o,i)=>{let r=o.defaultVisible;for(const a of o.visibilityRules)(a.minWidth===void 0||t.minWidth!==void 0&&t.minWidth>=a.minWidth)&&(a.maxWidth===void 0||t.maxWidth!==void 0&&t.maxWidth<=a.maxWidth)&&(r=a.visible);r&&n.push(i)}),n}function Ug(e,t,n,o,i,r,a){Et(e,t.categories,t.visibilityDependsOn,n,o,i);const s=Do(t,a);s&&s.items.forEach((c,d)=>{r.set(d,c)}),Sc(t.items,n,o,i)}function Sc(e,t,n,o){for(const i of e)Et(i.id,i.categories,i.visibilityDependsOn,t,n,o),i.type==="group"&&i.items&&Sc(i.items,t,n,o),i.type==="tab-group"&&i.tabs&&Wg(i.tabs,t,n,o)}function Wg(e,t,n,o){for(const i of e)Et(i.id,i.categories,i.visibilityDependsOn,t,n,o)}function Bg(e,t,n,o,i){if(Et(e,t.categories,t.visibilityDependsOn,n,o,i),t.content.type==="tabs")for(const r of t.content.tabs)Et(r.id,r.categories,r.visibilityDependsOn,n,o,i)}function qg(e,t,n,o,i,r,a){if(Et(e,t.categories,t.visibilityDependsOn,n,o,i),t.responsive){const s=Do(t,a);s&&s.items.forEach((c,d)=>{r.set(d,c)})}Pc(t.items,n,o,i)}function Pc(e,t,n,o){for(const i of e)Et(i.id,i.categories,i.visibilityDependsOn,t,n,o),i.type==="group"&&i.items&&Pc(i.items,t,n,o)}function Et(e,t,n,o,i,r){var a;t?.length&&(t.forEach(s=>o.add(s)),i.set(e,t)),n&&(n.menuId||(a=n.itemIds)!=null&&a.length)&&r.push({itemId:e,dependsOnMenuId:n.menuId,dependsOnItemIds:n.itemIds})}function Gg(e,t,n,o){var i;const r=[];if(e.dependsOnMenuId){const a=t.menuBreakpoints.get(e.dependsOnMenuId);if(a&&a.length>0){r.push(`/* "${e.itemId}" depends on menu "${e.dependsOnMenuId}" */`);for(const s of a){if(s.visibleItemIds.length===0)continue;const c=s.visibleItemIds.sort().map(m=>zt.HIDDEN_ITEM(m)).join(""),d=`${zt.ROOT}${c} ${zt.ITEM(e.itemId)} {
  display: none !important;
}`,u=[];s.minWidth!==void 0&&u.push(`(min-width: ${s.minWidth}px)`),s.maxWidth!==void 0&&u.push(`(max-width: ${s.maxWidth}px)`),u.length>0?r.push(`${n} ${u.join(" and ")} {
  ${d}
}`):r.push(d)}}}if((i=e.dependsOnItemIds)!=null&&i.length){r.push(`/* "${e.itemId}" depends on items: ${e.dependsOnItemIds.join(", ")} */`);const a=e.dependsOnItemIds.sort().map(s=>zt.HIDDEN_ITEM(s)).join("");r.push(`${zt.ROOT}${a} ${zt.ITEM(e.itemId)} {
  display: none !important;
}`)}return r}function je(e,t){var n;return{[wc]:e.id,[rr]:((n=e.categories)==null?void 0:n.join(" "))||void 0,...t}}const Dc=class extends Me{constructor(e,t,n){var o,i;if(super(e,t),this.cachedStylesheet=null,this.cachedLocale=null,this.i18n=null,this.i18nCleanup=null,this.categoryChanged$=re(),this.stylesheetInvalidated$=Ye(),this.toolbarChanged$=tt((r,a)=>({documentId:r,...a}),{cache:!1}),this.sidebarChanged$=tt((r,a)=>({documentId:r,...a}),{cache:!1}),this.modalChanged$=tt((r,a)=>({documentId:r,...a}),{cache:!1}),this.menuChanged$=tt((r,a)=>({documentId:r,...a}),{cache:!1}),this.overlayChanged$=tt((r,a)=>({documentId:r,...a}),{cache:!1}),this.schema=n.schema,this.stylesheetConfig=n.stylesheetConfig||{},this.itemCategories=Cc(this.schema).itemCategories,(o=n.disabledCategories)==null?void 0:o.length){this.dispatch(Jn(n.disabledCategories));const r=to(this.itemCategories,n.disabledCategories);this.dispatch(eo(r))}this.i18n=((i=t.getPlugin("i18n"))==null?void 0:i.provides())??null,this.i18n&&(this.i18nCleanup=this.i18n.onLocaleChange(({currentLocale:r})=>{this.handleLocaleChange(r)}),this.cachedLocale=this.i18n.getLocale())}async initialize(){this.logger.info("UIPlugin","Initialize","UI plugin initialized")}async destroy(){this.i18nCleanup&&(this.i18nCleanup(),this.i18nCleanup=null),this.toolbarChanged$.clear(),this.sidebarChanged$.clear(),this.modalChanged$.clear(),this.menuChanged$.clear(),this.overlayChanged$.clear(),this.stylesheetInvalidated$.clear(),super.destroy()}onDocumentLoadingStarted(e){this.dispatch(((t,n)=>({type:nc,payload:{documentId:t,schema:n}}))(e,this.schema))}onDocumentClosed(e){this.dispatch((t=>({type:oc,payload:{documentId:t}}))(e)),this.toolbarChanged$.clearScope(e),this.sidebarChanged$.clearScope(e),this.modalChanged$.clearScope(e),this.menuChanged$.clearScope(e),this.overlayChanged$.clearScope(e)}handleLocaleChange(e){this.cachedLocale!==e&&(this.logger.debug("UIPlugin","LocaleChange",`Locale changed: ${this.cachedLocale} -> ${e}`),this.cachedLocale=e,this.invalidateStylesheet(),this.stylesheetInvalidated$.emit())}getStylesheet(){var e;const t=((e=this.i18n)==null?void 0:e.getLocale())??null;return this.cachedStylesheet&&this.cachedLocale===t||(this.cachedStylesheet=Fg(this.schema,{config:this.stylesheetConfig,locale:t??void 0}),this.cachedLocale=t),this.cachedStylesheet}getLocale(){var e;return((e=this.i18n)==null?void 0:e.getLocale())??null}invalidateStylesheet(){this.cachedStylesheet=null}onStylesheetInvalidated(e){return this.stylesheetInvalidated$.on(e)}disableCategoryImpl(e){const t=new Set(this.state.disabledCategories);if(!t.has(e)){t.add(e);const n=Array.from(t);this.dispatch(Jn(n));const o=to(this.itemCategories,n);this.dispatch(eo(o)),this.categoryChanged$.emit({disabledCategories:n,hiddenItems:o})}}enableCategoryImpl(e){const t=new Set(this.state.disabledCategories);if(t.has(e)){t.delete(e);const n=Array.from(t);this.dispatch(Jn(n));const o=to(this.itemCategories,n);this.dispatch(eo(o)),this.categoryChanged$.emit({disabledCategories:n,hiddenItems:o})}}toggleCategoryImpl(e){this.state.disabledCategories.includes(e)?this.enableCategoryImpl(e):this.disableCategoryImpl(e)}setDisabledCategoriesImpl(e){this.dispatch(Jn(e));const t=to(this.itemCategories,e);this.dispatch(eo(t)),this.categoryChanged$.emit({disabledCategories:e,hiddenItems:t})}buildCapability(){return{setActiveToolbar:(e,t,n,o)=>this.setToolbarForDocument(e,t,n,o),setActiveSidebar:(e,t,n,o,i)=>this.setSidebarForDocument(e,t,n,o,i),toggleSidebar:(e,t,n,o,i)=>this.toggleSidebarForDocument(e,t,n,o,i),openModal:(e,t)=>this.openModalForDocument(e,t),openMenu:(e,t,n,o)=>this.openMenuForDocument(e,t,n,o),toggleMenu:(e,t,n,o)=>this.toggleMenuForDocument(e,t,n,o),enableOverlay:(e,t)=>this.enableOverlayForDocument(e,t),disableOverlay:(e,t)=>this.disableOverlayForDocument(e,t),toggleOverlay:(e,t)=>this.toggleOverlayForDocument(e,t),forDocument:e=>this.createUIScope(e),getSchema:()=>this.schema,mergeSchema:e=>{var t,n;this.schema=(t=this.schema,n=e,{...t,...n,toolbars:Ng(t.toolbars,n.toolbars),menus:Og(t.menus,n.menus),sidebars:Lg(t.sidebars,n.sidebars)})},disableCategory:e=>this.disableCategoryImpl(e),enableCategory:e=>this.enableCategoryImpl(e),toggleCategory:e=>this.toggleCategoryImpl(e),setDisabledCategories:e=>this.setDisabledCategoriesImpl(e),getDisabledCategories:()=>this.state.disabledCategories,isCategoryDisabled:e=>this.state.disabledCategories.includes(e),getHiddenItems:()=>this.state.hiddenItems,onToolbarChanged:this.toolbarChanged$.onGlobal,onSidebarChanged:this.sidebarChanged$.onGlobal,onModalChanged:this.modalChanged$.onGlobal,onMenuChanged:this.menuChanged$.onGlobal,onOverlayChanged:this.overlayChanged$.onGlobal,onCategoryChanged:this.categoryChanged$.on}}createUIScope(e){return{setActiveToolbar:(t,n,o)=>this.setToolbarForDocument(t,n,o,e),getActiveToolbar:(t,n)=>this.getToolbarForDocument(t,n,e),closeToolbarSlot:(t,n)=>this.closeToolbarForDocument(t,n,e),isToolbarOpen:(t,n,o)=>this.isToolbarOpenForDocument(t,n,o,e),setActiveSidebar:(t,n,o,i)=>this.setSidebarForDocument(t,n,o,e,i),getActiveSidebar:(t,n)=>this.getSidebarForDocument(t,n,e),closeSidebarSlot:(t,n)=>this.closeSidebarForDocument(t,n,e),toggleSidebar:(t,n,o,i)=>this.toggleSidebarForDocument(t,n,o,e,i),isSidebarOpen:(t,n,o)=>this.isSidebarOpenForDocument(t,n,o,e),setSidebarTab:(t,n)=>this.setSidebarTabForDocument(t,n,e),getSidebarTab:t=>this.getSidebarTabForDocument(t,e),openModal:t=>this.openModalForDocument(t,e),closeModal:()=>this.closeModalForDocument(e),clearModal:()=>this.clearModalForDocument(e),getActiveModal:()=>this.getActiveModalForDocument(e),isModalOpen:()=>this.isModalOpenForDocument(e),openMenu:(t,n,o)=>this.openMenuForDocument(t,n,o,e),closeMenu:t=>this.closeMenuForDocument(t,e),toggleMenu:(t,n,o)=>this.toggleMenuForDocument(t,n,o,e),closeAllMenus:()=>this.closeAllMenusForDocument(e),isMenuOpen:t=>this.isMenuOpenForDocument(t,e),getOpenMenus:()=>this.getOpenMenusForDocument(e),enableOverlay:t=>this.enableOverlayForDocument(t,e),disableOverlay:t=>this.disableOverlayForDocument(t,e),toggleOverlay:t=>this.toggleOverlayForDocument(t,e),isOverlayEnabled:t=>this.isOverlayEnabledForDocument(t,e),getEnabledOverlays:()=>this.getEnabledOverlaysForDocument(e),getSchema:()=>this.schema,getState:()=>this.getDocumentStateOrThrow(e),onToolbarChanged:this.toolbarChanged$.forScope(e),onSidebarChanged:this.sidebarChanged$.forScope(e),onModalChanged:this.modalChanged$.forScope(e),onMenuChanged:this.menuChanged$.forScope(e),onOverlayChanged:this.overlayChanged$.forScope(e)}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`UI state not found for document: ${e??"active"}`);return t}setToolbarForDocument(e,t,n,o){const i=o??this.getActiveDocumentId();this.dispatch(((r,a,s,c)=>({type:ic,payload:{documentId:r,placement:a,slot:s,toolbarId:c}}))(i,e,t,n)),this.toolbarChanged$.emit(i,{placement:e,slot:t,toolbarId:n})}getToolbarForDocument(e,t,n){const o=`${e}-${t}`,i=this.getDocumentStateOrThrow(n).activeToolbars[o];return i?.isOpen?i.toolbarId:null}closeToolbarForDocument(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(((i,r,a)=>({type:rc,payload:{documentId:i,placement:r,slot:a}}))(o,e,t)),this.toolbarChanged$.emit(o,{placement:e,slot:t,toolbarId:""})}isToolbarOpenForDocument(e,t,n,o){const i=`${e}-${t}`,r=this.getDocumentStateOrThrow(o).activeToolbars[i];return!(!r||!r.isOpen)&&(!n||r.toolbarId===n)}setSidebarForDocument(e,t,n,o,i){const r=o??this.getActiveDocumentId();this.dispatch(la(r,e,t,n,i)),this.sidebarChanged$.emit(r,{placement:e,slot:t,sidebarId:n})}getSidebarForDocument(e,t,n){const o=`${e}-${t}`,i=this.getDocumentStateOrThrow(n).activeSidebars[o];return i?.isOpen?i.sidebarId:null}closeSidebarForDocument(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(ca(o,e,t)),this.sidebarChanged$.emit(o,{placement:e,slot:t,sidebarId:""})}toggleSidebarForDocument(e,t,n,o,i){const r=o??this.getActiveDocumentId(),a=`${e}-${t}`,s=this.getDocumentStateOrThrow(r).activeSidebars[a];s?.sidebarId===n&&s?.isOpen?(this.dispatch(ca(r,e,t)),this.sidebarChanged$.emit(r,{placement:e,slot:t,sidebarId:""})):(this.dispatch(la(r,e,t,n,i)),this.sidebarChanged$.emit(r,{placement:e,slot:t,sidebarId:n}))}isSidebarOpenForDocument(e,t,n,o){const i=`${e}-${t}`,r=this.getDocumentStateOrThrow(o).activeSidebars[i];return!(!r||!r.isOpen)&&(!n||r.sidebarId===n)}setSidebarTabForDocument(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(((i,r,a)=>({type:lc,payload:{documentId:i,sidebarId:r,tabId:a}}))(o,e,t))}getSidebarTabForDocument(e,t){return this.getDocumentStateOrThrow(t).sidebarTabs[e]??null}openModalForDocument(e,t){const n=t??this.getActiveDocumentId();this.dispatch(((o,i)=>({type:cc,payload:{documentId:o,modalId:i}}))(n,e)),this.modalChanged$.emit(n,{modalId:e,isOpen:!0})}closeModalForDocument(e){const t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).activeModal;this.dispatch((o=>({type:dc,payload:{documentId:o}}))(t)),this.modalChanged$.emit(t,{modalId:n?.modalId??null,isOpen:!1})}clearModalForDocument(e){const t=e??this.getActiveDocumentId();this.dispatch((n=>({type:uc,payload:{documentId:n}}))(t))}getActiveModalForDocument(e){return this.getDocumentStateOrThrow(e).activeModal}isModalOpenForDocument(e){const t=this.getDocumentStateOrThrow(e).activeModal;return t?.isOpen??!1}openMenuForDocument(e,t,n,o){const i=o??this.getActiveDocumentId();this.dispatch(da(i,{menuId:e,triggeredByCommandId:t,triggeredByItemId:n})),this.menuChanged$.emit(i,{menuId:e,isOpen:!0})}closeMenuForDocument(e,t){const n=t??this.getActiveDocumentId();this.dispatch(ua(n,e)),this.menuChanged$.emit(n,{menuId:e,isOpen:!1})}toggleMenuForDocument(e,t,n,o){const i=o??this.getActiveDocumentId();this.getDocumentStateOrThrow(i).openMenus[e]?(this.dispatch(ua(i,e)),this.menuChanged$.emit(i,{menuId:e,isOpen:!1})):(this.dispatch(da(i,{menuId:e,triggeredByCommandId:t,triggeredByItemId:n})),this.menuChanged$.emit(i,{menuId:e,isOpen:!0}))}closeAllMenusForDocument(e){const t=e??this.getActiveDocumentId();this.dispatch((n=>({type:gc,payload:{documentId:n}}))(t))}isMenuOpenForDocument(e,t){return!!this.getDocumentStateOrThrow(t).openMenus[e]}getOpenMenusForDocument(e){return Object.values(this.getDocumentStateOrThrow(e).openMenus)}enableOverlayForDocument(e,t){const n=t??this.getActiveDocumentId();this.dispatch(ma(n,e,!0)),this.overlayChanged$.emit(n,{overlayId:e,isEnabled:!0})}disableOverlayForDocument(e,t){const n=t??this.getActiveDocumentId();this.dispatch(ma(n,e,!1)),this.overlayChanged$.emit(n,{overlayId:e,isEnabled:!1})}toggleOverlayForDocument(e,t){const n=t??this.getActiveDocumentId();this.isOverlayEnabledForDocument(e,n)?this.disableOverlayForDocument(e,n):this.enableOverlayForDocument(e,n)}isOverlayEnabledForDocument(e,t){return this.getDocumentStateOrThrow(t).enabledOverlays[e]??!0}getEnabledOverlaysForDocument(e){const t=this.getDocumentStateOrThrow(e).enabledOverlays;return Object.entries(t).filter(([,n])=>n).map(([n])=>n)}};Dc.id="ui";let sr=Dc;const Gt={activeToolbars:{},activeSidebars:{},activeModal:null,openMenus:{},sidebarTabs:{},enabledOverlays:{}},ha={documents:{},disabledCategories:[],hiddenItems:[]};function Mc(e,t){const n=(function(o){return o.ui??null})(e);return n?.documents[t]??null}function Ac(e,t){return`${e}-${t}`}function no(e,t,n,o,i){const r=(function(a,s,c,d){const u=Mc(a,s);return u?u.activeToolbars[Ac(c,d)]??null:null})(e,t,n,o);return!(!r||!r.isOpen)&&(!i||r.toolbarId===i)}function oo(e,t,n,o,i){const r=(function(a,s,c,d){const u=Mc(a,s);return u?u.activeSidebars[Ac(c,d)]??null:null})(e,t,n,o);return!(!r||!r.isOpen)&&(!i||r.sidebarId===i)}const Vg={manifest:Rg,create:(e,t)=>new sr(At,e,t),reducer:(e=ha,t)=>{var n;switch(t.type){case nc:{const{documentId:o,schema:i}=t.payload,r={};Object.values(i.toolbars).forEach(s=>{if(s.permanent&&s.position){const c=`${s.position.placement}-${s.position.slot}`;r[c]={toolbarId:s.id,isOpen:!0}}});const a={};return i.overlays&&Object.values(i.overlays).forEach(s=>{a[s.id]=s.defaultEnabled??!0}),{...e,documents:{...e.documents,[o]:{...Gt,activeToolbars:r,enabledOverlays:a}}}}case oc:{const{documentId:o}=t.payload,{[o]:i,...r}=e.documents;return{...e,documents:r}}case ic:{const{documentId:o,placement:i,slot:r,toolbarId:a}=t.payload,s=e.documents[o]||Gt,c=`${i}-${r}`;return{...e,documents:{...e.documents,[o]:{...s,activeToolbars:{...s.activeToolbars,[c]:{toolbarId:a,isOpen:!0}}}}}}case rc:{const{documentId:o,placement:i,slot:r}=t.payload,a=e.documents[o];if(!a)return e;const s=`${i}-${r}`,c=a.activeToolbars[s];return c?{...e,documents:{...e.documents,[o]:{...a,activeToolbars:{...a.activeToolbars,[s]:{...c,isOpen:!1}}}}}:e}case ac:{const{documentId:o,placement:i,slot:r,sidebarId:a,activeTab:s}=t.payload,c=e.documents[o]||Gt,d=`${i}-${r}`;return{...e,documents:{...e.documents,[o]:{...c,activeSidebars:{...c.activeSidebars,[d]:{sidebarId:a,isOpen:!0}},...s&&{sidebarTabs:{...c.sidebarTabs,[a]:s}}}}}}case sc:{const{documentId:o,placement:i,slot:r}=t.payload,a=e.documents[o];if(!a)return e;const s=`${i}-${r}`,c=a.activeSidebars[s];return c?{...e,documents:{...e.documents,[o]:{...a,activeSidebars:{...a.activeSidebars,[s]:{...c,isOpen:!1}}}}}:e}case lc:{const{documentId:o,sidebarId:i,tabId:r}=t.payload,a=e.documents[o]||Gt;return{...e,documents:{...e.documents,[o]:{...a,sidebarTabs:{...a.sidebarTabs,[i]:r}}}}}case cc:{const{documentId:o,modalId:i}=t.payload,r=e.documents[o]||Gt;return{...e,documents:{...e.documents,[o]:{...r,activeModal:{modalId:i,isOpen:!0},openMenus:{}}}}}case dc:{const{documentId:o}=t.payload,i=e.documents[o];return i?.activeModal?{...e,documents:{...e.documents,[o]:{...i,activeModal:{...i.activeModal,isOpen:!1}}}}:e}case uc:{const{documentId:o}=t.payload,i=e.documents[o];return i?(n=i.activeModal)!=null&&n.isOpen?e:{...e,documents:{...e.documents,[o]:{...i,activeModal:null}}}:e}case mc:{const{documentId:o,menuState:i}=t.payload,r=e.documents[o]||Gt;return{...e,documents:{...e.documents,[o]:{...r,openMenus:{[i.menuId]:i}}}}}case hc:{const{documentId:o,menuId:i}=t.payload,r=e.documents[o];if(!r)return e;const{[i]:a,...s}=r.openMenus;return{...e,documents:{...e.documents,[o]:{...r,openMenus:s}}}}case gc:{const{documentId:o}=t.payload,i=e.documents[o];return i?{...e,documents:{...e.documents,[o]:{...i,openMenus:{}}}}:e}case pc:{const{documentId:o,overlayId:i,enabled:r}=t.payload,a=e.documents[o]||Gt;return{...e,documents:{...e.documents,[o]:{...a,enabledOverlays:{...a.enabledOverlays,[i]:r}}}}}case fc:return{...e,disabledCategories:t.payload.categories};case vc:return{...e,hiddenItems:t.payload.hiddenItems};default:return e}},initialState:ha},cn=()=>Le(sr.id),zc=e=>{const{provides:t}=cn(),[n,o]=z(null);return T(()=>{if(!t)return;const i=t.forDocument(e);o(i.getState());const r=i.onToolbarChanged(()=>o(i.getState())),a=i.onSidebarChanged(()=>o(i.getState())),s=i.onModalChanged(()=>o(i.getState())),c=i.onMenuChanged(()=>o(i.getState())),d=i.onOverlayChanged(()=>o(i.getState()));return()=>{r(),a(),s(),c(),d()}},[t,e]),n},Tc=rn(null);function Ec(){const e=an(Tc);if(!e)throw new Error("useUIContainer must be used within a UIProvider");return e}const _c=rn(null);function Kg({children:e}){const t=K(new Map),n={register:te((o,i,r)=>{const a=`${o}:${i}`;t.current.set(a,r)},[]),unregister:te((o,i)=>{const r=`${o}:${i}`;t.current.delete(r)},[]),getAnchor:te((o,i)=>{const r=`${o}:${i}`;return t.current.get(r)||null},[])};return D(_c.Provider,{value:n,children:e})}function Rc(){const e=an(_c);if(!e)throw new Error("useAnchorRegistry must be used within UIProvider");return e}function Nc(e,t){const n=Rc(),o=K(null),i=K(e),r=K(t);return i.current=e,r.current=t,te(a=>{const s=o.current;o.current=a,a?a!==s&&n.register(i.current,r.current,a):s&&n.unregister(i.current,r.current)},[n])}const Oc=rn(null);function Zg({children:e,initialComponents:t={}}){const n=K(new Map(Object.entries(t))),o={register:te((i,r)=>{n.current.set(i,r)},[]),unregister:te(i=>{n.current.delete(i)},[]),get:te(i=>n.current.get(i),[]),has:te(i=>n.current.has(i),[]),getRegisteredIds:te(()=>Array.from(n.current.keys()),[])};return D(Oc.Provider,{value:o,children:e})}function Go(){const e=(function(){const t=an(Oc);if(!t)throw new Error("useComponentRegistry must be used within UIProvider");return t})();return{renderCustomComponent:(t,n,o)=>{const i=e.get(t);return i?D(i,{documentId:n,...o||{}}):(console.error(`Component "${t}" not found in registry`),null)}}}const Lc=rn(null);function Yg({children:e,renderers:t}){return D(Lc.Provider,{value:t,children:e})}function lr(){const e=an(Lc);if(!e)throw new Error("useRenderers must be used within UIProvider");return e}function oi(e,t){var n;const{provides:o}=cn(),i=lr(),r=te(s=>{var c;const d=o?.getSchema(),u=(c=d?.selectionMenus)==null?void 0:c[e];return!u||!s.selected?null:D(i.selectionMenu,{schema:u,documentId:t,props:s})},[o,i,e,t]),a=o?.getSchema();if((n=a?.selectionMenus)!=null&&n[e])return r}function Xg({container:e,documentId:t}){const n=zc(t),{provides:o}=cn(),i=Rc(),r=lr(),[a,s]=z(null),c=n?.openMenus||{},d=o?.getSchema();if(T(()=>{const m=Object.keys(c);if(m.length>0){const h=m[0];if(!h)return void s(null);const g=c[h];if(g&&g.triggeredByItemId){const p=i.getAnchor(t,g.triggeredByItemId);s({menuId:h,anchorEl:p})}else s(null)}else s(null)},[c,i,t]),!a||!d)return null;const u=d.menus[a.menuId];return u?D(r.menu,{schema:u,documentId:t,anchorEl:a.anchorEl,onClose:()=>{a&&o?.forDocument(t).closeMenu(a.menuId)},container:e}):(console.warn(`Menu "${a.menuId}" not found in schema`),null)}function Qg({children:e,style:t,...n}){const{plugin:o}=st(sr.id),{provides:i}=cn(),[r,a]=z([]),[s,c]=z([]),d=K(null),u=K(null),m=K(null),h=K(null),g=X(()=>({containerRef:h,getContainer:()=>h.current}),[]),p=te(x=>{const w=m.current;if(m.current=x,h.current=x,x&&x!==w&&o){const C=(function(M){const P=M.getRootNode();return P instanceof ShadowRoot?P:document.head})(x);u.current=C;const I=C.querySelector(zt.STYLES);if(I)return d.current=I,void(I.textContent=o.getStylesheet());const k=o.getStylesheet(),S=document.createElement("style");S.setAttribute(bc,""),S.textContent=k,C instanceof ShadowRoot?C.insertBefore(S,C.firstChild):C.appendChild(S),d.current=S}},[o]);T(()=>()=>{var x;(x=d.current)!=null&&x.parentNode&&!m.current&&d.current.remove(),d.current=null,u.current=null},[]),T(()=>{if(o)return o.onStylesheetInvalidated(()=>{d.current&&(d.current.textContent=o.getStylesheet())})},[o]),T(()=>{if(i)return a(i.getDisabledCategories()),c(i.getHiddenItems()),i.onCategoryChanged(({disabledCategories:x,hiddenItems:w})=>{a(x),c(w)})},[i]);const f=X(()=>r.length>0?r.join(" "):void 0,[r]),v=X(()=>s.length>0?s.join(" "):void 0,[s]),y=X(()=>{const x={containerType:"inline-size"};return t&&typeof t=="object"?{...x,...t}:x},[t]),b={[yc]:"",[ar]:f,[xc]:v};return D(Tc.Provider,{value:g,children:D("div",{ref:p,...b,...n,style:y,children:e})})}function Jg({children:e,documentId:t,components:n={},renderers:o,menuContainer:i,...r}){return D(Kg,{children:D(Zg,{initialComponents:n,children:D(Yg,{renderers:o,children:D(Qg,{...r,children:[e,D(Xg,{documentId:t,container:i})]})})})})}const $c=class extends Me{constructor(e,t,n){super(e,t),this.id=e,this.documentOpened$=re(),this.documentClosed$=re(),this.activeDocumentChanged$=re(),this.documentError$=re(),this.documentOrderChanged$=re(),this.openFileRequest$=Ye(),this.loadOptions=new Map,this.maxDocuments=n?.maxDocuments}buildCapability(){return{openFileDialog:e=>this.openFileDialog(e),openDocumentUrl:e=>this.openDocumentUrl(e),openDocumentBuffer:e=>this.openDocumentBuffer(e),retryDocument:(e,t)=>this.retryDocument(e,t),closeDocument:e=>this.closeDocument(e),closeAllDocuments:()=>this.closeAllDocuments(),setActiveDocument:e=>{if(!this.isDocumentOpen(e))throw new Error(`Cannot set active document: ${e} is not open`);this.dispatchCoreAction((t=>({type:Ji,payload:t}))(e))},getActiveDocumentId:()=>this.coreState.core.activeDocumentId,getActiveDocument:()=>{var e;const t=this.coreState.core.activeDocumentId;return t?((e=this.coreState.core.documents[t])==null?void 0:e.document)??null:null},getDocumentOrder:()=>this.coreState.core.documentOrder,moveDocument:(e,t)=>{this.dispatchCoreAction(((n,o)=>({type:tr,payload:{documentId:n,toIndex:o}}))(e,t))},swapDocuments:(e,t)=>{const n=this.coreState.core.documentOrder,o=n.indexOf(e),i=n.indexOf(t);if(o===-1||i===-1)throw new Error("One or both documents not found in order");const r=[...n];[r[o],r[i]]=[r[i],r[o]],this.dispatchCoreAction((a=>({type:er,payload:a}))(r))},getDocument:e=>{var t;return((t=this.coreState.core.documents[e])==null?void 0:t.document)??null},getDocumentState:e=>this.coreState.core.documents[e]??null,getOpenDocuments:()=>this.coreState.core.documentOrder.map(e=>this.coreState.core.documents[e]).filter(e=>e!==null),isDocumentOpen:e=>this.isDocumentOpen(e),getDocumentCount:()=>Object.keys(this.coreState.core.documents).length,getDocumentIndex:e=>this.coreState.core.documentOrder.indexOf(e),setDocumentEncryption:(e,t)=>this.setDocumentEncryption(e,t),unlockOwnerPermissions:(e,t)=>this.unlockOwnerPermissions(e,t),removeEncryption:e=>this.removeEncryption(e),onDocumentOpened:this.documentOpened$.on,onDocumentClosed:this.documentClosed$.on,onDocumentError:this.documentError$.on,onActiveDocumentChanged:this.activeDocumentChanged$.on,onDocumentOrderChanged:this.documentOrderChanged$.on}}isDocumentOpen(e){return!!this.coreState.core.documents[e]}onDocumentLoaded(e){const t=this.coreState.core.documents[e];t&&t.status==="loaded"&&(this.loadOptions.delete(e),this.documentOpened$.emit(t),this.logger.info("DocumentManagerPlugin","DocumentOpened",`Document ${e} opened successfully`,{name:t.name}))}onDocumentClosed(e){this.loadOptions.delete(e),this.documentClosed$.emit(e),this.logger.info("DocumentManagerPlugin","DocumentClosed",`Document ${e} closed`)}onActiveDocumentChanged(e,t){this.activeDocumentChanged$.emit({previousDocumentId:e,currentDocumentId:t}),this.logger.info("DocumentManagerPlugin","ActiveDocumentChanged",`Active document changed from ${e} to ${t}`)}onCoreStoreUpdated(e,t){e.core.documentOrder!==t.core.documentOrder&&this.documentOrderChanged$.emit({order:t.core.documentOrder})}onOpenFileRequest(e){return this.openFileRequest$.on(e)}openDocumentUrl(e){const t=new Ce,n=e.documentId||this.generateDocumentId(),o=this.checkDocumentLimit();if(o)return t.reject(o),t;const i=e.name??this.extractNameFromUrl(e.url);this.loadOptions.set(n,e),this.dispatchCoreAction(Zr(n,i,e.scale,e.rotation,!!e.password,e.autoActivate,e.permissions)),this.logger.info("DocumentManagerPlugin","OpenDocumentUrl",`Starting to load document from URL: ${e.url}`,{documentId:n,passwordProvided:!!e.password});const r={id:n,url:e.url},a=this.engine.openDocumentUrl(r,{password:e.password,mode:e.mode,requestOptions:e.requestOptions});return t.resolve({documentId:n,task:a}),this.handleLoadTask(n,a,"OpenDocumentUrl"),t}openDocumentBuffer(e){const t=new Ce,n=this.checkDocumentLimit();if(n)return t.reject(n),t;const o=e.documentId||this.generateDocumentId();this.loadOptions.set(o,e),this.dispatchCoreAction(Zr(o,e.name,e.scale,e.rotation,!!e.password,e.autoActivate,e.permissions)),this.logger.info("DocumentManagerPlugin","OpenDocumentBuffer",`Starting to load document from buffer: ${e.name}`,{documentId:o,passwordProvided:!!e.password});const i={id:o,content:e.buffer},r=this.engine.openDocumentBuffer(i,{password:e.password});return t.resolve({documentId:o,task:r}),this.handleLoadTask(o,r,"OpenDocumentBuffer"),t}retryDocument(e,t){const n=new Ce,o=this.validateRetry(e);if(!o.valid)return n.reject(o.error),n;const i={...this.loadOptions.get(e),...t?.password&&{password:t.password}};this.loadOptions.set(e,i),this.dispatchCoreAction(((a,s)=>({type:Qi,payload:{documentId:a,passwordProvided:s}}))(e,!!t?.password)),this.logger.info("DocumentManagerPlugin","RetryDocument",`Retrying to load document ${e}`,{passwordProvided:!!t?.password});const r="url"in i?this.retryUrlDocument(e,i):this.retryBufferDocument(e,i);return n.resolve({documentId:e,task:r}),this.handleLoadTask(e,r,"RetryDocument"),n}openFileDialog(e){const t=new Ce;return this.openFileRequest$.emit({task:t,options:e}),t}closeDocument(e){const t=new Ce,n=this.coreState.core.documents[e];return n?(n.status==="loaded"&&n.document?this.engine.closeDocument(n.document).wait(()=>{this.dispatchCoreAction(Yr(e)),t.resolve()},o=>{this.logger.error("DocumentManagerPlugin","CloseDocument",`Failed to close document ${e}`,o),t.fail(o)}):(this.logger.info("DocumentManagerPlugin","CloseDocument",`Closing document ${e} in ${n.status} state (skipping engine close)`),this.dispatchCoreAction(Yr(e)),t.resolve()),t):(this.logger.warn("DocumentManagerPlugin","CloseDocument",`Cannot close document ${e}: not found in state`),t.resolve(),t)}closeAllDocuments(){const e=Object.keys(this.coreState.core.documents),t=e.map(n=>this.closeDocument(n));return this.logger.info("DocumentManagerPlugin","CloseAllDocuments",`Closing ${e.length} documents`),Ce.all(t)}setDocumentEncryption(e,t){const n=new Ce,o=this.coreState.core.documents[e];return o?.document?(this.logger.info("DocumentManagerPlugin","SetDocumentEncryption",`Setting encryption on document ${e}`,{hasUserPassword:!!t.userPassword,allowedFlags:t.allowedFlags}),this.engine.setDocumentEncryption(o.document,t.userPassword??"",t.ownerPassword,t.allowedFlags).wait(i=>{i&&this.logger.info("DocumentManagerPlugin","SetDocumentEncryption",`Encryption set successfully on document ${e}`),n.resolve(i)},i=>{this.logger.error("DocumentManagerPlugin","SetDocumentEncryption",`Failed to set encryption on document ${e}`,i),n.fail(i)}),n):(n.reject({code:ee.DocNotOpen,message:`Document ${e} is not open`}),n)}unlockOwnerPermissions(e,t){const n=new Ce,o=this.coreState.core.documents[e];if(!o?.document)return n.reject({code:ee.DocNotOpen,message:`Document ${e} is not open`}),n;const i=o.document;return this.logger.info("DocumentManagerPlugin","UnlockOwnerPermissions",`Attempting to unlock owner permissions on document ${e}`),this.engine.unlockOwnerPermissions(i,t).wait(r=>{r&&(this.logger.info("DocumentManagerPlugin","UnlockOwnerPermissions",`Owner permissions unlocked on document ${e}`),this.dispatchCoreAction(((s,c,d)=>({type:nr,payload:{documentId:s,permissions:c,isOwnerUnlocked:d}}))(e,4294967295,!0))),n.resolve(r)},r=>{this.logger.error("DocumentManagerPlugin","UnlockOwnerPermissions",`Failed to unlock owner permissions on document ${e}`,r),n.fail(r)}),n}removeEncryption(e){const t=new Ce,n=this.coreState.core.documents[e];return n?.document?(this.logger.info("DocumentManagerPlugin","RemoveEncryption",`Marking document ${e} for encryption removal on save`),this.engine.removeEncryption(n.document).wait(o=>{o&&this.logger.info("DocumentManagerPlugin","RemoveEncryption",`Document ${e} marked for encryption removal`),t.resolve(o)},o=>{this.logger.error("DocumentManagerPlugin","RemoveEncryption",`Failed to mark document ${e} for encryption removal`,o),t.fail(o)}),t):(t.reject({code:ee.DocNotOpen,message:`Document ${e} is not open`}),t)}checkDocumentLimit(){return this.maxDocuments&&Object.keys(this.coreState.core.documents).length>=this.maxDocuments?{code:ee.Unknown,message:`Maximum number of documents (${this.maxDocuments}) reached`}:null}validateRetry(e){const t=this.coreState.core.documents[e];return t?t.status==="loaded"?{valid:!1,error:{code:ee.Unknown,message:`Document ${e} is already loaded successfully`}}:t.status!=="error"?{valid:!1,error:{code:ee.Unknown,message:`Document ${e} is not in error state (current state: ${t.status})`}}:this.loadOptions.has(e)?{valid:!0}:{valid:!1,error:{code:ee.Unknown,message:`No retry information available for document ${e}`}}:{valid:!1,error:{code:ee.NotFound,message:`Document ${e} not found`}}}retryUrlDocument(e,t){const n={id:e,url:t.url};return this.engine.openDocumentUrl(n,{password:t.password,mode:t.mode,requestOptions:t.requestOptions})}retryBufferDocument(e,t){const n={id:e,content:t.buffer};return this.engine.openDocumentBuffer(n,{password:t.password})}handleLoadTask(e,t,n){t.wait(o=>{this.dispatchCoreAction(((i,r)=>({type:Ho,payload:{documentId:i,document:r}}))(e,o))},o=>{this.handleLoadError(e,o,n)})}handleLoadError(e,t,n){var o,i,r;const a=((o=t.reason)==null?void 0:o.message)||"Failed to load document";this.logger.error("DocumentManagerPlugin",n,"Failed to load document",t),this.dispatchCoreAction(((s,c,d,u)=>({type:Xi,payload:{documentId:s,error:c,errorCode:d,errorDetails:u}}))(e,a,(i=t.reason)==null?void 0:i.code,t.reason)),this.documentError$.emit({documentId:e,message:a,code:(r=t.reason)==null?void 0:r.code,reason:t.reason})}generateDocumentId(){return`doc-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}extractNameFromUrl(e){try{const t=new URL(e),n=t.pathname.split("/").pop();if(!n)return;let o=decodeURIComponent(n);return o.toLowerCase().endsWith(".pdf")||(o+=".pdf"),o}catch{return}}async initialize(e){var t;if(this.logger.info("DocumentManagerPlugin","Initialize","Document Manager Plugin initialized",{maxDocuments:this.maxDocuments,initialDocumentsCount:((t=e.initialDocuments)==null?void 0:t.length)??0}),e.initialDocuments&&e.initialDocuments.length>0)for(const n of e.initialDocuments)try{"buffer"in n?this.openDocumentBuffer(n):"url"in n&&this.openDocumentUrl(n)}catch(o){this.logger.error("DocumentManagerPlugin","Initialize","Failed to initiate initial document load",o)}}async destroy(){await this.closeAllDocuments().toPromise(),this.loadOptions.clear(),this.documentOpened$.clear(),this.documentClosed$.clear(),this.activeDocumentChanged$.clear(),this.documentOrderChanged$.clear(),this.documentError$.clear(),super.destroy()}};$c.id="document-manager";let Ai=$c;const ga="document-manager";function ep({documentId:e,children:t}){const n=Xe(e);return n?D(Y,{children:t({documentState:n,isLoading:n.status==="loading",isError:n.status==="error",isLoaded:n.status==="loaded"})}):null}const Sn=()=>Le(Ai.id),tp=ln({manifest:{id:ga,name:"Document Manager Plugin",version:"1.0.0",provides:["document-manager"],requires:[],optional:[],defaultConfig:{maxDocuments:10}},create:(e,t)=>new Ai(ga,e,t),reducer:e=>e,initialState:{}}).addUtility(function(){const{plugin:e}=st(Ai.id),{provides:t}=Sn(),n=K(null),o=K(null),i=K(void 0);return T(()=>{if(e?.onOpenFileRequest)return e.onOpenFileRequest(({task:r,options:a})=>{var s;o.current=r,i.current=a,(s=n.current)==null||s.click()})},[e]),D("input",{ref:n,type:"file",accept:"application/pdf",style:{display:"none"},onChange:async r=>{var a,s,c,d,u;const m=(a=r.currentTarget.files)==null?void 0:a[0];if(!m||!t)return;const h=await m.arrayBuffer();t.openDocumentBuffer({name:m.name,buffer:h,documentId:(s=i.current)==null?void 0:s.documentId,scale:(c=i.current)==null?void 0:c.scale,rotation:(d=i.current)==null?void 0:d.rotation,autoActivate:(u=i.current)==null?void 0:u.autoActivate}).wait(g=>{var p;(p=o.current)==null||p.resolve(g)},g=>{var p;(p=o.current)==null||p.fail(g)})}})}).build(),Fc="commands",np={id:Fc,name:"Commands Plugin",version:"1.0.0",provides:["commands"],requires:[],optional:["i18n"],defaultConfig:{commands:{}}},jc="COMMANDS/SET_DISABLED_CATEGORIES",io=e=>({type:jc,payload:e}),Hc=class extends Me{constructor(e,t,n){var o;super(e,t),this.commands=new Map,this.i18n=null,this.shortcutMap=new Map,this.commandExecuted$=Ye(),this.commandStateChanged$=Ye(),this.shortcutExecuted$=Ye(),this.categoryChanged$=re(),this.previousStates=new Map;const i=t.getPlugin("i18n");this.i18n=i?.provides()??null,(o=n.disabledCategories)!=null&&o.length&&this.dispatch(io(n.disabledCategories)),Object.values(n.commands).forEach(r=>{this.registerCommand(r)}),this.registry.getStore().subscribe((r,a)=>{this.onGlobalStoreChange(a)})}onDocumentClosed(e){this.previousStates.delete(e),this.logger.debug("CommandsPlugin","DocumentClosed",`Cleaned up command state cache for document: ${e}`)}async initialize(){this.logger.info("CommandsPlugin","Initialize","Commands plugin initialized")}async destroy(){this.commandExecuted$.clear(),this.commandStateChanged$.clear(),this.shortcutExecuted$.clear(),this.categoryChanged$.clear(),this.commands.clear(),this.shortcutMap.clear(),this.previousStates.clear(),super.destroy()}disableCategoryImpl(e){const t=new Set(this.state.disabledCategories);t.has(e)||(t.add(e),this.dispatch(io(Array.from(t))),this.categoryChanged$.emit({disabledCategories:Array.from(t)}))}enableCategoryImpl(e){const t=new Set(this.state.disabledCategories);t.has(e)&&(t.delete(e),this.dispatch(io(Array.from(t))),this.categoryChanged$.emit({disabledCategories:Array.from(t)}))}toggleCategoryImpl(e){this.state.disabledCategories.includes(e)?this.enableCategoryImpl(e):this.disableCategoryImpl(e)}setDisabledCategoriesImpl(e){this.dispatch(io(e)),this.categoryChanged$.emit({disabledCategories:e})}isCommandCategoryDisabled(e){var t;return!!((t=e.categories)!=null&&t.length)&&e.categories.some(n=>this.state.disabledCategories.includes(n))}buildCapability(){return{resolve:(e,t)=>this.resolve(e,t),execute:(e,t,n="ui")=>this.execute(e,t,n),getAllCommands:e=>this.getAllCommands(e),getCommandsByCategory:(e,t)=>this.getCommandsByCategory(e,t),getCommandByShortcut:e=>this.getCommandByShortcut(e),getAllShortcuts:()=>new Map(this.shortcutMap),forDocument:e=>this.createCommandScope(e),registerCommand:e=>this.registerCommand(e),unregisterCommand:e=>this.unregisterCommand(e),disableCategory:e=>this.disableCategoryImpl(e),enableCategory:e=>this.enableCategoryImpl(e),toggleCategory:e=>this.toggleCategoryImpl(e),setDisabledCategories:e=>this.setDisabledCategoriesImpl(e),getDisabledCategories:()=>this.state.disabledCategories,isCategoryDisabled:e=>this.state.disabledCategories.includes(e),onCommandExecuted:this.commandExecuted$.on,onCommandStateChanged:this.commandStateChanged$.on,onShortcutExecuted:this.shortcutExecuted$.on,onCategoryChanged:this.categoryChanged$.on}}createCommandScope(e){return{resolve:t=>this.resolve(t,e),execute:(t,n="ui")=>this.execute(t,e,n),getAllCommands:()=>this.getAllCommands(e),getCommandsByCategory:t=>this.getCommandsByCategory(t,e),onCommandStateChanged:t=>this.commandStateChanged$.on(n=>{if(n.documentId===e){const{documentId:o,...i}=n;t(i)}})}}resolve(e,t){const n=t??this.getActiveDocumentId(),o=this.commands.get(e);if(!o)throw new Error(`Command not found: ${e}`);const i=this.registry.getStore().getState(),r=this.resolveLabel(o,i,n),a=o.shortcuts?Array.isArray(o.shortcuts)?o.shortcuts:[o.shortcuts]:void 0,s=this.resolveDynamic(o.disabled,i,n)??!1,c=this.isCommandCategoryDisabled(o),d=s||c;return{id:o.id,label:r,icon:this.resolveDynamic(o.icon,i,n),iconProps:this.resolveDynamic(o.iconProps,i,n),active:this.resolveDynamic(o.active,i,n)??!1,disabled:d,visible:this.resolveDynamic(o.visible,i,n)??!0,shortcuts:a,shortcutLabel:o.shortcutLabel,categories:o.categories,description:o.description,execute:()=>o.action({registry:this.registry,state:i,documentId:n})}}resolveLabel(e,t,n){if(e.labelKey&&this.i18n){const o=this.resolveDynamic(e.labelParams,t,n);return this.i18n.t(e.labelKey,{params:o,documentId:n})}return e.label?e.label:e.id}resolveDynamic(e,t,n){if(e!==void 0)return typeof e=="function"?e({state:t,documentId:n}):e}execute(e,t,n="ui"){const o=t??this.getActiveDocumentId(),i=this.resolve(e,o);i.disabled?this.logger.warn("CommandsPlugin","ExecutionBlocked",`Command '${e}' is disabled for document '${o}'`):i.visible?(i.execute(),this.commandExecuted$.emit({commandId:e,documentId:o,source:n}),this.logger.debug("CommandsPlugin","CommandExecuted",`Command '${e}' executed for document '${o}' (source: ${n})`)):this.logger.warn("CommandsPlugin","ExecutionBlocked",`Command '${e}' is not visible for document '${o}'`)}registerCommand(e){this.commands.has(e.id)&&this.logger.warn("CommandsPlugin","CommandOverwrite",`Command '${e.id}' already exists and will be overwritten`),this.commands.set(e.id,e),e.shortcuts&&(Array.isArray(e.shortcuts)?e.shortcuts:[e.shortcuts]).forEach(t=>{const n=this.normalizeShortcut(t);this.shortcutMap.set(n,e.id)}),this.logger.debug("CommandsPlugin","CommandRegistered",`Command '${e.id}' registered`)}unregisterCommand(e){const t=this.commands.get(e);t&&(t.shortcuts&&(Array.isArray(t.shortcuts)?t.shortcuts:[t.shortcuts]).forEach(n=>{const o=this.normalizeShortcut(n);this.shortcutMap.delete(o)}),this.commands.delete(e),this.logger.debug("CommandsPlugin","CommandUnregistered",`Command '${e}' unregistered`))}getCommandByShortcut(e){const t=this.normalizeShortcut(e),n=this.shortcutMap.get(t);return n?this.commands.get(n)??null:null}normalizeShortcut(e){return e.toLowerCase().split("+").sort().join("+")}getAllCommands(e){const t=e??this.getActiveDocumentId();return Array.from(this.commands.keys()).map(n=>this.resolve(n,t))}getCommandsByCategory(e,t){const n=t??this.getActiveDocumentId();return Array.from(this.commands.values()).filter(o=>{var i;return(i=o.categories)==null?void 0:i.includes(e)}).map(o=>this.resolve(o.id,n))}onGlobalStoreChange(e){Object.keys(e.core.documents).forEach(t=>{this.detectCommandChanges(t,e)})}detectCommandChanges(e,t){const n=this.previousStates.get(e)??new Map;this.commands.forEach((o,i)=>{const r=this.resolve(i,e),a=n.get(i);if(!a)return void n.set(i,r);const s={};a.active!==r.active&&(s.active=r.active),a.disabled!==r.disabled&&(s.disabled=r.disabled),a.visible!==r.visible&&(s.visible=r.visible),a.label!==r.label&&(s.label=r.label),tn(a.iconProps,r.iconProps)||(s.iconProps=r.iconProps),Object.keys(s).length>0&&(n.set(i,r),this.commandStateChanged$.emit({commandId:i,documentId:e,changes:s}))}),this.previousStates.set(e,n)}};Hc.id="commands";let Uc=Hc;const pa={disabledCategories:[]},Wc=()=>Le(Uc.id),Lt=(e,t)=>{const{provides:n}=Wc(),[o,i]=z(()=>n?n.resolve(e,t):null);return T(()=>n?(i(n.resolve(e,t)),n.onCommandStateChanged(r=>{r.commandId===e&&r.documentId===t&&i(n.resolve(e,t))})):void i(null),[n,e,t]),o},op=ln({manifest:np,create:(e,t)=>new Uc(Fc,e,t),reducer:(e=pa,t)=>t.type===jc?{...e,disabledCategories:t.payload}:e,initialState:pa}).addUtility(function(){const{provides:e}=Wc();return T(()=>{if(!e)return;const t=(function(n){return o=>{const i=o.composedPath()[0]||o.target;if(i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable)return;const r=(function(c){const d=[];c.ctrlKey&&d.push("ctrl"),c.shiftKey&&d.push("shift"),c.altKey&&d.push("alt"),c.metaKey&&d.push("meta");const u=c.key.toLowerCase();return["control","shift","alt","meta"].includes(u)?null:[...d,u].sort().join("+")})(o);if(!r)return;const a=n.getCommandByShortcut(r);if(!a)return;const s=n.resolve(a.id);!s.disabled&&s.visible&&(o.preventDefault(),o.stopPropagation(),n.execute(a.id,void 0,"keyboard"))}})(e);return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]),null}).build(),Bc="i18n",ip={id:Bc,name:"I18n Plugin",version:"1.0.0",provides:["i18n"],requires:[],optional:[],defaultConfig:{defaultLocale:"en",locales:[{code:"en",name:"English",translations:{commands:{zoom:{in:"Zoom In",out:"Zoom Out",fitWidth:"Fit to Width",fitPage:"Fit to Page",automatic:"Automatic",level:"Zoom Level ({level}%)",inArea:"Zoom In Area"},fullscreen:{enter:"Enter Full Screen",exit:"Exit Full Screen"},rotate:{clockwise:"Rotate Clockwise",counterclockwise:"Rotate Counter-Clockwise"},menu:"Menu",sidebar:"Sidebar",search:"Search",comment:"Comment",download:"Download",print:"Print",openFile:"Open PDF",save:"Save",settings:"Settings",view:"View",annotate:"Annotate",shapes:"Shapes",redact:"Redact",fillAndSign:"Fill and Sign",form:"Form",pan:"Pan",pointer:"Pointer",undo:"Undo",redo:"Redo",copy:"Copy",screenshot:"Screenshot",nextPage:"Next Page",previousPage:"Previous Page"}}},{code:"es",name:"Espaol",translations:{commands:{zoom:{in:"Acercar",out:"Alejar",fitWidth:"Ajustar al ancho",fitPage:"Ajustar a la pgina",automatic:"Automtico",level:"Nivel de zoom ({level}%)",inArea:"Acercar rea"},fullscreen:{enter:"Pantalla completa",exit:"Salir de pantalla completa"},rotate:{clockwise:"Girar a la derecha",counterclockwise:"Girar a la izquierda"},menu:"Men",sidebar:"Barra lateral",search:"Buscar",comment:"Comentario",download:"Descargar",print:"Imprimir",openFile:"Abrir PDF",save:"Guardar",settings:"Configuracin",view:"Ver",annotate:"Anotar",shapes:"Formas",redact:"Redactar",fillAndSign:"Rellenar y firmar",form:"Formulario",pan:"Desplazar",pointer:"Puntero",undo:"Deshacer",redo:"Rehacer",copy:"Copiar",screenshot:"Captura de pantalla",nextPage:"Pgina siguiente",previousPage:"Pgina anterior"}}}]}},qc="I18N/SET_LOCALE",Gc="I18N/REGISTER_LOCALE",fa=e=>({type:qc,payload:e}),va=e=>({type:Gc,payload:e}),Vc=class extends Me{constructor(e,t,n){super(e,t),this.locales=new Map,this.paramResolvers=new Map,this.paramsCache=new Map,this.localeChange$=Ye(),this.paramsChanged$=tt((o,i)=>({documentId:o,...i}),{cache:!1}),this.config=n,n.locales.forEach(o=>{this.locales.set(o.code,o),this.dispatch(va(o.code))}),n.paramResolvers&&Object.entries(n.paramResolvers).forEach(([o,i])=>{this.paramResolvers.set(o,i)}),this.dispatch(fa(n.defaultLocale)),this.registry.getStore().subscribe((o,i)=>{this.detectParamChanges(i)})}async initialize(){this.logger.info("I18nPlugin","Initialize","I18n plugin initialized")}async destroy(){this.localeChange$.clear(),this.paramsChanged$.clear(),this.paramResolvers.clear(),this.paramsCache.clear(),super.destroy()}onDocumentClosed(e){this.paramsCache.delete(e),this.paramsChanged$.clearScope(e),this.logger.debug("I18nPlugin","DocumentClosed",`Cleaned up params cache for document: ${e}`)}buildCapability(){return{t:(e,t)=>this.translate(e,t),forDocument:e=>this.createI18nScope(e),registerParamResolver:(e,t)=>this.registerParamResolver(e,t),unregisterParamResolver:e=>this.unregisterParamResolver(e),setLocale:e=>this.setLocale(e),getLocale:()=>this.state.currentLocale,getAvailableLocales:()=>[...this.state.availableLocales],getLocaleInfo:e=>this.locales.get(e)??null,registerLocale:e=>this.registerLocale(e),hasLocale:e=>this.locales.has(e),onLocaleChange:this.localeChange$.on,onParamsChanged:this.paramsChanged$.onGlobal}}createI18nScope(e){return{t:(t,n)=>this.translate(t,{documentId:e,...n}),onParamsChanged:this.paramsChanged$.forScope(e)}}translate(e,t){const n=this.locales.get(this.state.currentLocale),o=this.config.fallbackLocale?this.locales.get(this.config.fallbackLocale):null;let i=this.getNestedValue(n?.translations,e);if(!i&&o&&(i=this.getNestedValue(o.translations,e)),!i){if(!t?.fallback)return this.logger.warn("I18nPlugin","MissingTranslation",`Translation not found for key: ${e}`),e;i=t.fallback}let r=t?.params;return!r&&this.paramResolvers.has(e)&&(r=this.resolveParams(e,t?.documentId)),this.interpolate(i,r)}resolveParams(e,t){const n=this.paramResolvers.get(e);if(!n)return;const o=this.registry.getStore().getState();try{return n({state:o,documentId:t})}catch(i){return void this.logger.error("I18nPlugin","ParamResolverError",`Error resolving params for key "${e}":`,i)}}getNestedValue(e,t){if(!e)return;const n=t.split(".");let o=e;for(const i of n){if(o==null)return;o=o[i]}return typeof o=="string"?o:void 0}interpolate(e,t){return t?e.replace(/\{(\w+)\}/g,(n,o)=>{const i=t[o];return i!==void 0?String(i):n}):e}detectParamChanges(e){Object.keys(e.core.documents).forEach(t=>{this.detectDocumentParamChanges(t,e)})}detectDocumentParamChanges(e,t){const n=this.paramsCache.get(e),o=[];this.paramResolvers.forEach((i,r)=>{try{const a=i({state:t,documentId:e});tn(n?.get(r),a)||(o.push(r),this.paramsCache.has(e)||this.paramsCache.set(e,new Map),this.paramsCache.get(e).set(r,a))}catch(a){this.logger.error("I18nPlugin","ParamDetectionError",`Error detecting param changes for key "${r}":`,a)}}),o.length>0&&(this.paramsChanged$.emit(e,{changedKeys:o}),this.logger.debug("I18nPlugin","ParamsChanged",`Translation params changed for document ${e}:`,o))}registerParamResolver(e,t){this.paramResolvers.has(e)&&this.logger.warn("I18nPlugin","ResolverOverwrite",`Param resolver for "${e}" already exists and will be overwritten`),this.paramResolvers.set(e,t),this.paramsCache.forEach(n=>{n.delete(e)}),this.logger.debug("I18nPlugin","ResolverRegistered",`Param resolver registered for: ${e}`)}unregisterParamResolver(e){this.paramResolvers.delete(e)&&(this.paramsCache.forEach(t=>{t.delete(e)}),this.logger.debug("I18nPlugin","ResolverUnregistered",`Param resolver unregistered for: ${e}`))}setLocale(e){if(!this.locales.has(e))return void this.logger.warn("I18nPlugin","LocaleNotFound",`Locale '${e}' is not registered`);const t=this.state.currentLocale;t!==e&&(this.dispatch(fa(e)),this.localeChange$.emit({previousLocale:t,currentLocale:e}),this.logger.info("I18nPlugin","LocaleChanged",`Locale changed to: ${e}`))}registerLocale(e){this.locales.has(e.code)?this.logger.warn("I18nPlugin","LocaleAlreadyRegistered",`Locale '${e.code}' is already registered`):(this.locales.set(e.code,e),this.dispatch(va(e.code)),this.logger.info("I18nPlugin","LocaleRegistered",`Locale registered: ${e.code}`))}};Vc.id="i18n";let Kc=Vc;const ya={currentLocale:"en",availableLocales:[]},rp={manifest:ip,create:(e,t)=>new Kc(Bc,e,t),reducer:(e=ya,t)=>{switch(t.type){case qc:{const n=t.payload;return e.availableLocales.includes(n)?{...e,currentLocale:n}:(console.warn(`I18nPlugin: Locale '${n}' not available`),e)}case Gc:{const n=t.payload;return e.availableLocales.includes(n)?e:{...e,availableLocales:[...e.availableLocales,n]}}default:return e}},initialState:ya},ke=e=>{const{provides:t}=Le(Kc.id),[,n]=gl(i=>i+1,0),o=te((i,r)=>t?t.t(i,{documentId:e,params:r?.params,fallback:r?.fallback}):r?.fallback??i,[t,e]);return T(()=>{if(!t)return;const i=t.onLocaleChange(()=>{n()}),r=e?t.forDocument(e).onParamsChanged(()=>{n()}):t.onParamsChanged(()=>{n()});return()=>{i(),r()}},[t,e]),{translate:o,locale:t?.getLocale()??"en"}};var qe=(e=>(e.Automatic="automatic",e.FitPage="fit-page",e.FitWidth="fit-width",e))(qe||{}),Kt=(e=>(e[e.Center=0]="Center",e[e.Top=1]="Top",e))(Kt||{});const cr="zoom",ap={id:cr,name:"Zoom Plugin",version:"1.0.0",provides:["zoom"],requires:["viewport","scroll"],optional:["interaction-manager","spread"],defaultConfig:{defaultZoomLevel:qe.Automatic,minZoom:.2,maxZoom:60,zoomStep:.1,zoomRanges:[{min:.2,max:.5,step:.05},{min:.5,max:1,step:.1},{min:1,max:2,step:.2},{min:2,max:4,step:.4},{min:4,max:10,step:.8},{min:10,max:20,step:1.6},{min:20,max:40,step:3.2},{min:40,max:60,step:6.4}],presets:[{name:"Fit Page",value:qe.FitPage},{name:"Fit Width",value:qe.FitWidth},{name:"Automatic",value:qe.Automatic},{name:"25%",value:.25},{name:"50%",value:.5},{name:"100%",value:1},{name:"125%",value:1.25},{name:"150%",value:1.5},{name:"200%",value:2},{name:"400%",value:4},{name:"800%",value:8},{name:"1600%",value:16}]}},Zc="ZOOM/INIT_STATE",Yc="ZOOM/CLEANUP_STATE",Xc="ZOOM/SET_ZOOM_LEVEL",Qc="ZOOM/SET_MARQUEE_ZOOM_ACTIVE",Jc={zoomLevel:qe.Automatic,currentZoomLevel:1,isMarqueeZoomActive:!1},ba={documents:{},activeDocumentId:null},ed=class extends Me{constructor(e,t,n){var o,i,r;super(e,t),this.zoom$=Ye(),this.state$=re(),this.viewportPlugin=t.getPlugin("viewport"),this.viewport=this.viewportPlugin.provides(),this.scroll=t.getPlugin("scroll").provides();const a=t.getPlugin("interaction-manager");this.interactionManager=a?.provides()??null;const s=t.getPlugin("spread");this.spread=s?.provides()??null,this.minZoom=n.minZoom??.25,this.maxZoom=n.maxZoom??10,this.zoomStep=n.zoomStep??.1,this.defaultZoomLevel=n.defaultZoomLevel,this.presets=n.presets??[],this.zoomRanges=this.normalizeRanges(n.zoomRanges??[]),this.viewport.onViewportResize(c=>this.recalcAuto(c.documentId,Kt.Top),{mode:"debounce",wait:150,keyExtractor:c=>c.documentId}),(o=this.spread)==null||o.onSpreadChange(c=>{this.recalcAuto(c.documentId,Kt.Top)}),(i=this.interactionManager)==null||i.registerMode({id:"marqueeZoom",scope:"page",exclusive:!0,cursor:"zoom-in"}),(r=this.interactionManager)==null||r.onModeChange(c=>{const d=c.activeMode==="marqueeZoom",u=this.getDocumentState(c.documentId);var m;u&&u.isMarqueeZoomActive!==d&&this.dispatch((m=c.documentId,{type:Qc,payload:{documentId:m,isActive:d}}))})}onDocumentLoadingStarted(e){this.viewport.gate("zoom",e);const t={...Jc,zoomLevel:this.defaultZoomLevel};this.dispatch((function(n,o){return{type:Zc,payload:{documentId:n,state:o}}})(e,t)),this.logger.debug("ZoomPlugin","DocumentOpened",`Initialized zoom state for document: ${e}`)}onDocumentLoaded(e){this.recalcAuto(e,Kt.Top)}onDocumentClosed(e){this.dispatch((function(t){return{type:Yc,payload:t}})(e)),this.logger.debug("ZoomPlugin","DocumentClosed",`Cleaned up zoom state for document: ${e}`)}onRotationChanged(e){this.recalcAuto(e,Kt.Top)}buildCapability(){return{requestZoom:(e,t)=>this.requestZoom(e,t),requestZoomBy:(e,t)=>this.requestZoomBy(e,t),zoomIn:()=>this.zoomIn(),zoomOut:()=>this.zoomOut(),zoomToArea:(e,t)=>this.zoomToArea(e,t),enableMarqueeZoom:()=>this.enableMarqueeZoom(),disableMarqueeZoom:()=>this.disableMarqueeZoom(),toggleMarqueeZoom:()=>this.toggleMarqueeZoom(),isMarqueeZoomActive:()=>this.isMarqueeZoomActive(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createZoomScope(e),registerMarqueeOnPage:e=>this.registerMarqueeOnPage(e),getPresets:()=>this.presets,onZoomChange:this.zoom$.on,onStateChange:this.state$.on}}createZoomScope(e){return{requestZoom:(t,n)=>this.requestZoom(t,n,e),requestZoomBy:(t,n)=>this.requestZoomBy(t,n,e),zoomIn:()=>this.zoomIn(e),zoomOut:()=>this.zoomOut(e),zoomToArea:(t,n)=>this.zoomToArea(t,n,e),enableMarqueeZoom:()=>this.enableMarqueeZoom(e),disableMarqueeZoom:()=>this.disableMarqueeZoom(e),toggleMarqueeZoom:()=>this.toggleMarqueeZoom(e),isMarqueeZoomActive:()=>this.isMarqueeZoomActive(e),getState:()=>this.getDocumentStateOrThrow(e),onZoomChange:t=>this.zoom$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Zoom state not found for document: ${e??"active"}`);return t}requestZoom(e,t,n){this.handleRequest({level:e,center:t},n)}requestZoomBy(e,t,n){const o=n??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(o).currentZoomLevel,r=this.toZoom(i+e);this.handleRequest({level:r,center:t},o)}zoomIn(e){const t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).currentZoomLevel;this.handleRequest({level:n,delta:this.stepFor(n)},t)}zoomOut(e){const t=e??this.getActiveDocumentId(),n=this.getDocumentStateOrThrow(t).currentZoomLevel;this.handleRequest({level:n,delta:-this.stepFor(n)},t)}zoomToArea(e,t,n){const o=n??this.getActiveDocumentId();this.handleZoomToArea(o,e,t)}enableMarqueeZoom(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManager)==null||t.forDocument(n).activate("marqueeZoom")}disableMarqueeZoom(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManager)==null||t.forDocument(n).activateDefaultMode()}toggleMarqueeZoom(e){var t;const n=e??this.getActiveDocumentId(),o=(t=this.interactionManager)==null?void 0:t.forDocument(n);o?.getActiveMode()==="marqueeZoom"?o.activateDefaultMode():o?.activate("marqueeZoom")}isMarqueeZoomActive(e){var t;const n=e??this.getActiveDocumentId();return((t=this.interactionManager)==null?void 0:t.forDocument(n).getActiveMode())==="marqueeZoom"}handleRequest({level:e,delta:t=0,center:n,focus:o=Kt.Center,align:i="keep"},r){const a=r??this.getActiveDocumentId(),s=this.getDocumentStateOrThrow(a);if(!this.coreState.core.documents[a])return;const c=this.viewport.forDocument(a),d=c.getMetrics(),u=s.currentZoomLevel;if(d.clientWidth===0||d.clientHeight===0)return;const m=typeof e=="number"?e:this.computeZoomForMode(a,e,d);if(m===!1)return;const h=ve(m+t,this.minZoom,this.maxZoom),g=Math.floor(1e3*h)/1e3,p=n??{vx:d.clientWidth/2,vy:o===Kt.Top?0:d.clientHeight/2},{desiredScrollLeft:f,desiredScrollTop:v}=this.computeScrollForZoomChange(a,d,u,g,p,i);isNaN(f)||isNaN(v)||this.viewportPlugin.setViewportScrollMetrics(a,{scrollLeft:f,scrollTop:v}),this.dispatch((function(b,x,w){return{type:Xc,payload:{documentId:b,zoomLevel:x,currentZoomLevel:w}}})(a,typeof e=="number"?g:e,g)),this.dispatchCoreAction(((b,x)=>({type:Wo,payload:{scale:b,documentId:x}}))(g,a)),this.viewport.isGated(a)&&this.viewport.releaseGate("zoom",a),c.scrollTo({x:f,y:v,behavior:"instant"});const y={documentId:a,oldZoom:u,newZoom:g,level:e,center:p,desiredScrollLeft:f,desiredScrollTop:v,viewport:d};this.zoom$.emit(y)}computeZoomForMode(e,t,n){if(!this.coreState.core.documents[e])return!1;const o=this.scroll.forDocument(e),i=o?this.scroll.getPageGap():0,r=this.viewport.getViewportGap(),a=o.getSpreadPagesWithRotatedSize();if(!a.length||n.clientWidth===0||n.clientHeight===0)return!1;const s=n.clientWidth-2*r,c=n.clientHeight-2*r;if(s<=0||c<=0)return!1;let d=0,u=0;switch(a.forEach(m=>{const h=m.reduce((p,f,v)=>p+f.rotatedSize.width+(v?i:0),0),g=Math.max(...m.map(p=>p.rotatedSize.height));d=Math.max(d,h),u=Math.max(u,g)}),t){case qe.FitWidth:return s/d;case qe.FitPage:return Math.min(s/d,c/u);case qe.Automatic:return Math.min(s/d,1);default:return 1}}computeScrollForZoomChange(e,t,n,o,i,r="keep"){const a=this.scroll.forDocument(e).getLayout(),s=this.viewport.getViewportGap(),c=a.totalContentSize.width,d=a.totalContentSize.height,u=t.clientWidth-2*s,m=t.clientHeight-2*s,h=(C,I,k)=>I*k<C?(C-I*k)/2:0,g=h(u,c,n),p=h(m,d,n),f=h(u,c,o),v=h(m,d,o),y=(t.scrollLeft+i.vx-s-g)/n*o+s+f,b=(t.scrollTop+i.vy-s-p)/n*o+s+v,x=r==="center"?y-t.clientWidth/2:y-i.vx,w=r==="center"?b-t.clientHeight/2:b-i.vy;return{desiredScrollLeft:Math.max(0,x),desiredScrollTop:Math.max(0,w)}}handleZoomToArea(e,t,n){const o=this.coreState.core.documents[e];if(!o)return;const i=o.rotation,r=this.viewport.forDocument(e).getMetrics(),a=this.viewport.getViewportGap(),s=this.getDocumentStateOrThrow(e).currentZoomLevel,c=r.clientWidth-2*a,d=r.clientHeight-2*a,u=this.scroll.forDocument(e).getLayout(),m=u.virtualItems.find(S=>S.pageLayouts.some(M=>M.pageIndex===t));if(!m)return;const h=m.pageLayouts.find(S=>S.pageIndex===t),g=Ki({width:h.width,height:h.height},n,i),p=this.toZoom(Math.min(c/g.size.width,d/g.size.height)),f=m.x+h.x,v=m.y+h.y,y=f+g.origin.x+g.size.width/2,b=v+g.origin.y+g.size.height/2,x=(S,M,P)=>M*P<S?(S-M*P)/2:0,w=x(c,u.totalContentSize.width,s),C=x(d,u.totalContentSize.height,s),I=a+w+y*s-r.scrollLeft,k=a+C+b*s-r.scrollTop;this.handleRequest({level:p,center:{vx:I,vy:k},align:"center"},e)}recalcAuto(e,t){const n=this.getDocumentState(e);n&&(n.zoomLevel!==qe.Automatic&&n.zoomLevel!==qe.FitPage&&n.zoomLevel!==qe.FitWidth||this.handleRequest({level:n.zoomLevel,focus:t},e))}normalizeRanges(e){return[...e].filter(t=>t.step>0&&t.max>t.min).sort((t,n)=>t.min-n.min)}stepFor(e){const t=this.zoomRanges.find(n=>e>=n.min&&e<n.max);return t?t.step:this.zoomStep}toZoom(e){return parseFloat(ve(e,this.minZoom,this.maxZoom).toFixed(2))}registerMarqueeOnPage(e){if(!this.interactionManager)return this.logger.warn("ZoomPlugin","MissingDependency","Interaction manager plugin not loaded, marquee zoom disabled"),()=>{};const t=this.coreState.core.documents[e.documentId];if(!t||!t.document)return this.logger.warn("ZoomPlugin","DocumentNotFound","Document not found"),()=>{};const n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn("ZoomPlugin","PageNotFound",`Page ${e.pageIndex} not found`),()=>{};const o=(function(i){const{pageSize:r,scale:a,minDragPx:s=5,onPreview:c,onCommit:d,onSmallDrag:u}=i;let m=null,h=null;return{onPointerDown:(g,p)=>{var f;m=g,h={origin:{x:g.x,y:g.y},size:{width:0,height:0}},c?.(h),(f=p.setPointerCapture)==null||f.call(p)},onPointerMove:g=>{if(!m)return;const p=ve(g.x,0,r.width),f=ve(g.y,0,r.height);h={origin:{x:Math.min(m.x,p),y:Math.min(m.y,f)},size:{width:Math.abs(p-m.x),height:Math.abs(f-m.y)}},c?.(h)},onPointerUp:(g,p)=>{var f;h&&(Math.max(h.size.width,h.size.height)*a>s?d?.(h):u?.()),m=null,h=null,c?.(null),(f=p.releasePointerCapture)==null||f.call(p)},onPointerCancel:(g,p)=>{var f;m=null,h=null,c?.(null),(f=p.releasePointerCapture)==null||f.call(p)}}})({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:i=>{var r,a;this.zoomToArea(e.pageIndex,i,e.documentId),(a=(r=e.callback).onCommit)==null||a.call(r,i)},onSmallDrag:()=>{var i,r;this.zoomIn(e.documentId),(r=(i=e.callback).onSmallDrag)==null||r.call(i)}});return this.interactionManager.registerHandlers({documentId:e.documentId,modeId:"marqueeZoom",handlers:o,pageIndex:e.pageIndex})}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o&&i&&(o.currentZoomLevel!==i.currentZoomLevel||o.zoomLevel!==i.zoomLevel||o.isMarqueeZoomActive!==i.isMarqueeZoomActive)&&this.state$.emit({documentId:n,state:i})}}async initialize(){this.logger.info("ZoomPlugin","Initialize","Zoom plugin initialized")}async destroy(){this.zoom$.clear(),this.state$.clear(),super.destroy()}};ed.id="zoom";let td=ed;const sp={manifest:ap,create:(e,t)=>new td(cr,e,t),reducer:(e=ba,t)=>{switch(t.type){case Zc:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case Yc:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"ZOOM/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Xc:{const{documentId:n,zoomLevel:o,currentZoomLevel:i}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,zoomLevel:o,currentZoomLevel:i}}}:e}case Qc:{const{documentId:n,isActive:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isMarqueeZoomActive:o}}}:e}default:return e}},initialState:ba},dr=()=>Le(td.id);function wa(e){const[t,n]=[e[0],e[1]],o=n.clientX-t.clientX,i=n.clientY-t.clientY;return Math.hypot(o,i)}function lp(e,t={}){const{provides:n}=Le("viewport"),{provides:o}=dr(),i=an(Ul),r=K(null);return $o(()=>{const a=r.current,s=i?.current;if(a&&s&&o)return(function({element:c,container:d,documentId:u,zoomProvides:m,viewportGap:h=0,options:g={}}){const{enablePinch:p=!0,enableWheel:f=!0}=g;if(typeof window>"u")return()=>{};const v=m.forDocument(u),y=()=>v.getState();let b=0,x=1,w=!1,C=0,I=null,k=1,S=0,M=0,P=0,E=0,A=0,j=0,L=0,H=0,R=0,U=0,F=0,V=0,de=0;const oe=(ne,pe,fe)=>Math.min(Math.max(ne,pe),fe),he=()=>{const ne=d.clientWidth-2*h,pe=c.offsetWidth,fe=pe<ne?(ne-pe)/2:0;c.style.marginLeft=`${fe}px`},me=ne=>{const pe=S*ne,fe=M*ne;let Se=R*(1-ne);const $e=H-pe/2-P,bt=U-de*ne-P,Ut=Math.max(0,pe-L),dn=.3*L,_t=Math.min(1,Ut/dn);let Je=$e+(bt-$e)*_t;return fe>j-2*V&&(Se=oe(E+Se,j-V-fe,V)-E),pe>A-2*V&&(Je=oe(P+Je,A-V-pe,V)-P),{tx:Je,ty:Se,blend:_t,finalWidth:pe}},G=ne=>{x=ne;const{tx:pe,ty:fe}=me(ne);c.style.transformOrigin="0 0",c.style.transform=`translate(${pe}px, ${fe}px) scale(${ne})`},le=()=>{c.style.transform="none",c.style.transformOrigin="0 0",x=1},we=()=>{const{tx:ne,finalWidth:pe}=me(x),fe=(x-1)*b;let Se,$e=F;if(pe<=L)Se=H;else{const bt=1-x;Se=Math.abs(bt)>.001?P+ne/bt:U}v.requestZoomBy(fe,{vx:Se,vy:$e}),le(),b=0},Ae=(ne,pe)=>{const fe=d.getBoundingClientRect(),Se=c.getBoundingClientRect();V=h,S=Se.width,M=Se.height,P=Se.left-fe.left,E=Se.top-fe.top,A=fe.width,j=fe.height,L=d.clientWidth,H=d.clientLeft+L/2;const $e=ne-Se.left;R=pe-Se.top,U=ne-fe.left,F=pe-fe.top,de=S<L?U*S/L:$e},He=ne=>{if(ne.touches.length!==2)return;w=!0,b=y().currentZoomLevel,C=wa(ne.touches);const pe=(function(fe){const[Se,$e]=[fe[0],fe[1]];return{x:(Se.clientX+$e.clientX)/2,y:(Se.clientY+$e.clientY)/2}})(ne.touches);Ae(pe.x,pe.y),ne.preventDefault()},Qe=ne=>{if(!w||ne.touches.length!==2)return;const pe=wa(ne.touches);G(pe/C),ne.preventDefault()},Ee=ne=>{w&&(ne.touches.length>=2||(w=!1,we()))},_e=ne=>{if(!ne.ctrlKey&&!ne.metaKey)return;ne.preventDefault(),I===null?(b=y().currentZoomLevel,k=1,Ae(ne.clientX,ne.clientY)):clearTimeout(I);const pe=1-.01*ne.deltaY;k*=pe,k=Math.max(.1,Math.min(10,k)),G(k),I=setTimeout(()=>{I=null,we(),k=1},150)},Be=v.onStateChange(()=>he()),ie=new ResizeObserver(()=>he());return ie.observe(c),ie.observe(d),he(),p&&(d.addEventListener("touchstart",He,{passive:!1}),d.addEventListener("touchmove",Qe,{passive:!1}),d.addEventListener("touchend",Ee),d.addEventListener("touchcancel",Ee)),f&&d.addEventListener("wheel",_e,{passive:!1}),()=>{p&&(d.removeEventListener("touchstart",He),d.removeEventListener("touchmove",Qe),d.removeEventListener("touchend",Ee),d.removeEventListener("touchcancel",Ee)),f&&d.removeEventListener("wheel",_e),I&&clearTimeout(I),Be(),ie.disconnect(),le(),c.style.marginLeft=""}})({element:a,container:s,documentId:e,zoomProvides:o,viewportGap:n?.getViewportGap()||0,options:t})},[n,o,e,i,t.enablePinch,t.enableWheel]),{elementRef:r}}function cp({children:e,documentId:t,style:n,enablePinch:o=!0,enableWheel:i=!0,...r}){const a=X(()=>({enablePinch:o,enableWheel:i}),[o,i]),{elementRef:s}=lp(t,a);return D("div",{ref:s,...r,style:{...n,display:"inline-block",overflow:"visible",boxSizing:"border-box"},children:e})}const dp=({documentId:e,pageIndex:t,scale:n,className:o,stroke:i="rgba(33,150,243,0.8)",fill:r="rgba(33,150,243,0.15)"})=>{const{provides:a}=dr(),s=Xe(e),[c,d]=z(null),u=X(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]);return T(()=>{if(a)return a.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:d}})},[a,e,t,u]),c?D("div",{style:{position:"absolute",pointerEvents:"none",left:c.origin.x*u,top:c.origin.y*u,width:c.size.width*u,height:c.size.height*u,border:`1px solid ${i}`,background:r,boxSizing:"border-box"},className:o}):null},nd=class extends Me{constructor(e,t,n){super(e,t),this.config=n}buildCapability(){return{renderPage:e=>this.renderPage(e),renderPageRect:e=>this.renderPageRect(e),forDocument:e=>this.createRenderScope(e)}}createRenderScope(e){return{renderPage:t=>this.renderPage(t,e),renderPageRect:t=>this.renderPageRect(t,e)}}renderPage({pageIndex:e,options:t},n){const o=n??this.getActiveDocumentId(),i=this.coreState.core.documents[o];if(!i?.document)throw new Error(`Document ${o} not loaded`);const r=i.document.pages.find(s=>s.index===e);if(!r)throw new Error(`Page ${e} not found in document ${o}`);const a={...t??{},withForms:t?.withForms??this.config.withForms??!1,withAnnotations:t?.withAnnotations??this.config.withAnnotations??!1,imageType:t?.imageType??this.config.defaultImageType??"image/png",imageQuality:t?.imageQuality??this.config.defaultImageQuality??.92};return this.engine.renderPage(i.document,r,a)}renderPageRect({pageIndex:e,rect:t,options:n},o){const i=o??this.getActiveDocumentId(),r=this.coreState.core.documents[i];if(!r?.document)throw new Error(`Document ${i} not loaded`);const a=r.document.pages.find(c=>c.index===e);if(!a)throw new Error(`Page ${e} not found in document ${i}`);const s={...n??{},withForms:n?.withForms??this.config.withForms??!1,withAnnotations:n?.withAnnotations??this.config.withAnnotations??!1,imageType:n?.imageType??this.config.defaultImageType??"image/png",imageQuality:n?.imageQuality??this.config.defaultImageQuality??.92};return this.engine.renderPageRect(r.document,a,t,s)}async initialize(e){this.logger.info("RenderPlugin","Initialize","Render plugin initialized")}async destroy(){super.destroy()}};nd.id="render";let od=nd;const xa="render",up={manifest:{id:xa,name:"Render Plugin",version:"1.0.0",provides:["render"],requires:[],optional:[],defaultConfig:{}},create:(e,t)=>new od(xa,e,t),reducer:()=>{},initialState:{}};function mp({documentId:e,pageIndex:t,scale:n,dpr:o,style:i,...r}){const{provides:a}=Le(od.id),s=Xe(e),[c,d]=z(null),u=K(null),m=X(()=>s&&s.pageRefreshVersions[t]||0,[s,t]),h=X(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]),g=X(()=>o!==void 0?o:window.devicePixelRatio,[o]);return T(()=>{if(!a)return;const p=a.forDocument(e).renderPage({pageIndex:t,options:{scaleFactor:h,dpr:g}});return p.wait(f=>{const v=URL.createObjectURL(f);d(v),u.current=v},Oe),()=>{u.current?(URL.revokeObjectURL(u.current),u.current=null):p.abort({code:ee.Cancelled,message:"canceled render task"})}},[e,t,h,g,a,m]),D(Y,{children:c&&D("img",{src:c,onLoad:()=>{u.current&&(URL.revokeObjectURL(u.current),u.current=null)},...r,style:{width:"100%",height:"100%",...i||{}}})})}const id="rotate",hp={id,name:"Rotate Plugin",version:"1.0.0",provides:["rotate"],requires:[],optional:[],defaultConfig:{}},rd="ROTATE/INIT_STATE",ad="ROTATE/CLEANUP_STATE",sd="ROTATE/SET_ROTATION",ld=class extends Me{constructor(e,t,n){super(e,t),this.rotate$=re(),this.defaultRotation=n.defaultRotation??0}onDocumentLoadingStarted(e){const t={rotation:this.defaultRotation};this.dispatch((function(n,o){return{type:rd,payload:{documentId:n,state:o}}})(e,t)),this.dispatchCoreAction(Qr(this.defaultRotation,e)),this.logger.debug("RotatePlugin","DocumentOpened",`Initialized rotation state for document: ${e}`)}onDocumentClosed(e){this.dispatch((function(t){return{type:ad,payload:t}})(e)),this.logger.debug("RotatePlugin","DocumentClosed",`Cleaned up rotation state for document: ${e}`)}buildCapability(){return{setRotation:e=>this.setRotationForDocument(e),getRotation:()=>this.getRotationForDocument(),rotateForward:()=>this.rotateForward(),rotateBackward:()=>this.rotateBackward(),forDocument:e=>this.createRotateScope(e),onRotateChange:this.rotate$.on}}createRotateScope(e){return{setRotation:t=>this.setRotationForDocument(t,e),getRotation:()=>this.getRotationForDocument(e),rotateForward:()=>this.rotateForward(e),rotateBackward:()=>this.rotateBackward(e),onRotateChange:t=>this.rotate$.on(n=>{n.documentId===e&&t(n.rotation)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Rotation state not found for document: ${e??"active"}`);return t}setRotationForDocument(e,t){const n=t??this.getActiveDocumentId(),o=this.coreState.core.documents[n];if(!o?.document)throw new Error(`Document ${n} not loaded`);this.dispatch((function(i,r){return{type:sd,payload:{documentId:i,rotation:r}}})(n,e)),this.dispatchCoreAction(Qr(e,n)),this.rotate$.emit({documentId:n,rotation:e})}getRotationForDocument(e){return this.getDocumentStateOrThrow(e).rotation}rotateForward(e){const t=e??this.getActiveDocumentId(),n=this.getRotationForDocument(t),o=(n+1)%4;this.setRotationForDocument(o,t)}rotateBackward(e){const t=e??this.getActiveDocumentId(),n=this.getRotationForDocument(t),o=(n+3)%4;this.setRotationForDocument(o,t)}getMatrixAsString(e){return(function(t,n,o){const[i,r,a,s,c,d]=(function(u,m,h){let g=1,p=0,f=0,v=1,y=0,b=0;switch(u){case 1:g=0,p=1,f=-1,v=0,y=h;break;case 2:g=-1,p=0,f=0,v=-1,y=m,b=h;break;case 3:g=0,p=-1,f=1,v=0,b=m}return[g,p,f,v,y,b]})(t,n,o);return`matrix(${i},${r},${a},${s},${c},${d})`})(e.rotation,e.width,e.height)}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o?.rotation!==i.rotation&&this.logger.debug("RotatePlugin","RotationChanged",`Rotation changed for document ${n}: ${o?.rotation??0} -> ${i.rotation}`)}}async initialize(e){this.logger.info("RotatePlugin","Initialize","Rotate plugin initialized")}async destroy(){this.rotate$.clear(),super.destroy()}};ld.id="rotate";let cd=ld;const Ca={documents:{},activeDocumentId:null},gp={manifest:hp,create:(e,t)=>new cd(id,e,t),reducer:(e=Ca,t)=>{switch(t.type){case rd:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case ad:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"ROTATE/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case sd:{const{documentId:n,rotation:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,rotation:o}}}:e}default:return e}},initialState:Ca};function pp({children:e,documentId:t,pageIndex:n,rotation:o,scale:i,style:r,...a}){var s,c,d,u;const{plugin:m}=st(cd.id),h=Xe(t),g=(c=(s=h?.document)==null?void 0:s.pages)==null?void 0:c[n],p=((d=g?.size)==null?void 0:d.width)??0,f=((u=g?.size)==null?void 0:u.height)??0,v=o??h?.rotation??0,y=i??h?.scale??1,b=m?.getMatrixAsString({width:p*y,height:f*y,rotation:v})??"matrix(1, 0, 0, 1, 0, 0)";return g?D("div",{...a,style:{position:"absolute",transformOrigin:"0 0",transform:b,...r},children:e}):null}const dd="SEARCH/INIT_STATE",ud="SEARCH/CLEANUP_STATE",md="SEARCH/START_SEARCH_SESSION",hd="SEARCH/STOP_SEARCH_SESSION",gd="SEARCH/SET_SEARCH_FLAGS",pd="SEARCH/SET_SHOW_ALL_RESULTS",fd="SEARCH/START_SEARCH",vd="SEARCH/SET_SEARCH_RESULTS",yd="SEARCH/APPEND_SEARCH_RESULTS",bd="SEARCH/SET_ACTIVE_RESULT_INDEX";function Ia(e,t){return{type:pd,payload:{documentId:e,showAll:t}}}function ii(e,t,n,o){return{type:vd,payload:{documentId:e,results:t,total:n,activeResultIndex:o}}}function ka(e,t){return{type:bd,payload:{documentId:e,index:t}}}const Mo={flags:[],results:[],total:0,activeResultIndex:-1,showAllResults:!0,query:"",loading:!1,active:!1},Sa={documents:{}},Rt=(e,t,n)=>{const o=e.documents[t]||Mo;return{...e,documents:{...e.documents,[t]:{...o,...n}}}},wd=class extends Me{constructor(e,t,n){super(e,t),this.searchStop$=re(),this.searchStart$=re(),this.searchResult$=re(),this.searchActiveResultChange$=re(),this.searchResultState$=re(),this.searchState$=re(),this.currentTask=new Map,this.pluginConfig=n}onDocumentLoadingStarted(e){const t={...Mo,flags:this.pluginConfig.flags||[],showAllResults:this.pluginConfig.showAllResults??!0};this.dispatch((function(n,o){return{type:dd,payload:{documentId:n,state:o}}})(e,t))}onDocumentClosed(e){this.stopSearchSession(e),this.dispatch((function(t){return{type:ud,payload:t}})(e)),this.currentTask.delete(e)}async initialize(){}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&(this.searchState$.emit({documentId:n,state:i}),o&&o.results===i.results&&o.activeResultIndex===i.activeResultIndex&&o.showAllResults===i.showAllResults&&o.active===i.active||this.searchResultState$.emit({documentId:n,state:{results:i.results,activeResultIndex:i.activeResultIndex,showAllResults:i.showAllResults,active:i.active}}))}}buildCapability(){const e=n=>n??this.getActiveDocumentId(),t=n=>{const o=e(n),i=this.state.documents[o];if(!i)throw new Error(`Search state not found for document ${o}`);return i};return{startSearch:n=>this.startSearchSession(e(n)),stopSearch:n=>this.stopSearchSession(e(n)),searchAllPages:(n,o)=>this.searchAllPages(n,e(o)),nextResult:n=>this.nextResult(e(n)),previousResult:n=>this.previousResult(e(n)),goToResult:(n,o)=>this.goToResult(n,e(o)),setShowAllResults:(n,o)=>this.dispatch(Ia(e(o),n)),getShowAllResults:n=>t(n).showAllResults,getFlags:n=>t(n).flags,setFlags:(n,o)=>this.setFlags(n,e(o)),getState:n=>t(n),forDocument:this.createSearchScope.bind(this),onSearchResult:this.searchResult$.on,onSearchStart:this.searchStart$.on,onSearchStop:this.searchStop$.on,onActiveResultChange:this.searchActiveResultChange$.on,onSearchResultStateChange:this.searchResultState$.on,onStateChange:this.searchState$.on}}createSearchScope(e){const t=()=>{const n=this.state.documents[e];if(!n)throw new Error(`Search state not found for document ${e}`);return n};return{startSearch:()=>this.startSearchSession(e),stopSearch:()=>this.stopSearchSession(e),searchAllPages:n=>this.searchAllPages(n,e),nextResult:()=>this.nextResult(e),previousResult:()=>this.previousResult(e),goToResult:n=>this.goToResult(n,e),setShowAllResults:n=>this.dispatch(Ia(e,n)),getShowAllResults:()=>t().showAllResults,getFlags:()=>t().flags,setFlags:n=>this.setFlags(n,e),getState:t,onSearchResult:n=>this.searchResult$.on(o=>{o.documentId===e&&n(o.results)}),onSearchStart:n=>this.searchStart$.on(o=>{o.documentId===e&&n()}),onSearchStop:n=>this.searchStop$.on(o=>{o.documentId===e&&n()}),onActiveResultChange:n=>this.searchActiveResultChange$.on(o=>{o.documentId===e&&n(o.index)}),onSearchResultStateChange:n=>this.searchResultState$.on(o=>{o.documentId===e&&n(o.state)}),onStateChange:n=>this.searchState$.on(o=>{o.documentId===e&&n(o.state)})}}setFlags(e,t){this.dispatch((function(o,i){return{type:gd,payload:{documentId:o,flags:i}}})(t,e));const n=this.state.documents[t];n?.active&&this.searchAllPages(n.query,t,!0)}notifySearchStart(e){this.searchStart$.emit({documentId:e})}notifySearchStop(e){this.searchStop$.emit({documentId:e})}notifyActiveResultChange(e,t){this.searchActiveResultChange$.emit({documentId:e,index:t})}startSearchSession(e){this.getCoreDocument(e)&&(this.dispatch((function(t){return{type:md,payload:{documentId:t}}})(e)),this.notifySearchStart(e))}stopSearchSession(e){var t;const n=this.state.documents[e];if(!n?.active)return;const o=this.currentTask.get(e);if(o){try{(t=o.abort)==null||t.call(o,{code:ee.Cancelled,message:"search stopped"})}catch{}this.currentTask.delete(e)}this.dispatch((function(i){return{type:hd,payload:{documentId:i}}})(e)),this.notifySearchStop(e)}searchAllPages(e,t,n=!1){var o;const i=this.state.documents[t];if(!i)return ge.reject({code:ee.NotFound,message:"Search state not initialized"});const r=this.getCoreDocument(t);if(!r?.document)return ge.reject({code:ee.NotFound,message:"Document not loaded"});const a=e.trim();if(i.query===a&&!n)return ge.resolve({results:i.results,total:i.total});const s=this.currentTask.get(t);if(s){try{(o=s.abort)==null||o.call(s,{code:ee.Cancelled,message:"new search"})}catch{}this.currentTask.delete(t)}if(this.dispatch((function(d,u){return{type:fd,payload:{documentId:d,query:u}}})(t,a)),!a)return this.dispatch(ii(t,[],0,-1)),ge.resolve({results:[],total:0});i.active||this.startSearchSession(t);const c=this.engine.searchAllPages(r.document,a,{flags:i.flags});return this.currentTask.set(t,c),c.onProgress(d=>{var u;(u=d?.results)!=null&&u.length&&this.currentTask.get(t)===c&&(this.dispatch((function(m,h){return{type:yd,payload:{documentId:m,results:h}}})(t,d.results)),this.state.documents[t].activeResultIndex===-1&&(this.dispatch(ka(t,0)),this.notifyActiveResultChange(t,0)))}),c.wait(d=>{this.currentTask.delete(t);const u=d.total>0?0:-1;this.dispatch(ii(t,d.results,d.total,u)),this.searchResult$.emit({documentId:t,results:d}),d.total>0&&this.notifyActiveResultChange(t,0)},d=>{var u;((u=d?.reason)==null?void 0:u.code)!==ee.Cancelled&&(console.error("Error during search:",d),this.dispatch(ii(t,[],0,-1))),this.currentTask.delete(t)}),c}nextResult(e){const t=this.state.documents[e];if(!t||t.results.length===0)return-1;const n=t.activeResultIndex>=t.results.length-1?0:t.activeResultIndex+1;return this.goToResult(n,e)}previousResult(e){const t=this.state.documents[e];if(!t||t.results.length===0)return-1;const n=t.activeResultIndex<=0?t.results.length-1:t.activeResultIndex-1;return this.goToResult(n,e)}goToResult(e,t){const n=this.state.documents[t];return!n||n.results.length===0||e<0||e>=n.results.length?-1:(this.dispatch(ka(t,e)),this.notifyActiveResultChange(t,e),e)}async destroy(){for(const e of Object.keys(this.state.documents))this.stopSearchSession(e);this.searchResult$.clear(),this.searchStart$.clear(),this.searchStop$.clear(),this.searchActiveResultChange$.clear(),this.searchResultState$.clear(),this.searchState$.clear(),super.destroy()}};wd.id="search";let xd=wd;const Pa="search",fp={manifest:{id:Pa,name:"Search Plugin",version:"1.0.0",provides:["search"],requires:[],optional:[],defaultConfig:{flags:[]}},create:(e,t)=>new xd(Pa,e,t),reducer:(e=Sa,t)=>{switch(t.type){case dd:return{...e,documents:{...e.documents,[t.payload.documentId]:t.payload.state}};case ud:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i}}case md:return Rt(e,t.payload.documentId,{active:!0});case hd:return Rt(e,t.payload.documentId,{results:[],total:0,activeResultIndex:-1,query:"",loading:!1,active:!1});case gd:return Rt(e,t.payload.documentId,{flags:t.payload.flags});case pd:return Rt(e,t.payload.documentId,{showAllResults:t.payload.showAll});case fd:return Rt(e,t.payload.documentId,{loading:!0,query:t.payload.query,results:[],total:0,activeResultIndex:-1});case yd:{const{documentId:n,results:o}=t.payload,i=e.documents[n];if(!i)return e;const r=[...i.results,...o],a=i.activeResultIndex===-1&&r.length>0?0:i.activeResultIndex;return Rt(e,n,{results:r,total:r.length,activeResultIndex:a,loading:!0})}case vd:{const{documentId:n,results:o,total:i,activeResultIndex:r}=t.payload;return Rt(e,n,{results:o,total:i,activeResultIndex:r,loading:!1})}case bd:return Rt(e,t.payload.documentId,{activeResultIndex:t.payload.index});default:return e}},initialState:Sa},Cd=()=>Le(xd.id);function vp({documentId:e,pageIndex:t,scale:n,style:o,highlightColor:i="#FFFF00",activeHighlightColor:r="#FFBF00",...a}){const{provides:s}=Cd(),[c,d]=z(null),u=Xe(e),m=X(()=>s?.forDocument(e),[s,e]),h=X(()=>n!==void 0?n:u?.scale??1,[n,u?.scale]);return T(()=>{if(!m)return void d(null);const g=m.getState();return d({results:g.results,activeResultIndex:g.activeResultIndex,showAllResults:g.showAllResults,active:g.active}),m.onSearchResultStateChange(p=>{d(p)})},[m]),!c||!c.active?null:D("div",{style:{...o,pointerEvents:"none"},...a,children:c.results.map((g,p)=>({result:g,originalIndex:p})).filter(({result:g})=>g.pageIndex===t).filter(({originalIndex:g})=>c.showAllResults||g===c.activeResultIndex).map(({result:g,originalIndex:p})=>g.rects.map((f,v)=>D("div",{style:{position:"absolute",top:f.origin.y*h,left:f.origin.x*h,width:f.size.width*h,height:f.size.height*h,backgroundColor:p===c.activeResultIndex?r:i,mixBlendMode:"multiply",transform:"scale(1.02)",transformOrigin:"center",transition:"opacity .3s ease-in-out",opacity:1}},`${p}-${v}`)))})}const Yt="selection",yp={id:Yt,name:"Selection Plugin",version:"1.0.0",provides:["selection"],requires:["interaction-manager"],optional:["viewport","scroll"],defaultConfig:{menuHeight:40}},Id="SELECTION/INIT_STATE",kd="SELECTION/CLEANUP_STATE",Sd="SELECTION/CACHE_PAGE_GEOMETRY",Pd="SELECTION/SET_SELECTION",Dd="SELECTION/START_SELECTION",Md="SELECTION/END_SELECTION",Ad="SELECTION/CLEAR_SELECTION",zd="SELECTION/SET_RECTS",Td="SELECTION/SET_SLICES",Ed={geometry:{},rects:{},slices:{},selection:null,active:!1,selecting:!1},Da={documents:{}},Dt=(e,t,n)=>({...e,documents:{...e.documents,[t]:n}});function Nn(e,t){return e.rects[t]??[]}function pn(e,t){return yl(Nn(e,t))}function ri(e){const t=[],n=e.rects;for(const o in n){const i=Number(o),r=yl(n[i]);r&&t.push({page:i,rect:r})}return t}function Ma(e,t){const n=e.rects[t]||[];if(n.length===0)return null;const o=pn(e,t);return o?{pageIndex:t,rect:o,segmentRects:n}:null}function Aa(e){const t=[],n=Object.keys(e.rects).map(Number);for(const o of n){const i=e.rects[o]||[];if(i.length===0)continue;const r=pn(e,o);r&&t.push({pageIndex:o,rect:r,segmentRects:i})}return t}function za(e,t){for(const n of e.runs){if(!(t.y>=n.rect.y&&t.y<=n.rect.y+n.rect.height&&t.x>=n.rect.x&&t.x<=n.rect.x+n.rect.width))continue;const o=n.glyphs.findIndex(i=>t.x>=i.x&&t.x<=i.x+i.width&&t.y>=i.y&&t.y<=i.y+i.height);if(o!==-1)return n.charStart+o}return-1}function bp(e,t,n){if(!e||!t||n<e.start.page||n>e.end.page)return null;const o=n===e.start.page?e.start.index:0,i=t.runs[t.runs.length-1],r=i.charStart+i.glyphs.length-1;return{from:o,to:n===e.end.page?e.end.index:r}}function wp(e,t,n,o=!0){const i=[];for(const r of e.runs){const a=r.charStart,s=a+r.glyphs.length-1;if(s<t||a>n)continue;const c=Math.max(t,a)-a,d=Math.min(n,s)-a;let u=1/0,m=-1/0,h=1/0,g=-1/0,p=0;for(let f=c;f<=d;f++){const v=r.glyphs[f];v.flags!==2&&(u=Math.min(u,v.x),m=Math.max(m,v.x+v.width),h=Math.min(h,v.y),g=Math.max(g,v.y+v.height),p++)}u!==1/0&&p>0&&i.push({rect:{origin:{x:u,y:h},size:{width:m-u,height:g-h}},charCount:p})}return o?(function(r){const a=[];let s=null,c=null;for(const d of r)s&&c?Cp(s,d)?c=_d(c,d.rect):(a.push(c),c=d.rect):c=d.rect,s=d;return c&&!zi(c)&&a.push(c),a})(i):i.map(r=>r.rect)}function _d(e,t){const n=Math.min(e.origin.x,t.origin.x),o=Math.min(e.origin.y,t.origin.y);return{origin:{x:n,y:o},size:{width:Math.max(e.origin.x+e.size.width,t.origin.x+t.size.width)-n,height:Math.max(e.origin.y+e.size.height,t.origin.y+t.size.height)-o}}}function zi(e){return e.size.width<=0||e.size.height<=0}function xp(e,t){if(zi(e)||zi(t))return 0;const n=_d(e,t);return n.size.height===e.size.height||n.size.height===t.size.height?1:(function(i,r){const a=Math.max(i.origin.x,r.origin.x),s=Math.max(i.origin.y,r.origin.y),c=Math.min(i.origin.x+i.size.width,r.origin.x+r.size.width),d=Math.min(i.origin.y+i.size.height,r.origin.y+r.size.height);return{origin:{x:a,y:s},size:{width:Math.max(0,c-a),height:Math.max(0,d-s)}}})(e,t).size.height/n.size.height}function Cp(e,t){const n=e.rect,o=t.rect;if(xp(n,o)<.8)return!1;const i=1*n.size.width/e.charCount,r=1*o.size.width/t.charCount,a=n.origin.x-i,s=n.origin.x+n.size.width+i,c=o.origin.x-r;return a<o.origin.x+o.size.width+r&&s>c}const Rd=class extends Me{constructor(e,t,n){var o,i,r;super(e,t),this.enabledModesPerDoc=new Map,this.selecting=new Map,this.anchor=new Map,this.pageCallbacks=new Map,this.menuPlacement$=tt((s,c)=>({documentId:s,placement:c})),this.selChange$=tt((s,c)=>({documentId:s,selection:c})),this.textRetrieved$=tt((s,c)=>({documentId:s,text:c})),this.copyToClipboard$=tt((s,c)=>({documentId:s,text:c}),{cache:!1}),this.beginSelection$=tt((s,c)=>({documentId:s,page:c.page,index:c.index}),{cache:!1}),this.endSelection$=tt(s=>({documentId:s}),{cache:!1}),this.viewportCapability=null,this.scrollCapability=null,this.menuHeight=n.menuHeight??40;const a=t.getPlugin("interaction-manager");if(!a)throw new Error("SelectionPlugin: InteractionManagerPlugin is required.");this.interactionManagerCapability=a.provides(),this.viewportCapability=((o=t.getPlugin("viewport"))==null?void 0:o.provides())??null,this.scrollCapability=((i=t.getPlugin("scroll"))==null?void 0:i.provides())??null,this.coreStore.onAction(kn,s=>{const{documentId:c,pageIndexes:d}=s.payload,u=d.map(m=>this.getNewPageGeometryAndCache(c,m));Ce.all(u).wait(()=>{d.forEach(m=>{this.notifyPage(c,m)})},Oe)}),(r=this.viewportCapability)==null||r.onViewportChange(s=>{this.recalculateMenuPlacement(s.documentId)},{mode:"throttle",wait:100})}onDocumentLoadingStarted(e){this.dispatch(((t,n)=>({type:Id,payload:{documentId:t,state:n}}))(e,Ed)),this.enabledModesPerDoc.set(e,new Set(["pointerMode"])),this.pageCallbacks.set(e,new Map),this.selecting.set(e,!1),this.anchor.set(e,void 0)}onDocumentClosed(e){this.dispatch((t=>({type:kd,payload:t}))(e)),this.enabledModesPerDoc.delete(e),this.pageCallbacks.delete(e),this.selecting.delete(e),this.anchor.delete(e),this.selChange$.clearScope(e),this.textRetrieved$.clearScope(e),this.copyToClipboard$.clearScope(e),this.beginSelection$.clearScope(e),this.endSelection$.clearScope(e),this.menuPlacement$.clearScope(e)}async initialize(){}async destroy(){this.selChange$.clear(),this.textRetrieved$.clear(),this.copyToClipboard$.clear(),this.beginSelection$.clear(),this.endSelection$.clear(),this.menuPlacement$.clear(),super.destroy()}buildCapability(){const e=t=>t??this.getActiveDocumentId();return{getFormattedSelection:t=>Aa(this.getDocumentState(e(t))),getFormattedSelectionForPage:(t,n)=>Ma(this.getDocumentState(e(n)),t),getHighlightRectsForPage:(t,n)=>Nn(this.getDocumentState(e(n)),t),getHighlightRects:t=>this.getDocumentState(e(t)).rects,getBoundingRectForPage:(t,n)=>pn(this.getDocumentState(e(n)),t),getBoundingRects:t=>ri(this.getDocumentState(e(t))),getSelectedText:t=>this.getSelectedText(e(t)),clear:t=>this.clearSelection(e(t)),copyToClipboard:t=>this.copyToClipboard(e(t)),getState:t=>this.getDocumentState(e(t)),enableForMode:(t,n)=>{var o;return(o=this.enabledModesPerDoc.get(e(n)))==null?void 0:o.add(t)},isEnabledForMode:(t,n)=>{var o;return((o=this.enabledModesPerDoc.get(e(n)))==null?void 0:o.has(t))??!1},forDocument:this.createSelectionScope.bind(this),onCopyToClipboard:this.copyToClipboard$.onGlobal,onSelectionChange:this.selChange$.onGlobal,onTextRetrieved:this.textRetrieved$.onGlobal,onBeginSelection:this.beginSelection$.onGlobal,onEndSelection:this.endSelection$.onGlobal}}createSelectionScope(e){return{getFormattedSelection:()=>Aa(this.getDocumentState(e)),getFormattedSelectionForPage:t=>Ma(this.getDocumentState(e),t),getHighlightRectsForPage:t=>Nn(this.getDocumentState(e),t),getHighlightRects:()=>this.getDocumentState(e).rects,getBoundingRectForPage:t=>pn(this.getDocumentState(e),t),getBoundingRects:()=>ri(this.getDocumentState(e)),getSelectedText:()=>this.getSelectedText(e),clear:()=>this.clearSelection(e),copyToClipboard:()=>this.copyToClipboard(e),getState:()=>this.getDocumentState(e),onSelectionChange:this.selChange$.forScope(e),onTextRetrieved:this.textRetrieved$.forScope(e),onCopyToClipboard:this.copyToClipboard$.forScope(e),onBeginSelection:this.beginSelection$.forScope(e),onEndSelection:this.endSelection$.forScope(e)}}getDocumentState(e){const t=this.state.documents[e];if(!t)throw new Error(`Selection state not found for document: ${e}`);return t}onMenuPlacement(e,t){return this.menuPlacement$.forScope(e)(t)}registerSelectionOnPage(e){var t;const{documentId:n,pageIndex:o,onRectsChange:i}=e,r=this.state.documents[n];if(!r)return this.logger.warn("SelectionPlugin","RegisterFailed",`Cannot register selection on page ${o} for document ${n}: document state not initialized.`),()=>{};(t=this.pageCallbacks.get(n))==null||t.set(o,i);const a=this.getOrLoadGeometry(n,o),s=this.interactionManagerCapability.forDocument(n),c=this.enabledModesPerDoc.get(n);i({rects:Nn(r,o),boundingRect:pn(r,o)});const d={onPointerDown:(m,h,g)=>{if(!c?.has(g))return;this.clearSelection(n);const p=this.getDocumentState(n).geometry[o];if(p){const f=za(p,m);f!==-1&&this.beginSelection(n,o,f)}},onPointerMove:(m,h,g)=>{if(!c?.has(g))return;const p=this.getDocumentState(n).geometry[o];if(p){const f=za(p,m);f!==-1?s.setCursor("selection-text","text",10):s.removeCursor("selection-text"),this.selecting.get(n)&&f!==-1&&this.updateSelection(n,o,f)}},onPointerUp:(m,h,g)=>{c?.has(g)&&this.endSelection(n)},onHandlerActiveEnd:m=>{c?.has(m)&&this.clearSelection(n)}},u=this.interactionManagerCapability.registerAlways({scope:{type:"page",documentId:n,pageIndex:o},handlers:d});return()=>{var m;u(),(m=this.pageCallbacks.get(n))==null||m.delete(o),a.abort({code:ee.Cancelled,message:"Cleanup"})}}getPlacementMetrics(e,t,n,o){var i;const r=(i=this.scrollCapability)==null?void 0:i.forDocument(e),a=r?.getRectPositionForPage(t,n);if(!a)return null;const s=a.origin.y-o.scrollTop,c=a.origin.y+a.size.height-o.scrollTop;return{pageIndex:t,rect:n,spaceAbove:s,spaceBelow:o.clientHeight-c,isBottomVisible:c>0&&c<=o.clientHeight,isTopVisible:s>=0&&s<o.clientHeight}}recalculateMenuPlacement(e){const t=this.state.documents[e];if(!t)return;if(t.selecting||t.selection===null)return void this.menuPlacement$.emit(e,null);const n=ri(t);if(n.length===0)return void this.menuPlacement$.emit(e,null);const o=n[n.length-1];if(!this.viewportCapability||!this.scrollCapability)return void this.menuPlacement$.emit(e,{pageIndex:o.page,rect:o.rect,spaceAbove:0,spaceBelow:1/0,suggestTop:!1,isVisible:!0});const i=this.viewportCapability.forDocument(e).getMetrics(),r=n[0],a=this.getPlacementMetrics(e,o.page,o.rect,i),s=this.getPlacementMetrics(e,r.page,r.rect,i);a&&a.isBottomVisible&&a.spaceBelow>this.menuHeight?this.menuPlacement$.emit(e,{...a,suggestTop:!1,isVisible:!0}):s&&s.isTopVisible?this.menuPlacement$.emit(e,{...s,suggestTop:!0,isVisible:!0}):a&&a.isBottomVisible?this.menuPlacement$.emit(e,{...a,suggestTop:!1,isVisible:!0}):this.menuPlacement$.emit(e,null)}notifyPage(e,t){var n;const o=(n=this.pageCallbacks.get(e))==null?void 0:n.get(t);if(o){const i=this.getDocumentState(e);o(this.interactionManagerCapability.forDocument(e).getActiveMode()==="pointerMode"?{rects:Nn(i,t),boundingRect:pn(i,t)}:{rects:[],boundingRect:null})}}notifyAllPages(e){var t;(t=this.pageCallbacks.get(e))==null||t.forEach((n,o)=>{this.notifyPage(e,o)})}getNewPageGeometryAndCache(e,t){const n=this.getCoreDocument(e);if(!n||!n.document)return ge.reject({code:ee.NotFound,message:"Doc Not Found"});const o=n.document.pages.find(r=>r.index===t),i=this.engine.getPageGeometry(n.document,o);return i.wait(r=>{this.dispatch(((a,s,c)=>({type:Sd,payload:{documentId:a,page:s,geo:c}}))(e,t,r))},Oe),i}getOrLoadGeometry(e,t){const n=this.getDocumentState(e).geometry[t];return n?ge.resolve(n):this.getNewPageGeometryAndCache(e,t)}beginSelection(e,t,n){this.selecting.set(e,!0),this.anchor.set(e,{page:t,index:n}),this.dispatch((o=>({type:Dd,payload:{documentId:o}}))(e)),this.beginSelection$.emit(e,{page:t,index:n}),this.recalculateMenuPlacement(e)}endSelection(e){this.selecting.set(e,!1),this.anchor.set(e,void 0),this.dispatch((t=>({type:Md,payload:{documentId:t}}))(e)),this.endSelection$.emit(e),this.recalculateMenuPlacement(e)}clearSelection(e){this.selecting.set(e,!1),this.anchor.set(e,void 0),this.dispatch((t=>({type:Ad,payload:{documentId:t}}))(e)),this.selChange$.emit(e,null),this.menuPlacement$.emit(e,null),this.notifyAllPages(e)}updateSelection(e,t,n){if(!this.selecting.get(e)||!this.anchor.get(e))return;const o=this.anchor.get(e),i=t>o.page||t===o.page&&n>=o.index,r={start:i?o:{page:t,index:n},end:i?{page:t,index:n}:o};this.dispatch(((a,s)=>({type:Pd,payload:{documentId:a,selection:s}}))(e,r)),this.updateRectsAndSlices(e,r),this.selChange$.emit(e,r);for(let a=r.start.page;a<=r.end.page;a++)this.notifyPage(e,a)}updateRectsAndSlices(e,t){const n=this.getDocumentState(e),o={},i={};for(let r=t.start.page;r<=t.end.page;r++){const a=n.geometry[r],s=bp(t,a,r);s&&(o[r]=wp(a,s.from,s.to),i[r]={start:s.from,count:s.to-s.from+1})}this.dispatch(((r,a)=>({type:zd,payload:{documentId:r,rects:a}}))(e,o)),this.dispatch(((r,a)=>({type:Td,payload:{documentId:r,slices:a}}))(e,i))}getSelectedText(e){if(!this.checkPermission(e,N.CopyContents))return this.logger.debug("SelectionPlugin","GetSelectedText",`Cannot get selected text: document ${e} lacks CopyContents permission`),ge.reject({code:ee.Security,message:"Document lacks CopyContents permission"});const t=this.getCoreDocument(e),n=this.getDocumentState(e);if(!t?.document||!n.selection)return ge.reject({code:ee.NotFound,message:"Doc Not Found or No Selection"});const o=n.selection,i=[];for(let a=o.start.page;a<=o.end.page;a++){const s=n.slices[a];s&&i.push({pageIndex:a,charIndex:s.start,charCount:s.count})}if(i.length===0)return ge.resolve([]);const r=this.engine.getTextSlices(t.document,i);return r.wait(a=>{this.textRetrieved$.emit(e,a)},Oe),r}copyToClipboard(e){if(!this.checkPermission(e,N.CopyContents))return void this.logger.debug("SelectionPlugin","CopyToClipboard",`Cannot copy to clipboard: document ${e} lacks CopyContents permission`);this.getSelectedText(e).wait(t=>{this.copyToClipboard$.emit(e,t.join(`
`))},Oe)}};Rd.id="selection";let ur=Rd;const Ip={manifest:yp,create:(e,t)=>new ur(Yt,e,t),reducer:(e=Da,t)=>{switch(t.type){case Id:{const{documentId:n,state:o}=t.payload;return Dt(e,n,o)}case kd:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i}}case Sd:{const{documentId:n,page:o,geo:i}=t.payload,r=e.documents[n];return r?Dt(e,n,{...r,geometry:{...r.geometry,[o]:i}}):e}case Pd:{const{documentId:n,selection:o}=t.payload,i=e.documents[n];return i?Dt(e,n,{...i,selection:o,active:!0}):e}case Dd:{const{documentId:n}=t.payload,o=e.documents[n];return o?Dt(e,n,{...o,selecting:!0,selection:null,rects:{}}):e}case Md:{const{documentId:n}=t.payload,o=e.documents[n];return o?Dt(e,n,{...o,selecting:!1}):e}case Ad:{const{documentId:n}=t.payload,o=e.documents[n];return o?Dt(e,n,{...o,selecting:!1,selection:null,rects:{},active:!1}):e}case zd:{const{documentId:n,rects:o}=t.payload,i=e.documents[n];return i?Dt(e,n,{...i,rects:o}):e}case Td:{const{documentId:n,slices:o}=t.payload,i=e.documents[n];return i?Dt(e,n,{...i,slices:o}):e}case"SELECTION/RESET":{const{documentId:n}=t.payload;return e.documents[n]?Dt(e,n,Ed):e}default:return e}},initialState:Da},kp="onDblClick";function Ao({children:e,...t}){const{rect:n,rotation:o}=t,{matrix:i,width:r,height:a}=(function(c,d){const{width:u,height:m}=c.size;switch(d%4){case 1:return{matrix:`matrix(0, -1, 1, 0, 0, ${m})`,width:m,height:u};case 2:return{matrix:`matrix(-1, 0, 0, -1, ${u}, ${m})`,width:u,height:m};case 3:return{matrix:`matrix(0, 1, -1, 0, ${u}, 0)`,width:m,height:u};default:return{matrix:"matrix(1, 0, 0, 1, 0, 0)",width:u,height:m}}})(n,o),s=K(null);return T(()=>{const c=s.current;if(!c)return;const d=m=>{m.stopPropagation()},u=m=>{m.stopPropagation()};return c.addEventListener("pointerdown",d,{capture:!0}),c.addEventListener("touchstart",u,{capture:!0}),()=>{c.removeEventListener("pointerdown",d,{capture:!0}),c.removeEventListener("touchstart",u,{capture:!0})}},[]),D(Y,{children:e({menuWrapperProps:{style:{position:"absolute",left:n.origin.x,top:n.origin.y,transform:i,transformOrigin:"0 0",width:r,height:a,pointerEvents:"none",zIndex:3},ref:c=>{s.current=c}},matrix:i,rect:{origin:{x:n.origin.x,y:n.origin.y},size:{width:r,height:a}}})})}class Sp{constructor(t,n){this.config=t,this.onUpdate=n,this.state="idle",this.startPoint=null,this.startElement=null,this.activeHandle=null,this.currentPosition=null,this.activeVertexIndex=null,this.startVertices=[],this.currentVertices=[],this.currentVertices=t.vertices||[]}updateConfig(t){this.config={...this.config,...t},this.currentVertices=t.vertices||[]}startDrag(t,n){this.state="dragging",this.startPoint={x:t,y:n},this.startElement={...this.config.element},this.currentPosition={...this.config.element},this.onUpdate({state:"start",transformData:{type:"move",changes:{rect:this.startElement}}})}startResize(t,n,o){this.state="resizing",this.activeHandle=t,this.startPoint={x:n,y:o},this.startElement={...this.config.element},this.currentPosition={...this.config.element},this.onUpdate({state:"start",transformData:{type:"resize",changes:{rect:this.startElement},metadata:{handle:this.activeHandle,maintainAspectRatio:this.config.maintainAspectRatio}}})}startVertexEdit(t,n,o){this.currentVertices=[...this.config.vertices??this.currentVertices],t<0||t>=this.currentVertices.length||(this.state="vertex-editing",this.activeVertexIndex=t,this.startPoint={x:n,y:o},this.startVertices=[...this.currentVertices],this.onUpdate({state:"start",transformData:{type:"vertex-edit",changes:{vertices:this.startVertices},metadata:{vertexIndex:t}}}))}move(t,n){if(this.state!=="idle"&&this.startPoint){if(this.state==="dragging"&&this.startElement){const o=this.calculateDelta(t,n),i=this.calculateDragPosition(o);this.currentPosition=i,this.onUpdate({state:"move",transformData:{type:"move",changes:{rect:i}}})}else if(this.state==="resizing"&&this.activeHandle&&this.startElement){const o=this.calculateDelta(t,n),i=this.calculateResizePosition(o,this.activeHandle);this.currentPosition=i,this.onUpdate({state:"move",transformData:{type:"resize",changes:{rect:i},metadata:{handle:this.activeHandle,maintainAspectRatio:this.config.maintainAspectRatio}}})}else if(this.state==="vertex-editing"&&this.activeVertexIndex!==null){const o=this.calculateVertexPosition(t,n);this.currentVertices=o,this.onUpdate({state:"move",transformData:{type:"vertex-edit",changes:{vertices:o},metadata:{vertexIndex:this.activeVertexIndex}}})}}}end(){if(this.state==="idle")return;const t=this.state,n=this.activeHandle,o=this.activeVertexIndex;if(t==="vertex-editing")this.onUpdate({state:"end",transformData:{type:"vertex-edit",changes:{vertices:this.currentVertices},metadata:{vertexIndex:o||void 0}}});else{const i=this.getCurrentPosition();this.onUpdate({state:"end",transformData:{type:t==="dragging"?"move":"resize",changes:{rect:i},metadata:t==="dragging"?void 0:{handle:n||void 0,maintainAspectRatio:this.config.maintainAspectRatio}}})}this.reset()}cancel(){this.state!=="idle"&&(this.state==="vertex-editing"?this.onUpdate({state:"end",transformData:{type:"vertex-edit",changes:{vertices:this.startVertices},metadata:{vertexIndex:this.activeVertexIndex||void 0}}}):this.startElement&&this.onUpdate({state:"end",transformData:{type:this.state==="dragging"?"move":"resize",changes:{rect:this.startElement},metadata:this.state==="dragging"?void 0:{handle:this.activeHandle||void 0,maintainAspectRatio:this.config.maintainAspectRatio}}}),this.reset())}reset(){this.state="idle",this.startPoint=null,this.startElement=null,this.activeHandle=null,this.currentPosition=null,this.activeVertexIndex=null,this.startVertices=[]}getCurrentPosition(){return this.currentPosition||this.config.element}calculateDelta(t,n){if(!this.startPoint)return{x:0,y:0};const o={x:t-this.startPoint.x,y:n-this.startPoint.y};return this.transformDelta(o)}transformDelta(t){const{pageRotation:n=0,scale:o=1}=this.config,i=n*Math.PI/2,r=Math.cos(i),a=Math.sin(i),s=t.x/o,c=t.y/o;return{x:r*s+a*c,y:-a*s+r*c}}clampPoint(t){var n;const o=(n=this.config.constraints)==null?void 0:n.boundingBox;return o?{x:Math.max(0,Math.min(t.x,o.width)),y:Math.max(0,Math.min(t.y,o.height))}:t}calculateVertexPosition(t,n){if(this.activeVertexIndex===null)return this.startVertices;const o=this.calculateDelta(t,n),i=[...this.startVertices],r=i[this.activeVertexIndex],a={x:r.x+o.x,y:r.y+o.y};return i[this.activeVertexIndex]=this.clampPoint(a),i}calculateDragPosition(t){if(!this.startElement)return this.config.element;const n={origin:{x:this.startElement.origin.x+t.x,y:this.startElement.origin.y+t.y},size:{width:this.startElement.size.width,height:this.startElement.size.height}};return this.applyConstraints(n)}calculateResizePosition(t,n){if(!this.startElement)return this.config.element;const o=(function(a){return{x:a.includes("e")?"left":a.includes("w")?"right":"center",y:a.includes("s")?"top":a.includes("n")?"bottom":"center"}})(n),i=this.startElement.size.width/this.startElement.size.height||1;let r=this.applyResizeDelta(t,o);return this.config.maintainAspectRatio&&(r=this.enforceAspectRatio(r,o,i)),r=this.clampToBounds(r,o,i),this.applyConstraints(r)}applyResizeDelta(t,n){const o=this.startElement;let i=o.origin.x,r=o.origin.y,a=o.size.width,s=o.size.height;return n.x==="left"?a+=t.x:n.x==="right"&&(i+=t.x,a-=t.x),n.y==="top"?s+=t.y:n.y==="bottom"&&(r+=t.y,s-=t.y),{origin:{x:i,y:r},size:{width:a,height:s}}}enforceAspectRatio(t,n,o){const i=this.startElement;let{x:r,y:a}=t.origin,{width:s,height:c}=t.size;return n.x==="center"||n.y==="center"?n.y==="center"?(c=s/o,a=i.origin.y+(i.size.height-c)/2):(s=c*o,r=i.origin.x+(i.size.width-s)/2):Math.abs(s-i.size.width)>=Math.abs(c-i.size.height)?c=s/o:s=c*o,n.x==="right"&&(r=i.origin.x+i.size.width-s),n.y==="bottom"&&(a=i.origin.y+i.size.height-c),{origin:{x:r,y:a},size:{width:s,height:c}}}clampToBounds(t,n,o){var i;const r=(i=this.config.constraints)==null?void 0:i.boundingBox;if(!r)return t;const a=this.startElement;let{x:s,y:c}=t.origin,{width:d,height:u}=t.size;d=Math.max(1,d),u=Math.max(1,u);const m=n.x==="left"?a.origin.x:a.origin.x+a.size.width,h=n.y==="top"?a.origin.y:a.origin.y+a.size.height,g=n.x==="left"?r.width-m:n.x==="right"?m:2*Math.min(a.origin.x,r.width-a.origin.x-a.size.width)+a.size.width,p=n.y==="top"?r.height-h:n.y==="bottom"?h:2*Math.min(a.origin.y,r.height-a.origin.y-a.size.height)+a.size.height;if(this.config.maintainAspectRatio){const f=d>g?g/d:1,v=u>p?p/u:1,y=Math.min(f,v);y<1&&(d*=y,u*=y)}else d=Math.min(d,g),u=Math.min(u,p);return s=n.x==="left"?m:n.x==="right"?m-d:a.origin.x+(a.size.width-d)/2,c=n.y==="top"?h:n.y==="bottom"?h-u:a.origin.y+(a.size.height-u)/2,s=Math.max(0,Math.min(s,r.width-d)),c=Math.max(0,Math.min(c,r.height-u)),{origin:{x:s,y:c},size:{width:d,height:u}}}applyConstraints(t){const{constraints:n}=this.config;if(!n)return t;let{origin:{x:o,y:i},size:{width:r,height:a}}=t;const s=n.minWidth??1,c=n.minHeight??1,d=n.maxWidth,u=n.maxHeight;if(this.config.maintainAspectRatio&&r>0&&a>0){const m=r/a;r<s&&(r=s,a=r/m),a<c&&(a=c,r=a*m),d!==void 0&&r>d&&(r=d,a=r/m),u!==void 0&&a>u&&(a=u,r=a*m)}else r=Math.max(s,r),a=Math.max(c,a),d!==void 0&&(r=Math.min(d,r)),u!==void 0&&(a=Math.min(u,a));return n.boundingBox&&(o=Math.max(0,Math.min(o,n.boundingBox.width-r)),i=Math.max(0,Math.min(i,n.boundingBox.height-a))),{origin:{x:o,y:i},size:{width:r,height:a}}}}function Pp(e,t){return e==="n"||e==="s"?"ns-resize":e==="e"||e==="w"?"ew-resize":t%2==0?{nw:"nwse-resize",ne:"nesw-resize",sw:"nesw-resize",se:"nwse-resize"}[e]:{nw:"nesw-resize",ne:"nwse-resize",sw:"nwse-resize",se:"nesw-resize"}[e]}function Dp(e,t,n){const o=-e/2;return n==="center"?o:n==="outside"?o-t:o+t}function Mp(e){const{controller:t,resizeUI:n,vertexUI:o,includeVertices:i=!1,handleAttrs:r,vertexAttrs:a}=e,{dragProps:s,createResizeProps:c,createVertexProps:d}=(function(h){const{onUpdate:g,enabled:p=!0,...f}=h,v=K(null),y=K(g);T(()=>{y.current=g},[g]),T(()=>{v.current?v.current.updateConfig(f):v.current=new Sp(f,k=>{var S;return(S=y.current)==null?void 0:S.call(y,k)})},[f.element,f.constraints,f.maintainAspectRatio,f.pageRotation,f.scale,f.vertices]);const b=te(k=>{var S;p&&(k.preventDefault(),k.stopPropagation(),(S=v.current)==null||S.startDrag(k.clientX,k.clientY),k.currentTarget.setPointerCapture(k.pointerId))},[p]),x=te(k=>{var S;k.preventDefault(),k.stopPropagation(),(S=v.current)==null||S.move(k.clientX,k.clientY)},[]),w=te(k=>{var S,M,P;k.preventDefault(),k.stopPropagation(),(S=v.current)==null||S.end(),(P=(M=k.currentTarget).releasePointerCapture)==null||P.call(M,k.pointerId)},[]),C=te(k=>({onPointerDown:S=>{var M;p&&(S.preventDefault(),S.stopPropagation(),(M=v.current)==null||M.startResize(k,S.clientX,S.clientY),S.currentTarget.setPointerCapture(S.pointerId))},onPointerMove:x,onPointerUp:w,onPointerCancel:w}),[p,x,w]),I=te(k=>({onPointerDown:S=>{var M;p&&(S.preventDefault(),S.stopPropagation(),(M=v.current)==null||M.startVertexEdit(k,S.clientX,S.clientY),S.currentTarget.setPointerCapture(S.pointerId))},onPointerMove:x,onPointerUp:w,onPointerCancel:w}),[p,x,w]);return{dragProps:p?{onPointerDown:b,onPointerMove:x,onPointerUp:w,onPointerCancel:w}:{},createResizeProps:C,createVertexProps:I}})(t),u=X(()=>(function(h,g={}){const{handleSize:p=8,spacing:f=1,offsetMode:v="outside",includeSides:y=!1,zIndex:b=3,rotationAwareCursor:x=!0}=g,w=(h.pageRotation??0)%4,C=I=>({[I]:Dp(p,f,v)+"px"});return[["nw",{...C("top"),...C("left")}],["ne",{...C("top"),...C("right")}],["sw",{...C("bottom"),...C("left")}],["se",{...C("bottom"),...C("right")}],...y?[["n",{...C("top"),left:`calc(50% - ${p/2}px)`}],["s",{...C("bottom"),left:`calc(50% - ${p/2}px)`}],["w",{...C("left"),top:`calc(50% - ${p/2}px)`}],["e",{...C("right"),top:`calc(50% - ${p/2}px)`}]]:[]].map(([I,k])=>({handle:I,style:{position:"absolute",width:p+"px",height:p+"px",borderRadius:"50%",zIndex:b,cursor:x?Pp(I,w):"default",touchAction:"none",...k},attrs:{"data-epdf-handle":I}}))})(t,n).map(h=>{var g;return{key:(g=h.attrs)==null?void 0:g["data-epdf-handle"],style:h.style,...c(h.handle),...h.attrs??{},...r?.(h.handle)??{}}}),[t.element.origin.x,t.element.origin.y,t.element.size.width,t.element.size.height,t.scale,t.pageRotation,t.maintainAspectRatio,n?.handleSize,n?.spacing,n?.offsetMode,n?.includeSides,n?.zIndex,n?.rotationAwareCursor,c,r]),m=X(()=>i?(function(g,p={},f){const{vertexSize:v=12,zIndex:y=4}=p,b=g.element,x=g.scale??1;return(f??g.vertices??[]).map((w,C)=>({handle:"nw",style:{position:"absolute",left:(w.x-b.origin.x)*x-v/2+"px",top:(w.y-b.origin.y)*x-v/2+"px",width:v+"px",height:v+"px",borderRadius:"50%",cursor:"pointer",zIndex:y,touchAction:"none"},attrs:{"data-epdf-vertex":C}}))})(t,o,t.vertices).map((g,p)=>({key:p,style:g.style,...d(p),...g.attrs??{},...a?.(p)??{}})):[],[i,t.element.origin.x,t.element.origin.y,t.element.size.width,t.element.size.height,t.scale,t.vertices,o?.vertexSize,o?.zIndex,d,a]);return{dragProps:s,resize:u,vertices:m}}const mr=()=>Le(ur.id);function Ap({documentId:e,pageIndex:t,scale:n,rotation:o,background:i="rgba(33,150,243)",selectionMenu:r}){const{plugin:a}=st(ur.id),s=Xe(e),[c,d]=z([]),[u,m]=z(null),[h,g]=z(null);T(()=>{if(a&&e)return a.registerSelectionOnPage({documentId:e,pageIndex:t,onRectsChange:({rects:y,boundingRect:b})=>{d(y),m(b)}})},[a,e,t]),T(()=>{if(a&&e)return a.onMenuPlacement(e,y=>{g(y)})},[a,e]);const p=X(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]),f=X(()=>o!==void 0?o:s?.rotation??sn.Degree0,[o,s?.rotation]),v=r&&h&&h.pageIndex===t&&h.isVisible;return u?D(Y,{children:[D("div",{style:{position:"absolute",left:u.origin.x*p,top:u.origin.y*p,width:u.size.width*p,height:u.size.height*p,mixBlendMode:"multiply",isolation:"isolate",pointerEvents:"none"},children:c.map((y,b)=>D("div",{style:{position:"absolute",left:(y.origin.x-u.origin.x)*p,top:(y.origin.y-u.origin.y)*p,width:y.size.width*p,height:y.size.height*p,background:i}},b))}),v&&D(Ao,{rect:{origin:{x:h.rect.origin.x*p,y:h.rect.origin.y*p},size:{width:h.rect.size.width*p,height:h.rect.size.height*p}},rotation:f,children:y=>r({...y,context:{type:"selection",pageIndex:t},selected:!0,placement:h})})]}):null}const zp=ln(Ip).addUtility(function(){const{provides:e}=mr();return T(()=>{if(e)return e.onCopyToClipboard(({text:t})=>{navigator.clipboard.writeText(t)})},[e]),null}).build(),Nd="tiling",Tp={id:Nd,name:"Tiling Plugin",version:"1.0.0",provides:["tiling"],requires:["render","scroll","viewport"],optional:[],defaultConfig:{tileSize:768,overlapPx:2.5,extraRings:0}},Od="TILING/INIT_STATE",Ld="TILING/CLEANUP_STATE",$d="TILING/UPDATE_VISIBLE_TILES",Fd="TILING/MARK_TILE_STATUS",Ta=(e,t)=>({type:$d,payload:{documentId:e,tiles:t}}),Ea=(e,t,n,o)=>({type:Fd,payload:{documentId:e,pageIndex:t,tileId:n,status:o}}),Ep={visibleTiles:{}};function _a({tileSize:e=768,overlapPx:t=2.5,extraRings:n=0,scale:o,rotation:i,page:r,metric:a}){const s=r.size.width*o,c=r.size.height*o,d=e-t,u=(function(I,k,S,M){return vl(Ki(I,k,(4-S)%4),1/M)})(Co(r.size,i,o),{origin:{x:a.scaled.pageX,y:a.scaled.pageY},size:{width:a.scaled.visibleWidth,height:a.scaled.visibleHeight}},i,1),m=u.origin.x,h=u.origin.y,g=m+u.size.width,p=h+u.size.height,f=Math.floor((s-1)/d),v=Math.floor((c-1)/d),y=Math.max(0,Math.floor(m/d)-n),b=Math.min(f,Math.floor((g-1)/d)+n),x=Math.max(0,Math.floor(h/d)-n),w=Math.min(v,Math.floor((p-1)/d)+n),C=[];for(let I=y;I<=b;I++){const k=I*d,S=Math.min(e,s-k),M=k/o,P=S/o;for(let E=x;E<=w;E++){const A=E*d,j=Math.min(e,c-A),L=A/o,H=j/o;C.push({id:`p${r.index}-${o}-x${k}-y${A}-w${S}-h${j}`,col:I,row:E,pageRect:{origin:{x:M,y:L},size:{width:P,height:H}},screenRect:{origin:{x:k,y:A},size:{width:S,height:j}},status:"queued",srcScale:o,isFallback:!1})}}return C}const jd=class extends Me{constructor(e,t,n){super(e,t),this.tileRendering$=re(),this.config=n,this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=this.registry.getPlugin("scroll").provides(),this.viewportCapability=this.registry.getPlugin("viewport").provides(),this.scrollCapability.onScroll(o=>this.calculateVisibleTiles(o.documentId,o.metrics),{mode:"throttle",wait:50,throttleMode:"trailing"}),this.coreStore.onAction(kn,o=>this.recalculateTiles(o.payload))}onDocumentLoadingStarted(e){this.dispatch(((t,n)=>({type:Od,payload:{documentId:t,state:n}}))(e,Ep))}onDocumentClosed(e){this.dispatch((t=>({type:Ld,payload:t}))(e))}onScaleChanged(e){this.recalculateTilesForDocument(e)}onRotationChanged(e){this.recalculateTilesForDocument(e)}recalculateTilesForDocument(e){const t=this.scrollCapability.forDocument(e),n=this.viewportCapability.forDocument(e),o=t.getMetrics(n.getMetrics());this.calculateVisibleTiles(e,o)}async recalculateTiles(e){const{documentId:t,pageIndexes:n}=e,o=this.getCoreDocument(t);if(!o||!o.document)return;const i=this.scrollCapability.forDocument(t),r=this.viewportCapability.forDocument(t),a=i.getMetrics(r.getMetrics()),s={},c=Date.now(),d=o.scale,u=o.rotation;for(const m of n){const h=a.pageVisibilityMetrics.find(p=>p.pageNumber===m+1);if(!h)continue;const g=o.document.pages[m];g&&(s[m]=_a({page:g,metric:h,scale:d,rotation:u,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings}).map(p=>({...p,id:`${p.id}-r${c}`})))}Object.keys(s).length>0&&this.dispatch(Ta(t,s))}async initialize(){}calculateVisibleTiles(e,t){const n=this.getCoreDocument(e);if(!n||!n.document)return;const o=n.scale,i=n.rotation,r={};for(const a of t.pageVisibilityMetrics){const s=a.pageNumber-1,c=n.document.pages[s];if(!c)continue;const d=_a({page:c,metric:a,scale:o,rotation:i,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings});r[s]=d}this.dispatch(Ta(e,r))}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&this.tileRendering$.emit({documentId:n,tiles:i.visibleTiles})}}buildCapability(){return{renderTile:this.renderTile.bind(this),forDocument:this.createTilingScope.bind(this),onTileRendering:this.tileRendering$.on}}createTilingScope(e){return{renderTile:t=>this.renderTile(t,e),onTileRendering:t=>this.tileRendering$.on(n=>{n.documentId===e&&t(n.tiles)})}}renderTile(e,t){const n=t??this.getActiveDocumentId();if(!this.renderCapability)throw new Error("Render capability not available.");this.dispatch(Ea(n,e.pageIndex,e.tile.id,"rendering"));const o=this.renderCapability.forDocument(n).renderPageRect({pageIndex:e.pageIndex,rect:e.tile.pageRect,options:{scaleFactor:e.tile.srcScale,dpr:e.dpr}});return o.wait(()=>{this.dispatch(Ea(n,e.pageIndex,e.tile.id,"ready"))},Oe),o}};jd.id="tiling";let Hd=jd;const _p={manifest:Tp,create:(e,t)=>new Hd(Nd,e,t),reducer:(e,t)=>((n,o)=>{var i,r;switch(o.type){case Od:{const{documentId:a,state:s}=o.payload;return{...n,documents:{...n.documents,[a]:s}}}case Ld:{const a=o.payload,{[a]:s,...c}=n.documents;return{...n,documents:c}}case $d:{const{documentId:a,tiles:s}=o.payload,c=n.documents[a];if(!c)return n;const d={...c.visibleTiles};for(const u in s){const m=Number(u),h=s[m],g=d[m]??[],p=(i=g.find(v=>!v.isFallback))==null?void 0:i.srcScale,f=h.length>0?h[0].srcScale:p;if(p!==void 0&&p!==f){const v=g.filter(b=>!b.isFallback&&b.status==="ready").map(b=>({...b,isFallback:!0})),y=v.length>0?[]:g.filter(b=>b.isFallback);d[m]=[...y,...v,...h]}else{const v=new Set(h.map(x=>x.id)),y=[],b=new Set;for(const x of g)(x.isFallback||v.has(x.id))&&(y.push(x),b.add(x.id));for(const x of h)b.has(x.id)||y.push(x);d[m]=y}}return{...n,documents:{...n.documents,[a]:{...c,visibleTiles:d}}}}case Fd:{const{documentId:a,pageIndex:s,tileId:c,status:d}=o.payload,u=n.documents[a];if(!u)return n;const m=((r=u.visibleTiles[s])==null?void 0:r.map(f=>f.id===c?{...f,status:d}:f))??[],h=m.filter(f=>!f.isFallback),g=h.length>0&&h.every(f=>f.status==="ready"),p=g?h:m;return{...n,documents:{...n.documents,[a]:{...u,visibleTiles:{...u.visibleTiles,[s]:p}}}}}default:return n}})(e,t),initialState:{documents:{}}},Ud=()=>Le(Hd.id);function Rp({documentId:e,pageIndex:t,tile:n,dpr:o,scale:i}){const{provides:r}=Ud(),a=X(()=>r?.forDocument(e),[r,e]),[s,c]=z(),d=K(null),u=i/n.srcScale;return T(()=>{if(n.status==="ready"&&d.current||!a)return;const m=a.renderTile({pageIndex:t,tile:n,dpr:o});return m.wait(h=>{const g=URL.createObjectURL(h);d.current=g,c(g)},Oe),()=>{d.current?(URL.revokeObjectURL(d.current),d.current=null):m.abort({code:ee.Cancelled,message:"canceled render task"})}},[a,t,n.id]),s?D("img",{src:s,onLoad:()=>{d.current&&(URL.revokeObjectURL(d.current),d.current=null)},style:{position:"absolute",left:n.screenRect.origin.x*u,top:n.screenRect.origin.y*u,width:n.screenRect.size.width*u,height:n.screenRect.size.height*u,display:"block"}}):null}function Np({documentId:e,pageIndex:t,scale:n,style:o,...i}){const{provides:r}=Ud(),a=Xe(e),[s,c]=z([]);T(()=>{if(r)return r.onTileRendering(u=>{u.documentId===e&&c(u.tiles[t]??[])})},[r,e,t]);const d=X(()=>n!==void 0?n:a?.scale??1,[n,a?.scale]);return D("div",{style:{...o},...i,children:s?.map(u=>D(Rp,{documentId:e,pageIndex:t,tile:u,dpr:window.devicePixelRatio,scale:d},u.id))})}const Wd="thumbnail",Op={id:Wd,name:"Thumbnail Plugin",version:"1.0.0",provides:["thumbnail"],requires:["render"],optional:["scroll"],defaultConfig:{width:150,gap:10,buffer:3,labelHeight:16,autoScroll:!0,scrollBehavior:"smooth",imagePadding:0,paddingY:0}},Bd="THUMBNAIL/INIT_STATE",qd="THUMBNAIL/CLEANUP_STATE",Gd="THUMBNAIL/SET_WINDOW_STATE",Vd="THUMBNAIL/UPDATE_VIEWPORT_METRICS";function Ra(e,t){return{type:Bd,payload:{documentId:e,state:t}}}const Lp={thumbs:[],window:null,viewportH:0,scrollY:0},Na={documents:{},activeDocumentId:null},Kd=class extends Me{constructor(e,t,n){var o;super(e,t),this.cfg=n,this.scrollCapability=null,this.taskCaches=new Map,this.canAutoScroll=new Map,this.window$=tt((i,r)=>({documentId:i,window:r})),this.scrollTo$=tt((i,r)=>({documentId:i,options:r})),this.refreshPages$=tt((i,r)=>({documentId:i,pages:r}),{cache:!1}),this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=((o=this.registry.getPlugin("scroll"))==null?void 0:o.provides())??null,this.coreStore.onAction(kn,i=>{const r=i.payload.documentId??this.getActiveDocumentId(),a=i.payload.pageIndexes;this.refreshPages$.emit(r,a);const s=this.taskCaches.get(r);if(s)for(const c of a)s.delete(c)}),this.scrollCapability&&this.cfg.autoScroll!==!1&&(this.scrollCapability.onPageChangeState(({documentId:i,state:r})=>{this.canAutoScroll.set(i,!r.isChanging),r.isChanging||this.scrollToThumb(r.targetPage-1,i)}),this.scrollCapability.onPageChange(({documentId:i,pageNumber:r})=>{this.canAutoScroll.get(i)!==!1&&this.scrollToThumb(r-1,i)}))}onDocumentLoadingStarted(e){this.dispatch(Ra(e,{...Lp})),this.taskCaches.set(e,new Map),this.canAutoScroll.set(e,!0),this.logger.debug("ThumbnailPlugin","DocumentOpened",`Initialized thumbnail state for document: ${e}`)}onDocumentLoaded(e){this.calculateWindowState(e)}onDocumentClosed(e){this.dispatch((function(n){return{type:qd,payload:n}})(e));const t=this.taskCaches.get(e);t&&(t.forEach(n=>{n.abort({code:"cancelled",message:"Document closed"})}),t.clear(),this.taskCaches.delete(e)),this.canAutoScroll.delete(e),this.window$.clearScope(e),this.scrollTo$.clearScope(e),this.refreshPages$.clearScope(e),this.logger.debug("ThumbnailPlugin","DocumentClosed",`Cleaned up thumbnail state for document: ${e}`)}onRotationChanged(e){this.calculateWindowState(e)}buildCapability(){return{scrollToThumb:e=>this.scrollToThumb(e),renderThumb:(e,t)=>this.renderThumb(e,t),updateWindow:(e,t)=>this.updateWindow(e,t),getWindow:()=>this.getWindow(),forDocument:e=>this.createThumbnailScope(e),onWindow:this.window$.onGlobal,onScrollTo:this.scrollTo$.onGlobal,onRefreshPages:this.refreshPages$.onGlobal}}createThumbnailScope(e){return{scrollToThumb:t=>this.scrollToThumb(t,e),renderThumb:(t,n)=>this.renderThumb(t,n,e),updateWindow:(t,n)=>this.updateWindow(t,n,e),getWindow:()=>this.getWindow(e),onWindow:this.window$.forScope(e),onScrollTo:this.scrollTo$.forScope(e),onRefreshPages:this.refreshPages$.forScope(e)}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}calculateWindowState(e){const t=this.coreState.core.documents[e];if(!t?.document)return;const n=this.cfg.width??120,o=this.cfg.labelHeight??16,i=this.cfg.gap??8,r=this.cfg.imagePadding??0,a=this.cfg.paddingY??0,s=Math.max(1,n-2*r);let c=a;const d=t.document.pages.map(h=>{const g=h.size.height/h.size.width,p=Math.round(s*g),f=r+p+r+o,v={pageIndex:h.index,width:s,height:p,wrapperHeight:f,top:c,labelHeight:o,padding:r};return c+=f+i,v}),u={start:-1,end:-1,items:[],totalHeight:c-i+a},m=this.getDocumentState(e);m&&(this.dispatch(Ra(e,{...m,thumbs:d,window:u})),m.viewportH>0?this.updateWindow(m.scrollY,m.viewportH,e):this.window$.emit(e,u))}updateWindow(e,t,n){const o=n??this.getActiveDocumentId(),i=this.getDocumentState(o);if(!i||!i.window||i.thumbs.length===0)return;const r=this.cfg.buffer??3;this.dispatch((function(g,p,f){return{type:Vd,payload:{documentId:g,scrollY:p,viewportH:f}}})(o,e,t));let a=0,s=i.thumbs.length-1,c=0;for(;a<=s;){const g=a+s>>1,p=i.thumbs[g];p.top+p.wrapperHeight<e?a=g+1:(c=g,s=g-1)}let d=c;const u=e+t;for(;d+1<i.thumbs.length&&i.thumbs[d].top<u;)d++;d=Math.min(i.thumbs.length-1,d+r);const m=Math.max(0,c-r);if(m===i.window.start&&d===i.window.end)return;const h={start:m,end:d,items:i.thumbs.slice(m,d+1),totalHeight:i.window.totalHeight};this.dispatch((function(g,p){return{type:Gd,payload:{documentId:g,window:p}}})(o,h)),this.window$.emit(o,h)}getWindow(e){const t=this.getDocumentState(e);return t?.window??null}scrollToThumb(e,t){const n=t??this.getActiveDocumentId(),o=this.getDocumentState(n);if(!o||!o.window)return;const i=o.thumbs[e];if(!i)return;const r=this.cfg.scrollBehavior??"smooth",a=this.cfg.paddingY??0;if(o.viewportH<=0){const m=Math.max(a,i.top-i.wrapperHeight);return void this.scrollTo$.emit(n,{top:m,behavior:r})}const s=i.top,c=i.top+i.wrapperHeight,d=s<o.scrollY+8+a,u=c>o.scrollY+o.viewportH-8;d?this.scrollTo$.emit(n,{top:Math.max(0,s-a),behavior:r}):u&&this.scrollTo$.emit(n,{top:Math.max(0,c-o.viewportH+a),behavior:r})}renderThumb(e,t,n){const o=n??this.getActiveDocumentId(),i=this.taskCaches.get(o);if(!i)throw new Error(`Task cache not found for document: ${o}`);if(i.has(e))return i.get(e);const r=this.coreState.core.documents[o];if(!r?.document)throw new Error(`Document not found: ${o}`);const a=r.document.pages[e];if(!a)throw new Error(`Page ${e} not found in document: ${o}`);const s=this.cfg.width??120,c=this.cfg.imagePadding??0,d=Math.max(1,s-2*c)/a.size.width,u=this.renderCapability.forDocument(o).renderPageRect({pageIndex:e,rect:{origin:{x:0,y:0},size:a.size},options:{scaleFactor:d,dpr:t}});return i.set(e,u),u.wait(Oe,()=>i.delete(e)),u}async initialize(){this.logger.info("ThumbnailPlugin","Initialize","Thumbnail plugin initialized")}async destroy(){this.window$.clear(),this.refreshPages$.clear(),this.scrollTo$.clear(),this.taskCaches.forEach(e=>{e.forEach(t=>{t.abort({code:"cancelled",message:"Plugin destroyed"})}),e.clear()}),this.taskCaches.clear(),this.canAutoScroll.clear(),super.destroy()}};Kd.id="thumbnail";let hr=Kd;const $p={manifest:Op,create:(e,t)=>new hr(Wd,e,t),reducer:(e=Na,t)=>{switch(t.type){case Bd:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case qd:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"THUMBNAIL/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Gd:{const{documentId:n,window:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,window:o}}}:e}case Vd:{const{documentId:n,scrollY:o,viewportH:i}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,scrollY:o,viewportH:i}}}:e}default:return e}},initialState:Na},Zd=()=>st(hr.id);function Fp({documentId:e,style:t,children:n,...o}){const{plugin:i}=Zd(),r=K(null),[a,s]=z({window:null,docId:null}),c=a.docId===e?a.window:null;T(()=>{if(!i)return;const u=i.provides().forDocument(e),m=u.getWindow();m&&s({window:m,docId:e});const h=u.onWindow(g=>{s({window:g,docId:e})});return()=>{h(),s({window:null,docId:null})}},[i,e]),T(()=>{const u=r.current;if(!u||!i)return;const m=i.provides().forDocument(e),h=()=>m.updateWindow(u.scrollTop,u.clientHeight);return u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)},[i,e]),T(()=>{const u=r.current;if(!u||!i)return;const m=i.provides().forDocument(e),h=new ResizeObserver(()=>{m.updateWindow(u.scrollTop,u.clientHeight)});return h.observe(u),()=>h.disconnect()},[i,e]),T(()=>{const u=r.current;!u||!i||i.provides().forDocument(e).updateWindow(u.scrollTop,u.clientHeight)},[c,i,e]),T(()=>{const u=r.current;if(!(!u||!i||!c))return i.provides().forDocument(e).onScrollTo(({top:m,behavior:h})=>{u.scrollTo({top:m,behavior:h})})},[i,e,!!c]);const d=i?.cfg.paddingY??0;return D("div",{ref:r,style:{overflowY:"auto",position:"relative",paddingTop:d,paddingBottom:d,height:"100%",...t},...o,children:D("div",{style:{height:c?.totalHeight??0,position:"relative"},children:c?.items.map(u=>n(u))})})}function jp({documentId:e,meta:t,style:n,...o}){const{provides:i}=Le(hr.id),{plugin:r}=Zd(),[a,s]=z(),c=K(null),[d,u]=z(0);return T(()=>{if(r)return r.provides().forDocument(e).onRefreshPages(m=>{m.includes(t.pageIndex)&&u(h=>h+1)})},[r,e,t.pageIndex]),T(()=>{const m=i?.forDocument(e),h=m?.renderThumb(t.pageIndex,window.devicePixelRatio);return h?.wait(g=>{const p=URL.createObjectURL(g);c.current=p,s(p)},Oe),()=>{c.current?(URL.revokeObjectURL(c.current),c.current=null):h?.abort({code:ee.Cancelled,message:"canceled render task"})}},[i,e,t.pageIndex,d]),a?D("img",{src:a,onLoad:()=>{c.current&&(URL.revokeObjectURL(c.current),c.current=null)},style:n,...o}):null}const ye="annotation",Hp={id:ye,name:"Annotation Plugin",version:"1.0.0",provides:["annotation"],requires:["interaction-manager","selection"],optional:["history"],defaultConfig:{autoCommit:!0,annotationAuthor:"Guest",deactivateToolAfterCreate:!1,selectAfterCreate:!0}},Yd="ANNOTATION/INIT_STATE",Xd="ANNOTATION/CLEANUP_STATE",Qd="ANNOTATION/SET_ANNOTATIONS",Jd="ANNOTATION/SELECT_ANNOTATION",eu="ANNOTATION/DESELECT_ANNOTATION",tu="ANNOTATION/SET_ACTIVE_TOOL_ID",nu="ANNOTATION/CREATE_ANNOTATION",ou="ANNOTATION/PATCH_ANNOTATION",iu="ANNOTATION/DELETE_ANNOTATION",ru="ANNOTATION/COMMIT",au="ANNOTATION/PURGE_ANNOTATION",su="ANNOTATION/ADD_COLOR_PRESET",lu="ANNOTATION/SET_TOOL_DEFAULTS",cu="ANNOTATION/ADD_TOOL",ai=e=>({type:eu,payload:{documentId:e}}),Oa=(e,t)=>({type:tu,payload:{documentId:e,toolId:t}}),si=(e,t,n)=>({type:nu,payload:{documentId:e,pageIndex:t,annotation:n}}),La=(e,t,n,o)=>({type:ou,payload:{documentId:e,pageIndex:t,id:n,patch:o}}),$a=(e,t,n)=>({type:iu,payload:{documentId:e,pageIndex:t,id:n}}),Fa=(e,t)=>({type:au,payload:{documentId:e,uid:t}});function du(e){return e.object.type===_.INK}function uu(e){return e.object.type===_.CIRCLE}function mu(e){return e.object.type===_.POLYGON}function hu(e){return e.object.type===_.SQUARE}function gu(e){return e.object.type===_.LINE}function pu(e){return e.object.type===_.POLYLINE}function fu(e){return e.object.type===_.HIGHLIGHT}function vu(e){return e.object.type===_.UNDERLINE}function yu(e){return e.object.type===_.STRIKEOUT}function bu(e){return e.object.type===_.SQUIGGLY}function wu(e){return e.object.type===_.FREETEXT}function xu(e){return e.object.type===_.STAMP}function Up(e){return e.object.type===_.TEXT}function Cu(e){return(function(t){return fu(t)||vu(t)||yu(t)||bu(t)})(e)||du(e)||hu(e)||uu(e)||mu(e)||gu(e)||pu(e)||wu(e)||xu(e)}const ja=(e,t)=>(e.pages[t]??[]).map(n=>e.byUid[n]),gr=(e,t)=>e.byUid[t]??null,Ha=(e,t)=>e.selectedUid&&(e.pages[t]??[]).includes(e.selectedUid)?e.byUid[e.selectedUid]:null;function et(e,t){const n=e.tools.find(o=>o.id===t);return n?.defaults}const Wp=[{id:"highlight",name:"Highlight",matchScore:e=>e.type===_.HIGHLIGHT?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:_.HIGHLIGHT,color:"#FFCD45",opacity:1,blendMode:Z.Multiply}},{id:"underline",name:"Underline",matchScore:e=>e.type===_.UNDERLINE?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:_.UNDERLINE,color:"#E44234",opacity:1}},{id:"strikeout",name:"Strikeout",matchScore:e=>e.type===_.STRIKEOUT?1:0,interaction:{exclusive:!1,textSelection:!0},defaults:{type:_.STRIKEOUT,color:"#E44234",opacity:1}},{id:"squiggly",name:"Squiggly",matchScore:e=>e.type===_.SQUIGGLY?1:0,interaction:{exclusive:!1,textSelection:!0,isDraggable:!1,isResizable:!1},defaults:{type:_.SQUIGGLY,color:"#E44234",opacity:1}},{id:"ink",name:"Pen",matchScore:e=>e.type===_.INK&&e.intent!=="InkHighlight"?5:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_.INK,color:"#E44234",opacity:1,strokeWidth:6}},{id:"inkHighlighter",name:"Ink Highlighter",matchScore:e=>e.type===_.INK&&e.intent==="InkHighlight"?10:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_.INK,intent:"InkHighlight",color:"#FFCD45",opacity:1,strokeWidth:14,blendMode:Z.Multiply}},{id:"circle",name:"Circle",matchScore:e=>e.type===_.CIRCLE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_.CIRCLE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",strokeStyle:Ie.SOLID},clickBehavior:{enabled:!0,defaultSize:{width:100,height:100}}},{id:"square",name:"Square",matchScore:e=>e.type===_.SQUARE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_.SQUARE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",strokeStyle:Ie.SOLID},clickBehavior:{enabled:!0,defaultSize:{width:100,height:100}}},{id:"line",name:"Line",matchScore:e=>e.type===_.LINE&&e.intent!=="LineArrow"?5:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:_.LINE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"},clickBehavior:{enabled:!0,defaultLength:100,defaultAngle:0}},{id:"lineArrow",name:"Arrow",matchScore:e=>e.type===_.LINE&&e.intent==="LineArrow"?10:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:_.LINE,intent:"LineArrow",color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234",lineEndings:{start:Q.None,end:Q.OpenArrow}},clickBehavior:{enabled:!0,defaultLength:100,defaultAngle:0}},{id:"polyline",name:"Polyline",matchScore:e=>e.type===_.POLYLINE?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:_.POLYLINE,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"}},{id:"polygon",name:"Polygon",matchScore:e=>e.type===_.POLYGON?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!1,lockAspectRatio:!1},defaults:{type:_.POLYGON,color:"transparent",opacity:1,strokeWidth:6,strokeColor:"#E44234"}},{id:"freeText",name:"Free Text",matchScore:e=>e.type===_.FREETEXT?1:0,interaction:{exclusive:!1,cursor:"crosshair",isDraggable:!0,isResizable:!0,lockAspectRatio:!1},defaults:{type:_.FREETEXT,contents:"Insert text",fontSize:14,fontColor:"#E44234",fontFamily:We.Helvetica,textAlign:it.Left,verticalAlign:mt.Top,backgroundColor:"transparent",opacity:1},clickBehavior:{enabled:!0,defaultSize:{width:100,height:20},defaultContent:"Insert text"}},{id:"stamp",name:"Image",matchScore:e=>e.type===_.STAMP?1:0,interaction:{exclusive:!1,cursor:"copy",isDraggable:!0,isResizable:!0,lockAspectRatio:!0},defaults:{type:_.STAMP}}],Bp=["#E44234","#FF8D00","#FFCD45","#5CC96E","#25D2D1","#597CE2","#C544CE","#7D2E25","#000000","#FFFFFF"],qp=(e,t,n)=>{const o=e.byUid[t];return o?{...e,byUid:{...e.byUid,[t]:{...o,commitState:o.commitState==="synced"?"dirty":o.commitState,object:{...o.object,...n}}},hasPendingChanges:!0}:e};function gt(e){let t=e;return[()=>t,n=>{t=n}]}const Gp={annotationType:_.INK,create(e){const{onCommit:t,onPreview:n,getTool:o,pageSize:i}=e,[r,a]=gt([]),[s,c]=gt(!1),d={current:null},u=g=>({x:ve(g.x,0,i.width),y:ve(g.y,0,i.height)}),m=()=>{const g=o();return g?{...g.defaults,strokeWidth:g.defaults.strokeWidth??1,color:g.defaults.color??"#000000",opacity:g.defaults.opacity??1,flags:g.defaults.flags??["print"]}:null},h=()=>{const g=r();if(g.length===0||g[0].points.length===0)return null;const p=m();if(!p)return null;const f=g.flatMap(y=>y.points),v=Ht(jt(f),p.strokeWidth/2);return{type:_.INK,bounds:v,data:{...p,rect:v,inkList:g}}};return{onPointerDown:(g,p)=>{var f;const v=u(g);c(!0),d.current&&clearTimeout(d.current);const y=[...r(),{points:[v]}];a(y),n(h()),(f=p.setPointerCapture)==null||f.call(p)},onPointerMove:g=>{if(!s())return;const p=r();if(p.length===0)return;const f=u(g);p[p.length-1].points.push(f),a(p),n(h())},onPointerUp:(g,p)=>{var f;c(!1),(f=p.releasePointerCapture)==null||f.call(p),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{const v=r();if(v.length>0&&v[0].points.length>1){const y=m();if(!y)return;const b=v.flatMap(w=>w.points),x=Ht(jt(b),y.strokeWidth/2);t({...y,inkList:v,rect:x,type:_.INK,pageIndex:e.pageIndex,id:Ne(),created:new Date})}a([]),n(null)},800)},onPointerCancel:(g,p)=>{var f;a([]),c(!1),n(null),d.current&&clearTimeout(d.current),(f=p.releasePointerCapture)==null||f.call(p)}}}};function Vo({threshold:e=5,getTool:t,onClickDetected:n}){const[o,i]=gt(null),[r,a]=gt(!1);return{onStart:s=>{i(s),a(!1)},onMove:s=>{const c=o();!c||r()||Math.sqrt(Math.pow(s.x-c.x,2)+Math.pow(s.y-c.y,2))>e&&a(!0)},onEnd:s=>{var c;if(o()&&!r()){const d=t();d&&"clickBehavior"in d&&((c=d.clickBehavior)!=null&&c.enabled)&&n(s,d)}i(null),a(!1)},hasMoved:r,reset:()=>{i(null),a(!1)}}}const Vp={annotationType:_.FREETEXT,create(e){const{onCommit:t,onPreview:n,getTool:o,pageSize:i,pageIndex:r}=e,[a,s]=gt(null),c=h=>({x:ve(h.x,0,i.width),y:ve(h.y,0,i.height)}),d=()=>{const h=o();return h?{...h.defaults,fontColor:h.defaults.fontColor??"#000000",opacity:h.defaults.opacity??1,fontSize:h.defaults.fontSize??12,fontFamily:h.defaults.fontFamily??We.Helvetica,backgroundColor:h.defaults.backgroundColor??"transparent",textAlign:h.defaults.textAlign??it.Left,verticalAlign:h.defaults.verticalAlign??mt.Top,contents:h.defaults.contents??"Insert text here",flags:h.defaults.flags??["print"]}:null},u=Vo({threshold:5,getTool:o,onClickDetected:(h,g)=>{const p=d();if(!p)return;const f=g.clickBehavior;if(!f?.enabled)return;const{width:v,height:y}=f.defaultSize,b=v/2,x=y/2,w={origin:{x:ve(h.x-b,0,i.width-v),y:ve(h.y-x,0,i.height-y)},size:{width:v,height:y}},C=f.defaultContent??p.contents,I={...p,contents:C,type:_.FREETEXT,rect:w,pageIndex:r,id:Ne(),created:new Date};t(I)}}),m=h=>{const g=a();if(!g)return null;const p=d();if(!p)return null;const f={origin:{x:Math.min(g.x,h.x),y:Math.min(g.y,h.y)},size:{width:Math.abs(g.x-h.x),height:Math.abs(g.y-h.y)}};return{type:_.FREETEXT,bounds:f,data:{...p,rect:f}}};return{onPointerDown:(h,g)=>{var p;const f=c(h);s(f),u.onStart(f),n(m(f)),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:h=>{const g=c(h);u.onMove(g),a()&&u.hasMoved()&&n(m(g))},onPointerUp:(h,g)=>{var p;const f=a();if(!f)return;const v=d();if(!v)return;const y=c(h);if(u.hasMoved()){const b={origin:{x:Math.min(f.x,y.x),y:Math.min(f.y,y.y)},size:{width:Math.abs(f.x-y.x),height:Math.abs(f.y-y.y)}},x={...v,type:_.FREETEXT,rect:b,pageIndex:e.pageIndex,id:Ne(),created:new Date};t(x)}else u.onEnd(y);s(null),n(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerLeave:(h,g)=>{var p;s(null),n(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(h,g)=>{var p;s(null),n(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)}}}};function Iu(e){const t=n=>{const o=9*n,i=Math.PI/6;return{x:-o*Math.cos(i),y:o*Math.sin(i)}};return{getSvgPath:n=>{const{x:o,y:i}=t(n);return e?`M 0 0 L ${o} ${i} L ${o} ${-i} Z`:`M ${o} ${i} L 0 0 L ${o} ${-i}`},getLocalPoints:n=>{const{x:o,y:i}=t(n);return[{x:0,y:0},{x:o,y:i},{x:o,y:-i}]},getRotation:n=>n,filled:e}}function Ua(e,t){const n=o=>o*e/2;return{getSvgPath:o=>{const i=n(o);return`M ${-i} 0 L ${i} 0`},getLocalPoints:o=>{const i=n(o);return[{x:-i,y:0},{x:i,y:0}]},getRotation:t,filled:!1}}const Wa=Iu(!1),Ba=Iu(!0),Ti={[Q.OpenArrow]:Wa,[Q.ClosedArrow]:Ba,[Q.ROpenArrow]:{...Wa,getRotation:e=>e+Math.PI},[Q.RClosedArrow]:{...Ba,getRotation:e=>e+Math.PI},[Q.Circle]:{getSvgPath:e=>{const t=5*e/2;return`M ${t} 0 A ${t} ${t} 0 1 1 ${-t} 0 A ${t} ${t} 0 1 1 ${t} 0`},getLocalPoints:e=>{const t=5*e/2;return[{x:-t,y:-t},{x:t,y:t}]},getRotation:()=>0,filled:!0},[Q.Square]:{getSvgPath:e=>{const t=6*e/2;return`M ${-t} ${-t} L ${t} ${-t} L ${t} ${t} L ${-t} ${t} Z`},getLocalPoints:e=>{const t=6*e/2;return[{x:-t,y:-t},{x:t,y:-t},{x:t,y:t},{x:-t,y:t}]},getRotation:e=>e,filled:!0},[Q.Diamond]:{getSvgPath:e=>{const t=6*e/2;return`M 0 ${-t} L ${t} 0 L 0 ${t} L ${-t} 0 Z`},getLocalPoints:e=>{const t=6*e/2;return[{x:0,y:-t},{x:t,y:0},{x:0,y:t},{x:-t,y:0}]},getRotation:e=>e,filled:!0},[Q.Butt]:Ua(6,e=>e+Math.PI/2),[Q.Slash]:Ua(18,e=>e+Math.PI/1.5)};function It(e,t,n){if(!e||e.length===0)return{origin:{x:0,y:0},size:{width:0,height:0}};const o=[...e],i=(a,s)=>Math.atan2(s.y-a.y,s.x-a.x),r=(a,s,c)=>{if(!a)return;const d=Ti[a];if(!d)return;const u=d.getLocalPoints(t),m=d.getRotation(c),h=u.map(g=>(function(p,f,v){const y=Math.cos(f),b=Math.sin(f),x=p.x*y-p.y*b,w=p.x*b+p.y*y;return{x:x+v.x,y:w+v.y}})(g,m,s));o.push(...h)};if(e.length>=2){const a=i(e[1],e[0]);r(n?.start,e[0],a);const s=e.length-1,c=i(e[s-1],e[s]);r(n?.end,e[s],c)}if(o.length<=1){const a=e[0]||{x:0,y:0},s=t;return{origin:{x:a.x-s,y:a.y-s},size:{width:2*s,height:2*s}}}return Ht(jt(o),t/2+1.2*t)}class pr{constructor(){this.patches=new Map}register(t,n){this.patches.set(t,n)}transform(t,n){const o=this.patches.get(t.type);return o?o(t,n):n.changes}}const Kp=new pr,zo=Object.freeze(Object.defineProperty({__proto__:null,LINE_ENDING_HANDLERS:Ti,PatchRegistry:pr,createEnding:function(e,t,n,o,i){if(!e)return null;const r=Ti[e];if(!r)return null;const a=r.getRotation(n);return{d:r.getSvgPath(t),transform:`translate(${o} ${i}) rotate(${(s=>180*s/Math.PI)(a)})`,filled:r.filled}},lineRectWithEndings:It,patchRegistry:Kp},Symbol.toStringTag,{value:"Module"})),Zp={annotationType:_.LINE,create(e){const{pageIndex:t,onCommit:n,onPreview:o,getTool:i,pageSize:r}=e,[a,s]=gt(null),c=h=>({x:ve(h.x,0,r.width),y:ve(h.y,0,r.height)}),d=()=>{const h=i();return h?{...h.defaults,strokeWidth:h.defaults.strokeWidth??1,lineEndings:h.defaults.lineEndings??{start:Q.None,end:Q.None},color:h.defaults.color??"#000000",opacity:h.defaults.opacity??1,strokeStyle:h.defaults.strokeStyle??Ie.SOLID,strokeDashArray:h.defaults.strokeDashArray??[],strokeColor:h.defaults.strokeColor??"#000000",flags:h.defaults.flags??["print"]}:null},u=Vo({threshold:5,getTool:i,onClickDetected:(h,g)=>{const p=d();if(!p)return;const f=g.clickBehavior;if(!f?.enabled)return;const v=f.defaultAngle??0,y=f.defaultLength/2,b=h.x-y*Math.cos(v),x=h.y-y*Math.sin(v),w=h.x+y*Math.cos(v),C=h.y+y*Math.sin(v),I=c({x:b,y:x}),k=c({x:w,y:C}),S=It([I,k],p.strokeWidth,p.lineEndings);n({...p,rect:S,linePoints:{start:I,end:k},pageIndex:t,id:Ne(),created:new Date,type:_.LINE})}}),m=h=>{const g=a();if(!g)return null;const p=d();if(!p)return null;const f=It([g,h],p.strokeWidth,p.lineEndings);return{type:_.LINE,bounds:f,data:{...p,rect:f,linePoints:{start:g,end:h}}}};return{onPointerDown:(h,g)=>{var p;const f=c(h);s(f),u.onStart(f),o(m(f)),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:h=>{const g=c(h);u.onMove(g),a()&&u.hasMoved()&&o(m(g))},onPointerUp:(h,g)=>{var p;const f=a();if(!f)return;const v=c(h);if(u.hasMoved()){const y=d();if(!y)return;if(Math.abs(v.x-f.x)>2||Math.abs(v.y-f.y)>2){const b=It([f,v],y.strokeWidth,y.lineEndings);n({...y,rect:b,linePoints:{start:f,end:v},pageIndex:t,id:Ne(),flags:["print"],created:new Date,type:_.LINE})}}else u.onEnd(v);s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerLeave:(h,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(h,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)}}}},Yp={annotationType:_.POLYLINE,create(e){const{onCommit:t,onPreview:n,getTool:o,pageSize:i}=e,[r,a]=gt([]),[s,c]=gt(null),d=h=>({x:ve(h.x,0,i.width),y:ve(h.y,0,i.height)}),u=()=>{const h=o();return h?{...h.defaults,strokeWidth:h.defaults.strokeWidth??1,lineEndings:h.defaults.lineEndings??{start:Q.None,end:Q.None},color:h.defaults.color??"#000000",opacity:h.defaults.opacity??1,strokeColor:h.defaults.strokeColor??"#000000",strokeStyle:h.defaults.strokeStyle??Ie.SOLID,strokeDashArray:h.defaults.strokeDashArray??[],flags:h.defaults.flags??["print"]}:null},m=()=>{const h=r(),g=s();if(h.length===0||!g)return null;const p=u();if(!p)return null;const f=[...h,g],v=It(f,p.strokeWidth,p.lineEndings);return{type:_.POLYLINE,bounds:v,data:{...p,rect:v,vertices:f,currentVertex:g}}};return{onClick:h=>{const g=d(h),p=r(),f=p[p.length-1];f&&Math.abs(f.x-g.x)<1&&Math.abs(f.y-g.y)<1||(a([...p,g]),c(g),n(m()))},onDoubleClick:()=>{(()=>{const h=r();if(h.length<2)return;const g=u();if(!g)return;const p=It(h,g.strokeWidth,g.lineEndings),f={...g,vertices:h,rect:p,type:_.POLYLINE,pageIndex:e.pageIndex,id:Ne(),created:new Date};t(f),a([]),c(null),n(null)})()},onPointerMove:h=>{if(r().length>0){const g=d(h);c(g),n(m())}},onPointerCancel:()=>{a([]),c(null),n(null)}}}},Xp={annotationType:_.POLYGON,create(e){const{onCommit:t,onPreview:n,getTool:o,scale:i,pageSize:r}=e,[a,s]=gt([]),[c,d]=gt(null),u=p=>({x:ve(p.x,0,r.width),y:ve(p.y,0,r.height)}),m=()=>{const p=o();return p?{...p.defaults,color:p.defaults.color??"#000000",opacity:p.defaults.opacity??1,strokeWidth:p.defaults.strokeWidth??1,strokeColor:p.defaults.strokeColor??"#000000",strokeStyle:p.defaults.strokeStyle??Ie.SOLID,strokeDashArray:p.defaults.strokeDashArray??[],flags:p.defaults.flags??["print"]}:null},h=()=>{const p=a();if(p.length<3)return;const f=m();if(!f)return;const v=Ht(jt(p),f.strokeWidth/2),y={...f,vertices:p,rect:v,type:_.POLYGON,pageIndex:e.pageIndex,id:Ne(),created:new Date};t(y),s([]),d(null),n(null)},g=()=>{const p=a(),f=c();if(p.length===0||!f)return null;const v=m();if(!v)return null;const y=Ht(jt([...p,f]),v.strokeWidth/2);return{type:_.POLYGON,bounds:y,data:{...v,rect:y,vertices:p,currentVertex:f}}};return{onClick:p=>{const f=u(p);if((b=>{const x=a();if(x.length<2)return!1;const w=14/i/2,C=x[0];return b.x>=C.x-w&&b.x<=C.x+w&&b.y>=C.y-w&&b.y<=C.y+w})(f)&&a().length>=3)return void h();const v=a(),y=v[v.length-1];y&&Math.abs(y.x-f.x)<1&&Math.abs(y.y-f.y)<1||(s([...v,f]),d(f),n(g()))},onDoubleClick:p=>{h()},onPointerMove:p=>{if(a().length>0){const f=u(p);d(f),n(g())}},onPointerCancel:p=>{s([]),d(null),n(null)}}}},Qp={annotationType:_.SQUARE,create(e){const{pageIndex:t,onCommit:n,onPreview:o,getTool:i,pageSize:r}=e,[a,s]=gt(null),c=h=>({x:ve(h.x,0,r.width),y:ve(h.y,0,r.height)}),d=()=>{const h=i();return h?{...h.defaults,flags:h.defaults.flags??["print"],strokeWidth:h.defaults.strokeWidth??2,strokeColor:h.defaults.strokeColor??"#000000",strokeStyle:h.defaults.strokeStyle??Ie.SOLID,strokeDashArray:h.defaults.strokeDashArray??[],color:h.defaults.color??"#000000",opacity:h.defaults.opacity??1}:null},u=Vo({threshold:5,getTool:i,onClickDetected:(h,g)=>{const p=d();if(!p)return;const f=g.clickBehavior;if(!f?.enabled)return;const{width:v,height:y}=f.defaultSize,b=v/2,x=y/2,w=ve(h.x-b,0,r.width-v),C=ve(h.y-x,0,r.height-y),I=p.strokeWidth,k=I/2,S={origin:{x:w-k,y:C-k},size:{width:v+I,height:y+I}},M={...p,type:_.SQUARE,created:new Date,id:Ne(),pageIndex:t,rect:S};n(M)}}),m=h=>{const g=a();if(!g)return null;const p=Math.min(g.x,h.x),f=Math.min(g.y,h.y),v=Math.abs(g.x-h.x),y=Math.abs(g.y-h.y),b=d();if(!b)return null;const x=b.strokeWidth,w=x/2,C={origin:{x:p-w,y:f-w},size:{width:v+x,height:y+x}};return{type:_.SQUARE,bounds:C,data:{rect:C,...b}}};return{onPointerDown:(h,g)=>{var p;const f=c(h);s(f),u.onStart(f),o(m(f)),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:h=>{const g=c(h);u.onMove(g),a()&&u.hasMoved()&&o(m(g))},onPointerUp:(h,g)=>{var p;if(!a()||!d())return;const f=c(h);if(u.hasMoved()){const v=d();if(!v)return;const y=m(f);if(y){const b={...v,type:_.SQUARE,created:new Date,id:Ne(),pageIndex:t,rect:y.data.rect};n(b)}}else u.onEnd(f);s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerLeave:(h,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(h,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)}}}},Jp={annotationType:_.STAMP,create(e){const{services:t,onCommit:n,getTool:o,pageSize:i}=e;return{onPointerDown:r=>{const a=o();if(!a)return;const{imageSrc:s,imageSize:c}=a.defaults,d=(u,m,h)=>{const g=r.x-m/2,p=r.y-h/2,f={origin:{x:ve(g,0,i.width-m),y:ve(p,0,i.height-h)},size:{width:m,height:h}},v={...a.defaults,rect:f,type:_.STAMP,icon:a.defaults.icon??Zi.Draft,subject:a.defaults.subject??"Stamp",flags:a.defaults.flags??["print"],pageIndex:e.pageIndex,id:Ne(),created:new Date};n(v,{imageData:u})};s?t.processImage({source:s,maxWidth:i.width,maxHeight:i.height,onComplete:u=>d(u.imageData,c?.width??u.width,c?.height??u.height)}):t.requestFile({accept:"image/png,image/jpeg",onFile:u=>{t.processImage({source:u,maxWidth:i.width,maxHeight:i.height,onComplete:m=>d(m.imageData,m.width,m.height)})}})}}}},ef={annotationType:_.CIRCLE,create(e){const{pageIndex:t,onCommit:n,onPreview:o,getTool:i,pageSize:r}=e,[a,s]=gt(null),c=h=>({x:ve(h.x,0,r.width),y:ve(h.y,0,r.height)}),d=()=>{const h=i();return h?{...h.defaults,strokeWidth:h.defaults.strokeWidth??2,strokeColor:h.defaults.strokeColor??"#000000",strokeStyle:h.defaults.strokeStyle??Ie.SOLID,strokeDashArray:h.defaults.strokeDashArray??[],color:h.defaults.color??"#000000",opacity:h.defaults.opacity??1,flags:h.defaults.flags??["print"]}:null},u=Vo({threshold:5,getTool:i,onClickDetected:(h,g)=>{const p=d();if(!p)return;const f=g.clickBehavior;if(!f?.enabled)return;const{width:v,height:y}=f.defaultSize,b=v/2,x=y/2,w=ve(h.x-b,0,r.width-v),C=ve(h.y-x,0,r.height-y),I=p.strokeWidth,k=I/2,S={origin:{x:w-k,y:C-k},size:{width:v+I,height:y+I}},M={...p,type:_.CIRCLE,created:new Date,id:Ne(),pageIndex:t,rect:S};n(M)}}),m=h=>{const g=a();if(!g)return null;const p=Math.min(g.x,h.x),f=Math.min(g.y,h.y),v=Math.abs(g.x-h.x),y=Math.abs(g.y-h.y),b=d();if(!b)return null;const x=b.strokeWidth,w=x/2,C={origin:{x:p-w,y:f-w},size:{width:v+x,height:y+x}};return{type:_.CIRCLE,bounds:C,data:{rect:C,...b}}};return{onPointerDown:(h,g)=>{var p;const f=c(h);s(f),u.onStart(f),o(m(f)),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:h=>{const g=c(h);u.onMove(g),a()&&u.hasMoved()&&o(m(g))},onPointerUp:(h,g)=>{var p;if(!a()||!d())return;const f=c(h);if(u.hasMoved()){const v=d();if(!v)return;const y=m(f);if(y){const b={...v,type:_.CIRCLE,flags:["print"],created:new Date,id:Ne(),pageIndex:t,rect:y.data.rect};n(b)}}else u.onEnd(f);s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerLeave:(h,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(h,g)=>{var p;s(null),o(null),u.reset(),(p=g.releasePointerCapture)==null||p.call(g)}}}},tf=(e,t)=>{var n;switch(t.type){case"vertex-edit":default:return t.changes;case"move":if(t.changes.rect){const o=t.changes.rect.origin.x-e.rect.origin.x,i=t.changes.rect.origin.y-e.rect.origin.y,r=e.inkList.map(a=>({points:a.points.map(s=>({x:s.x+o,y:s.y+i}))}));return{rect:t.changes.rect,inkList:r}}return t.changes;case"resize":if(t.changes.rect){const o=e.rect,i=t.changes.rect;let r=i.size.width/o.size.width,a=i.size.height/o.size.height;const s=10;if((i.size.width<s||i.size.height<s)&&(r=Math.max(r,s/o.size.width),a=Math.max(a,s/o.size.height),t.changes.rect={origin:i.origin,size:{width:o.size.width*r,height:o.size.height*a}}),(n=t.metadata)==null?void 0:n.maintainAspectRatio){const v=Math.min(r,a);r=v,a=v,t.changes.rect.size={width:o.size.width*v,height:o.size.height*v}}const c=(v,y)=>({origin:{x:v.origin.x+y,y:v.origin.y+y},size:{width:Math.max(1,v.size.width-2*y),height:Math.max(1,v.size.height-2*y)}}),d=Math.min(t.changes.rect.size.width/o.size.width,t.changes.rect.size.height/o.size.height),u=Math.max(1,Math.round(e.strokeWidth*d)),m=c(o,e.strokeWidth/2),h=c(t.changes.rect,u/2),g=h.size.width/Math.max(m.size.width,1e-6),p=h.size.height/Math.max(m.size.height,1e-6),f=e.inkList.map(v=>({points:v.points.map(y=>({x:h.origin.x+(y.x-m.origin.x)*g,y:h.origin.y+(y.y-m.origin.y)*p}))}));return{rect:t.changes.rect,inkList:f,strokeWidth:u}}return t.changes;case"property-update":if(t.changes.strokeWidth!==void 0){const o={...e,...t.changes},i=o.inkList.flatMap(a=>a.points),r=Ht(jt(i),o.strokeWidth/2);return{...t.changes,rect:r}}return t.changes}},nf=(e,t)=>{var n;switch(t.type){case"vertex-edit":if(t.changes.linePoints){const{start:o,end:i}=t.changes.linePoints;return{rect:It([o,i],e.strokeWidth,e.lineEndings),linePoints:{start:o,end:i}}}return t.changes;case"move":if(t.changes.rect){const o=t.changes.rect.origin.x-e.rect.origin.x,i=t.changes.rect.origin.y-e.rect.origin.y;return{rect:t.changes.rect,linePoints:{start:{x:e.linePoints.start.x+o,y:e.linePoints.start.y+i},end:{x:e.linePoints.end.x+o,y:e.linePoints.end.y+i}}}}return t.changes;case"resize":if(t.changes.rect){const o=e.rect,i=t.changes.rect;let r=i.size.width/o.size.width,a=i.size.height/o.size.height;const s=10;if((i.size.width<s||i.size.height<s)&&(r=Math.max(r,s/o.size.width),a=Math.max(a,s/o.size.height),t.changes.rect={origin:i.origin,size:{width:o.size.width*r,height:o.size.height*a}}),(n=t.metadata)==null?void 0:n.maintainAspectRatio){const d=Math.min(r,a);r=d,a=d,t.changes.rect.size={width:o.size.width*d,height:o.size.height*d}}const c={start:{x:t.changes.rect.origin.x+(e.linePoints.start.x-o.origin.x)*r,y:t.changes.rect.origin.y+(e.linePoints.start.y-o.origin.y)*a},end:{x:t.changes.rect.origin.x+(e.linePoints.end.x-o.origin.x)*r,y:t.changes.rect.origin.y+(e.linePoints.end.y-o.origin.y)*a}};return{rect:t.changes.rect,linePoints:c}}return t.changes;case"property-update":if(t.changes.strokeWidth||t.changes.lineEndings){const o={...e,...t.changes},i=It([o.linePoints.start,o.linePoints.end],o.strokeWidth,o.lineEndings);return{...t.changes,rect:i}}return t.changes;default:return t.changes}},of=(e,t)=>{var n;switch(t.type){case"vertex-edit":return t.changes.vertices&&t.changes.vertices.length?{rect:It(t.changes.vertices,e.strokeWidth,e.lineEndings),vertices:t.changes.vertices}:t.changes;case"move":if(t.changes.rect){const o=t.changes.rect.origin.x-e.rect.origin.x,i=t.changes.rect.origin.y-e.rect.origin.y,r=e.vertices.map(a=>({x:a.x+o,y:a.y+i}));return{rect:t.changes.rect,vertices:r}}return t.changes;case"resize":if(t.changes.rect){const o=e.rect,i=t.changes.rect;let r=i.size.width/o.size.width,a=i.size.height/o.size.height;const s=10;if((i.size.width<s||i.size.height<s)&&(r=Math.max(r,s/o.size.width),a=Math.max(a,s/o.size.height),t.changes.rect={origin:i.origin,size:{width:o.size.width*r,height:o.size.height*a}}),(n=t.metadata)==null?void 0:n.maintainAspectRatio){const d=Math.min(r,a);r=d,a=d,t.changes.rect.size={width:o.size.width*d,height:o.size.height*d}}const c=e.vertices.map(d=>({x:t.changes.rect.origin.x+(d.x-o.origin.x)*r,y:t.changes.rect.origin.y+(d.y-o.origin.y)*a}));return{rect:t.changes.rect,vertices:c}}return t.changes;case"property-update":if(t.changes.strokeWidth!==void 0||t.changes.lineEndings!==void 0){const o={...e,...t.changes},i=It(o.vertices,o.strokeWidth,o.lineEndings);return{...t.changes,rect:i}}return t.changes;default:return t.changes}},rf=(e,t)=>{var n;switch(t.type){case"vertex-edit":if(t.changes.vertices&&t.changes.vertices.length){const o=e.strokeWidth/2;return{rect:Ht(jt(t.changes.vertices),o),vertices:t.changes.vertices}}return t.changes;case"move":if(t.changes.rect){const o=t.changes.rect.origin.x-e.rect.origin.x,i=t.changes.rect.origin.y-e.rect.origin.y,r=e.vertices.map(a=>({x:a.x+o,y:a.y+i}));return{rect:t.changes.rect,vertices:r}}return t.changes;case"resize":if(t.changes.rect){const o=e.rect,i=t.changes.rect;let r=i.size.width/o.size.width,a=i.size.height/o.size.height;const s=10;if((i.size.width<s||i.size.height<s)&&(r=Math.max(r,s/o.size.width),a=Math.max(a,s/o.size.height),t.changes.rect={origin:i.origin,size:{width:o.size.width*r,height:o.size.height*a}}),(n=t.metadata)==null?void 0:n.maintainAspectRatio){const d=Math.min(r,a);r=d,a=d,t.changes.rect.size={width:o.size.width*d,height:o.size.height*d}}const c=e.vertices.map(d=>({x:t.changes.rect.origin.x+(d.x-o.origin.x)*r,y:t.changes.rect.origin.y+(d.y-o.origin.y)*a}));return{rect:t.changes.rect,vertices:c}}return t.changes;case"property-update":if(t.changes.strokeWidth!==void 0){const o={...e,...t.changes},i=o.strokeWidth/2,r=Ht(jt(o.vertices),i);return{...t.changes,rect:r}}return t.changes;default:return t.changes}},ku=class extends Me{constructor(e,t,n){var o,i,r;super(e,t),this.ANNOTATION_HISTORY_TOPIC="annotations",this.state$=re(),this.pendingContexts=new Map,this.isInitialLoadComplete=new Map,this.importQueue=new Map,this.handlerFactories=new Map,this.activeTool$=re(),this.events$=re(),this.toolsChange$=re(),this.patchRegistry=new pr,this.config=n,this.selection=((o=t.getPlugin("selection"))==null?void 0:o.provides())??null,this.history=((i=t.getPlugin("history"))==null?void 0:i.provides())??null,this.interactionManager=((r=t.getPlugin("interaction-manager"))==null?void 0:r.provides())??null,this.registerHandlerFactories(),this.registerBuiltInPatches()}onDocumentLoadingStarted(e){this.dispatch((function(t,n){return{type:Yd,payload:{documentId:t,state:n}}})(e,{pages:{},byUid:{},selectedUid:null,activeToolId:null,hasPendingChanges:!1})),this.pendingContexts.set(e,new Map),this.isInitialLoadComplete.set(e,!1),this.importQueue.set(e,[]),this.logger.debug("AnnotationPlugin","DocumentOpened",`Initialized annotation state for document: ${e}`)}onDocumentLoaded(e){const t=this.getCoreDocument(e);if(t?.document&&this.getAllAnnotations(e,t.document),this.selection)for(const n of this.state.tools)n.interaction.textSelection&&this.selection.enableForMode(n.interaction.mode??n.id)}onDocumentClosed(e){this.dispatch((function(t){return{type:Xd,payload:t}})(e)),this.pendingContexts.delete(e),this.isInitialLoadComplete.delete(e),this.importQueue.delete(e),this.logger.debug("AnnotationPlugin","DocumentClosed",`Cleaned up annotation state for document: ${e}`)}registerHandlerFactories(){this.handlerFactories.set(_.CIRCLE,ef),this.handlerFactories.set(_.SQUARE,Qp),this.handlerFactories.set(_.STAMP,Jp),this.handlerFactories.set(_.POLYGON,Xp),this.handlerFactories.set(_.POLYLINE,Yp),this.handlerFactories.set(_.LINE,Zp),this.handlerFactories.set(_.INK,Gp),this.handlerFactories.set(_.FREETEXT,Vp)}registerBuiltInPatches(){this.patchRegistry.register(_.INK,tf),this.patchRegistry.register(_.LINE,nf),this.patchRegistry.register(_.POLYLINE,of),this.patchRegistry.register(_.POLYGON,rf)}async initialize(){var e,t;this.state.tools.forEach(n=>this.registerInteractionForTool(n)),this.history&&this.history.onHistoryChange(n=>{n.topic===this.ANNOTATION_HISTORY_TOPIC&&this.config.autoCommit!==!1&&this.commit(n.documentId)}),(e=this.interactionManager)==null||e.onModeChange(n=>{var o,i;const r=((o=this.state.tools.find(a=>(a.interaction.mode??a.id)===n.activeMode))==null?void 0:o.id)??null;r!==(((i=this.state.documents[n.documentId])==null?void 0:i.activeToolId)??null)&&n.documentId&&this.dispatch(Oa(n.documentId,r))}),(t=this.selection)==null||t.onEndSelection(({documentId:n})=>{var o,i,r;if(!this.checkPermission(n,N.ModifyAnnotations))return;const a=this.getActiveTool(n);if(!a||!a.interaction.textSelection)return;const s=(o=this.selection)==null?void 0:o.getFormattedSelection(),c=(i=this.selection)==null?void 0:i.getSelectedText();if(s&&c){for(const d of s)c.wait(u=>{const m=Ne();this.createAnnotation(d.pageIndex,{...a.defaults,rect:d.rect,segmentRects:d.segmentRects,pageIndex:d.pageIndex,created:new Date,id:m,custom:{text:u.join(`
`)}},void 0,n),this.getToolBehavior(a,"deactivateToolAfterCreate")&&this.setActiveTool(null,n),this.getToolBehavior(a,"selectAfterCreate")&&this.selectAnnotation(d.pageIndex,m,n)},Oe);(r=this.selection)==null||r.clear()}})}registerInteractionForTool(e){var t;(t=this.interactionManager)==null||t.registerMode({id:e.interaction.mode??e.id,scope:"page",exclusive:e.interaction.exclusive,cursor:e.interaction.cursor})}buildCapability(){return{getActiveTool:()=>this.getActiveTool(),setActiveTool:e=>this.setActiveTool(e),getState:()=>this.getDocumentState(),getPageAnnotations:e=>this.getPageAnnotations(e),getSelectedAnnotation:()=>this.getSelectedAnnotation(),getAnnotationById:e=>this.getAnnotationById(e),selectAnnotation:(e,t)=>this.selectAnnotation(e,t),deselectAnnotation:()=>this.deselectAnnotation(),importAnnotations:e=>this.importAnnotations(e),createAnnotation:(e,t,n)=>this.createAnnotation(e,t,n),updateAnnotation:(e,t,n)=>this.updateAnnotation(e,t,n),deleteAnnotation:(e,t)=>this.deleteAnnotation(e,t),renderAnnotation:e=>this.renderAnnotation(e),commit:()=>this.commit(),forDocument:e=>this.createAnnotationScope(e),getTools:()=>this.state.tools,getTool:e=>this.getTool(e),addTool:e=>{this.dispatch((t=>({type:cu,payload:t}))(e)),this.registerInteractionForTool(e)},findToolForAnnotation:e=>this.findToolForAnnotation(e),setToolDefaults:(e,t)=>this.dispatch(((n,o)=>({type:lu,payload:{toolId:n,patch:o}}))(e,t)),getColorPresets:()=>[...this.state.colorPresets],addColorPreset:e=>this.dispatch((t=>({type:su,payload:t}))(e)),transformAnnotation:(e,t)=>this.transformAnnotation(e,t),registerPatchFunction:(e,t)=>this.registerPatchFunction(e,t),onStateChange:this.state$.on,onActiveToolChange:this.activeTool$.on,onAnnotationEvent:this.events$.on,onToolsChange:this.toolsChange$.on}}createAnnotationScope(e){return{getState:()=>this.getDocumentState(e),getPageAnnotations:t=>this.getPageAnnotations(t,e),getSelectedAnnotation:()=>this.getSelectedAnnotation(e),getAnnotationById:t=>this.getAnnotationById(t,e),selectAnnotation:(t,n)=>this.selectAnnotation(t,n,e),deselectAnnotation:()=>this.deselectAnnotation(e),getActiveTool:()=>this.getActiveTool(e),setActiveTool:t=>this.setActiveTool(t,e),findToolForAnnotation:t=>this.findToolForAnnotation(t),importAnnotations:t=>this.importAnnotations(t,e),createAnnotation:(t,n,o)=>this.createAnnotation(t,n,o,e),updateAnnotation:(t,n,o)=>this.updateAnnotation(t,n,o,e),deleteAnnotation:(t,n)=>this.deleteAnnotation(t,n,e),renderAnnotation:t=>this.renderAnnotation(t,e),commit:()=>this.commit(e),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)}),onAnnotationEvent:t=>this.events$.on(n=>{n.documentId===e&&t(n)}),onActiveToolChange:t=>this.activeTool$.on(n=>{n.documentId===e&&t(n.tool)})}}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&(this.state$.emit({documentId:n,state:i}),o&&o.activeToolId!==i.activeToolId&&this.activeTool$.emit({documentId:n,tool:this.getActiveTool(n)}))}if(e.tools!==t.tools){for(const n in t.documents)this.activeTool$.emit({documentId:n,tool:this.getActiveTool(n)});this.toolsChange$.emit({tools:t.tools})}}registerPatchFunction(e,t){this.patchRegistry.register(e,t)}transformAnnotation(e,t){const n={type:t.type,changes:t.changes,metadata:t.metadata};return this.patchRegistry.transform(e,n)}registerPageHandlers(e,t,n,o){var i;const r=this.getCoreDocument(e),a=(i=r?.document)==null?void 0:i.pages[t];if(!a)return()=>{};if(!this.interactionManager)return()=>{};const s=[];for(const c of this.state.tools){if(!c.defaults.type)continue;const d=this.handlerFactories.get(c.defaults.type);if(!d)continue;const u={pageIndex:t,pageSize:a.size,scale:n,services:o.services,onPreview:h=>o.onPreview(c.id,h),onCommit:(h,g)=>{this.createAnnotation(t,h,g,e),this.getToolBehavior(c,"deactivateToolAfterCreate")&&this.setActiveTool(null,e),this.getToolBehavior(c,"selectAfterCreate")&&this.selectAnnotation(t,h.id,e)},getTool:()=>this.state.tools.find(h=>h.id===c.id)},m=this.interactionManager.registerHandlers({documentId:e,modeId:c.interaction.mode??c.id,handlers:d.create(u),pageIndex:t});s.push(m)}return()=>s.forEach(c=>c())}getDocumentState(e){const t=e??this.getActiveDocumentId(),n=this.state.documents[t];if(!n)throw new Error(`Annotation state not found for document: ${t}`);return n}getAllAnnotations(e,t){this.engine.getAllAnnotations(t).wait(n=>{this.dispatch(((i,r)=>({type:Qd,payload:{documentId:i,annotations:r}}))(e,n)),this.isInitialLoadComplete.set(e,!0);const o=this.importQueue.get(e);o&&o.length>0&&this.processImportQueue(e),this.events$.emit({type:"loaded",documentId:e,total:Object.values(n).reduce((i,r)=>i+r.length,0)})},Oe)}getPageAnnotations(e,t){const{pageIndex:n}=e,o=t??this.getActiveDocumentId(),i=this.getCoreDocument(o),r=i?.document;if(!r)return ge.reject({code:ee.NotFound,message:"Document not found"});const a=r.pages.find(s=>s.index===n);return a?this.engine.getPageAnnotations(r,a):ge.reject({code:ee.NotFound,message:"Page not found"})}getSelectedAnnotation(e){return(t=>t.selectedUid?t.byUid[t.selectedUid]:null)(this.getDocumentState(e))}getAnnotationById(e,t){const n=this.getDocumentState(t);return gr(n,e)}renderAnnotation({pageIndex:e,annotation:t,options:n},o){const i=o??this.getActiveDocumentId(),r=this.getCoreDocument(i),a=r?.document;if(!a)return ge.reject({code:ee.NotFound,message:"Document not found"});const s=a.pages.find(c=>c.index===e);return s?this.engine.renderPageAnnotation(a,s,t,n):ge.reject({code:ee.NotFound,message:"Page not found"})}importAnnotations(e,t){const n=t??this.getActiveDocumentId();if(!this.isInitialLoadComplete.get(n)){const o=this.importQueue.get(n)||[];return o.push(...e),void this.importQueue.set(n,o)}this.processImportItems(n,e)}processImportQueue(e){const t=this.importQueue.get(e);if(!t||t.length===0)return;const n=[...t];this.importQueue.set(e,[]),this.processImportItems(e,n)}processImportItems(e,t){const n=this.pendingContexts.get(e);if(n){for(const o of t){const{annotation:i,ctx:r}=o,a=i.pageIndex,s=i.id;this.dispatch(si(e,a,i)),r&&n.set(s,r)}this.config.autoCommit!==!1&&this.commit(e)}}createAnnotation(e,t,n,o){const i=o??this.getActiveDocumentId();if(!this.checkPermission(i,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","CreateAnnotation",`Cannot create annotation: document ${i} lacks ModifyAnnotations permission`);const r=t.id,a=this.pendingContexts.get(i);if(!a)return;const s={...t,author:t.author??this.config.annotationAuthor},c=()=>{this.dispatch(si(i,e,s)),n&&a.set(r,n),this.events$.emit({type:"create",documentId:i,annotation:s,pageIndex:e,ctx:n,committed:!1})};if(!this.history)return c(),void(this.config.autoCommit&&this.commit(i));const d={execute:c,undo:()=>{a.delete(r),this.dispatch(ai(i)),this.dispatch($a(i,e,r)),this.events$.emit({type:"delete",documentId:i,annotation:s,pageIndex:e,committed:!1})}};this.history.forDocument(i).register(d,this.ANNOTATION_HISTORY_TOPIC)}buildPatch(e,t){return"rect"in t?t:this.transformAnnotation(e,{type:"property-update",changes:t})}updateAnnotation(e,t,n,o){const i=o??this.getActiveDocumentId();if(!this.checkPermission(i,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","UpdateAnnotation",`Cannot update annotation: document ${i} lacks ModifyAnnotations permission`);const r=this.getDocumentState(i).byUid[t].object,a=this.buildPatch(r,{...n,author:n.author??this.config.annotationAuthor}),s=()=>{this.dispatch(La(i,e,t,a)),this.events$.emit({type:"update",documentId:i,annotation:r,pageIndex:e,patch:a,committed:!1})};if(!this.history)return s(),void(this.config.autoCommit!==!1&&this.commit(i));const c=Object.fromEntries(Object.keys(n).map(u=>[u,r[u]])),d={execute:s,undo:()=>{this.dispatch(La(i,e,t,c)),this.events$.emit({type:"update",documentId:i,annotation:r,pageIndex:e,patch:c,committed:!1})}};this.history.forDocument(i).register(d,this.ANNOTATION_HISTORY_TOPIC)}deleteAnnotation(e,t,n){var o;const i=n??this.getActiveDocumentId();if(!this.checkPermission(i,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","DeleteAnnotation",`Cannot delete annotation: document ${i} lacks ModifyAnnotations permission`);const r=(o=this.getDocumentState(i).byUid[t])==null?void 0:o.object;if(!r)return;const a=()=>{this.dispatch(ai(i)),this.dispatch($a(i,e,t)),this.events$.emit({type:"delete",documentId:i,annotation:r,pageIndex:e,committed:!1})};if(!this.history)return a(),void(this.config.autoCommit!==!1&&this.commit(i));const s={execute:a,undo:()=>{this.dispatch(si(i,e,r)),this.events$.emit({type:"create",documentId:i,annotation:r,pageIndex:e,committed:!1})}};this.history.forDocument(i).register(s,this.ANNOTATION_HISTORY_TOPIC)}selectAnnotation(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(((i,r,a)=>({type:Jd,payload:{documentId:i,pageIndex:r,id:a}}))(o,e,t))}deselectAnnotation(e){const t=e??this.getActiveDocumentId();this.dispatch(ai(t))}getActiveTool(e){const t=this.getDocumentState(e);return t.activeToolId?this.state.tools.find(n=>n.id===t.activeToolId)??null:null}setActiveTool(e,t){var n,o;const i=t??this.getActiveDocumentId();if(e!==null&&!this.checkPermission(i,N.ModifyAnnotations))return void this.logger.debug("AnnotationPlugin","SetActiveTool",`Cannot activate tool: document ${i} lacks ModifyAnnotations permission`);const r=this.getDocumentState(i);if(e===r.activeToolId)return;this.dispatch(Oa(i,e));const a=this.state.tools.find(s=>s.id===e);a?(n=this.interactionManager)==null||n.forDocument(i).activate(a.interaction.mode??a.id):(o=this.interactionManager)==null||o.forDocument(i).activateDefaultMode()}getTool(e){return this.state.tools.find(t=>t.id===e)}findToolForAnnotation(e){let t=null,n=0;for(const o of this.state.tools){const i=o.matchScore(e);i>n&&(n=i,t=o)}return t}commit(e){const t=new Ce,n=e??this.getActiveDocumentId(),o=this.getDocumentState(n);if(!o.hasPendingChanges)return ge.resolve(!0);const i=this.getCoreDocument(n),r=i?.document;if(!r)return ge.reject({code:ee.NotFound,message:"Document not found"});const a=this.pendingContexts.get(n);if(!a)return ge.resolve(!0);const s=[],c=[],d=[];for(const[h,g]of Object.entries(o.byUid)){if(g.commitState==="synced")continue;const p=r.pages.find(f=>f.index===g.object.pageIndex);if(p)switch(g.commitState){case"new":const f=a.get(g.object.id),v=this.engine.createPageAnnotation(r,p,g.object,f);v.wait(()=>{this.events$.emit({type:"create",documentId:n,annotation:g.object,pageIndex:g.object.pageIndex,ctx:f,committed:!0}),a.delete(g.object.id)},Oe),s.push(v);break;case"dirty":const y=this.engine.updatePageAnnotation(r,p,g.object);y.wait(()=>{this.events$.emit({type:"update",documentId:n,annotation:g.object,pageIndex:g.object.pageIndex,patch:g.object,committed:!0})},Oe),c.push(y);break;case"deleted":d.push({ta:g,uid:h})}}const u=[];for(const{ta:h,uid:g}of d){const p=r.pages.find(f=>f.index===h.object.pageIndex);if(h.commitState==="deleted"&&h.object.id){const f=new Ce;this.engine.removePageAnnotation(r,p,h.object).wait(()=>{this.dispatch(Fa(n,g)),this.events$.emit({type:"delete",documentId:n,annotation:h.object,pageIndex:h.object.pageIndex,committed:!0}),f.resolve(!0)},f.fail),u.push(f)}else this.dispatch(Fa(n,g))}const m=[...s,...c,...u];return Ce.allSettled(m).wait(()=>{this.dispatch((h=>({type:ru,payload:{documentId:h}}))(n)),t.resolve(!0)},t.fail),t}getToolBehavior(e,t){var n;return((n=e.behavior)==null?void 0:n[t])!==void 0?e.behavior[t]:this.config[t]!==!1}};ku.id="annotation";let fr=ku;function Ko(e){return t=>t?.id===e}const af=Ko("highlight"),sf=Ko("squiggly"),lf=Ko("underline"),cf=Ko("strikeout"),df={manifest:Hp,create:(e,t)=>new fr(ye,e,t),reducer:(e,t)=>{switch(t.type){case Yd:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case Xd:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"ANNOTATION/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Qd:{const{documentId:n,annotations:o}=t.payload,i=e.documents[n];if(!i)return e;const r={},a={};for(const[s,c]of Object.entries(o)){const d=Number(s),u=i.pages[d]||[];for(const h of u)delete a[h];const m=c.map(h=>{const g=h.id;return a[g]={commitState:"synced",object:h},g});r[d]=m}return{...e,documents:{...e.documents,[n]:{...i,pages:r,byUid:a}}}}case Jd:{const{documentId:n,id:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,selectedUid:o}}}:e}case eu:{const{documentId:n}=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,selectedUid:null}}}:e}case tu:{const{documentId:n,toolId:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeToolId:o}}}:e}case nu:{const{documentId:n,pageIndex:o,annotation:i}=t.payload,r=e.documents[n];if(!r)return e;const a=i.id;return{...e,documents:{...e.documents,[n]:{...r,pages:{...r.pages,[o]:[...r.pages[o]??[],a]},byUid:{...r.byUid,[a]:{commitState:"new",object:i}},hasPendingChanges:!0}}}}case iu:{const{documentId:n,pageIndex:o,id:i}=t.payload,r=e.documents[n];return r&&r.byUid[i]?{...e,documents:{...e.documents,[n]:{...r,pages:{...r.pages,[o]:(r.pages[o]??[]).filter(a=>a!==i)},byUid:{...r.byUid,[i]:{...r.byUid[i],commitState:"deleted"}},hasPendingChanges:!0}}}:e}case ou:{const{documentId:n,id:o,patch:i}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:qp(r,o,i)}}:e}case ru:{const{documentId:n}=t.payload,o=e.documents[n];if(!o)return e;const i={};for(const[r,a]of Object.entries(o.byUid))i[r]={...a,commitState:a.commitState==="dirty"||a.commitState==="new"?"synced":a.commitState};return{...e,documents:{...e.documents,[n]:{...o,byUid:i,hasPendingChanges:!1}}}}case au:{const{documentId:n,uid:o}=t.payload,i=e.documents[n];if(!i)return e;const{[o]:r,...a}=i.byUid;return{...e,documents:{...e.documents,[n]:{...i,byUid:a}}}}case cu:{const n=new Map(e.tools.map(o=>[o.id,o]));return n.set(t.payload.id,t.payload),{...e,tools:Array.from(n.values())}}case lu:{const{toolId:n,patch:o}=t.payload;return{...e,tools:e.tools.map(i=>i.id===n?{...i,defaults:{...i.defaults,...o}}:i)}}case su:return e.colorPresets.includes(t.payload)?e:{...e,colorPresets:[...e.colorPresets,t.payload]};default:return e}},initialState:(e,t)=>(n=>{const o=new Map;return Wp.forEach(i=>o.set(i.id,i)),(n.tools||[]).forEach(i=>o.set(i.id,i)),{documents:{},activeDocumentId:null,tools:Array.from(o.values()),colorPresets:n.colorPresets??Bp}})(t)},Su="INTERACTION/INIT_STATE",Pu="INTERACTION/CLEANUP_STATE",Du="INTERACTION/ACTIVATE_MODE",Mu="INTERACTION/PAUSE",Au="INTERACTION/RESUME",zu="INTERACTION/SET_CURSOR",Tu="INTERACTION/SET_DEFAULT_MODE",Eu="INTERACTION/SET_EXCLUSION_RULES",_u="INTERACTION/ADD_EXCLUSION_CLASS",Ru="INTERACTION/REMOVE_EXCLUSION_CLASS",Nu="INTERACTION/ADD_EXCLUSION_ATTRIBUTE",Ou="INTERACTION/REMOVE_EXCLUSION_ATTRIBUTE";function qa(e){return{type:Tu,payload:{mode:e}}}function Ga(e){return{type:Eu,payload:{rules:e}}}const Va="pointerMode",Lu=class extends Me{constructor(e,t,n){super(e,t),this.modes=new Map,this.cursorClaims=new Map,this.buckets=new Map,this.alwaysGlobal=new Map,this.alwaysPage=new Map,this.onModeChange$=Ye(),this.onHandlerChange$=Ye(),this.onCursorChange$=Ye(),this.onStateChange$=re(),this.registerMode({id:Va,scope:"page",exclusive:!1,cursor:"auto"}),this.dispatch(qa(Va)),n.exclusionRules&&this.dispatch(Ga(n.exclusionRules))}onDocumentLoadingStarted(e){const t={activeMode:this.state.defaultMode,cursor:"auto",paused:!1};this.dispatch((function(o,i){return{type:Su,payload:{documentId:o,state:i}}})(e,t)),this.cursorClaims.set(e,new Map),this.buckets.set(e,new Map),this.alwaysGlobal.set(e,new Set),this.alwaysPage.set(e,new Map);const n=this.buckets.get(e);for(const o of this.modes.keys())n.set(o,{global:new Set,page:new Map});this.logger.debug("InteractionManagerPlugin","DocumentOpened",`Initialized interaction state for document: ${e}`)}onDocumentClosed(e){this.cursorClaims.delete(e),this.buckets.delete(e),this.alwaysGlobal.delete(e),this.alwaysPage.delete(e),this.dispatch((function(t){return{type:Pu,payload:t}})(e)),this.logger.debug("InteractionManagerPlugin","DocumentClosed",`Cleaned up interaction state for document: ${e}`)}buildCapability(){return{getActiveMode:()=>this.getActiveMode(),getActiveInteractionMode:()=>this.getActiveInteractionMode(),activate:e=>this.activate(e),activateDefaultMode:()=>this.activateDefaultMode(),setCursor:(e,t,n)=>this.setCursor(e,t,n),getCurrentCursor:()=>this.getCurrentCursor(),removeCursor:e=>this.removeCursor(e),getHandlersForScope:e=>this.getHandlersForScope(e),activeModeIsExclusive:()=>this.activeModeIsExclusive(),pause:()=>this.pause(),resume:()=>this.resume(),isPaused:()=>this.registry.isDestroyed()||this.isPaused(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createInteractionScope(e),registerMode:e=>this.registerMode(e),registerHandlers:e=>this.registerHandlers(e),registerAlways:e=>this.registerAlways(e),setDefaultMode:e=>this.setDefaultMode(e),getDefaultMode:()=>this.state.defaultMode,getExclusionRules:()=>this.state.exclusionRules,setExclusionRules:e=>this.dispatch(Ga(e)),addExclusionClass:e=>this.dispatch((function(t){return{type:_u,payload:{className:t}}})(e)),removeExclusionClass:e=>this.dispatch((function(t){return{type:Ru,payload:{className:t}}})(e)),addExclusionAttribute:e=>this.dispatch((function(t){return{type:Nu,payload:{attribute:t}}})(e)),removeExclusionAttribute:e=>this.dispatch((function(t){return{type:Ou,payload:{attribute:t}}})(e)),onModeChange:this.onModeChange$.on,onCursorChange:this.onCursorChange$.on,onHandlerChange:this.onHandlerChange$.on,onStateChange:this.onStateChange$.on}}createInteractionScope(e){return{getActiveMode:()=>this.getActiveMode(e),getActiveInteractionMode:()=>this.getActiveInteractionMode(e),activate:t=>this.activate(t,e),activateDefaultMode:()=>this.activateDefaultMode(e),setCursor:(t,n,o)=>this.setCursor(t,n,o,e),getCurrentCursor:()=>this.getCurrentCursor(e),removeCursor:t=>this.removeCursor(t,e),getHandlersForScope:t=>this.getHandlersForScope(t),activeModeIsExclusive:()=>this.activeModeIsExclusive(e),pause:()=>this.pause(e),resume:()=>this.resume(e),isPaused:()=>this.isPaused(e),getState:()=>this.getDocumentStateOrThrow(e),onModeChange:t=>this.onModeChange$.on(n=>{n.documentId===e&&t(n.activeMode)}),onCursorChange:t=>this.onCursorChange$.on(n=>{n.documentId===e&&t(n.cursor)}),onStateChange:t=>this.onStateChange$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Interaction state not found for document: ${e??"active"}`);return t}activate(e,t){var n;const o=t??this.getActiveDocumentId(),i=this.getDocumentStateOrThrow(o);if(!this.modes.has(e))throw new Error(`[interaction] unknown mode '${e}'`);if(e===i.activeMode)return;const r=i.activeMode;(n=this.cursorClaims.get(o))==null||n.clear(),this.notifyHandlersInactive(o,r),this.dispatch((function(a,s){return{type:Du,payload:{documentId:a,mode:s}}})(o,e)),this.emitCursor(o),this.notifyHandlersActive(o,e),this.onModeChange$.emit({documentId:o,activeMode:e,previousMode:r})}activateDefaultMode(e){const t=e??this.getActiveDocumentIdOrNull();t&&this.activate(this.state.defaultMode,t)}setDefaultMode(e){if(!this.modes.has(e))throw new Error(`[interaction] cannot set unknown mode '${e}' as default`);this.dispatch(qa(e))}getActiveMode(e){return this.getDocumentStateOrThrow(e).activeMode}getActiveInteractionMode(e){const t=this.getDocumentState(e);return t?this.modes.get(t.activeMode)??null:null}activeModeIsExclusive(e){const t=this.getActiveInteractionMode(e);return!!t?.exclusive}pause(e){const t=e??this.getActiveDocumentId();this.dispatch((function(n){return{type:Mu,payload:n}})(t))}resume(e){const t=e??this.getActiveDocumentId();this.dispatch((function(n){return{type:Au,payload:n}})(t))}isPaused(e){return this.getDocumentStateOrThrow(e).paused}registerMode(e){this.modes.set(e.id,e);for(const t of this.buckets.keys()){const n=this.buckets.get(t);n.has(e.id)||n.set(e.id,{global:new Set,page:new Map})}}registerHandlers({documentId:e,modeId:t,handlers:n,pageIndex:o}){const i=Array.isArray(t)?t:[t],r=[],a=this.buckets.get(e);if(!a)throw new Error(`No buckets found for document: ${e}`);for(const s of i){const c=a.get(s);if(!c)throw new Error(`unknown mode '${s}'`);if(o==null)c.global.add(n);else{const d=c.page.get(o)??new Set;d.add(n),c.page.set(o,d)}r.push(()=>{if(o==null)c.global.delete(n);else{const d=c.page.get(o);d&&(d.delete(n),d.size===0&&c.page.delete(o))}})}return this.onHandlerChange$.emit({...this.state}),()=>{r.forEach(s=>s()),this.onHandlerChange$.emit({...this.state})}}registerAlways({scope:e,handlers:t}){if(e.type==="global"){const i=this.alwaysGlobal.get(e.documentId)??new Set;return i.add(t),this.alwaysGlobal.set(e.documentId,i),this.onHandlerChange$.emit({...this.state}),()=>{i.delete(t),this.onHandlerChange$.emit({...this.state})}}const n=this.alwaysPage.get(e.documentId)??new Map,o=n.get(e.pageIndex)??new Set;return o.add(t),n.set(e.pageIndex,o),this.alwaysPage.set(e.documentId,n),this.onHandlerChange$.emit({...this.state}),()=>{o.delete(t),this.onHandlerChange$.emit({...this.state})}}getHandlersForScope(e){var t;const n=this.getDocumentState(e.documentId);if(!n)return null;const o=this.modes.get(n.activeMode);if(!o)return null;const i=this.buckets.get(e.documentId);if(!i)return null;const r=i.get(o.id);if(!r)return null;const a=(s,c)=>s.size||c.size?(function(d){const u=["onPointerDown","onPointerUp","onPointerMove","onPointerEnter","onPointerLeave","onPointerCancel","onMouseDown","onMouseUp","onMouseMove","onMouseEnter","onMouseLeave","onMouseCancel","onClick","onDoubleClick"],m={};for(const h of u)m[h]=(g,p,f)=>{var v;for(const y of d)(v=y[h])==null||v.call(y,g,p,f)};return m})([...s,...c]):null;return e.type==="global"?a(this.alwaysGlobal.get(e.documentId)??new Set,o.scope==="global"?r.global:new Set):a(((t=this.alwaysPage.get(e.documentId))==null?void 0:t.get(e.pageIndex))??new Set,o.scope==="page"?r.page.get(e.pageIndex)??new Set:new Set)}setCursor(e,t,n=0,o){const i=o??this.getActiveDocumentId(),r=this.cursorClaims.get(i);r&&(r.set(e,{cursor:t,priority:n}),this.emitCursor(i))}removeCursor(e,t){const n=t??this.getActiveDocumentId(),o=this.cursorClaims.get(n);o&&(o.delete(e),this.emitCursor(n))}getCurrentCursor(e){return this.getDocumentStateOrThrow(e).cursor}emitCursor(e){var t;const n=this.cursorClaims.get(e);if(!n)return;const o=this.getDocumentState(e);if(!o)return;const i=[...n.values()].sort((r,a)=>a.priority-r.priority)[0]??{cursor:((t=this.modes.get(o.activeMode))==null?void 0:t.cursor)??"auto"};i.cursor!==o.cursor&&(this.dispatch((function(r,a){return{type:zu,payload:{documentId:r,cursor:a}}})(e,i.cursor)),this.onCursorChange$.emit({documentId:e,cursor:i.cursor}))}notifyHandlersActive(e,t){var n,o;(n=this.alwaysGlobal.get(e))==null||n.forEach(s=>{var c;(c=s.onHandlerActiveStart)==null||c.call(s,t)}),(o=this.alwaysPage.get(e))==null||o.forEach(s=>{s.forEach(c=>{var d;(d=c.onHandlerActiveStart)==null||d.call(c,t)})});const i=this.modes.get(t);if(!i)return;const r=this.buckets.get(e);if(!r)return;const a=r.get(t);a&&(i.scope==="global"&&a.global.forEach(s=>{var c;(c=s.onHandlerActiveStart)==null||c.call(s,t)}),i.scope==="page"&&a.page.forEach(s=>{s.forEach(c=>{var d;(d=c.onHandlerActiveStart)==null||d.call(c,t)})}))}notifyHandlersInactive(e,t){var n,o;(n=this.alwaysGlobal.get(e))==null||n.forEach(s=>{var c;(c=s.onHandlerActiveEnd)==null||c.call(s,t)}),(o=this.alwaysPage.get(e))==null||o.forEach(s=>{s.forEach(c=>{var d;(d=c.onHandlerActiveEnd)==null||d.call(c,t)})});const i=this.modes.get(t);if(!i)return;const r=this.buckets.get(e);if(!r)return;const a=r.get(t);a&&(i.scope==="global"&&a.global.forEach(s=>{var c;(c=s.onHandlerActiveEnd)==null||c.call(s,t)}),i.scope==="page"&&a.page.forEach(s=>{s.forEach(c=>{var d;(d=c.onHandlerActiveEnd)==null||d.call(c,t)})}))}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o!==i&&this.onStateChange$.emit({documentId:n,state:i})}}async initialize(e){this.logger.info("InteractionManagerPlugin","Initialize","Interaction Manager Plugin initialized")}async destroy(){this.onModeChange$.clear(),this.onCursorChange$.clear(),this.onHandlerChange$.clear(),this.onStateChange$.clear(),await super.destroy()}};Lu.id="interaction-manager";let vr=Lu;const Ka="interaction-manager",Za={defaultMode:"pointerMode",exclusionRules:{classes:[],dataAttributes:["data-no-interaction"]},documents:{},activeDocumentId:null},uf={manifest:{id:Ka,name:"Interaction Manager Plugin",version:"1.0.0",provides:["interaction-manager"],requires:[],optional:[],defaultConfig:{exclusionRules:{classes:[],dataAttributes:["data-no-interaction"]}}},create:(e,t)=>new vr(Ka,e,t),reducer:(e=Za,t)=>{switch(t.type){case Su:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case Pu:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"INTERACTION/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Du:{const{documentId:n,mode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeMode:o}}}:e}case zu:{const{documentId:n,cursor:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,cursor:o}}}:e}case Mu:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,paused:!0}}}:e}case Au:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,paused:!1}}}:e}case Tu:return{...e,defaultMode:t.payload.mode};case Eu:return{...e,exclusionRules:t.payload.rules};case _u:return{...e,exclusionRules:{...e.exclusionRules,classes:[...e.exclusionRules.classes||[],t.payload.className].filter((n,o,i)=>i.indexOf(n)===o)}};case Ru:return{...e,exclusionRules:{...e.exclusionRules,classes:(e.exclusionRules.classes||[]).filter(n=>n!==t.payload.className)}};case Nu:return{...e,exclusionRules:{...e.exclusionRules,dataAttributes:[...e.exclusionRules.dataAttributes||[],t.payload.attribute].filter((n,o,i)=>i.indexOf(n)===o)}};case Ou:return{...e,exclusionRules:{...e.exclusionRules,dataAttributes:(e.exclusionRules.dataAttributes||[]).filter(n=>n!==t.payload.attribute)}};default:return e}},initialState:Za},Fn=()=>Le(vr.id),mf={pointerdown:"onPointerDown",pointerup:"onPointerUp",pointermove:"onPointerMove",pointerenter:"onPointerEnter",pointerleave:"onPointerLeave",pointercancel:"onPointerCancel",mousedown:"onMouseDown",mouseup:"onMouseUp",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousecancel:"onMouseCancel",click:"onClick",dblclick:"onDoubleClick",touchstart:"onPointerDown",touchend:"onPointerUp",touchmove:"onPointerMove",touchcancel:"onPointerCancel"},Ya=["pointerdown","pointerup","pointermove","pointerenter","pointerleave","pointercancel","mousedown","mouseup","mousemove","mouseenter","mouseleave","mousecancel","click","dblclick"],Xa=typeof PointerEvent<"u"?Ya:[...Ya,"touchstart","touchend","touchmove","touchcancel"];function Qa(e){return typeof TouchEvent<"u"&&e instanceof TouchEvent}function $u(e,t,n,o){const i=e.forDocument(t.documentId);let r=e.getHandlersForScope(t);const a=()=>{var b;return((b=i.getActiveInteractionMode())==null?void 0:b.wantsRawTouch)!==!1},s={};let c=a();const d=b=>{Xa.forEach(x=>{const w=s[x]??(s[x]=y);var C;n.addEventListener(x,w,(C=b,x.startsWith("touch")?{passive:!C}:{passive:!1}))})},u=()=>{Xa.forEach(b=>{const x=s[b];x&&n.removeEventListener(b,x)})};d(c),n.style.touchAction=c?"none":"";const m=i.onModeChange(()=>{if(t.type==="global"){const x=i.getActiveInteractionMode();n.style.cursor=x?.scope==="global"?x.cursor??"auto":"auto"}r=e.getHandlersForScope(t);const b=a();b!==c&&(u(),d(b),c=b,n.style.touchAction=c?"none":"")}),h=e.onHandlerChange(()=>{r=e.getHandlersForScope(t)}),g=i.getActiveInteractionMode(),p=i.getCurrentCursor();n.style.cursor=t.type==="global"&&g?.scope!=="global"?"auto":p;const f=i.onCursorChange(b=>{var x;t.type==="global"&&((x=i.getActiveInteractionMode())==null?void 0:x.scope)!=="global"||(n.style.cursor=b)}),v=(b,x)=>{if(o)return o(b,x);const w=x.getBoundingClientRect();return{x:b.clientX-w.left,y:b.clientY-w.top}};function y(b){var x;if(e.isPaused())return;const w=e.getExclusionRules();if(b.target&&(function(S,M){var P,E,A;if(!S)return!1;let j=S;for(;j;){if((P=M.classes)!=null&&P.length){for(const L of M.classes)if((E=j.classList)!=null&&E.contains(L))return!0}if((A=M.dataAttributes)!=null&&A.length){for(const L of M.dataAttributes)if(j.hasAttribute(L))return!0}j=j.parentElement}return!1})(b.target,w))return;const C=mf[b.type];if(!C||!r?.[C])return;let I,k;if(Qa(b)&&c&&(b.type==="touchmove"||b.type==="touchcancel")&&b.preventDefault(),Qa(b)){const S=b.type==="touchend"||b.type==="touchcancel"?b.changedTouches[0]:b.touches[0];if(!S)return;I=v(S,n),k={clientX:S.clientX,clientY:S.clientY,ctrlKey:b.ctrlKey,shiftKey:b.shiftKey,altKey:b.altKey,metaKey:b.metaKey,target:b.target,currentTarget:b.currentTarget,setPointerCapture:()=>{},releasePointerCapture:()=>{}}}else{const S=b;I=v(S,n),k={clientX:S.clientX,clientY:S.clientY,ctrlKey:S.ctrlKey,shiftKey:S.shiftKey,altKey:S.altKey,metaKey:S.metaKey,target:S.target,currentTarget:S.currentTarget,setPointerCapture:()=>{var M,P;(P=(M=S.target)==null?void 0:M.setPointerCapture)==null||P.call(M,S.pointerId)},releasePointerCapture:()=>{var M,P;(P=(M=S.target)==null?void 0:M.releasePointerCapture)==null||P.call(M,S.pointerId)}}}(x=r[C])==null||x.call(r,I,k,i.getActiveMode())}return()=>{u(),m(),f(),h()}}const hf=({children:e,documentId:t,style:n,...o})=>{const i=K(null),{provides:r}=Fn();return T(()=>{if(r&&i.current)return $u(r,{type:"global",documentId:t},i.current)},[r,t]),D("div",{ref:i,style:{width:"100%",height:"100%",...n},...o,children:e})},gf=({documentId:e,pageIndex:t,children:n,rotation:o,scale:i,convertEventToPoint:r,style:a,...s})=>{var c,d;const u=K(null),{provides:m}=Fn(),h=(function(w){const{provides:C}=Fn(),[I,k]=z(()=>{if(!C)return!1;const S=C.forDocument(w).getActiveInteractionMode();return S?.scope==="page"&&!!S.exclusive});return T(()=>{if(!C)return;const S=C.forDocument(w);return S.onModeChange(()=>{const M=S.getActiveInteractionMode();k(M?.scope==="page"&&!!M?.exclusive)})},[C,w]),I})(e),g=Xe(e),p=(d=(c=g?.document)==null?void 0:c.pages)==null?void 0:d[t],f=p?.size??{width:0,height:0},v=o??g?.rotation??0,y=i??g?.scale??1,b=Co(f,0,y),x=te((w,C)=>{const I=C.getBoundingClientRect(),k={x:w.clientX-I.left,y:w.clientY-I.top};return(function(S,M,P,E){return po(fl(S,M,(4-P)%4),1/E)})(Co({width:b.width,height:b.height},v,1),k,v,y)},[f,v,y]);return T(()=>{if(m&&u.current)return $u(m,{type:"page",documentId:e,pageIndex:t},u.current,r||x)},[m,e,t,r,x]),D("div",{ref:u,style:{position:"relative",width:b.width,height:b.height,...a},...s,children:[n,h&&D("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10}})]})},pf={},at=()=>Le(fr.id),Fu=e=>{var t;const{provides:n}=at(),[o,i]=z(((t=n?.forDocument(e))==null?void 0:t.getState())??{pages:{},byUid:{},selectedUid:null,activeToolId:null,hasPendingChanges:!1});return T(()=>{if(!n)return;const r=n.forDocument(e);return i(r.getState()),r.onStateChange(a=>{i(a)})},[n,e]),{state:o,provides:n?.forDocument(e)??null}};function ut({scale:e,documentId:t,pageIndex:n,rotation:o,pageWidth:i,pageHeight:r,trackedAnnotation:a,children:s,isSelected:c,isDraggable:d,isResizable:u,lockAspectRatio:m=!1,style:h={},vertexConfig:g,selectionMenu:p,outlineOffset:f=1,onDoubleClick:v,onSelect:y,zIndex:b=1,resizeUI:x,vertexUI:w,selectionOutlineColor:C="#007ACC",customAnnotationRenderer:I,...k}){const[S,M]=z(a.object),{provides:P}=at(),{canModifyAnnotations:E}=Ml(t),A=K(null),j=E&&d,L=E&&u,H=X(()=>P?P.forDocument(t):null,[P,t]),R=S?{...a.object,...S}:a.object,U=x?.color??"#007ACC",F=w?.color??"#007ACC",V=x?.size??12,de=w?.size??12,{dragProps:oe,vertices:he,resize:me}=Mp({controller:{element:R.rect,vertices:g?.extractVertices(R),constraints:{minWidth:10,minHeight:10,boundingBox:{width:i,height:r}},maintainAspectRatio:m,pageRotation:o,scale:e,enabled:c,onUpdate:le=>{var we;if(!((we=le.transformData)!=null&&we.type))return;le.state==="start"&&(A.current=R);const Ae=le.transformData.type,He=A.current??R,Qe=le.transformData.changes.vertices?g?.transformAnnotation(He,le.transformData.changes.vertices):{rect:le.transformData.changes.rect},Ee=P?.transformAnnotation(He,{type:Ae,changes:Qe,metadata:le.transformData.metadata});Ee&&M(_e=>({..._e,...Ee})),le.state==="end"&&Ee&&(A.current=null,H?.updateAnnotation(n,a.object.id,Ee))}},resizeUI:{handleSize:V,spacing:f,offsetMode:"outside",includeSides:!m,zIndex:b+1},vertexUI:{vertexSize:de,zIndex:b+2},includeVertices:!!g}),G=(function(le,{delay:we=300,tolerancePx:Ae=18}={}){const He=K({t:0,x:0,y:0}),Qe=te(_e=>{if(!le||_e.pointerType==="mouse"||_e.isPrimary===!1)return;const Be=performance.now(),ie=_e.clientX,ne=_e.clientY,pe=Be-He.current.t<=we,fe=ie-He.current.x,Se=ne-He.current.y;pe&&fe*fe+Se*Se<=Ae*Ae&&le?.(_e),He.current={t:Be,x:ie,y:ne}},[le,we,Ae]),Ee=te(_e=>{le?.(_e)},[le]);return le?{[kp]:Ee,onPointerUpCapture:Qe}:{}})(X(()=>{if(E&&v)return v},[E,v]));return T(()=>{M(a.object)},[a.object]),D("div",{"data-no-interaction":!0,children:[D("div",{...j&&c?oe:{},...G,style:{position:"absolute",left:R.rect.origin.x*e,top:R.rect.origin.y*e,width:R.rect.size.width*e,height:R.rect.size.height*e,outline:c?`1px solid ${C}`:"none",outlineOffset:c?`${f}px`:"0px",pointerEvents:c?"auto":"none",touchAction:"none",cursor:c&&j?"move":"default",zIndex:b,...h},...k,children:[(()=>{const le=typeof s=="function"?s(R):s,we=I?.({annotation:R,children:le,isSelected:c,scale:e,rotation:o,pageWidth:i,pageHeight:r,pageIndex:n,onSelect:y});return we??le})(),c&&L&&me.map(({key:le,...we})=>x?.component?x.component({key:le,...we,backgroundColor:U}):D("div",{...we,style:{...we.style,backgroundColor:U}},le)),c&&E&&he.map(({key:le,...we})=>w?.component?w.component({key:le,...we,backgroundColor:F}):D("div",{...we,style:{...we.style,backgroundColor:F}},le))]}),p&&D(Ao,{rect:{origin:{x:R.rect.origin.x*e,y:R.rect.origin.y*e},size:{width:R.rect.size.width*e,height:R.rect.size.height*e}},rotation:o,children:le=>p({...le,context:{type:"annotation",annotation:a,pageIndex:n},selected:c,placement:{suggestTop:!1}})})]})}function ju({color:e="#FFFF00",opacity:t=.5,segmentRects:n,rect:o,scale:i,onClick:r,style:a}){return D(Y,{children:n.map((s,c)=>D("div",{onPointerDown:r,onTouchStart:r,style:{position:"absolute",left:(o?s.origin.x-o.origin.x:s.origin.x)*i,top:(o?s.origin.y-o.origin.y:s.origin.y)*i,width:s.size.width*i,height:s.size.height*i,background:e,opacity:t,pointerEvents:r?"auto":"none",cursor:r?"pointer":"default",zIndex:r?1:void 0,...a}},c))})}function Hu({color:e="#FFFF00",opacity:t=.5,segmentRects:n,rect:o,scale:i,onClick:r,style:a}){const s=2*i;return D(Y,{children:n.map((c,d)=>D("div",{onPointerDown:r,onTouchStart:r,style:{position:"absolute",left:(o?c.origin.x-o.origin.x:c.origin.x)*i,top:(o?c.origin.y-o.origin.y:c.origin.y)*i,width:c.size.width*i,height:c.size.height*i,background:"transparent",pointerEvents:r?"auto":"none",cursor:r?"pointer":"default",zIndex:r?1:0,...a},children:D("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:s,background:e,opacity:t,pointerEvents:"none"}})},d))})}function Uu({color:e="#FFFF00",opacity:t=.5,segmentRects:n,rect:o,scale:i,onClick:r,style:a}){const s=2*i;return D(Y,{children:n.map((c,d)=>D("div",{onPointerDown:r,onTouchStart:r,style:{position:"absolute",left:(o?c.origin.x-o.origin.x:c.origin.x)*i,top:(o?c.origin.y-o.origin.y:c.origin.y)*i,width:c.size.width*i,height:c.size.height*i,background:"transparent",pointerEvents:r?"auto":"none",cursor:r?"pointer":"default",zIndex:r?1:0,...a},children:D("div",{style:{position:"absolute",left:0,top:"50%",width:"100%",height:s,background:e,opacity:t,transform:"translateY(-50%)",pointerEvents:"none"}})},d))})}function Wu({color:e="#FFFF00",opacity:t=.5,segmentRects:n,rect:o,scale:i,onClick:r,style:a}){const s=2*i,c=6*i,d=`url("data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="${c}" height="${2*s}" viewBox="0 0 ${c} ${2*s}">
      <path d="M0 ${s} Q ${c/4} 0 ${c/2} ${s} T ${c} ${s}"
            fill="none" stroke="${e}" stroke-width="${s}" stroke-linecap="round"/>
    </svg>`)}")`;return D(Y,{children:n.map((u,m)=>D("div",{onPointerDown:r,onTouchStart:r,style:{position:"absolute",left:(o?u.origin.x-o.origin.x:u.origin.x)*i,top:(o?u.origin.y-o.origin.y:u.origin.y)*i,width:u.size.width*i,height:u.size.height*i,background:"transparent",pointerEvents:r?"auto":"none",cursor:r?"pointer":"default",zIndex:r?1:0,...a},children:D("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:2*s,backgroundImage:d,backgroundRepeat:"repeat-x",backgroundSize:`${c}px ${2*s}px`,opacity:t,pointerEvents:"none"}})},m))})}function Bu({isSelected:e,color:t="#000000",opacity:n=1,strokeWidth:o,inkList:i,rect:r,scale:a,onClick:s}){const c=X(()=>i.map(({points:m})=>{let h="";return m.forEach(({x:g,y:p},f)=>{const v=g-r.origin.x,y=p-r.origin.y;h+=(f===0?"M":"L")+v+" "+y+" "}),h.trim()}),[i,r]),d=r.size.width*a,u=r.size.height*a;return D("svg",{style:{position:"absolute",width:d,height:u,pointerEvents:"none",zIndex:2,overflow:"visible"},width:d,height:u,viewBox:`0 0 ${r.size.width} ${r.size.height}`,children:c.map((m,h)=>D("path",{d:m,fill:"none",opacity:n,onPointerDown:s,onTouchStart:s,style:{cursor:e?"move":"pointer",pointerEvents:e?"none":"visibleStroke",stroke:t,strokeWidth:o,strokeLinecap:"round",strokeLinejoin:"round"}},h))})}function qu({isSelected:e,color:t="#000000",strokeColor:n,opacity:o=1,strokeWidth:i,strokeStyle:r=Ie.SOLID,strokeDashArray:a,rect:s,scale:c,onClick:d}){const{width:u,height:m,x:h,y:g}=X(()=>{const v=s.size.width,y=s.size.height;return{width:Math.max(v-i,0),height:Math.max(y-i,0),x:i/2,y:i/2}},[s,i]),p=(u+i)*c,f=(m+i)*c;return D("svg",{style:{position:"absolute",width:p,height:f,pointerEvents:"none",zIndex:2},width:p,height:f,viewBox:`0 0 ${u+i} ${m+i}`,children:D("rect",{x:h,y:g,width:u,height:m,fill:t,opacity:o,onPointerDown:d,onTouchStart:d,style:{cursor:e?"move":"pointer",pointerEvents:e?"none":t==="transparent"?"visibleStroke":"visible",stroke:n??t,strokeWidth:i,...r===Ie.DASHED&&{strokeDasharray:a?.join(",")}}})})}function Gu({color:e="#000000",strokeColor:t,opacity:n=1,strokeWidth:o,strokeStyle:i=Ie.SOLID,strokeDashArray:r,rect:a,scale:s,onClick:c,isSelected:d}){const{width:u,height:m,cx:h,cy:g,rx:p,ry:f}=X(()=>{const b=a.size.width,x=a.size.height,w=Math.max(b-o,0),C=Math.max(x-o,0);return{width:b,height:x,cx:o/2+w/2,cy:o/2+C/2,rx:w/2,ry:C/2}},[a,o]),v=u*s,y=m*s;return D("svg",{style:{position:"absolute",width:v,height:y,pointerEvents:"none",zIndex:2},width:v,height:y,viewBox:`0 0 ${u} ${m}`,children:D("ellipse",{cx:h,cy:g,rx:p,ry:f,fill:e,opacity:n,onPointerDown:c,onTouchStart:c,style:{cursor:d?"move":"pointer",pointerEvents:d?"none":e==="transparent"?"visibleStroke":"visible",stroke:t??e,strokeWidth:o,...i===Ie.DASHED&&{strokeDasharray:r?.join(",")}}})})}function Vu({color:e="transparent",opacity:t=1,strokeWidth:n,strokeColor:o="#000000",strokeStyle:i=Ie.SOLID,strokeDashArray:r,rect:a,linePoints:s,lineEndings:c,scale:d,onClick:u,isSelected:m}){const{x1:h,y1:g,x2:p,y2:f}=X(()=>({x1:s.start.x-a.origin.x,y1:s.start.y-a.origin.y,x2:s.end.x-a.origin.x,y2:s.end.y-a.origin.y}),[s,a]),v=X(()=>{const x=Math.atan2(f-g,p-h);return{start:zo.createEnding(c?.start,n,x+Math.PI,h,g),end:zo.createEnding(c?.end,n,x,p,f)}},[c,n,h,g,p,f]),y=a.size.width*d,b=a.size.height*d;return D("svg",{style:{position:"absolute",width:y,height:b,pointerEvents:"none",zIndex:2,overflow:"visible"},width:y,height:b,viewBox:`0 0 ${a.size.width} ${a.size.height}`,children:[D("line",{x1:h,y1:g,x2:p,y2:f,opacity:t,onPointerDown:u,onTouchStart:u,style:{cursor:m?"move":"pointer",pointerEvents:m?"none":"visibleStroke",stroke:o,strokeWidth:n,strokeLinecap:"butt",...i===Ie.DASHED&&{strokeDasharray:r?.join(",")}}}),v.start&&D("path",{d:v.start.d,transform:v.start.transform,onPointerDown:u,onTouchStart:u,stroke:o,style:{cursor:m?"move":"pointer",strokeWidth:n,strokeLinecap:"butt",pointerEvents:m?"none":v.start.filled?"visible":"visibleStroke",...i===Ie.DASHED&&{strokeDasharray:r?.join(",")}},fill:v.start.filled?e:"none"}),v.end&&D("path",{d:v.end.d,transform:v.end.transform,stroke:o,onPointerDown:u,onTouchStart:u,style:{cursor:m?"move":"pointer",strokeWidth:n,strokeLinecap:"butt",pointerEvents:m?"none":v.end.filled?"visible":"visibleStroke",...i===Ie.DASHED&&{strokeDasharray:r?.join(",")}},fill:v.end.filled?e:"none"})]})}function Ku({rect:e,vertices:t,color:n="transparent",strokeColor:o="#000000",opacity:i=1,strokeWidth:r,scale:a,isSelected:s,onClick:c,lineEndings:d}){const u=X(()=>t.map(({x:f,y:v})=>({x:f-e.origin.x,y:v-e.origin.y})),[t,e]),m=X(()=>{if(!u.length)return"";const[f,...v]=u;return`M ${f.x} ${f.y} `+v.map(y=>`L ${y.x} ${y.y} `).join("").trim()},[u]),h=X(()=>{if(u.length<2)return{start:null,end:null};const f=(b,x)=>Math.atan2(x.y-b.y,x.x-b.x),v=f(u[0],u[1]),y=f(u[u.length-2],u[u.length-1]);return{start:zo.createEnding(d?.start,r,v+Math.PI,u[0].x,u[0].y),end:zo.createEnding(d?.end,r,y,u[u.length-1].x,u[u.length-1].y)}},[u,d,r]),g=e.size.width*a,p=e.size.height*a;return D("svg",{style:{position:"absolute",width:g,height:p,pointerEvents:"none",zIndex:2,overflow:"visible"},width:g,height:p,viewBox:`0 0 ${e.size.width} ${e.size.height}`,children:[D("path",{d:m,onPointerDown:c,onTouchStart:c,opacity:i,style:{fill:"none",stroke:o??n,strokeWidth:r,cursor:s?"move":"pointer",pointerEvents:s?"none":"visibleStroke",strokeLinecap:"butt",strokeLinejoin:"miter"}}),h.start&&D("path",{d:h.start.d,transform:h.start.transform,stroke:o,fill:h.start.filled?n:"none",onPointerDown:c,onTouchStart:c,style:{cursor:s?"move":"pointer",strokeWidth:r,pointerEvents:s?"none":h.start.filled?"visible":"visibleStroke",strokeLinecap:"butt"}}),h.end&&D("path",{d:h.end.d,transform:h.end.transform,stroke:o,fill:h.end.filled?n:"none",onPointerDown:c,onTouchStart:c,style:{cursor:s?"move":"pointer",strokeWidth:r,pointerEvents:s?"none":h.end.filled?"visible":"visibleStroke",strokeLinecap:"butt"}})]})}function Zu({rect:e,vertices:t,color:n="transparent",strokeColor:o="#000000",opacity:i=1,strokeWidth:r,strokeStyle:a=Ie.SOLID,strokeDashArray:s,scale:c,isSelected:d,onClick:u,currentVertex:m,handleSize:h=14}){const g=m?[...t,m]:t,p=X(()=>g.map(({x,y:w})=>({x:x-e.origin.x,y:w-e.origin.y})),[g,e]),f=X(()=>{if(!p.length)return"";const[x,...w]=p,C=!!m;return(`M ${x.x} ${x.y} `+w.map(I=>`L ${I.x} ${I.y}`).join(" ")+(C?"":" Z")).trim()},[p,m]),v=m&&t.length>0,y=e.size.width*c,b=e.size.height*c;return D("svg",{style:{position:"absolute",width:y,height:b,pointerEvents:"none",zIndex:2,overflow:"visible"},width:y,height:b,viewBox:`0 0 ${e.size.width} ${e.size.height}`,children:[D("path",{d:f,onPointerDown:u,onTouchStart:u,opacity:i,style:{fill:m?"none":n,stroke:o??n,strokeWidth:r,cursor:d?"move":"pointer",pointerEvents:d?"none":n==="transparent"?"visibleStroke":"visible",strokeLinecap:"butt",strokeLinejoin:"miter",...a===Ie.DASHED&&{strokeDasharray:s?.join(",")}}}),v&&t.length>1&&D("path",{d:`M ${p[p.length-1].x} ${p[p.length-1].y} L ${p[0].x} ${p[0].y}`,fill:"none",style:{stroke:o,strokeWidth:r,strokeDasharray:"4,4",opacity:.7}}),v&&t.length>=2&&D("rect",{x:p[0].x-h/c/2,y:p[0].y-h/c/2,width:h/c,height:h/c,fill:o,opacity:.4,stroke:o,strokeWidth:r/2})]})}function ff({isSelected:e,isEditing:t,annotation:n,pageIndex:o,scale:i,onClick:r}){const a=K(null),{provides:s}=at(),[c,d]=z(!1);T(()=>{if(t&&a.current){const v=a.current;v.focus();const y=window.getSelection();if(y){const b=document.createRange();b.selectNodeContents(v),b.collapse(!1),y.removeAllRanges(),y.addRange(b)}}},[t]),$o(()=>{try{const v=navigator,y=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&v?.maxTouchPoints>1;d(y)}catch{d(!1)}},[]);const u=n.object.fontSize*i,m=c&&t&&u>0&&u<16,h=m?16:u,g=m?u/16:1,p=m?100/g:100;return D("div",{style:{position:"absolute",width:n.object.rect.size.width*i,height:n.object.rect.size.height*i,cursor:e&&!t?"move":"default",pointerEvents:e&&!t?"none":"auto",zIndex:2},onPointerDown:r,onTouchStart:r,children:D("span",{ref:a,onBlur:()=>{s&&a.current&&s.updateAnnotation(o,n.object.id,{contents:a.current.innerText})},tabIndex:0,style:{color:n.object.fontColor,fontSize:h,fontFamily:(f=n.object.fontFamily,Fo(f).css),textAlign:Xh(n.object.textAlign),flexDirection:"column",justifyContent:n.object.verticalAlign===mt.Top?"flex-start":n.object.verticalAlign===mt.Middle?"center":"flex-end",display:"flex",backgroundColor:n.object.backgroundColor,opacity:n.object.opacity,width:m?`${p}%`:"100%",height:m?`${p}%`:"100%",lineHeight:"1.18",overflow:"hidden",cursor:t?"text":"pointer",outline:"none",transform:m?`scale(${g})`:void 0,transformOrigin:"top left"},contentEditable:t,...pf,children:n.object.contents})});var f}function vf({documentId:e,pageIndex:t,annotation:n,scaleFactor:o=1,style:i,...r}){const{provides:a}=at(),[s,c]=z(null),d=K(null),{width:u,height:m}=n.rect.size;return T(()=>{if(a){const h=a.forDocument(e).renderAnnotation({pageIndex:t,annotation:n,options:{scaleFactor:o,dpr:window.devicePixelRatio}});return h.wait(g=>{const p=URL.createObjectURL(g);c(p),d.current=p},Oe),()=>{d.current?(URL.revokeObjectURL(d.current),d.current=null):h.abort({code:ee.Cancelled,message:"canceled render task"})}}},[t,o,a,e,n.id,u,m]),D(Y,{children:s&&D("img",{src:s,onLoad:()=>{d.current&&(URL.revokeObjectURL(d.current),d.current=null)},...r,style:{width:"100%",height:"100%",display:"block",...i||{}}})})}function yf({isSelected:e,annotation:t,documentId:n,pageIndex:o,scale:i,onClick:r}){return D("div",{style:{position:"absolute",width:"100%",height:"100%",zIndex:2,pointerEvents:e?"none":"auto",cursor:"pointer"},onPointerDown:r,onTouchStart:r,children:D(vf,{documentId:n,pageIndex:o,annotation:{...t.object,id:t.object.id},scaleFactor:i})})}function bf(e){const{documentId:t,pageIndex:n,scale:o,selectionMenu:i}=e,{provides:r}=at(),{provides:a}=mr(),[s,c]=z([]),{register:d}=(function({modeId:y,pageIndex:b,documentId:x}){const{provides:w}=Fn();return{register:(C,I)=>{const k=I?.modeId??y,S=I?.pageIndex??b,M=I?.documentId??x;return k?w?.registerHandlers({modeId:k,handlers:C,pageIndex:S,documentId:M}):w?.registerAlways({scope:S!==void 0?{type:"page",documentId:M,pageIndex:S}:{type:"global",documentId:M},handlers:C})}}})({documentId:t,pageIndex:n}),[u,m]=z(null),[h,g]=z(null),p=X(()=>r?r.forDocument(t):null,[r,t]);T(()=>{if(p){const y=p.getState();return c(ja(y,n)),m(Ha(y,n)),p.onStateChange(b=>{c(ja(b,n)),m(Ha(b,n))})}},[p,n]);const f=X(()=>({onPointerDown:(y,b)=>{b.target===b.currentTarget&&p&&(p.deselectAnnotation(),g(null))}}),[p]),v=te((y,b)=>{y.stopPropagation(),p&&a&&(p.selectAnnotation(n,b.object.id),a.clear(),b.object.id!==h&&g(null))},[p,a,h,n]);return T(()=>d(f,{documentId:t}),[d,f]),D(Y,{children:s.map(y=>{const b=u?.object.id===y.object.id,x=h===y.object.id,w=p?.findToolForAnnotation(y.object);return du(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!0,isResizable:w?.interaction.isResizable??!0,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(Bu,{...C,isSelected:b,scale:o,onClick:I=>v(I,y)})},y.object.id):hu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!0,isResizable:w?.interaction.isResizable??!0,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(qu,{...C,isSelected:b,scale:o,onClick:I=>v(I,y)})},y.object.id):uu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!0,isResizable:w?.interaction.isResizable??!0,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(Gu,{...C,isSelected:b,scale:o,onClick:I=>v(I,y)})},y.object.id):vu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!1,isResizable:w?.interaction.isResizable??!1,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),zIndex:0,style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(Hu,{...C,scale:o,onClick:I=>v(I,y)})},y.object.id):yu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!1,isResizable:w?.interaction.isResizable??!1,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),zIndex:0,style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(Uu,{...C,scale:o,onClick:I=>v(I,y)})},y.object.id):bu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!1,isResizable:w?.interaction.isResizable??!1,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),zIndex:0,style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(Wu,{...C,scale:o,onClick:I=>v(I,y)})},y.object.id):fu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!1,isResizable:w?.interaction.isResizable??!1,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),zIndex:0,style:{mixBlendMode:Ke(y.object.blendMode??Z.Multiply)},...e,children:C=>D(ju,{...C,scale:o,onClick:I=>v(I,y)})},y.object.id):gu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!0,isResizable:w?.interaction.isResizable??!1,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),vertexConfig:{extractVertices:C=>[C.linePoints.start,C.linePoints.end],transformAnnotation:(C,I)=>({...C,linePoints:{start:I[0],end:I[1]}})},style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(Y,{children:D(Vu,{...C,isSelected:b,scale:o,onClick:I=>v(I,y)})})},y.object.id):pu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!0,isResizable:w?.interaction.isResizable??!1,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),vertexConfig:{extractVertices:C=>C.vertices,transformAnnotation:(C,I)=>({...C,vertices:I})},style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(Y,{children:D(Ku,{...C,isSelected:b,scale:o,onClick:I=>v(I,y)})})},y.object.id):mu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!0,isResizable:w?.interaction.isResizable??!1,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),vertexConfig:{extractVertices:C=>C.vertices,transformAnnotation:(C,I)=>({...C,vertices:I})},style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(Y,{children:D(Zu,{...C,isSelected:b,scale:o,onClick:I=>v(I,y)})})},y.object.id):wu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:(w?.interaction.isDraggable??!0)&&!x,isResizable:w?.interaction.isResizable??!0,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},onDoubleClick:C=>{C.stopPropagation(),g(y.object.id)},...e,children:C=>D(ff,{isSelected:b,isEditing:x,annotation:{...y,object:C},pageIndex:n,scale:o,onClick:I=>v(I,y)})},y.object.id):xu(y)?D(ut,{trackedAnnotation:y,isSelected:b,isDraggable:w?.interaction.isDraggable??!0,isResizable:w?.interaction.isResizable??!0,lockAspectRatio:w?.interaction.lockAspectRatio??!1,selectionMenu:i,onSelect:C=>v(C,y),style:{mixBlendMode:Ke(y.object.blendMode??Z.Normal)},...e,children:C=>D(yf,{isSelected:b,annotation:y,documentId:t,pageIndex:n,scale:o,onClick:I=>v(I,y)})},y.object.id):null})})}function wf({documentId:e,pageIndex:t,scale:n}){var o,i,r,a,s,c,d,u,m,h,g,p;const{provides:f}=mr(),{provides:v}=at(),[y,b]=z([]),[x,w]=z(null),[C,I]=z(null);if(T(()=>{if(f)return f.forDocument(e).onSelectionChange(()=>{b(f.forDocument(e).getHighlightRectsForPage(t)),w(f.forDocument(e).getBoundingRectForPage(t))})},[f,e,t]),T(()=>{if(v)return I(v.forDocument(e).getActiveTool()),v.forDocument(e).onActiveToolChange(k=>I(k))},[v,e]),!x||!C||!C.defaults)return null;switch(C.defaults.type){case _.UNDERLINE:return D("div",{style:{mixBlendMode:Ke(((o=C.defaults)==null?void 0:o.blendMode)??Z.Normal),pointerEvents:"none",position:"absolute",inset:0},children:D(Hu,{color:(i=C.defaults)==null?void 0:i.color,opacity:(r=C.defaults)==null?void 0:r.opacity,segmentRects:y,scale:n})});case _.HIGHLIGHT:return D("div",{style:{mixBlendMode:Ke(((a=C.defaults)==null?void 0:a.blendMode)??Z.Multiply),pointerEvents:"none",position:"absolute",inset:0},children:D(ju,{color:(s=C.defaults)==null?void 0:s.color,opacity:(c=C.defaults)==null?void 0:c.opacity,segmentRects:y,scale:n})});case _.STRIKEOUT:return D("div",{style:{mixBlendMode:Ke(((d=C.defaults)==null?void 0:d.blendMode)??Z.Normal),pointerEvents:"none",position:"absolute",inset:0},children:D(Uu,{color:(u=C.defaults)==null?void 0:u.color,opacity:(m=C.defaults)==null?void 0:m.opacity,segmentRects:y,scale:n})});case _.SQUIGGLY:return D("div",{style:{mixBlendMode:Ke(((h=C.defaults)==null?void 0:h.blendMode)??Z.Normal),pointerEvents:"none",position:"absolute",inset:0},children:D(Wu,{color:(g=C.defaults)==null?void 0:g.color,opacity:(p=C.defaults)==null?void 0:p.opacity,segmentRects:y,scale:n})});default:return null}}function xf({preview:e,scale:t}){const{bounds:n}=e,o={position:"absolute",left:n.origin.x*t,top:n.origin.y*t,width:n.size.width*t,height:n.size.height*t,pointerEvents:"none",zIndex:10};return e.type===_.CIRCLE?D("div",{style:o,children:D(Gu,{isSelected:!1,scale:t,...e.data})}):e.type===_.SQUARE?D("div",{style:o,children:D(qu,{isSelected:!1,scale:t,...e.data})}):e.type===_.POLYGON?D("div",{style:o,children:D(Zu,{isSelected:!1,scale:t,...e.data})}):e.type===_.POLYLINE?D("div",{style:o,children:D(Ku,{isSelected:!1,scale:t,...e.data})}):e.type===_.LINE?D("div",{style:o,children:D(Vu,{isSelected:!1,scale:t,...e.data})}):e.type===_.INK?D("div",{style:o,children:D(Bu,{isSelected:!1,scale:t,...e.data})}):e.type===_.FREETEXT?D("div",{style:o,children:D("div",{style:{width:"100%",height:"100%",border:`1px dashed ${e.data.fontColor||"#000000"}`,backgroundColor:"transparent"}})}):null}function Cf({documentId:e,pageIndex:t,scale:n}){const{plugin:o}=st(fr.id),[i,r]=z(new Map),a=K(null),s=K(null),c=X(()=>({requestFile:({accept:d,onFile:u})=>{if(!a.current)return;const m=a.current;m.accept=d,m.onchange=h=>{var g;const p=(g=h.target.files)==null?void 0:g[0];p&&(u(p),m.value="")},m.click()},processImage:({source:d,maxWidth:u,maxHeight:m,onComplete:h})=>{const g=s.current;if(!g||!g.getContext)return;const p=g.getContext("2d");if(!p)return;const f=new Image;f.crossOrigin="Anonymous",f.onload=()=>{let{naturalWidth:v,naturalHeight:y}=f;const b=u?u/v:1,x=m?m/y:1,w=Math.min(b,x,1),C=v*w,I=y*w;g.width=C,g.height=I,p.drawImage(f,0,0,C,I);const k=p.getImageData(0,0,C,I);typeof d!="string"&&URL.revokeObjectURL(f.src),h({imageData:k,width:C,height:I})},f.src=typeof d=="string"?d:URL.createObjectURL(d)}}),[]);return T(()=>{if(o)return o.registerPageHandlers(e,t,n,{services:c,onPreview:(d,u)=>{r(m=>{const h=new Map(m);return u?h.set(d,u):h.delete(d),h})}})},[e,t,n,o,c]),D(Y,{children:[D("input",{ref:a,type:"file",style:{display:"none"}}),D("canvas",{ref:s,style:{display:"none"}}),Array.from(i.entries()).map(([d,u])=>D(xf,{preview:u,scale:n},d))]})}function If({style:e,documentId:t,pageIndex:n,scale:o,rotation:i,selectionMenu:r,resizeUI:a,vertexUI:s,selectionOutlineColor:c,customAnnotationRenderer:d,...u}){var m,h,g,p;const f=Xe(t),v=(h=(m=f?.document)==null?void 0:m.pages)==null?void 0:h[n],y=((g=v?.size)==null?void 0:g.width)??0,b=((p=v?.size)==null?void 0:p.height)??0,x=X(()=>o!==void 0?o:f?.scale??1,[o,f?.scale]);return D("div",{style:{...e},...u,children:[D(bf,{documentId:t,selectionMenu:r,pageIndex:n,scale:x,rotation:X(()=>i!==void 0?i:f?.rotation??sn.Degree0,[i,f?.rotation]),pageWidth:y,pageHeight:b,resizeUI:a,vertexUI:s,selectionOutlineColor:c,customAnnotationRenderer:d}),D(wf,{documentId:t,pageIndex:n,scale:x}),D(Cf,{documentId:t,pageIndex:n,scale:x})]})}const Yu="print",kf={id:Yu,name:"Print Plugin",version:"1.0.0",provides:["print"],requires:[],optional:[],defaultConfig:{}},Xu=class extends Me{constructor(e,t,n){super(e,t),this.printReady$=Ye()}buildCapability(){return{print:e=>this.print(e),forDocument:e=>this.createPrintScope(e)}}createPrintScope(e){return{print:t=>this.print(t,e)}}print(e,t){const n=t??this.getActiveDocumentId();if(!this.checkPermission(n,N.Print))return this.logger.debug("PrintPlugin","Print",`Cannot print: document ${n} lacks Print permission`),ge.reject({code:ee.Security,message:"Document lacks Print permission"});const o=e??{},i=new Ce;return i.progress({stage:"preparing",message:"Preparing document..."}),this.preparePrintDocument(o,n).wait(r=>{i.progress({stage:"document-ready",message:"Document prepared successfully"}),this.printReady$.emit({documentId:n,options:o,buffer:r,task:i})},r=>i.fail(r)),i}preparePrintDocument(e,t){const n=this.coreState.core.documents[t];return n?.document?this.engine.preparePrintDocument(n.document,e):ge.reject({code:ee.DocNotOpen,message:`Document ${t} not found`})}onPrintRequest(e){return this.printReady$.on(e)}async initialize(e){this.logger.info("PrintPlugin","Initialize","Print plugin initialized")}async destroy(){this.printReady$.clear(),await super.destroy()}};Xu.id="print";let Ei=Xu;const Qu=()=>Le(Ei.id),Sf=ln({manifest:kf,create:(e,t)=>new Ei(Yu,e,t),reducer:()=>{},initialState:{}}).addUtility(function(){const{provides:e}=Qu(),{plugin:t}=st(Ei.id),n=K(null),o=K(null);return T(()=>{if(!e||!t)return;const i=t.onPrintRequest(({buffer:r,task:a})=>{const s=n.current;if(!s)return;o.current&&(URL.revokeObjectURL(o.current),o.current=null);const c=URL.createObjectURL(new Blob([r],{type:"application/pdf"}));o.current=c,s.onload=()=>{var d,u;s.src===c&&(a.progress({stage:"iframe-ready",message:"Ready to print"}),(d=s.contentWindow)==null||d.focus(),(u=s.contentWindow)==null||u.print(),a.progress({stage:"printing",message:"Print dialog opened"}),a.resolve(r))},s.src=c});return()=>{i(),o.current&&URL.revokeObjectURL(o.current)}},[e,t]),D("iframe",{ref:n,style:{position:"absolute",display:"none"},title:"Print Document",src:"about:blank"})}).build(),Ju="fullscreen",Pf={id:Ju,name:"Fullscreen Plugin",version:"1.0.0",provides:["fullscreen"],requires:[],optional:[],defaultConfig:{}},em="SET_FULLSCREEN",tm=class extends Me{constructor(e,t,n){super(e,t),this.onStateChange$=re(),this.fullscreenRequest$=Ye(),this.config=n}async initialize(e){}buildCapability(){return{isFullscreen:()=>this.state.isFullscreen,enableFullscreen:e=>this.enableFullscreen(e),exitFullscreen:()=>this.exitFullscreen(),toggleFullscreen:e=>this.toggleFullscreen(e),onRequest:this.fullscreenRequest$.on,onStateChange:this.onStateChange$.on}}getTargetSelector(){return this.currentTargetElement??this.config.targetElement}toggleFullscreen(e){this.state.isFullscreen?this.exitFullscreen():this.enableFullscreen(e)}enableFullscreen(e){this.currentTargetElement=e??this.config.targetElement,this.fullscreenRequest$.emit({action:"enter",targetElement:this.currentTargetElement})}exitFullscreen(){this.fullscreenRequest$.emit({action:"exit"}),this.currentTargetElement=void 0}onStoreUpdated(e,t){this.onStateChange$.emit(t)}setFullscreenState(e){this.dispatch({type:em,payload:e})}async destroy(){this.fullscreenRequest$.clear(),super.destroy()}};tm.id="fullscreen";let _i=tm;const Ja=()=>st(_i.id);async function Df(e,t,n){if(e.action==="enter"){const o=(function(i,r,a){if(!r||i.action!=="enter")return r;let s=null;return a&&(s=r.querySelector(a),s||console.warn(`Fullscreen: Could not find element with selector "${a}" within the wrapper. Falling back to wrapper element.`)),s||(s=r),s})(e,t,n);o&&!document.fullscreenElement&&await o.requestFullscreen()}else document.fullscreenElement&&await document.exitFullscreen()}const Mf=ln({manifest:Pf,create:(e,t)=>new _i(Ju,e,t),reducer:(e,t)=>t.type===em?{...e,isFullscreen:t.payload}:e,initialState:{isFullscreen:!1}}).addWrapper(function({children:e,...t}){const{provides:n}=Le(_i.id),{plugin:o}=Ja(),{plugin:i}=Ja(),r=K(null);return T(()=>{if(!(!n||!o))return n.onRequest(async a=>{const s=o.getTargetSelector();await Df(a,r.current,s)})},[n,o]),T(()=>{if(!i)return;const a=()=>i.setFullscreenState(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",a),()=>document.removeEventListener("fullscreenchange",a)},[i]),D("div",{...t,style:{position:"relative",width:"100%",height:"100%",...t.style},ref:r,children:e})}).build(),nm="bookmark",Af={id:nm,name:"Bookmark Plugin",version:"1.0.0",provides:["bookmark"],requires:[],optional:[],defaultConfig:{}},om=class extends Me{constructor(e,t){super(e,t)}async initialize(e){}buildCapability(){return{getBookmarks:()=>this.getBookmarks(),forDocument:e=>this.createBookmarkScope(e)}}createBookmarkScope(e){return{getBookmarks:()=>this.getBookmarks(e)}}getBookmarks(e){const t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];if(!n?.document)throw new Error(`Document ${t} not loaded`);return this.engine.getBookmarks(n.document)}};om.id="bookmark";let im=om;const zf={manifest:Af,create:e=>new im(nm,e),reducer:()=>{},initialState:{}},rm=class extends Me{constructor(e,t,n){super(e,t),this.downloadRequest$=Ye(),this.config=n}buildCapability(){return{saveAsCopy:()=>this.saveAsCopy(),download:()=>this.download(),forDocument:e=>this.createExportScope(e)}}createExportScope(e){return{saveAsCopy:()=>this.saveAsCopy(e),download:()=>this.download(e)}}download(e){const t=e??this.getActiveDocumentId();this.downloadRequest$.emit({documentId:t})}saveAsCopy(e){const t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];return n?.document?this.engine.saveAsCopy(n.document):ge.reject({code:ee.DocNotOpen,message:`Document ${t} not found`})}saveAsCopyAndGetBufferAndName(e){const t=new Ce,n=this.coreState.core.documents[e];return n?.document?(this.saveAsCopy(e).wait(o=>{t.resolve({buffer:o,name:n.name??this.config.defaultFileName})},o=>t.fail(o)),t):ge.reject({code:ee.DocNotOpen,message:`Document ${e} not found`})}onRequest(e){return this.downloadRequest$.on(e)}async initialize(e){this.logger.info("ExportPlugin","Initialize","Export plugin initialized")}async destroy(){this.downloadRequest$.clear(),await super.destroy()}};rm.id="export";let es=rm;const ts="export",Tf=ln({manifest:{id:ts,name:"Export Plugin",version:"1.0.0",provides:["export"],requires:[],optional:[],defaultConfig:{defaultFileName:"document.pdf"}},create:(e,t)=>new es(ts,e,t),reducer:()=>{},initialState:{}}).addUtility(function(){const{plugin:e}=st(es.id),t=K(null);return T(()=>{if(e)return e.onRequest(n=>{const o=t.current;o&&e.saveAsCopyAndGetBufferAndName(n.documentId).wait(({buffer:i,name:r})=>{const a=URL.createObjectURL(new Blob([i]));o.href=a,o.download=r,o.click(),URL.revokeObjectURL(a)},Oe)})},[e]),D("a",{style:{display:"none"},ref:t})}).build(),am="PAN/INIT_STATE",sm="PAN/CLEANUP_STATE",lm="PAN/SET_PAN_MODE",cm=class extends Me{constructor(e,t,n){var o,i,r;super(e,t),this.panMode$=re(),this.documentHandlers=new Map,this.config=n,this.interactionManager=(o=t.getPlugin(vr.id))==null?void 0:o.provides(),this.viewport=(i=t.getPlugin(qo.id))==null?void 0:i.provides(),this.interactionManager&&(this.interactionManager.registerMode({id:"panMode",scope:"global",exclusive:!1,cursor:"grab",wantsRawTouch:!1}),(r=this.interactionManager)==null||r.onModeChange(a=>{const s=a.activeMode==="panMode",c=this.getDocumentState(a.documentId);c&&c.isPanMode!==s&&this.dispatch((function(d,u){return{type:lm,payload:{documentId:d,isPanMode:u}}})(a.documentId,s))}))}onDocumentLoadingStarted(e){this.dispatch((function(t,n){return{type:am,payload:{documentId:t,state:n}}})(e,{isPanMode:!1})),this.registerPanHandlersForDocument(e),this.config.defaultMode==="always"&&this.makePanDefault(!0),this.logger.debug("PanPlugin","DocumentOpened",`Initialized pan state for document: ${e}`)}onDocumentClosed(e){const t=this.documentHandlers.get(e);t&&(t(),this.documentHandlers.delete(e)),this.dispatch((function(n){return{type:sm,payload:n}})(e)),this.logger.debug("PanPlugin","DocumentClosed",`Cleaned up pan state for document: ${e}`)}buildCapability(){return{enablePan:()=>this.enablePan(),disablePan:()=>this.disablePan(),togglePan:()=>this.togglePan(),makePanDefault:e=>this.makePanDefault(e),isPanMode:()=>this.isPanMode(),forDocument:e=>this.createPanScope(e),onPanModeChange:this.panMode$.on}}createPanScope(e){return{enablePan:()=>this.enablePan(e),disablePan:()=>this.disablePan(e),togglePan:()=>this.togglePan(e),isPanMode:()=>this.isPanMode(e),onPanModeChange:t=>this.panMode$.on(n=>{n.documentId===e&&t(n.isPanMode)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Pan state not found for document: ${e??"active"}`);return t}enablePan(e){const t=e??this.getActiveDocumentId();this.interactionManager.forDocument(t).activate("panMode")}disablePan(e){const t=e??this.getActiveDocumentId();this.interactionManager.forDocument(t).activateDefaultMode()}togglePan(e){const t=e??this.getActiveDocumentId(),n=this.interactionManager.forDocument(t);n.getActiveMode()==="panMode"?n.activateDefaultMode():n.activate("panMode")}makePanDefault(e=!0){this.interactionManager&&(this.interactionManager.setDefaultMode("panMode"),e&&this.interactionManager.activateDefaultMode())}isPanMode(e){return this.getDocumentStateOrThrow(e).isPanMode}registerPanHandlersForDocument(e){if(!this.interactionManager||!this.viewport)return;let t=null;const n=this.interactionManager.forDocument(e),o=this.viewport.forDocument(e),i={onMouseDown:(a,s)=>{const c=o.getMetrics();t={startX:s.clientX,startY:s.clientY,startLeft:c.scrollLeft,startTop:c.scrollTop},n.setCursor("panMode","grabbing",10)},onMouseMove:(a,s)=>{if(!t)return;const c=s.clientX-t.startX,d=s.clientY-t.startY;o.scrollTo({x:t.startLeft-c,y:t.startTop-d})},onMouseUp:()=>{t&&(t=null,n.removeCursor("panMode"))},onMouseLeave:()=>{t&&(t=null,n.removeCursor("panMode"))},onMouseCancel:()=>{t&&(t=null,n.removeCursor("panMode"))}},r=this.interactionManager.registerHandlers({documentId:e,modeId:"panMode",handlers:i});this.documentHandlers.set(e,r)}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o?.isPanMode!==i.isPanMode&&(this.panMode$.emit({documentId:n,isPanMode:i.isPanMode}),this.logger.debug("PanPlugin","PanModeChanged",`Pan mode changed for document ${n}: ${o?.isPanMode??!1} -> ${i.isPanMode}`))}}async initialize(e){this.logger.info("PanPlugin","Initialize","Pan plugin initialized")}async destroy(){this.documentHandlers.forEach(e=>e()),this.documentHandlers.clear(),this.panMode$.clear(),await super.destroy()}};cm.id="pan";let li=cm;const ns={documents:{},activeDocumentId:null},Ef=ln({manifest:{id:"pan",name:"Pan Plugin",version:"1.0.0",provides:["pan"],requires:["interaction-manager","viewport"],optional:[],defaultConfig:{defaultMode:"mobile"}},create:(e,t)=>new li("pan",e,t),reducer:(e=ns,t)=>{switch(t.type){case am:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case sm:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"PAN/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case lm:{const{documentId:n,isPanMode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isPanMode:o}}}:e}default:return e}},initialState:ns}).addUtility(()=>{const{provides:e}=Le(li.id),{plugin:t}=st(li.id);return T(()=>{var n;if(!e||!t)return;const o=((n=t.config)==null?void 0:n.defaultMode)??"never",i=typeof window<"u"&&("ontouchstart"in window||navigator.maxTouchPoints>0);o==="mobile"&&i&&e.makePanDefault()},[e,t]),null}).build(),dm="capture",_f={id:dm,name:"Capture Plugin",version:"1.0.0",provides:["capture"],requires:["render"],optional:["interaction-manager"],defaultConfig:{scale:1,imageType:"image/png",withAnnotations:!1}},um="CAPTURE/INIT_STATE",mm="CAPTURE/CLEANUP_STATE",hm="CAPTURE/SET_MARQUEE_CAPTURE_ACTIVE",Rf={isMarqueeCaptureActive:!1},os={documents:{},activeDocumentId:null},gm=class extends Me{constructor(e,t,n){var o;super(e,t),this.captureArea$=Ye(),this.state$=re(),this.config=n,this.renderCapability=this.registry.getPlugin("render").provides(),this.interactionManagerCapability=(o=this.registry.getPlugin("interaction-manager"))==null?void 0:o.provides(),this.interactionManagerCapability&&(this.interactionManagerCapability.registerMode({id:"marqueeCapture",scope:"page",exclusive:!0,cursor:"crosshair"}),this.interactionManagerCapability.onModeChange(i=>{const r=i.activeMode==="marqueeCapture",a=this.getDocumentState(i.documentId);var s;a&&a.isMarqueeCaptureActive!==r&&this.dispatch((s=i.documentId,{type:hm,payload:{documentId:s,isActive:r}}))}))}onDocumentLoadingStarted(e){const t={...Rf};this.dispatch((function(n,o){return{type:um,payload:{documentId:n,state:o}}})(e,t)),this.logger.debug("CapturePlugin","DocumentOpened",`Initialized capture state for document: ${e}`)}onDocumentClosed(e){this.dispatch((function(t){return{type:mm,payload:t}})(e)),this.logger.debug("CapturePlugin","DocumentClosed",`Cleaned up capture state for document: ${e}`)}async initialize(e){}buildCapability(){return{captureArea:(e,t)=>this.captureArea(e,t),enableMarqueeCapture:()=>this.enableMarqueeCapture(),disableMarqueeCapture:()=>this.disableMarqueeCapture(),toggleMarqueeCapture:()=>this.toggleMarqueeCapture(),isMarqueeCaptureActive:()=>this.isMarqueeCaptureActive(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createCaptureScope(e),registerMarqueeOnPage:e=>this.registerMarqueeOnPage(e),onCaptureArea:this.captureArea$.on,onStateChange:this.state$.on}}createCaptureScope(e){return{captureArea:(t,n)=>this.captureArea(t,n,e),enableMarqueeCapture:()=>this.enableMarqueeCapture(e),disableMarqueeCapture:()=>this.disableMarqueeCapture(e),toggleMarqueeCapture:()=>this.toggleMarqueeCapture(e),isMarqueeCaptureActive:()=>this.isMarqueeCaptureActive(e),getState:()=>this.getDocumentStateOrThrow(e),onCaptureArea:t=>this.captureArea$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Capture state not found for document: ${e??"active"}`);return t}registerMarqueeOnPage(e){if(!this.interactionManagerCapability)return this.logger.warn("CapturePlugin","MissingDependency","Interaction manager plugin not loaded, marquee capture disabled"),()=>{};const t=this.coreState.core.documents[e.documentId];if(!t||!t.document)return this.logger.warn("CapturePlugin","DocumentNotFound","Document not found"),()=>{};const n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn("CapturePlugin","PageNotFound",`Page ${e.pageIndex} not found`),()=>{};const o=(function(i){const{pageSize:r,scale:a,minDragPx:s=5,onPreview:c,onCommit:d}=i;let u=null,m=null;return{onPointerDown:(h,g)=>{var p;u=h,m={origin:{x:h.x,y:h.y},size:{width:0,height:0}},c?.(m),(p=g.setPointerCapture)==null||p.call(g)},onPointerMove:h=>{if(!u)return;const g=ve(h.x,0,r.width),p=ve(h.y,0,r.height);m={origin:{x:Math.min(u.x,g),y:Math.min(u.y,p)},size:{width:Math.abs(g-u.x),height:Math.abs(p-u.y)}},c?.(m)},onPointerUp:(h,g)=>{var p;m&&Math.max(m.size.width,m.size.height)*a>s&&d?.(m),u=null,m=null,c?.(null),(p=g.releasePointerCapture)==null||p.call(g)},onPointerCancel:(h,g)=>{var p;u=null,m=null,c?.(null),(p=g.releasePointerCapture)==null||p.call(g)}}})({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:i=>{var r,a;this.captureArea(e.pageIndex,i,e.documentId),(a=(r=e.callback).onCommit)==null||a.call(r,i)}});return this.interactionManagerCapability.registerHandlers({documentId:e.documentId,modeId:"marqueeCapture",handlers:o,pageIndex:e.pageIndex})}captureArea(e,t,n){const o=n??this.getActiveDocumentId();this.disableMarqueeCapture(o),this.renderCapability.forDocument(o).renderPageRect({pageIndex:e,rect:t,options:{imageType:this.config.imageType,scaleFactor:this.config.scale,withAnnotations:this.config.withAnnotations||!1}}).wait(i=>{this.captureArea$.emit({documentId:o,pageIndex:e,rect:t,blob:i,imageType:this.config.imageType||"image/png",scale:this.config.scale||1,withAnnotations:this.config.withAnnotations||!1})},Oe)}enableMarqueeCapture(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activate("marqueeCapture")}disableMarqueeCapture(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activateDefaultMode()}toggleMarqueeCapture(e){var t;const n=e??this.getActiveDocumentId(),o=(t=this.interactionManagerCapability)==null?void 0:t.forDocument(n);o?.getActiveMode()==="marqueeCapture"?o.activateDefaultMode():o?.activate("marqueeCapture")}isMarqueeCaptureActive(e){var t;const n=e??this.getActiveDocumentId();return((t=this.interactionManagerCapability)==null?void 0:t.forDocument(n).getActiveMode())==="marqueeCapture"}onStoreUpdated(e,t){for(const n in t.documents){const o=e.documents[n],i=t.documents[n];o&&i&&o.isMarqueeCaptureActive!==i.isMarqueeCaptureActive&&this.state$.emit({documentId:n,state:i})}}async destroy(){this.captureArea$.clear(),this.state$.clear(),super.destroy()}};gm.id="capture";let pm=gm;const Nf={manifest:_f,create:(e,t)=>new pm(dm,e,t),reducer:(e=os,t)=>{switch(t.type){case um:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case mm:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"CAPTURE/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case hm:{const{documentId:n,isActive:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isMarqueeCaptureActive:o}}}:e}default:return e}},initialState:os},fm=()=>Le(pm.id),Of=({documentId:e,pageIndex:t,scale:n,className:o,stroke:i="rgba(33,150,243,0.8)",fill:r="rgba(33,150,243,0.15)"})=>{const{provides:a}=fm(),s=Xe(e),[c,d]=z(null),u=X(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]);return T(()=>{if(a)return a.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:d}})},[a,e,t,u]),c?D("div",{style:{position:"absolute",pointerEvents:"none",left:c.origin.x*u,top:c.origin.y*u,width:c.size.width*u,height:c.size.height*u,border:`1px solid ${i}`,background:r,boxSizing:"border-box"},className:o}):null},fn="history",Lf={id:fn,name:"History Plugin",version:"1.0.0",provides:["history"],requires:[],optional:[],defaultConfig:{}},vm="HISTORY/INIT_STATE",ym="HISTORY/CLEANUP_STATE",bm="HISTORY/SET_DOCUMENT_STATE",wm=class extends Me{constructor(e,t){super(e,t),this.documentHistories=new Map,this.historyChange$=Ye()}async initialize(e){this.logger.info("HistoryPlugin","Initialize","History plugin initialized")}onDocumentLoadingStarted(e){this.dispatch((t=>({type:vm,payload:{documentId:t}}))(e)),this.documentHistories.set(e,{topicHistories:new Map,globalTimeline:[],globalIndex:-1}),this.logger.debug("HistoryPlugin","DocumentOpened",`Initialized history state for document: ${e}`)}onDocumentClosed(e){this.dispatch((t=>({type:ym,payload:{documentId:t}}))(e)),this.documentHistories.delete(e),this.logger.debug("HistoryPlugin","DocumentClosed",`Cleaned up history state for document: ${e}`)}getDocumentHistoryData(e){const t=e??this.getActiveDocumentId(),n=this.documentHistories.get(t);if(!n)throw new Error(`History data not found for document: ${t}`);return n}getDocumentHistoryState(e){const t=this.documentHistories.get(e);if(!t)throw new Error(`History data not found for document: ${e}`);const n={};return Array.from(t.topicHistories.entries()).forEach(([o,i])=>{n[o]={canUndo:i.currentIndex>-1,canRedo:i.currentIndex<i.commands.length-1}}),{global:{canUndo:t.globalIndex>-1,canRedo:t.globalIndex<t.globalTimeline.length-1},topics:n}}emitHistoryChange(e,t){const n=this.getDocumentHistoryState(e);this.dispatch(((o,i)=>({type:bm,payload:{documentId:o,state:i}}))(e,n)),this.historyChange$.emit({documentId:e,topic:t,state:n})}register(e,t,n){const o=this.getDocumentHistoryData(n);o.topicHistories.has(t)||o.topicHistories.set(t,{commands:[],currentIndex:-1});const i=o.topicHistories.get(t);i.commands.splice(i.currentIndex+1),i.commands.push(e),i.currentIndex++;const r={command:e,topic:t};o.globalTimeline.splice(o.globalIndex+1),o.globalTimeline.push(r),o.globalIndex++,e.execute(),this.emitHistoryChange(n,t)}undo(e,t){const n=this.getDocumentHistoryData(t);let o;if(e){const i=n.topicHistories.get(e);i&&i.currentIndex>-1&&(i.commands[i.currentIndex].undo(),i.currentIndex--,o=e)}else if(n.globalIndex>-1){const i=n.globalTimeline[n.globalIndex];i.command.undo(),n.topicHistories.get(i.topic).currentIndex--,n.globalIndex--,o=i.topic}o&&this.emitHistoryChange(t,o)}redo(e,t){const n=this.getDocumentHistoryData(t);let o;if(e){const i=n.topicHistories.get(e);i&&i.currentIndex<i.commands.length-1&&(i.currentIndex++,i.commands[i.currentIndex].execute(),o=e)}else if(n.globalIndex<n.globalTimeline.length-1){n.globalIndex++;const i=n.globalTimeline[n.globalIndex];i.command.execute(),n.topicHistories.get(i.topic).currentIndex++,o=i.topic}o&&this.emitHistoryChange(t,o)}canUndo(e,t){const n=this.getDocumentHistoryData(t);if(e){const o=n.topicHistories.get(e);return!!o&&o.currentIndex>-1}return n.globalIndex>-1}canRedo(e,t){const n=this.getDocumentHistoryData(t);if(e){const o=n.topicHistories.get(e);return!!o&&o.currentIndex<o.commands.length-1}return n.globalIndex<n.globalTimeline.length-1}createHistoryScope(e){return{register:(t,n)=>this.register(t,n,e),undo:t=>this.undo(t,e),redo:t=>this.redo(t,e),canUndo:t=>this.canUndo(t,e),canRedo:t=>this.canRedo(t,e),getHistoryState:()=>this.getDocumentHistoryState(e),onHistoryChange:t=>this.historyChange$.on(n=>{n.documentId===e&&t(n.topic)})}}buildCapability(){return{register:(e,t)=>{const n=this.getActiveDocumentId();this.register(e,t,n)},undo:e=>{const t=this.getActiveDocumentId();this.undo(e,t)},redo:e=>{const t=this.getActiveDocumentId();this.redo(e,t)},canUndo:e=>{const t=this.getActiveDocumentId();return this.canUndo(e,t)},canRedo:e=>{const t=this.getActiveDocumentId();return this.canRedo(e,t)},getHistoryState:()=>{const e=this.getActiveDocumentId();return this.getDocumentHistoryState(e)},forDocument:e=>this.createHistoryScope(e),onHistoryChange:this.historyChange$.on}}async destroy(){this.historyChange$.clear(),this.documentHistories.clear(),super.destroy()}};wm.id="history";let $f=wm;const Ff={global:{canUndo:!1,canRedo:!1},topics:{}},is={documents:{},activeDocumentId:null},jf={manifest:Lf,create:e=>new $f(fn,e),reducer:(e=is,t)=>{switch(t.type){case vm:{const{documentId:n}=t.payload;return{...e,documents:{...e.documents,[n]:{...Ff}}}}case ym:{const{documentId:n}=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case bm:{const{documentId:n,state:o}=t.payload;return e.documents[n]?{...e,documents:{...e.documents,[n]:o}}:e}case"HISTORY/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};default:return e}},initialState:is};var Fe=(e=>(e.MarqueeRedact="marqueeRedact",e.RedactSelection="redactSelection",e))(Fe||{});const xm="REDACTION/INIT_STATE",Cm="REDACTION/CLEANUP_STATE",Im="START_REDACTION",km="END_REDACTION",Sm="ADD_PENDING",Pm="REMOVE_PENDING",Dm="CLEAR_PENDING",Mm="SELECT_PENDING",Am="DESELECT_PENDING",ro=(e,t)=>({type:Sm,payload:{documentId:e,items:t}}),rs=(e,t,n)=>({type:Pm,payload:{documentId:e,page:t,id:n}}),as=e=>({type:Dm,payload:e}),ss=(e,t)=>({type:Im,payload:{documentId:e,mode:t}}),ls=e=>Object.values(e).reduce((t,n)=>t+n.length,0),Hf={isRedacting:!1,activeType:null,pending:{},pendingCount:0,selected:null},cs={documents:{},activeDocumentId:null},zm=class extends Me{constructor(e,t,n){var o,i,r;super(e,t),this.redactionSelection$=new Map,this.pending$=re(),this.selected$=re(),this.state$=re(),this.events$=re(),this.documentUnsubscribers=new Map,this.config=n,this.selectionCapability=(o=this.registry.getPlugin("selection"))==null?void 0:o.provides(),this.interactionManagerCapability=(i=this.registry.getPlugin("interaction-manager"))==null?void 0:i.provides(),this.interactionManagerCapability&&(this.interactionManagerCapability.registerMode({id:Fe.MarqueeRedact,scope:"page",exclusive:!0,cursor:"crosshair"}),this.interactionManagerCapability.registerMode({id:Fe.RedactSelection,scope:"page",exclusive:!1})),(r=this.interactionManagerCapability)==null||r.onModeChange(a=>{const s=a.documentId;if(a.activeMode===Fe.RedactSelection)this.dispatch(ss(s,Fe.RedactSelection));else if(a.activeMode===Fe.MarqueeRedact)this.dispatch(ss(s,Fe.MarqueeRedact));else{const c=this.getDocumentState(s);c?.isRedacting&&this.dispatch((d=>({type:km,payload:d}))(s))}})}onDocumentLoadingStarted(e){this.dispatch((function(n,o){return{type:xm,payload:{documentId:n,state:o}}})(e,{...Hf})),this.redactionSelection$.set(e,re());const t=[];if(this.selectionCapability){const n=this.selectionCapability.forDocument(e),o=n.onSelectionChange(()=>{const r=this.getDocumentState(e);if(!r?.isRedacting)return;const a=n.getFormattedSelection(),s=this.redactionSelection$.get(e);s?.emit(a)}),i=n.onEndSelection(()=>{const r=this.getDocumentState(e);if(!r?.isRedacting||!this.checkPermission(e,N.ModifyContents))return;const a=n.getFormattedSelection().map(c=>({id:Ne(),kind:"text",page:c.pageIndex,rect:c.rect,rects:c.segmentRects}));this.dispatch(ro(e,a));const s=this.redactionSelection$.get(e);s?.emit([]),n.clear(),this.emitPendingChange(e),a.length&&this.selectPending(a[a.length-1].page,a[a.length-1].id,e)});t.push(o,i)}this.documentUnsubscribers.set(e,t),this.logger.debug("RedactionPlugin","DocumentOpened",`Initialized redaction state for document: ${e}`)}onDocumentLoaded(e){var t;(t=this.selectionCapability)==null||t.enableForMode(Fe.RedactSelection,e)}onDocumentClosed(e){this.dispatch((function(o){return{type:Cm,payload:o}})(e));const t=this.redactionSelection$.get(e);t?.clear(),this.redactionSelection$.delete(e);const n=this.documentUnsubscribers.get(e);n&&(n.forEach(o=>o()),this.documentUnsubscribers.delete(e)),this.logger.debug("RedactionPlugin","DocumentClosed",`Cleaned up redaction state for document: ${e}`)}async initialize(e){this.logger.info("RedactionPlugin","Initialize","Redaction plugin initialized")}buildCapability(){return{queueCurrentSelectionAsPending:()=>this.queueCurrentSelectionAsPending(),enableMarqueeRedact:()=>this.enableMarqueeRedact(),toggleMarqueeRedact:()=>this.toggleMarqueeRedact(),isMarqueeRedactActive:()=>this.isMarqueeRedactActive(),enableRedactSelection:()=>this.enableRedactSelection(),toggleRedactSelection:()=>this.toggleRedactSelection(),isRedactSelectionActive:()=>this.isRedactSelectionActive(),addPending:e=>this.addPendingItems(e),removePending:(e,t)=>this.removePendingItem(e,t),clearPending:()=>this.clearPendingItems(),commitAllPending:()=>this.commitAllPending(),commitPending:(e,t)=>this.commitPendingOne(e,t),endRedaction:()=>this.endRedactionMode(),startRedaction:()=>this.startRedactionMode(),selectPending:(e,t)=>this.selectPending(e,t),getSelectedPending:()=>this.getSelectedPending(),deselectPending:()=>this.deselectPending(),getState:()=>this.getDocumentStateOrThrow(),forDocument:e=>this.createRedactionScope(e),onPendingChange:this.pending$.on,onSelectedChange:this.selected$.on,onRedactionEvent:this.events$.on,onStateChange:this.state$.on}}createRedactionScope(e){return{queueCurrentSelectionAsPending:()=>this.queueCurrentSelectionAsPending(e),enableMarqueeRedact:()=>this.enableMarqueeRedact(e),toggleMarqueeRedact:()=>this.toggleMarqueeRedact(e),isMarqueeRedactActive:()=>this.isMarqueeRedactActive(e),enableRedactSelection:()=>this.enableRedactSelection(e),toggleRedactSelection:()=>this.toggleRedactSelection(e),isRedactSelectionActive:()=>this.isRedactSelectionActive(e),addPending:t=>this.addPendingItems(t,e),removePending:(t,n)=>this.removePendingItem(t,n,e),clearPending:()=>this.clearPendingItems(e),commitAllPending:()=>this.commitAllPending(e),commitPending:(t,n)=>this.commitPendingOne(t,n,e),endRedaction:()=>this.endRedactionMode(e),startRedaction:()=>this.startRedactionMode(e),selectPending:(t,n)=>this.selectPending(t,n,e),getSelectedPending:()=>this.getSelectedPending(e),deselectPending:()=>this.deselectPending(e),getState:()=>this.getDocumentStateOrThrow(e),onPendingChange:t=>this.pending$.on(n=>{n.documentId===e&&t(n.pending)}),onSelectedChange:t=>this.selected$.on(n=>{n.documentId===e&&t(n.selected)}),onRedactionEvent:t=>this.events$.on(n=>{n.documentId===e&&t(n)}),onStateChange:t=>this.state$.on(n=>{n.documentId===e&&t(n.state)})}}getDocumentState(e){const t=e??this.getActiveDocumentId();return this.state.documents[t]??null}getDocumentStateOrThrow(e){const t=this.getDocumentState(e);if(!t)throw new Error(`Redaction state not found for document: ${e??"active"}`);return t}addPendingItems(e,t){const n=t??this.getActiveDocumentId();this.checkPermission(n,N.ModifyContents)?(this.dispatch(ro(n,e)),this.emitPendingChange(n),this.events$.emit({type:"add",documentId:n,items:e})):this.logger.debug("RedactionPlugin","AddPendingItems",`Cannot add redactions: document ${n} lacks ModifyContents permission`)}removePendingItem(e,t,n){const o=n??this.getActiveDocumentId();this.dispatch(rs(o,e,t)),this.emitPendingChange(o),this.events$.emit({type:"remove",documentId:o,page:e,id:t})}clearPendingItems(e){const t=e??this.getActiveDocumentId();this.dispatch(as(t)),this.emitPendingChange(t),this.events$.emit({type:"clear",documentId:t})}selectPending(e,t,n){var o;const i=n??this.getActiveDocumentId();this.dispatch(((r,a,s)=>({type:Mm,payload:{documentId:r,page:a,id:s}}))(i,e,t)),(o=this.selectionCapability)==null||o.forDocument(i).clear(),this.emitSelectedChange(i)}getSelectedPending(e){var t;const n=e??this.getActiveDocumentId();return((t=this.getDocumentState(n))==null?void 0:t.selected)??null}deselectPending(e){const t=e??this.getActiveDocumentId();this.dispatch((n=>({type:Am,payload:n}))(t)),this.emitSelectedChange(t)}enableRedactSelection(e){var t;const n=e??this.getActiveDocumentId();this.checkPermission(n,N.ModifyContents)?(t=this.interactionManagerCapability)==null||t.forDocument(n).activate(Fe.RedactSelection):this.logger.debug("RedactionPlugin","EnableRedactSelection",`Cannot enable redact selection: document ${n} lacks ModifyContents permission`)}toggleRedactSelection(e){var t;const n=e??this.getActiveDocumentId(),o=(t=this.interactionManagerCapability)==null?void 0:t.forDocument(n);o?.getActiveMode()===Fe.RedactSelection?o.activateDefaultMode():o?.activate(Fe.RedactSelection)}isRedactSelectionActive(e){var t;const n=e??this.getActiveDocumentId();return((t=this.interactionManagerCapability)==null?void 0:t.forDocument(n).getActiveMode())===Fe.RedactSelection}enableMarqueeRedact(e){var t;const n=e??this.getActiveDocumentId();this.checkPermission(n,N.ModifyContents)?(t=this.interactionManagerCapability)==null||t.forDocument(n).activate(Fe.MarqueeRedact):this.logger.debug("RedactionPlugin","EnableMarqueeRedact",`Cannot enable marquee redact: document ${n} lacks ModifyContents permission`)}toggleMarqueeRedact(e){var t;const n=e??this.getActiveDocumentId(),o=(t=this.interactionManagerCapability)==null?void 0:t.forDocument(n);o?.getActiveMode()===Fe.MarqueeRedact?o.activateDefaultMode():o?.activate(Fe.MarqueeRedact)}isMarqueeRedactActive(e){var t;const n=e??this.getActiveDocumentId();return((t=this.interactionManagerCapability)==null?void 0:t.forDocument(n).getActiveMode())===Fe.MarqueeRedact}startRedactionMode(e){var t;const n=e??this.getActiveDocumentId();this.checkPermission(n,N.ModifyContents)?(t=this.interactionManagerCapability)==null||t.forDocument(n).activate(Fe.RedactSelection):this.logger.debug("RedactionPlugin","StartRedactionMode",`Cannot start redaction mode: document ${n} lacks ModifyContents permission`)}endRedactionMode(e){var t;const n=e??this.getActiveDocumentId();(t=this.interactionManagerCapability)==null||t.forDocument(n).activateDefaultMode()}onRedactionSelectionChange(e,t){const n=this.redactionSelection$.get(e);return n?.on(t)??(()=>{})}registerMarqueeOnPage(e){if(!this.interactionManagerCapability)return this.logger.warn("RedactionPlugin","MissingDependency","Interaction manager plugin not loaded, marquee redaction disabled"),()=>{};const t=this.coreState.core.documents[e.documentId];if(!t?.document)return this.logger.warn("RedactionPlugin","DocumentNotFound","Document not found"),()=>{};const n=t.document.pages[e.pageIndex];if(!n)return this.logger.warn("RedactionPlugin","PageNotFound",`Page ${e.pageIndex} not found`),()=>{};const o=(function(a){const{pageSize:s,scale:c,minDragPx:d=5,onPreview:u,onCommit:m}=a;let h=null,g=null;return{onPointerDown:(p,f)=>{var v;h=p,g={origin:{x:p.x,y:p.y},size:{width:0,height:0}},u?.(g),(v=f.setPointerCapture)==null||v.call(f)},onPointerMove:p=>{if(!h)return;const f=ve(p.x,0,s.width),v=ve(p.y,0,s.height);g={origin:{x:Math.min(h.x,f),y:Math.min(h.y,v)},size:{width:Math.abs(f-h.x),height:Math.abs(v-h.y)}},u?.(g)},onPointerUp:(p,f)=>{var v;g&&Math.max(g.size.width,g.size.height)*c>d&&m?.(g),h=null,g=null,u?.(null),(v=f.releasePointerCapture)==null||v.call(f)},onPointerCancel:(p,f)=>{var v;h=null,g=null,u?.(null),(v=f.releasePointerCapture)==null||v.call(f)}}})({pageSize:n.size,scale:e.scale,onPreview:e.callback.onPreview,onCommit:a=>{var s,c;const d={id:Ne(),kind:"area",page:e.pageIndex,rect:a};this.dispatch(ro(e.documentId,[d])),this.emitPendingChange(e.documentId),(c=(s=e.callback).onCommit)==null||c.call(s,a),this.enableRedactSelection(e.documentId),this.selectPending(e.pageIndex,d.id,e.documentId)}}),i=this.interactionManagerCapability.registerAlways({handlers:{onPointerDown:(a,s)=>{s.target===s.currentTarget&&this.deselectPending(e.documentId)}},scope:{type:"page",documentId:e.documentId,pageIndex:e.pageIndex}}),r=this.interactionManagerCapability.registerHandlers({documentId:e.documentId,modeId:Fe.MarqueeRedact,handlers:o,pageIndex:e.pageIndex});return()=>{i(),r()}}queueCurrentSelectionAsPending(e){const t=e??this.getActiveDocumentId();if(!this.selectionCapability)return ge.reject({code:ee.NotFound,message:"[RedactionPlugin] selection plugin required"});const n=this.coreState.core.documents[t];if(!n?.document)return ge.reject({code:ee.NotFound,message:"Document not found"});const o=this.selectionCapability.forDocument(t),i=o.getFormattedSelection();if(!i.length)return ge.resolve(!0);const r=Ne(),a=i.map(d=>({id:r,kind:"text",page:d.pageIndex,rect:d.rect,rects:d.segmentRects}));this.enableRedactSelection(t),this.dispatch(ro(t,a)),this.emitPendingChange(t);const s=a[a.length-1];this.selectPending(s.page,s.id,t);const c=this.redactionSelection$.get(t);return c?.emit([]),o.clear(),ge.resolve(!0)}commitPendingOne(e,t,n){const o=n??this.getActiveDocumentId();if(!this.checkPermission(o,N.ModifyContents))return this.logger.debug("RedactionPlugin","CommitPendingOne",`Cannot commit redaction: document ${o} lacks ModifyContents permission`),ge.reject({code:ee.Security,message:"Document lacks ModifyContents permission"});const i=this.coreState.core.documents[o];if(!i?.document)return ge.reject({code:ee.NotFound,message:"Document not found"});const r=this.getDocumentState(o);if(!r)return ge.reject({code:ee.NotFound,message:"Document state not found"});const a=(r.pending[e]??[]).find(u=>u.id===t);if(!a)return ge.resolve(!0);const s=a.kind==="text"?a.rects:[a.rect],c=i.document.pages[e];if(!c)return ge.reject({code:ee.NotFound,message:"Page not found"});const d=new Ce;return this.engine.redactTextInRects(i.document,c,s,{drawBlackBoxes:this.config.drawBlackBoxes}).wait(()=>{this.dispatch(rs(o,e,t)),this.emitPendingChange(o),this.dispatchCoreAction(Xr(o,[e])),this.events$.emit({type:"commit",documentId:o,success:!0}),d.resolve(!0)},u=>{this.events$.emit({type:"commit",documentId:o,success:!1,error:u.reason}),d.reject({code:ee.Unknown,message:"Failed to commit redactions"})}),d}commitAllPending(e){const t=e??this.getActiveDocumentId();if(!this.checkPermission(t,N.ModifyContents))return this.logger.debug("RedactionPlugin","CommitAllPending",`Cannot commit redactions: document ${t} lacks ModifyContents permission`),ge.reject({code:ee.Security,message:"Document lacks ModifyContents permission"});const n=this.coreState.core.documents[t];if(!n?.document)return ge.reject({code:ee.NotFound,message:"Document not found"});const o=this.getDocumentState(t);if(!o)return ge.reject({code:ee.NotFound,message:"Document state not found"});const i=new Map;for(const[c,d]of Object.entries(o.pending)){const u=Number(c),m=i.get(u)??[];for(const h of d)h.kind==="text"?m.push(...h.rects):m.push(h.rect);i.set(u,m)}const r=Array.from(i.entries()).filter(([c,d])=>d.length>0).map(([c])=>c),a=[];for(const[c,d]of i){const u=n.document.pages[c];u&&d.length&&a.push(this.engine.redactTextInRects(n.document,u,d,{drawBlackBoxes:this.config.drawBlackBoxes}))}const s=new Ce;return Ce.all(a).wait(()=>{this.dispatch(as(t)),this.dispatchCoreAction(Xr(t,r)),this.emitPendingChange(t),this.events$.emit({type:"commit",documentId:t,success:!0}),s.resolve(!0)},c=>{this.events$.emit({type:"commit",documentId:t,success:!1,error:c.reason}),s.reject({code:ee.Unknown,message:"Failed to commit redactions"})}),s}emitPendingChange(e){const t=this.getDocumentState(e);t&&this.pending$.emit({documentId:e,pending:t.pending})}emitSelectedChange(e){const t=this.getDocumentState(e);t&&this.selected$.emit({documentId:e,selected:t.selected})}emitStateChange(e){const t=this.getDocumentState(e);t&&this.state$.emit({documentId:e,state:t})}onStoreUpdated(e,t){for(const n in t.documents)t.documents[n]&&(this.emitPendingChange(n),this.emitSelectedChange(n),this.emitStateChange(n))}async destroy(){this.pending$.clear(),this.selected$.clear(),this.state$.clear(),this.events$.clear(),this.redactionSelection$.forEach(e=>e.clear()),this.redactionSelection$.clear(),this.documentUnsubscribers.forEach(e=>{e.forEach(t=>t())}),this.documentUnsubscribers.clear(),await super.destroy()}};zm.id="redaction";let yr=zm;const vn="redaction",Uf={manifest:{id:vn,name:"Redaction Plugin",version:"1.0.0",provides:["redaction"],requires:[],optional:["interaction-manager","selection"],defaultConfig:{drawBlackBoxes:!0}},create:(e,t)=>new yr(vn,e,t),reducer:(e=cs,t)=>{switch(t.type){case xm:{const{documentId:n,state:o}=t.payload;return{...e,documents:{...e.documents,[n]:o},activeDocumentId:e.activeDocumentId??n}}case Cm:{const n=t.payload,{[n]:o,...i}=e.documents;return{...e,documents:i,activeDocumentId:e.activeDocumentId===n?null:e.activeDocumentId}}case"REDACTION/SET_ACTIVE_DOCUMENT":return{...e,activeDocumentId:t.payload};case Sm:{const{documentId:n,items:o}=t.payload,i=e.documents[n];if(!i)return e;const r={...i.pending};for(const a of o)r[a.page]=(r[a.page]??[]).concat(a);return{...e,documents:{...e.documents,[n]:{...i,pending:r,pendingCount:ls(r)}}}}case Pm:{const{documentId:n,page:o,id:i}=t.payload,r=e.documents[n];if(!r)return e;const a=(r.pending[o]??[]).filter(d=>d.id!==i),s={...r.pending,[o]:a},c=r.selected&&!(r.selected.page===o&&r.selected.id===i);return{...e,documents:{...e.documents,[n]:{...r,pending:s,pendingCount:ls(s),selected:c?r.selected:null}}}}case Dm:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,pending:{},pendingCount:0,selected:null}}}:e}case Mm:{const{documentId:n,page:o,id:i}=t.payload,r=e.documents[n];return r?{...e,documents:{...e.documents,[n]:{...r,selected:{page:o,id:i}}}}:e}case Am:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,selected:null}}}:e}case Im:{const{documentId:n,mode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,isRedacting:!0,activeType:o}}}:e}case km:{const n=t.payload,o=e.documents[n];return o?{...e,documents:{...e.documents,[n]:{...o,pending:{},pendingCount:0,selected:null,isRedacting:!1,activeType:null}}}:e}case"SET_ACTIVE_TYPE":{const{documentId:n,mode:o}=t.payload,i=e.documents[n];return i?{...e,documents:{...e.documents,[n]:{...i,activeType:o}}}:e}default:return e}},initialState:cs},Tm=()=>st(yr.id),Wf=({documentId:e,pageIndex:t,scale:n,className:o,stroke:i="red",fill:r="transparent"})=>{const{plugin:a}=Tm(),s=Xe(e),[c,d]=z(null),u=X(()=>n!==void 0?n:s?.scale??1,[n,s?.scale]);return T(()=>{if(a&&e)return a.registerMarqueeOnPage({documentId:e,pageIndex:t,scale:u,callback:{onPreview:d}})},[a,e,t,u]),c?D("div",{style:{position:"absolute",pointerEvents:"none",left:c.origin.x*u,top:c.origin.y*u,width:c.size.width*u,height:c.size.height*u,border:`1px solid ${i}`,background:r,boxSizing:"border-box"},className:o}):null};function Em({color:e="#FFFF00",opacity:t=1,border:n="1px solid red",rects:o,rect:i,scale:r,onClick:a,style:s,...c}){return D(Y,{children:o.map((d,u)=>D("div",{onPointerDown:a,onTouchStart:a,style:{position:"absolute",border:n,left:(i?d.origin.x-i.origin.x:d.origin.x)*r,top:(i?d.origin.y-i.origin.y:d.origin.y)*r,width:d.size.width*r,height:d.size.height*r,background:e,opacity:t,pointerEvents:a?"auto":"none",cursor:a?"pointer":"default",zIndex:a?1:void 0,...s},...c},u))})}function Bf({documentId:e,pageIndex:t,scale:n}){const{plugin:o}=Tm(),[i,r]=z([]),[a,s]=z(null);return T(()=>{if(o)return o.onRedactionSelectionChange(e,c=>{const d=c.find(u=>u.pageIndex===t);r(d?.segmentRects??[]),s(d?.rect??null)})},[o,e,t]),a?D("div",{style:{mixBlendMode:"normal",pointerEvents:"none",position:"absolute",inset:0},children:D(Em,{color:"transparent",opacity:1,rects:i,scale:n,border:"1px solid red"})}):null}function qf({documentId:e,pageIndex:t,scale:n,bboxStroke:o="rgba(0,0,0,0.8)",rotation:i=sn.Degree0,selectionMenu:r}){const{provides:a}=Le(yr.id),[s,c]=z([]),[d,u]=z(null);T(()=>{if(!a)return;const h=a.forDocument(e),g=h.getState();c(g.pending[t]??[]),u(g.selected&&g.selected.page===t?g.selected.id:null);const p=h.onPendingChange(v=>c(v[t]??[])),f=h.onSelectedChange(v=>{u(v&&v.page===t?v.id:null)});return()=>{p?.(),f?.()}},[a,e,t]);const m=te((h,g)=>{h.stopPropagation(),a&&a.forDocument(e).selectPending(t,g)},[a,e,t]);return s.length?D("div",{style:{position:"absolute",inset:0,pointerEvents:"none"},children:s.map(h=>{if(h.kind==="area"){const p=h.rect;return D(Y,{children:[D("div",{style:{position:"absolute",left:p.origin.x*n,top:p.origin.y*n,width:p.size.width*n,height:p.size.height*n,background:"transparent",outline:d===h.id?`1px solid ${o}`:"none",outlineOffset:"2px",border:"1px solid red",pointerEvents:"auto",cursor:"pointer"},onPointerDown:f=>m(f,h.id),onTouchStart:f=>m(f,h.id)}),r&&D(Ao,{rect:{origin:{x:p.origin.x*n,y:p.origin.y*n},size:{width:p.size.width*n,height:p.size.height*n}},rotation:i,children:f=>r({...f,context:{type:"redaction",item:h,pageIndex:t},selected:d===h.id,placement:{suggestTop:!1}})})]},h.id)}const g=h.rect;return D(Y,{children:[D("div",{style:{position:"absolute",left:g.origin.x*n,top:g.origin.y*n,width:g.size.width*n,height:g.size.height*n,background:"transparent",outline:d===h.id?`1px solid ${o}`:"none",outlineOffset:"2px",pointerEvents:"auto",cursor:d===h.id?"pointer":"default"},children:D(Em,{rect:g,rects:h.rects,color:"transparent",border:"1px solid red",scale:n,onClick:p=>m(p,h.id)})}),r&&D(Ao,{rect:{origin:{x:g.origin.x*n,y:g.origin.y*n},size:{width:g.size.width*n,height:g.size.height*n}},rotation:i,children:p=>r({...p,context:{type:"redaction",item:h,pageIndex:t},selected:d===h.id,placement:{suggestTop:!1}})})]},h.id)})}):null}const Gf=({documentId:e,pageIndex:t,scale:n,rotation:o,selectionMenu:i})=>{const r=Xe(e),a=X(()=>n!==void 0?n:r?.scale??1,[n,r?.scale]);return D(Y,{children:[D(qf,{documentId:e,pageIndex:t,scale:a,rotation:X(()=>o!==void 0?o:r?.rotation??sn.Degree0,[o,r?.rotation]),selectionMenu:i}),D(Wf,{documentId:e,pageIndex:t,scale:a}),D(Bf,{documentId:e,pageIndex:t,scale:a})]})},_m=class extends Me{constructor(e,t){super(e,t)}async initialize(e){}buildCapability(){return{getAttachments:()=>this.getAttachments(),downloadAttachment:e=>this.downloadAttachment(e),forDocument:e=>this.createAttachmentScope(e)}}createAttachmentScope(e){return{getAttachments:()=>this.getAttachments(e),downloadAttachment:t=>this.downloadAttachment(t,e)}}downloadAttachment(e,t){const n=t??this.getActiveDocumentId(),o=this.coreState.core.documents[n];return o?.document?this.engine.readAttachmentContent(o.document,e):ge.reject({code:ee.NotFound,message:`Document ${n} not found`})}getAttachments(e){const t=e??this.getActiveDocumentId(),n=this.coreState.core.documents[t];return n?.document?this.engine.getAttachments(n.document):ge.reject({code:ee.NotFound,message:`Document ${t} not found`})}};_m.id="attachment";let Vf=_m;const ds="attachment",Kf={manifest:{id:ds,name:"Attachment Plugin",version:"1.0.0",provides:["attachment"],requires:[],optional:[],defaultConfig:{}},create:e=>new Vf(ds,e),reducer:()=>{},initialState:{}},Rm=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),To="-",us=[],Zf=e=>{const t=Xf(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:o}=e;return{getClassGroupId:i=>{if(i.startsWith("[")&&i.endsWith("]"))return Yf(i);const r=i.split(To),a=r[0]===""&&r.length>1?1:0;return Nm(r,a,t)},getConflictingClassGroupIds:(i,r)=>{if(r){const a=o[i],s=n[i];return a?s?((c,d)=>{const u=new Array(c.length+d.length);for(let m=0;m<c.length;m++)u[m]=c[m];for(let m=0;m<d.length;m++)u[c.length+m]=d[m];return u})(s,a):a:s||us}return n[i]||us}}},Nm=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const o=e[t],i=n.nextPart.get(o);if(i){const c=Nm(e,t+1,i);if(c)return c}const r=n.validators;if(r===null)return;const a=t===0?e.join(To):e.slice(t).join(To),s=r.length;for(let c=0;c<s;c++){const d=r[c];if(d.validator(a))return d.classGroupId}},Yf=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),o=t.slice(0,n);return o?"arbitrary.."+o:void 0})(),Xf=e=>{const{theme:t,classGroups:n}=e;return Qf(n,t)},Qf=(e,t)=>{const n=Rm();for(const o in e){const i=e[o];br(i,n,o,t)}return n},br=(e,t,n,o)=>{const i=e.length;for(let r=0;r<i;r++){const a=e[r];Jf(a,t,n,o)}},Jf=(e,t,n,o)=>{typeof e!="string"?typeof e!="function"?nv(e,t,n,o):tv(e,t,n,o):ev(e,t,n)},ev=(e,t,n)=>{(e===""?t:Om(t,e)).classGroupId=n},tv=(e,t,n,o)=>{ov(e)?br(e(o),t,n,o):(t.validators===null&&(t.validators=[]),t.validators.push(((i,r)=>({classGroupId:i,validator:r}))(n,e)))},nv=(e,t,n,o)=>{const i=Object.entries(e),r=i.length;for(let a=0;a<r;a++){const[s,c]=i[a];br(c,Om(t,s),n,o)}},Om=(e,t)=>{let n=e;const o=t.split(To),i=o.length;for(let r=0;r<i;r++){const a=o[r];let s=n.nextPart.get(a);s||(s=Rm(),n.nextPart.set(a,s)),n=s}return n},ov=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,iv=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),o=Object.create(null);const i=(r,a)=>{n[r]=a,t++,t>e&&(t=0,o=n,n=Object.create(null))};return{get(r){let a=n[r];return a!==void 0?a:(a=o[r])!==void 0?(i(r,a),a):void 0},set(r,a){r in n?n[r]=a:i(r,a)}}},rv=[],ms=(e,t,n,o,i)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:o,isExternal:i}),av=e=>{const{prefix:t,experimentalParseClassName:n}=e;let o=i=>{const r=[];let a,s=0,c=0,d=0;const u=i.length;for(let p=0;p<u;p++){const f=i[p];if(s===0&&c===0){if(f===":"){r.push(i.slice(d,p)),d=p+1;continue}if(f==="/"){a=p;continue}}f==="["?s++:f==="]"?s--:f==="("?c++:f===")"&&c--}const m=r.length===0?i:i.slice(d);let h=m,g=!1;return m.endsWith("!")?(h=m.slice(0,-1),g=!0):m.startsWith("!")&&(h=m.slice(1),g=!0),ms(r,g,h,a&&a>d?a-d:void 0)};if(t){const i=t+":",r=o;o=a=>a.startsWith(i)?r(a.slice(i.length)):ms(rv,!1,a,void 0,!0)}if(n){const i=o;o=r=>n({className:r,parseClassName:i})}return o},sv=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,o)=>{t.set(n,1e6+o)}),n=>{const o=[];let i=[];for(let r=0;r<n.length;r++){const a=n[r],s=a[0]==="[",c=t.has(a);s||c?(i.length>0&&(i.sort(),o.push(...i),i=[]),o.push(a)):i.push(a)}return i.length>0&&(i.sort(),o.push(...i)),o}},lv=/\s+/,Lm=e=>{if(typeof e=="string")return e;let t,n="";for(let o=0;o<e.length;o++)e[o]&&(t=Lm(e[o]))&&(n&&(n+=" "),n+=t);return n},cv=(e,...t)=>{let n,o,i,r;const a=s=>{const c=o(s);if(c)return c;const d=((u,m)=>{const{parseClassName:h,getClassGroupId:g,getConflictingClassGroupIds:p,sortModifiers:f}=m,v=[],y=u.trim().split(lv);let b="";for(let x=y.length-1;x>=0;x-=1){const w=y[x],{isExternal:C,modifiers:I,hasImportantModifier:k,baseClassName:S,maybePostfixModifierPosition:M}=h(w);if(C){b=w+(b.length>0?" "+b:b);continue}let P=!!M,E=g(P?S.substring(0,M):S);if(!E){if(!P){b=w+(b.length>0?" "+b:b);continue}if(E=g(S),!E){b=w+(b.length>0?" "+b:b);continue}P=!1}const A=I.length===0?"":I.length===1?I[0]:f(I).join(":"),j=k?A+"!":A,L=j+E;if(v.indexOf(L)>-1)continue;v.push(L);const H=p(E,P);for(let R=0;R<H.length;++R){const U=H[R];v.push(j+U)}b=w+(b.length>0?" "+b:b)}return b})(s,n);return i(s,d),d};return r=s=>{const c=t.reduce((d,u)=>u(d),e());return n=(d=>({cache:iv(d.cacheSize),parseClassName:av(d),sortModifiers:sv(d),...Zf(d)}))(c),o=n.cache.get,i=n.cache.set,r=a,a(s)},(...s)=>r(((...c)=>{let d,u,m=0,h="";for(;m<c.length;)(d=c[m++])&&(u=Lm(d))&&(h&&(h+=" "),h+=u);return h})(...s))},dv=[],Ue=e=>{const t=n=>n[e]||dv;return t.isThemeGetter=!0,t},$m=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Fm=/^\((?:(\w[\w-]*):)?(.+)\)$/i,uv=/^\d+\/\d+$/,mv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,hv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,gv=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,pv=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fv=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gn=e=>uv.test(e),ce=e=>!!e&&!Number.isNaN(Number(e)),Nt=e=>!!e&&Number.isInteger(Number(e)),ci=e=>e.endsWith("%")&&ce(e.slice(0,-1)),Mt=e=>mv.test(e),vv=()=>!0,yv=e=>hv.test(e)&&!gv.test(e),jm=()=>!1,bv=e=>pv.test(e),wv=e=>fv.test(e),xv=e=>!W(e)&&!B(e),Cv=e=>Pn(e,Wm,jm),W=e=>$m.test(e),Vt=e=>Pn(e,Bm,yv),di=e=>Pn(e,Dv,ce),hs=e=>Pn(e,Hm,jm),Iv=e=>Pn(e,Um,wv),ao=e=>Pn(e,qm,bv),B=e=>Fm.test(e),Tn=e=>Dn(e,Bm),kv=e=>Dn(e,Mv),gs=e=>Dn(e,Hm),Sv=e=>Dn(e,Wm),Pv=e=>Dn(e,Um),so=e=>Dn(e,qm,!0),Pn=(e,t,n)=>{const o=$m.exec(e);return!!o&&(o[1]?t(o[1]):n(o[2]))},Dn=(e,t,n=!1)=>{const o=Fm.exec(e);return!!o&&(o[1]?t(o[1]):n)},Hm=e=>e==="position"||e==="percentage",Um=e=>e==="image"||e==="url",Wm=e=>e==="length"||e==="size"||e==="bg-size",Bm=e=>e==="length",Dv=e=>e==="number",Mv=e=>e==="family-name",qm=e=>e==="shadow",Gn=cv(()=>{const e=Ue("color"),t=Ue("font"),n=Ue("text"),o=Ue("font-weight"),i=Ue("tracking"),r=Ue("leading"),a=Ue("breakpoint"),s=Ue("container"),c=Ue("spacing"),d=Ue("radius"),u=Ue("shadow"),m=Ue("inset-shadow"),h=Ue("text-shadow"),g=Ue("drop-shadow"),p=Ue("blur"),f=Ue("perspective"),v=Ue("aspect"),y=Ue("ease"),b=Ue("animate"),x=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",B,W],w=()=>[B,W,c],C=()=>[gn,"full","auto",...w()],I=()=>[Nt,"none","subgrid",B,W],k=()=>["auto",{span:["full",Nt,B,W]},Nt,B,W],S=()=>[Nt,"auto",B,W],M=()=>["auto","min","max","fr",B,W],P=()=>["auto",...w()],E=()=>[gn,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...w()],A=()=>[e,B,W],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",gs,hs,{position:[B,W]}],L=()=>["auto","cover","contain",Sv,Cv,{size:[B,W]}],H=()=>[ci,Tn,Vt],R=()=>["","none","full",d,B,W],U=()=>["",ce,Tn,Vt],F=()=>[ce,ci,gs,hs],V=()=>["","none",p,B,W],de=()=>["none",ce,B,W],oe=()=>["none",ce,B,W],he=()=>[ce,B,W],me=()=>[gn,"full",...w()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Mt],breakpoint:[Mt],color:[vv],container:[Mt],"drop-shadow":[Mt],ease:["in","out","in-out"],font:[xv],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Mt],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Mt],shadow:[Mt],spacing:["px",ce],text:[Mt],"text-shadow":[Mt],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",gn,W,B,v]}],container:["container"],columns:[{columns:[ce,W,B,s]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:x()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:C()}],"inset-x":[{"inset-x":C()}],"inset-y":[{"inset-y":C()}],start:[{start:C()}],end:[{end:C()}],top:[{top:C()}],right:[{right:C()}],bottom:[{bottom:C()}],left:[{left:C()}],visibility:["visible","invisible","collapse"],z:[{z:[Nt,"auto",B,W]}],basis:[{basis:[gn,"full","auto",s,...w()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ce,gn,"auto","initial","none",W]}],grow:[{grow:["",ce,B,W]}],shrink:[{shrink:["",ce,B,W]}],order:[{order:[Nt,"first","last","none",B,W]}],"grid-cols":[{"grid-cols":I()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":S()}],"col-end":[{"col-end":S()}],"grid-rows":[{"grid-rows":I()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":S()}],"row-end":[{"row-end":S()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":M()}],"auto-rows":[{"auto-rows":M()}],gap:[{gap:w()}],"gap-x":[{"gap-x":w()}],"gap-y":[{"gap-y":w()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:w()}],px:[{px:w()}],py:[{py:w()}],ps:[{ps:w()}],pe:[{pe:w()}],pt:[{pt:w()}],pr:[{pr:w()}],pb:[{pb:w()}],pl:[{pl:w()}],m:[{m:P()}],mx:[{mx:P()}],my:[{my:P()}],ms:[{ms:P()}],me:[{me:P()}],mt:[{mt:P()}],mr:[{mr:P()}],mb:[{mb:P()}],ml:[{ml:P()}],"space-x":[{"space-x":w()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":w()}],"space-y-reverse":["space-y-reverse"],size:[{size:E()}],w:[{w:[s,"screen",...E()]}],"min-w":[{"min-w":[s,"screen","none",...E()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[a]},...E()]}],h:[{h:["screen","lh",...E()]}],"min-h":[{"min-h":["screen","lh","none",...E()]}],"max-h":[{"max-h":["screen","lh",...E()]}],"font-size":[{text:["base",n,Tn,Vt]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[o,B,di]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ci,W]}],"font-family":[{font:[kv,W,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,B,W]}],"line-clamp":[{"line-clamp":[ce,"none",B,di]}],leading:[{leading:[r,...w()]}],"list-image":[{"list-image":["none",B,W]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",B,W]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:A()}],"text-color":[{text:A()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[ce,"from-font","auto",B,Vt]}],"text-decoration-color":[{decoration:A()}],"underline-offset":[{"underline-offset":[ce,"auto",B,W]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:w()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",B,W]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",B,W]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:j()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Nt,B,W],radial:["",B,W],conic:[Nt,B,W]},Pv,Iv]}],"bg-color":[{bg:A()}],"gradient-from-pos":[{from:H()}],"gradient-via-pos":[{via:H()}],"gradient-to-pos":[{to:H()}],"gradient-from":[{from:A()}],"gradient-via":[{via:A()}],"gradient-to":[{to:A()}],rounded:[{rounded:R()}],"rounded-s":[{"rounded-s":R()}],"rounded-e":[{"rounded-e":R()}],"rounded-t":[{"rounded-t":R()}],"rounded-r":[{"rounded-r":R()}],"rounded-b":[{"rounded-b":R()}],"rounded-l":[{"rounded-l":R()}],"rounded-ss":[{"rounded-ss":R()}],"rounded-se":[{"rounded-se":R()}],"rounded-ee":[{"rounded-ee":R()}],"rounded-es":[{"rounded-es":R()}],"rounded-tl":[{"rounded-tl":R()}],"rounded-tr":[{"rounded-tr":R()}],"rounded-br":[{"rounded-br":R()}],"rounded-bl":[{"rounded-bl":R()}],"border-w":[{border:U()}],"border-w-x":[{"border-x":U()}],"border-w-y":[{"border-y":U()}],"border-w-s":[{"border-s":U()}],"border-w-e":[{"border-e":U()}],"border-w-t":[{"border-t":U()}],"border-w-r":[{"border-r":U()}],"border-w-b":[{"border-b":U()}],"border-w-l":[{"border-l":U()}],"divide-x":[{"divide-x":U()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":U()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:A()}],"border-color-x":[{"border-x":A()}],"border-color-y":[{"border-y":A()}],"border-color-s":[{"border-s":A()}],"border-color-e":[{"border-e":A()}],"border-color-t":[{"border-t":A()}],"border-color-r":[{"border-r":A()}],"border-color-b":[{"border-b":A()}],"border-color-l":[{"border-l":A()}],"divide-color":[{divide:A()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[ce,B,W]}],"outline-w":[{outline:["",ce,Tn,Vt]}],"outline-color":[{outline:A()}],shadow:[{shadow:["","none",u,so,ao]}],"shadow-color":[{shadow:A()}],"inset-shadow":[{"inset-shadow":["none",m,so,ao]}],"inset-shadow-color":[{"inset-shadow":A()}],"ring-w":[{ring:U()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:A()}],"ring-offset-w":[{"ring-offset":[ce,Vt]}],"ring-offset-color":[{"ring-offset":A()}],"inset-ring-w":[{"inset-ring":U()}],"inset-ring-color":[{"inset-ring":A()}],"text-shadow":[{"text-shadow":["none",h,so,ao]}],"text-shadow-color":[{"text-shadow":A()}],opacity:[{opacity:[ce,B,W]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ce]}],"mask-image-linear-from-pos":[{"mask-linear-from":F()}],"mask-image-linear-to-pos":[{"mask-linear-to":F()}],"mask-image-linear-from-color":[{"mask-linear-from":A()}],"mask-image-linear-to-color":[{"mask-linear-to":A()}],"mask-image-t-from-pos":[{"mask-t-from":F()}],"mask-image-t-to-pos":[{"mask-t-to":F()}],"mask-image-t-from-color":[{"mask-t-from":A()}],"mask-image-t-to-color":[{"mask-t-to":A()}],"mask-image-r-from-pos":[{"mask-r-from":F()}],"mask-image-r-to-pos":[{"mask-r-to":F()}],"mask-image-r-from-color":[{"mask-r-from":A()}],"mask-image-r-to-color":[{"mask-r-to":A()}],"mask-image-b-from-pos":[{"mask-b-from":F()}],"mask-image-b-to-pos":[{"mask-b-to":F()}],"mask-image-b-from-color":[{"mask-b-from":A()}],"mask-image-b-to-color":[{"mask-b-to":A()}],"mask-image-l-from-pos":[{"mask-l-from":F()}],"mask-image-l-to-pos":[{"mask-l-to":F()}],"mask-image-l-from-color":[{"mask-l-from":A()}],"mask-image-l-to-color":[{"mask-l-to":A()}],"mask-image-x-from-pos":[{"mask-x-from":F()}],"mask-image-x-to-pos":[{"mask-x-to":F()}],"mask-image-x-from-color":[{"mask-x-from":A()}],"mask-image-x-to-color":[{"mask-x-to":A()}],"mask-image-y-from-pos":[{"mask-y-from":F()}],"mask-image-y-to-pos":[{"mask-y-to":F()}],"mask-image-y-from-color":[{"mask-y-from":A()}],"mask-image-y-to-color":[{"mask-y-to":A()}],"mask-image-radial":[{"mask-radial":[B,W]}],"mask-image-radial-from-pos":[{"mask-radial-from":F()}],"mask-image-radial-to-pos":[{"mask-radial-to":F()}],"mask-image-radial-from-color":[{"mask-radial-from":A()}],"mask-image-radial-to-color":[{"mask-radial-to":A()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[ce]}],"mask-image-conic-from-pos":[{"mask-conic-from":F()}],"mask-image-conic-to-pos":[{"mask-conic-to":F()}],"mask-image-conic-from-color":[{"mask-conic-from":A()}],"mask-image-conic-to-color":[{"mask-conic-to":A()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:j()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",B,W]}],filter:[{filter:["","none",B,W]}],blur:[{blur:V()}],brightness:[{brightness:[ce,B,W]}],contrast:[{contrast:[ce,B,W]}],"drop-shadow":[{"drop-shadow":["","none",g,so,ao]}],"drop-shadow-color":[{"drop-shadow":A()}],grayscale:[{grayscale:["",ce,B,W]}],"hue-rotate":[{"hue-rotate":[ce,B,W]}],invert:[{invert:["",ce,B,W]}],saturate:[{saturate:[ce,B,W]}],sepia:[{sepia:["",ce,B,W]}],"backdrop-filter":[{"backdrop-filter":["","none",B,W]}],"backdrop-blur":[{"backdrop-blur":V()}],"backdrop-brightness":[{"backdrop-brightness":[ce,B,W]}],"backdrop-contrast":[{"backdrop-contrast":[ce,B,W]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ce,B,W]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ce,B,W]}],"backdrop-invert":[{"backdrop-invert":["",ce,B,W]}],"backdrop-opacity":[{"backdrop-opacity":[ce,B,W]}],"backdrop-saturate":[{"backdrop-saturate":[ce,B,W]}],"backdrop-sepia":[{"backdrop-sepia":["",ce,B,W]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":w()}],"border-spacing-x":[{"border-spacing-x":w()}],"border-spacing-y":[{"border-spacing-y":w()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",B,W]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ce,"initial",B,W]}],ease:[{ease:["linear","initial",y,B,W]}],delay:[{delay:[ce,B,W]}],animate:[{animate:["none",b,B,W]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[f,B,W]}],"perspective-origin":[{"perspective-origin":x()}],rotate:[{rotate:de()}],"rotate-x":[{"rotate-x":de()}],"rotate-y":[{"rotate-y":de()}],"rotate-z":[{"rotate-z":de()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:he()}],"skew-x":[{"skew-x":he()}],"skew-y":[{"skew-y":he()}],transform:[{transform:[B,W,"","none","gpu","cpu"]}],"transform-origin":[{origin:x()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:me()}],"translate-x":[{"translate-x":me()}],"translate-y":[{"translate-y":me()}],"translate-z":[{"translate-z":me()}],"translate-none":["translate-none"],accent:[{accent:A()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:A()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",B,W]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":w()}],"scroll-mx":[{"scroll-mx":w()}],"scroll-my":[{"scroll-my":w()}],"scroll-ms":[{"scroll-ms":w()}],"scroll-me":[{"scroll-me":w()}],"scroll-mt":[{"scroll-mt":w()}],"scroll-mr":[{"scroll-mr":w()}],"scroll-mb":[{"scroll-mb":w()}],"scroll-ml":[{"scroll-ml":w()}],"scroll-p":[{"scroll-p":w()}],"scroll-px":[{"scroll-px":w()}],"scroll-py":[{"scroll-py":w()}],"scroll-ps":[{"scroll-ps":w()}],"scroll-pe":[{"scroll-pe":w()}],"scroll-pt":[{"scroll-pt":w()}],"scroll-pr":[{"scroll-pr":w()}],"scroll-pb":[{"scroll-pb":w()}],"scroll-pl":[{"scroll-pl":w()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",B,W]}],fill:[{fill:["none",...A()]}],"stroke-w":[{stroke:[ce,Tn,Vt,di]}],stroke:[{stroke:["none",...A()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});var Av=["children","onClick","active","disabled","className","anchorRef"];function zv(e){var t=e.children,n=e.onClick,o=e.active,i=o!==void 0&&o,r=e.disabled,a=r!==void 0&&r,s=e.className,c=s===void 0?"":s,d=e.anchorRef,u=Oo(e,Av);return l("button",O({ref:d,onClick:n,disabled:a,className:Gn("flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors hover:bg-interactive-hover hover:ring hover:ring-accent cursor-pointer rounded-none px-2 py-1 text-sm hover:bg-transparent border-b-2 hover:border-b-fg-muted hover:ring-transparent",i?"border-b-accent text-accent hover:border-b-accent":"border-b-transparent",a?"cursor-not-allowed opacity-50":"",c)},u),t)}var jn=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M9 6l6 6l-6 6"}))},wr=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M15 6l-6 6l6 6"}))},Gm=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M6 9l6 6l6 -6"}))},Vm=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0"}),l("path",{d:"M21 21l-6 -6"}))},Km=function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M18 6l-12 12"}),l("path",{d:"M6 6l12 12"}))},Tv={download:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),l("path",{d:"M7 11l5 5l5 -5"}),l("path",{d:"M12 4l0 12"}))},menu:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 8l16 0"}),l("path",{d:"M4 16l16 0"}))},fullscreen:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2"}),l("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),l("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),l("path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2"}))},fullscreenExit:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 8v-2c0 -.551 .223 -1.05 .584 -1.412"}),l("path",{d:"M4 16v2a2 2 0 0 0 2 2h2"}),l("path",{d:"M16 4h2a2 2 0 0 1 2 2v2"}),l("path",{d:"M16 20h2c.545 0 1.04 -.218 1.4 -.572"}),l("path",{d:"M3 3l18 18"}))},save:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),l("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),l("path",{d:"M14 4l0 4l-6 0l0 -4"}))},print:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2"}),l("path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4"}),l("path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z"}))},settings:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),l("path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"}))},viewSettings:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),l("path",{d:"M12 10.5v1.5"}),l("path",{d:"M12 16v1.5"}),l("path",{d:"M15.031 12.25l-1.299 .75"}),l("path",{d:"M10.268 15l-1.3 .75"}),l("path",{d:"M15 15.803l-1.285 -.773"}),l("path",{d:"M10.285 12.97l-1.285 -.773"}),l("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),l("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}))},rotateClockwise:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4.05 11a8 8 0 1 1 .5 4m-.5 5v-5h5"}))},rotateCounterClockwise:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5"}))},singlePage:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M5 3m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z"}))},doublePage:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M3 3m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1zm9 -1v18"}))},zoomIn:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0"}),l("path",{d:"M9 12h6"}),l("path",{d:"M12 9v6"}))},zoomOut:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}),l("path",{d:"M9 12l6 0"}))},fitToWidth:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 12v-6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6"}),l("path",{d:"M10 18h-7"}),l("path",{d:"M21 18h-7"}),l("path",{d:"M6 15l-3 3l3 3"}),l("path",{d:"M18 15l3 3l-3 3"}))},fitToPage:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h6"}),l("path",{d:"M18 14v7"}),l("path",{d:"M18 3v7"}),l("path",{d:"M15 18l3 3l3 -3"}),l("path",{d:"M15 6l3 -3l3 3"}))},chevronRight:jn,chevronLeft:wr,chevronDown:Gm,search:Vm,comment:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M12 11v.01"}),l("path",{d:"M8 11v.01"}),l("path",{d:"M16 11v.01"}),l("path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3z"}))},sidebar:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 18v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z"}),l("path",{d:"M10 18v-12a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z"}))},dots:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),l("path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),l("path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}))},vertical:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M8 7l4 -4l4 4"}),l("path",{d:"M8 17l4 4l4 -4"}),l("path",{d:"M12 3l0 18"}))},horizontal:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M7 8l-4 4l4 4"}),l("path",{d:"M17 8l4 4l-4 4"}),l("path",{d:"M3 12l18 0"}))},book:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),l("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),l("path",{d:"M3 6l0 13"}),l("path",{d:"M12 6l0 13"}),l("path",{d:"M21 6l0 13"}))},book2:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z"}),l("path",{d:"M19 16h-12a2 2 0 0 0 -2 2"}),l("path",{d:"M9 8h6"}))},squares:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z"}),l("path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3"}))},listTree:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M9 6h11"}),l("path",{d:"M12 12h8"}),l("path",{d:"M15 18h5"}),l("path",{d:"M5 6v.01"}),l("path",{d:"M8 12v.01"}),l("path",{d:"M11 18v.01"}))},paperclip:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5"}))},copy:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z"}),l("path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1"}))},underline:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 20h16",stroke:a}),l("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),l("path",{d:"M8 10h8",stroke:"currentColor"}))},squiggly:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),l("path",{d:"M8 10h8",stroke:"currentColor"}),l("path",{d:"M4 20c1.5 -1.5 3.5 -1.5 5 0s3.5 1.5 5 0 3.5 -1.5 5 0",stroke:a}))},strikethrough:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),l("path",{d:"M4 10h16",stroke:a}))},highlight:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("rect",{x:"2",y:"6",width:"20",height:"16",rx:"2",fill:a,stroke:"none"}),l("path",{d:"M8 16v-8a4 4 0 1 1 8 0v8",stroke:"currentColor"}),l("path",{d:"M8 10h8",stroke:"currentColor"}))},palette:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"}),l("path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),l("path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),l("path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}))},x:Km,fileImport:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),l("path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3"}))},hand:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5"}),l("path",{d:"M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5"}),l("path",{d:"M14 5.5a1.5 1.5 0 0 1 3 0v6.5"}),l("path",{d:"M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47"}))},zoomInArea:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M15 13v4"}),l("path",{d:"M13 15h4"}),l("path",{d:"M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0"}),l("path",{d:"M22 22l-3 -3"}),l("path",{d:"M6 18h-1a2 2 0 0 1 -2 -2v-1"}),l("path",{d:"M3 11v-1"}),l("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),l("path",{d:"M10 3h1"}),l("path",{d:"M15 3h1a2 2 0 0 1 2 2v1"}))},screenshot:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M7 19a2 2 0 0 1 -2 -2"}),l("path",{d:"M5 13v-2"}),l("path",{d:"M5 7a2 2 0 0 1 2 -2"}),l("path",{d:"M11 5h2"}),l("path",{d:"M17 5a2 2 0 0 1 2 2"}),l("path",{d:"M19 11v2"}),l("path",{d:"M19 17v4"}),l("path",{d:"M21 19h-4"}),l("path",{d:"M13 19h-2"}))},arrowBackUp:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M9 14l-4 -4l4 -4"}),l("path",{d:"M5 10h11a4 4 0 1 1 0 8h-1"}))},arrowForwardUp:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M15 14l4 -4l-4 -4"}),l("path",{d:"M19 10h-11a4 4 0 1 0 0 8h1"}))},trash:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 7l16 0"}),l("path",{d:"M10 11l0 6"}),l("path",{d:"M14 11l0 6"}),l("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),l("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))},deviceFloppy:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),l("path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),l("path",{d:"M14 4l0 4l-6 0l0 -4"}))},pencilMarker:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":i,class:e.className,role:"img","aria-label":e.title},l("path",{d:"m9.109 16.275 8.856-8.097c.812-.743.87-2.014.127-2.826s-2.014-.869-2.826-.127L6.41 13.322l-.127 2.826zM13.79 6.575l2.7 2.952",stroke:"currentColor"}),l("path",{stroke:a,d:"M19.375 20.125c.569.063-4.05-.562-6.412-.437s-4.759 1.229-6.857 1.625c-1.764.687-3.404-.938-1.981-2.5"}))},circle:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.secondaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:s===void 0?"none":s,stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"}))},square:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.secondaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:s===void 0?"none":s,stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}))},line:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2.2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M20 4l-16 16"}))},lineArrow:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2.2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M20 4l-16 16"}),l("path",{d:"M16 3h5v5"}))},polygon:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.secondaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:s===void 0?"none":s,stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M13.163 2.168l8.021 5.828c.694 .504 .984 1.397 .719 2.212l-3.064 9.43a1.978 1.978 0 0 1 -1.881 1.367h-9.916a1.978 1.978 0 0 1 -1.881 -1.367l-3.064 -9.43a1.978 1.978 0 0 1 .719 -2.212l8.021 -5.828a1.978 1.978 0 0 1 2.326 0z"}))},zigzag:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{d:"M12 2.4L21.36 11.76L2.64 12.24L12 21.6"}))},text:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M6.5 15.5m-3.5 0a3.5 3.5 0 1 0 7 0a3.5 3.5 0 1 0 -7 0"}),l("path",{d:"M14 19v-10.5a3.5 3.5 0 0 1 7 0v10.5"}),l("path",{d:"M14 13h7"}),l("path",{d:"M10 12v7"}))},italic:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M11 5l6 0"}),l("path",{d:"M7 19l6 0"}),l("path",{d:"M14 5l-4 14"}))},bold:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}),l("path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"}))},alignLeft:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 6l16 0"}),l("path",{d:"M4 12l10 0"}),l("path",{d:"M4 18l14 0"}))},alignCenter:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 6l16 0"}),l("path",{d:"M8 12l8 0"}),l("path",{d:"M6 18l12 0"}))},alignRight:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M4 6l16 0"}),l("path",{d:"M10 12l10 0"}),l("path",{d:"M6 18l14 0"}))},alignTop:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),l("path",{d:"M11 13h2"}),l("path",{d:"M9 10h6"}),l("path",{d:"M10 7h4"}))},alignMiddle:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),l("path",{d:"M11 15h2"}),l("path",{d:"M9 12h6"}),l("path",{d:"M10 9h4"}))},alignBottom:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M3 19v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"}),l("path",{d:"M11 17h2"}),l("path",{d:"M9 14h6"}),l("path",{d:"M10 11h4"}))},photo:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M15 8h.01"}),l("path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z"}),l("path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5"}),l("path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3"}))},pointer:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M7.904 17.563a1.2 1.2 0 0 0 2.228 .308l2.09 -3.093l4.907 4.907a1.067 1.067 0 0 0 1.509 0l1.047 -1.047a1.067 1.067 0 0 0 0 -1.509l-4.907 -4.907l3.113 -2.09a1.2 1.2 0 0 0 -.309 -2.228l-13.582 -3.904l3.904 13.563z"}))},redact:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M7 4h10"}),l("path",{d:"M12 4v8"}),l("defs",null,l("clipPath",{id:"stripeClip"},l("rect",{x:"2",y:"12",width:"20",height:"10",rx:"2"}))),l("rect",{x:"2",y:"12",width:"20",height:"10",rx:"2",fill:"none"}),l("g",{"clip-path":"url(#stripeClip)"},l("path",{d:"M-7 24l12 -12"}),l("path",{d:"M-3 24l12 -12"}),l("path",{d:"M1 24l12 -12"}),l("path",{d:"M5 24l12 -12"}),l("path",{d:"M9 24l12 -12"}),l("path",{d:"M13 24l12 -12"}),l("path",{d:"M17 24l12 -12"}),l("path",{d:"M21 24l12 -12"}),l("path",{d:"M25 24l12 -12"})))},redactArea:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M6 20h-1a2 2 0 0 1 -2 -2v-1"}),l("path",{d:"M3 13v-3"}),l("path",{d:"M3 6v-1a2 2 0 0 1 2 -2h1"}),l("path",{d:"M10 3h3"}),l("path",{d:"M17 3h1a2 2 0 0 1 2 2v1"}),l("defs",null,l("clipPath",{id:"redactClip"},l("rect",{x:"10",y:"10",width:"12",height:"12",rx:"2"}))),l("rect",{x:"10",y:"10",width:"12",height:"12",rx:"2",fill:"none"}),l("g",{"clip-path":"url(#redactClip)"},l("path",{d:"M-2 24l14 -14"}),l("path",{d:"M2 24l14 -14"}),l("path",{d:"M6 24l14 -14"}),l("path",{d:"M10 24l15 -15"}),l("path",{d:"M14 24l15 -15"}),l("path",{d:"M18 24l15 -15"})))},check:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor;return l("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r===void 0?"currentColor":r,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:e.className,role:"img","aria-label":e.title},l("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),l("path",{d:"M5 12l5 5l10 -10"}))},file:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.className,c=e.title;return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:s,"aria-hidden":!c,role:c?"img":"presentation"},c&&l("title",null,c),l("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l("polyline",{points:"14 2 14 8 20 8"}))},plus:function(e){var t=e.size,n=t===void 0?24:t,o=e.strokeWidth,i=o===void 0?2:o,r=e.primaryColor,a=r===void 0?"currentColor":r,s=e.className,c=e.title;return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:a,"stroke-width":i,"stroke-linecap":"round","stroke-linejoin":"round",class:s,"aria-hidden":!c,role:c?"img":"presentation"},c&&l("title",null,c),l("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))},lock:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},l("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),l("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"}))},unlock:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},l("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),l("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"}))},alertTriangle:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},l("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),l("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),l("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}))},eye:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},l("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l("circle",{cx:"12",cy:"12",r:"3"}))},"eye-off":function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},l("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),l("line",{x1:"1",y1:"1",x2:"23",y2:"23"}))},info:function(e){var t=e.size,n=t===void 0?24:t,o=e.className;return l("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:o===void 0?"":o,style:e.style},l("circle",{cx:"12",cy:"12",r:"10"}),l("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),l("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))}},Ri=new Map,Ev=/^[MmZzLlHhVvCcSsQqTtAa0-9\s,.\-eE]+$/;function _v(e){return Ev.test(e.trim())}function Zm(e,t){for(var n=(function(r){var a,s;return"path"in r?{viewBox:r.viewBox||"0 0 24 24",paths:[{d:r.path,stroke:(a=r.stroke)!==null&&a!==void 0?a:"primary",fill:(s=r.fill)!==null&&s!==void 0?s:"none",strokeWidth:r.strokeWidth}],strokeLinecap:r.strokeLinecap||"round",strokeLinejoin:r.strokeLinejoin||"round",strokeWidth:r.strokeWidth}:{viewBox:r.viewBox||"0 0 24 24",paths:r.paths,strokeLinecap:r.strokeLinecap||"round",strokeLinejoin:r.strokeLinejoin||"round",strokeWidth:r.strokeWidth}})(t),o=0;o<n.paths.length;o++){var i=n.paths[o];if(!i.d||!_v(i.d))throw new Error('Invalid path data for icon "'.concat(e,'" at path index ').concat(o,". ")+"Path must only contain valid SVG path commands.")}Ri.set(e,n)}function ps(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var o=$(n[t],2);Zm(o[0],o[1])}}function fs(e,t,n){return e&&e!=="none"?e==="primary"?t:e==="secondary"?n:e==="currentColor"?"currentColor":e:"none"}function ae(e){var t,n=e.icon,o=e.title,i=e.size,r=i===void 0?24:i,a=e.strokeWidth,s=a===void 0?2:a,c=e.primaryColor,d=c===void 0?"currentColor":c,u=e.secondaryColor,m=u===void 0?"none":u,h=e.className,g=Tv[n];if(g)return l(g,{size:r,strokeWidth:s,primaryColor:d,secondaryColor:m,className:h,title:o});if(t=n,Ri.has(t)){var p=(function(f){return Ri.get(f)})(n);return(function(f,v){var y,b=v.size,x=v.strokeWidth,w=v.primaryColor,C=v.secondaryColor,I=v.className,k=v.title,S=(y=f.strokeWidth)!==null&&y!==void 0?y:x;return l("svg",{width:b,height:b,viewBox:f.viewBox,"stroke-linecap":f.strokeLinecap,"stroke-linejoin":f.strokeLinejoin,class:I,role:"img","aria-label":k},f.paths.map(function(M,P){var E,A=fs(M.stroke,w,C),j=fs(M.fill,w,C),L=(E=M.strokeWidth)!==null&&E!==void 0?E:S;return l("path",{key:P,d:M.d,stroke:A,fill:j,"stroke-width":A!=="none"?L:void 0,opacity:M.opacity})}))})(p,{size:r,strokeWidth:s,primaryColor:d,secondaryColor:m,className:h,title:o})}return console.warn("Icon not found: ".concat(n)),null}var Rv=["id","children","onClick","active","disabled","className","tooltip","elementRef"];function Ge(e){var t=e.id,n=e.children,o=e.onClick,i=e.active,r=i!==void 0&&i,a=e.disabled,s=a!==void 0&&a,c=e.className,d=c===void 0?"":c,u=e.tooltip,m=e.elementRef,h=Oo(e,Rv);return l("button",O({id:t,ref:m,onClick:o,className:"flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors ".concat(r?"bg-interactive-selected text-accent ring-accent border-none shadow ring":"hover:bg-interactive-hover hover:ring-accent hover:ring"," ").concat(s?"cursor-not-allowed opacity-50 hover:bg-transparent hover:ring-0":"cursor-pointer"," ").concat(d),title:u},h),n)}const Cn=Math.min,Qt=Math.max,Eo=Math.round,lo=Math.floor,kt=e=>({x:e,y:e}),Nv={left:"right",right:"left",bottom:"top",top:"bottom"},Ov={start:"end",end:"start"};function Ni(e,t,n){return Qt(e,Cn(t,n))}function Vn(e,t){return typeof e=="function"?e(t):e}function nn(e){return e.split("-")[0]}function Kn(e){return e.split("-")[1]}function Ym(e){return e==="x"?"y":"x"}function xr(e){return e==="y"?"height":"width"}const Lv=new Set(["top","bottom"]);function $t(e){return Lv.has(nn(e))?"y":"x"}function Cr(e){return Ym($t(e))}function Oi(e){return e.replace(/start|end/g,t=>Ov[t])}const vs=["left","right"],ys=["right","left"],$v=["top","bottom"],Fv=["bottom","top"];function jv(e,t,n,o){const i=Kn(e);let r=(function(a,s,c){switch(a){case"top":case"bottom":return c?s?ys:vs:s?vs:ys;case"left":case"right":return s?$v:Fv;default:return[]}})(nn(e),n==="start",o);return i&&(r=r.map(a=>a+"-"+i),t&&(r=r.concat(r.map(Oi)))),r}function co(e){return e.replace(/left|right|bottom|top/g,t=>Nv[t])}function Xm(e){return typeof e!="number"?(function(t){return{top:0,right:0,bottom:0,left:0,...t}})(e):{top:e,right:e,bottom:e,left:e}}function _o(e){const{x:t,y:n,width:o,height:i}=e;return{width:o,height:i,top:n,left:t,right:t+o,bottom:n+i,x:t,y:n}}function bs(e,t,n){let{reference:o,floating:i}=e;const r=$t(t),a=Cr(t),s=xr(a),c=nn(t),d=r==="y",u=o.x+o.width/2-i.width/2,m=o.y+o.height/2-i.height/2,h=o[s]/2-i[s]/2;let g;switch(c){case"top":g={x:u,y:o.y-i.height};break;case"bottom":g={x:u,y:o.y+o.height};break;case"right":g={x:o.x+o.width,y:m};break;case"left":g={x:o.x-i.width,y:m};break;default:g={x:o.x,y:o.y}}switch(Kn(t)){case"start":g[a]-=h*(n&&d?-1:1);break;case"end":g[a]+=h*(n&&d?-1:1)}return g}async function Qm(e,t){var n;t===void 0&&(t={});const{x:o,y:i,platform:r,rects:a,elements:s,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:g=0}=Vn(t,e),p=Xm(g),f=s[h?m==="floating"?"reference":"floating":m],v=_o(await r.getClippingRect({element:(n=await(r.isElement==null?void 0:r.isElement(f)))==null||n?f:f.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(s.floating)),boundary:d,rootBoundary:u,strategy:c})),y=m==="floating"?{x:o,y:i,width:a.floating.width,height:a.floating.height}:a.reference,b=await(r.getOffsetParent==null?void 0:r.getOffsetParent(s.floating)),x=await(r.isElement==null?void 0:r.isElement(b))&&await(r.getScale==null?void 0:r.getScale(b))||{x:1,y:1},w=_o(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:b,strategy:c}):y);return{top:(v.top-w.top+p.top)/x.y,bottom:(w.bottom-v.bottom+p.bottom)/x.y,left:(v.left-w.left+p.left)/x.x,right:(w.right-v.right+p.right)/x.x}}const Hv=new Set(["left","top"]);function Zo(){return typeof window<"u"}function In(e){return Jm(e)?(e.nodeName||"").toLowerCase():"#document"}function dt(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function St(e){var t;return(t=(Jm(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Jm(e){return!!Zo()&&(e instanceof Node||e instanceof dt(e).Node)}function vt(e){return!!Zo()&&(e instanceof Element||e instanceof dt(e).Element)}function Pt(e){return!!Zo()&&(e instanceof HTMLElement||e instanceof dt(e).HTMLElement)}function ws(e){return!(!Zo()||typeof ShadowRoot>"u")&&(e instanceof ShadowRoot||e instanceof dt(e).ShadowRoot)}const Uv=new Set(["inline","contents"]);function Hn(e){const{overflow:t,overflowX:n,overflowY:o,display:i}=yt(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!Uv.has(i)}const Wv=new Set(["table","td","th"]);function Bv(e){return Wv.has(In(e))}const qv=[":popover-open",":modal"];function Ro(e){return qv.some(t=>{try{return e.matches(t)}catch{return!1}})}const Gv=["transform","translate","scale","rotate","perspective"],Vv=["transform","translate","scale","rotate","perspective","filter"],Kv=["paint","layout","strict","content"];function Li(e){const t=Ir(),n=vt(e)?yt(e):e;return Gv.some(o=>!!n[o]&&n[o]!=="none")||!!n.containerType&&n.containerType!=="normal"||!t&&!!n.backdropFilter&&n.backdropFilter!=="none"||!t&&!!n.filter&&n.filter!=="none"||Vv.some(o=>(n.willChange||"").includes(o))||Kv.some(o=>(n.contain||"").includes(o))}function Ir(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Zv=new Set(["html","body","#document"]);function yn(e){return Zv.has(In(e))}function yt(e){return dt(e).getComputedStyle(e)}function Yo(e){return vt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Ft(e){if(In(e)==="html")return e;const t=e.assignedSlot||e.parentNode||ws(e)&&e.host||St(e);return ws(t)?t.host:t}function eh(e){const t=Ft(e);return yn(t)?e.ownerDocument?e.ownerDocument.body:e.body:Pt(t)&&Hn(t)?t:eh(t)}function Un(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=eh(e),r=i===((o=e.ownerDocument)==null?void 0:o.body),a=dt(i);if(r){const s=$i(a);return t.concat(a,a.visualViewport||[],Hn(i)?i:[],s&&n?Un(s):[])}return t.concat(i,Un(i,[],n))}function $i(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function th(e){const t=yt(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const i=Pt(e),r=i?e.offsetWidth:n,a=i?e.offsetHeight:o,s=Eo(n)!==r||Eo(o)!==a;return s&&(n=r,o=a),{width:n,height:o,$:s}}function kr(e){return vt(e)?e:e.contextElement}function bn(e){const t=kr(e);if(!Pt(t))return kt(1);const n=t.getBoundingClientRect(),{width:o,height:i,$:r}=th(t);let a=(r?Eo(n.width):n.width)/o,s=(r?Eo(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const Yv=kt(0);function nh(e){const t=dt(e);return Ir()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Yv}function on(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),r=kr(e);let a=kt(1);t&&(o?vt(o)&&(a=bn(o)):a=bn(e));const s=(function(h,g,p){return g===void 0&&(g=!1),!(!p||g&&p!==dt(h))&&g})(r,n,o)?nh(r):kt(0);let c=(i.left+s.x)/a.x,d=(i.top+s.y)/a.y,u=i.width/a.x,m=i.height/a.y;if(r){const h=dt(r),g=o&&vt(o)?dt(o):o;let p=h,f=$i(p);for(;f&&o&&g!==p;){const v=bn(f),y=f.getBoundingClientRect(),b=yt(f),x=y.left+(f.clientLeft+parseFloat(b.paddingLeft))*v.x,w=y.top+(f.clientTop+parseFloat(b.paddingTop))*v.y;c*=v.x,d*=v.y,u*=v.x,m*=v.y,c+=x,d+=w,p=dt(f),f=$i(p)}}return _o({width:u,height:m,x:c,y:d})}function No(e,t){const n=Yo(e).scrollLeft;return t?t.left+n:on(St(e)).left+n}function oh(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-No(e,n),y:n.top+t.scrollTop}}const Xv=new Set(["absolute","fixed"]);function xs(e,t,n){let o;if(t==="viewport")o=(function(i,r){const a=dt(i),s=St(i),c=a.visualViewport;let d=s.clientWidth,u=s.clientHeight,m=0,h=0;if(c){d=c.width,u=c.height;const p=Ir();(!p||p&&r==="fixed")&&(m=c.offsetLeft,h=c.offsetTop)}const g=No(s);if(g<=0){const p=s.ownerDocument,f=p.body,v=getComputedStyle(f),y=p.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,b=Math.abs(s.clientWidth-f.clientWidth-y);b<=25&&(d-=b)}else g<=25&&(d+=g);return{width:d,height:u,x:m,y:h}})(e,n);else if(t==="document")o=(function(i){const r=St(i),a=Yo(i),s=i.ownerDocument.body,c=Qt(r.scrollWidth,r.clientWidth,s.scrollWidth,s.clientWidth),d=Qt(r.scrollHeight,r.clientHeight,s.scrollHeight,s.clientHeight);let u=-a.scrollLeft+No(i);const m=-a.scrollTop;return yt(s).direction==="rtl"&&(u+=Qt(r.clientWidth,s.clientWidth)-c),{width:c,height:d,x:u,y:m}})(St(e));else if(vt(t))o=(function(i,r){const a=on(i,!0,r==="fixed"),s=a.top+i.clientTop,c=a.left+i.clientLeft,d=Pt(i)?bn(i):kt(1);return{width:i.clientWidth*d.x,height:i.clientHeight*d.y,x:c*d.x,y:s*d.y}})(t,n);else{const i=nh(e);o={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return _o(o)}function ih(e,t){const n=Ft(e);return!(n===t||!vt(n)||yn(n))&&(yt(n).position==="fixed"||ih(n,t))}function Qv(e,t,n){const o=Pt(t),i=St(t),r=n==="fixed",a=on(e,!0,r,t);let s={scrollLeft:0,scrollTop:0};const c=kt(0);function d(){c.x=No(i)}if(o||!o&&!r)if((In(t)!=="body"||Hn(i))&&(s=Yo(t)),o){const m=on(t,!0,r,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else i&&d();r&&!o&&i&&d();const u=!i||o||r?kt(0):oh(i,s);return{x:a.left+s.scrollLeft-c.x-u.x,y:a.top+s.scrollTop-c.y-u.y,width:a.width,height:a.height}}function ui(e){return yt(e).position==="static"}function Cs(e,t){if(!Pt(e)||yt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return St(e)===n&&(n=n.ownerDocument.body),n}function Is(e,t){const n=dt(e);if(Ro(e))return n;if(!Pt(e)){let i=Ft(e);for(;i&&!yn(i);){if(vt(i)&&!ui(i))return i;i=Ft(i)}return n}let o=Cs(e,t);for(;o&&Bv(o)&&ui(o);)o=Cs(o,t);return o&&yn(o)&&ui(o)&&!Li(o)?n:o||(function(i){let r=Ft(i);for(;Pt(r)&&!yn(r);){if(Li(r))return r;if(Ro(r))return null;r=Ft(r)}return null})(e)||n}const Jv={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:o,strategy:i}=e;const r=i==="fixed",a=St(o),s=!!t&&Ro(t.floating);if(o===a||s&&r)return n;let c={scrollLeft:0,scrollTop:0},d=kt(1);const u=kt(0),m=Pt(o);if((m||!m&&!r)&&((In(o)!=="body"||Hn(a))&&(c=Yo(o)),Pt(o))){const g=on(o);d=bn(o),u.x=g.x+o.clientLeft,u.y=g.y+o.clientTop}const h=!a||m||r?kt(0):oh(a,c);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:n.y*d.y-c.scrollTop*d.y+u.y+h.y}},getDocumentElement:St,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:o,strategy:i}=e;const r=[...n==="clippingAncestors"?Ro(t)?[]:(function(c,d){const u=d.get(c);if(u)return u;let m=Un(c,[],!1).filter(f=>vt(f)&&In(f)!=="body"),h=null;const g=yt(c).position==="fixed";let p=g?Ft(c):c;for(;vt(p)&&!yn(p);){const f=yt(p),v=Li(p);v||f.position!=="fixed"||(h=null),(g?!v&&!h:!v&&f.position==="static"&&h&&Xv.has(h.position)||Hn(p)&&!v&&ih(c,p))?m=m.filter(y=>y!==p):h=f,p=Ft(p)}return d.set(c,m),m})(t,this._c):[].concat(n),o],a=r[0],s=r.reduce((c,d)=>{const u=xs(t,d,i);return c.top=Qt(u.top,c.top),c.right=Cn(u.right,c.right),c.bottom=Cn(u.bottom,c.bottom),c.left=Qt(u.left,c.left),c},xs(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Is,getElementRects:async function(e){const t=this.getOffsetParent||Is,n=this.getDimensions,o=await n(e.floating);return{reference:Qv(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=th(e);return{width:t,height:n}},getScale:bn,isElement:vt,isRTL:function(e){return yt(e).direction==="rtl"}};function ks(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function ey(e,t,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:r=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=o,d=kr(e),u=i||r?[...d?Un(d):[],...Un(t)]:[];u.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),r&&v.addEventListener("resize",n)});const m=d&&s?(function(v,y){let b,x=null;const w=St(v);function C(){var I;clearTimeout(b),(I=x)==null||I.disconnect(),x=null}return(function I(k,S){k===void 0&&(k=!1),S===void 0&&(S=1),C();const M=v.getBoundingClientRect(),{left:P,top:E,width:A,height:j}=M;if(k||y(),!A||!j)return;const L={rootMargin:-lo(E)+"px "+-lo(w.clientWidth-(P+A))+"px "+-lo(w.clientHeight-(E+j))+"px "+-lo(P)+"px",threshold:Qt(0,Cn(1,S))||1};let H=!0;function R(U){const F=U[0].intersectionRatio;if(F!==S){if(!H)return I();F?I(!1,F):b=setTimeout(()=>{I(!1,1e-7)},1e3)}F!==1||ks(M,v.getBoundingClientRect())||I(),H=!1}try{x=new IntersectionObserver(R,{...L,root:w.ownerDocument})}catch{x=new IntersectionObserver(R,L)}x.observe(v)})(!0),C})(d,n):null;let h,g=-1,p=null;a&&(p=new ResizeObserver(v=>{let[y]=v;y&&y.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var b;(b=p)==null||b.observe(t)})),n()}),d&&!c&&p.observe(d),p.observe(t));let f=c?on(e):null;return c&&(function v(){const y=on(e);f&&!ks(f,y)&&n(),f=y,h=requestAnimationFrame(v)})(),n(),()=>{var v;u.forEach(y=>{i&&y.removeEventListener("scroll",n),r&&y.removeEventListener("resize",n)}),m?.(),(v=p)==null||v.disconnect(),p=null,c&&cancelAnimationFrame(h)}}const ty=function(e){return{name:"offset",options:e,async fn(t){var n,o;const{x:i,y:r,placement:a,middlewareData:s}=t,c=await(async function(d,u){const{placement:m,platform:h,elements:g}=d,p=await(h.isRTL==null?void 0:h.isRTL(g.floating)),f=nn(m),v=Kn(m),y=$t(m)==="y",b=Hv.has(f)?-1:1,x=p&&y?-1:1,w=Vn(u,d);let{mainAxis:C,crossAxis:I,alignmentAxis:k}=typeof w=="number"?{mainAxis:w,crossAxis:0,alignmentAxis:null}:{mainAxis:w.mainAxis||0,crossAxis:w.crossAxis||0,alignmentAxis:w.alignmentAxis};return v&&typeof k=="number"&&(I=v==="end"?-1*k:k),y?{x:I*x,y:C*b}:{x:C*b,y:I*x}})(t,e);return a===((n=s.offset)==null?void 0:n.placement)&&(o=s.arrow)!=null&&o.alignmentOffset?{}:{x:i+c.x,y:r+c.y,data:{...c,placement:a}}}}},ny=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:o,placement:i}=t,{mainAxis:r=!0,crossAxis:a=!1,limiter:s={fn:v=>{let{x:y,y:b}=v;return{x:y,y:b}}},...c}=Vn(e,t),d={x:n,y:o},u=await Qm(t,c),m=$t(nn(i)),h=Ym(m);let g=d[h],p=d[m];if(r){const v=h==="y"?"bottom":"right";g=Ni(g+u[h==="y"?"top":"left"],g,g-u[v])}if(a){const v=m==="y"?"bottom":"right";p=Ni(p+u[m==="y"?"top":"left"],p,p-u[v])}const f=s.fn({...t,[h]:g,[m]:p});return{...f,data:{x:f.x-n,y:f.y-o,enabled:{[h]:r,[m]:a}}}}}},oy=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,o;const{placement:i,middlewareData:r,rects:a,initialPlacement:s,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:f=!0,...v}=Vn(e,t);if((n=r.arrow)!=null&&n.alignmentOffset)return{};const y=nn(i),b=$t(s),x=nn(s)===s,w=await(c.isRTL==null?void 0:c.isRTL(d.floating)),C=h||(x||!f?[co(s)]:(function(L){const H=co(L);return[Oi(L),H,Oi(H)]})(s)),I=p!=="none";!h&&I&&C.push(...jv(s,f,p,w));const k=[s,...C],S=await Qm(t,v),M=[];let P=((o=r.flip)==null?void 0:o.overflows)||[];if(u&&M.push(S[y]),m){const L=(function(H,R,U){U===void 0&&(U=!1);const F=Kn(H),V=Cr(H),de=xr(V);let oe=V==="x"?F===(U?"end":"start")?"right":"left":F==="start"?"bottom":"top";return R.reference[de]>R.floating[de]&&(oe=co(oe)),[oe,co(oe)]})(i,a,w);M.push(S[L[0]],S[L[1]])}if(P=[...P,{placement:i,overflows:M}],!M.every(L=>L<=0)){var E,A;const L=(((E=r.flip)==null?void 0:E.index)||0)+1,H=k[L];if(H&&(!(m==="alignment"&&b!==$t(H))||P.every(U=>$t(U.placement)!==b||U.overflows[0]>0)))return{data:{index:L,overflows:P},reset:{placement:H}};let R=(A=P.filter(U=>U.overflows[0]<=0).sort((U,F)=>U.overflows[1]-F.overflows[1])[0])==null?void 0:A.placement;if(!R)switch(g){case"bestFit":{var j;const U=(j=P.filter(F=>{if(I){const V=$t(F.placement);return V===b||V==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(V=>V>0).reduce((V,de)=>V+de,0)]).sort((F,V)=>F[1]-V[1])[0])==null?void 0:j[0];U&&(R=U);break}case"initialPlacement":R=s}if(i!==R)return{reset:{placement:R}}}return{}}}},iy=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:o,placement:i,rects:r,platform:a,elements:s,middlewareData:c}=t,{element:d,padding:u=0}=Vn(e,t)||{};if(d==null)return{};const m=Xm(u),h={x:n,y:o},g=Cr(i),p=xr(g),f=await a.getDimensions(d),v=g==="y",y=v?"top":"left",b=v?"bottom":"right",x=v?"clientHeight":"clientWidth",w=r.reference[p]+r.reference[g]-h[g]-r.floating[p],C=h[g]-r.reference[g],I=await(a.getOffsetParent==null?void 0:a.getOffsetParent(d));let k=I?I[x]:0;k&&await(a.isElement==null?void 0:a.isElement(I))||(k=s.floating[x]||r.floating[p]);const S=w/2-C/2,M=k/2-f[p]/2-1,P=Cn(m[y],M),E=Cn(m[b],M),A=P,j=k-f[p]-E,L=k/2-f[p]/2+S,H=Ni(A,L,j),R=!c.arrow&&Kn(i)!=null&&L!==H&&r.reference[p]/2-(L<A?P:E)-f[p]/2<0,U=R?L<A?L-A:L-j:0;return{[g]:h[g]+U,data:{[g]:H,centerOffset:L-H-U,...R&&{alignmentOffset:U}},reset:R}}}),ry=(e,t,n)=>{const o=new Map,i={platform:Jv,...n},r={...i.platform,_c:o};return(async(a,s,c)=>{const{placement:d="bottom",strategy:u="absolute",middleware:m=[],platform:h}=c,g=m.filter(Boolean),p=await(h.isRTL==null?void 0:h.isRTL(s));let f=await h.getElementRects({reference:a,floating:s,strategy:u}),{x:v,y}=bs(f,d,p),b=d,x={},w=0;for(let C=0;C<g.length;C++){const{name:I,fn:k}=g[C],{x:S,y:M,data:P,reset:E}=await k({x:v,y,initialPlacement:d,placement:b,strategy:u,middlewareData:x,rects:f,platform:h,elements:{reference:a,floating:s}});v=S??v,y=M??y,x={...x,[I]:{...x[I],...P}},E&&w<=50&&(w++,typeof E=="object"&&(E.placement&&(b=E.placement),E.rects&&(f=E.rects===!0?await h.getElementRects({reference:a,floating:s,strategy:u}):E.rects),{x:v,y}=bs(f,b,p)),C=-1)}return{x:v,y,placement:b,strategy:u,middlewareData:x}})(e,t,{...i,platform:r})};var ay=(function(){function e(){return ji(this,e),Ys(this,e,arguments)}return Xs(e,Ct),Hi(e,[{key:"render",value:function(){return this.props.children}}])})();function sy(e){var t=e.children,n=e.content,o=e.position,i=o===void 0?"top":o,r=e.className,a=r===void 0?"":r,s=e.delay,c=s===void 0?200:s,d=e.style,u=d===void 0?"dark":d,m=e.trigger,h=m===void 0?"hover":m,g=K(null),p=K(null),f=K(null),v=$(z(!1),2),y=v[0],b=v[1],x=K(null);return T(function(){var w;if((w=g.current)!==null&&w!==void 0&&w.base&&p.current)return ey(g.current.base,p.current,function(){ry(g.current.base,p.current,{placement:i,middleware:[ty(8),oy(),ny({padding:8}),iy({element:f.current,padding:6})]}).then(function(C){var I,k=C.x,S=C.y,M=C.placement,P=C.middlewareData;Object.assign(p.current.style,{left:"".concat(k,"px"),top:"".concat(S,"px")});var E=(I=P.arrow)!==null&&I!==void 0?I:{},A=E.x,j=E.y,L={top:"bottom",bottom:"top",left:"right",right:"left"}[M.split("-")[0]];Object.assign(f.current.style,q({left:A!=null?"".concat(A,"px"):"",top:j!=null?"".concat(j,"px"):"",right:"",bottom:""},L,"-4px"))})})},[i,y]),T(function(){var w,C=(w=g.current)===null||w===void 0?void 0:w.base,I=p.current;if(C&&I){var k=function(){x.current&&clearTimeout(x.current)},S=function(){k(),x.current=setTimeout(function(){return b(!0)},c)},M=function(){k(),b(!1)},P=function(){return b(function(E){return!E})};return h==="hover"?(C.addEventListener("mouseenter",S),C.addEventListener("mouseleave",M),I.addEventListener("mouseenter",S),I.addEventListener("mouseleave",M),C.addEventListener("pointerdown",M)):h==="click"&&C.addEventListener("click",P),h==="none"&&(x.current&&clearTimeout(x.current),b(!1)),function(){k(),h==="hover"?(C.removeEventListener("mouseenter",S),C.removeEventListener("mouseleave",M),I.removeEventListener("mouseenter",S),I.removeEventListener("mouseleave",M),C.removeEventListener("pointerdown",M)):h==="click"&&C.removeEventListener("click",P)}}},[h,c]),l(Y,null,l("div",{ref:p,role:"tooltip",className:"z-100 pointer-events-none absolute select-none whitespace-nowrap rounded-lg px-3 py-2 text-sm shadow-md transition-opacity duration-150 ".concat(u==="dark"?"bg-tooltip-bg text-tooltip-fg":"border-border-subtle bg-bg-elevated text-fg-primary border"," ").concat(y?"opacity-100":"opacity-0"," ").concat(a," "),style:{visibility:y?"visible":"hidden"}},n,l("div",{ref:f,className:"absolute h-2 w-2 rotate-45 bg-inherit ".concat(u==="light"?"border-border-subtle border":""," ")})),l(ay,{ref:g},t))}function Jt(e){var t=e.commandId,n=e.documentId,o=e.variant,i=o===void 0?"icon":o,r=e.itemId,a=e.className,s=Lt(t,n),c=Nc(n,r||t);if(!s||!s.visible)return null;var d=s.iconProps||{};return l(sy,{content:s.label,position:"bottom",delay:500,trigger:s.active||s.disabled?"none":"hover"},l(Ge,{elementRef:c,onClick:function(){s.disabled||s.execute()},active:s.active,disabled:s.disabled,className:a||"p-1","aria-label":s.label},i==="text"?l("span",{className:"text-sm"},s.label):i==="icon-text"?l(Y,null,s.icon&&l(ae,{icon:s.icon,className:"mr-2 h-5 w-5",primaryColor:d.primaryColor,secondaryColor:d.secondaryColor}),l("span",null,s.label)):i==="tab"?l("span",{className:"px-3 py-1"},s.label):s.icon?l(ae,{icon:s.icon,className:Gn("h-5 w-5",d.className),primaryColor:d.primaryColor,secondaryColor:d.secondaryColor}):l("span",null,s.label)))}function ly(e){var t=e.schema,n=e.documentId,o=e.isOpen,i=e.className,r=i===void 0?"":i;if(!o)return null;var a=t.position.slot==="secondary",s=(function(c){switch(c){case"top":return"border-b border-border-default bg-bg-surface px-4 py-2";case"bottom":return"border-t border-border-default bg-bg-surface px-4 py-2";case"left":return"border-r border-border-default bg-bg-surface px-2 py-3 flex-col";case"right":return"border-l border-border-default bg-bg-surface px-2 py-3 flex-col"}})(t.position.placement);return l("div",O({className:Gn("flex items-center gap-2",s,a?"bg-bg-surface-alt":"",r)},je(t)),t.items.map(function(c){return l(rh,{key:c.id,item:c,documentId:n})}))}function rh(e){var t=e.item,n=e.documentId;switch(t.type){case"command-button":return l(cy,{item:t,documentId:n});case"tab-group":return l(dy,{item:t,documentId:n});case"divider":return l(my,{item:t});case"spacer":return l(hy,{item:t});case"group":return l(gy,{item:t,documentId:n});case"custom":return l(py,{item:t,documentId:n});default:return console.warn("Unknown toolbar item type:",t),null}}function cy(e){var t=e.item,n=e.documentId;return l("div",O({},je(t)),l(Jt,{commandId:t.commandId,documentId:n,itemId:t.id,variant:t.variant}))}function dy(e){var t=e.item,n=e.documentId;return l("div",O(O({className:"flex items-center gap-2"},je(t)),{},{role:"tablist"}),t.tabs.map(function(o){return l(uy,{key:o.id,tab:o,documentId:n})}))}function uy(e){var t=e.tab,n=e.documentId,o=Lt(t.commandId,n),i=Nc(n,t.id);return!o||!o.visible?null:l("div",O({},je(t)),l(zv,{anchorRef:i,active:o.active,onClick:function(){o.disabled||o.execute()},disabled:o.disabled},t.variant==="text"&&o.label,t.variant==="icon"&&o.icon&&l(Ss,{icon:o.icon,iconProps:o.iconProps}),t.variant==="icon-text"&&l(Y,null,o.icon&&l(Ss,{icon:o.icon,iconProps:o.iconProps}),o.label)))}function Ss(e){var t=e.icon,n=e.iconProps;return l(ae,{icon:t,className:"h-5 w-5",primaryColor:n?.primaryColor,secondaryColor:n?.secondaryColor})}function my(e){var t=e.item;return l("div",O({},je(t)),l("div",{className:t.orientation==="vertical"?"bg-border-default h-6 w-px":"bg-border-default h-px w-6","aria-hidden":"true"}))}function hy(e){var t=e.item;return l("div",O(O({className:t.flex?"flex-1":"w-4"},je(t)),{},{"aria-hidden":"true"}))}function gy(e){var t=e.item,n=e.documentId,o=t.gap?"gap-".concat(t.gap):"gap-2",i=(function(r){switch(r){case"start":default:return"justify-start";case"center":return"justify-center";case"end":return"justify-end"}})(t.alignment);return l("div",O({className:Gn("flex items-center",o,i)},je(t)),t.items.map(function(r){return l(rh,{key:r.id,item:r,documentId:n})}))}function py(e){var t=e.item,n=e.documentId,o=Go().renderCustomComponent;return l("div",O({},je(t)),o(t.componentId,n,t.props))}function Ps(e,t){for(var n in e)if(n!=="__source"&&!(n in t))return!0;for(var o in t)if(o!=="__source"&&e[o]!==t[o])return!0;return!1}function Ds(e,t){this.props=e,this.context=t}(Ds.prototype=new Ct).isPureReactComponent=!0,Ds.prototype.shouldComponentUpdate=function(e,t){return Ps(this.props,e)||Ps(this.state,t)};var Ms=se.__b;se.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ms&&Ms(e)};var fy=se.__e;se.__e=function(e,t,n,o){if(e.then){for(var i,r=t;r=r.__;)if((i=r.__c)&&i.__c)return t.__e==null&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t)}fy(e,t,n,o)};var As=se.unmount;function ah(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=(function(o,i){for(var r in i)o[r]=i[r];return o})({},e)).__c!=null&&(e.__c.__P===n&&(e.__c.__P=t),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return ah(o,t,n)})),e}function sh(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return sh(o,t,n)}),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function mi(){this.__u=0,this.o=null,this.__b=null}function lh(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function uo(){this.i=null,this.l=null}se.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),As&&As(e)},(mi.prototype=new Ct).__c=function(e,t){var n=t.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var i=lh(o.__v),r=!1,a=function(){r||(r=!0,n.__R=null,i?i(s):s())};n.__R=a;var s=function(){if(!--o.__u){if(o.state.__a){var c=o.state.__a;o.__v.__k[0]=sh(c,c.__c.__P,c.__c.__O)}var d;for(o.setState({__a:o.__b=null});d=o.o.pop();)d.forceUpdate()}};o.__u++||32&t.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(a,a)},mi.prototype.componentWillUnmount=function(){this.o=[]},mi.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=ah(this.__b,n,o.__O=o.__P)}this.__b=null}var i=t.__a&&l(Y,null,e.fallback);return i&&(i.__u&=-33),[l(Y,null,t.__a?null:e.children),i]};var zs=function(e,t,n){if(++n[1]===n[0]&&e.l.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(n=e.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.i=n=n[2]}};function vy(e){return this.getChildContext=function(){return e.context},e.children}function yy(e){var t=this,n=e.h;if(t.componentWillUnmount=function(){xi(null,t.v),t.v=null,t.h=null},t.h&&t.h!==n&&t.componentWillUnmount(),!t.v){for(var o=t.__v;o!==null&&!o.__m&&o.__!==null;)o=o.__;t.h=n,t.v={nodeType:1,parentNode:n,childNodes:[],__k:{__m:o.__m},contains:function(){return!0},insertBefore:function(i,r){this.childNodes.push(i),t.h.insertBefore(i,r)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),t.h.removeChild(i)}}}xi(l(vy,{context:t.context},e.__v),t.v)}function ch(e,t){var n=l(yy,{__v:e,h:t});return n.containerInfo=t,n}(uo.prototype=new Ct).__a=function(e){var t=this,n=lh(t.__v),o=t.l.get(e);return o[0]++,function(i){var r=function(){t.props.revealOrder?(o.push(i),zs(t,e,o)):i()};n?n(r):r()}},uo.prototype.render=function(e){this.i=null,this.l=new Map;var t=xo(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var n=t.length;n--;)this.l.set(t[n],this.i=[1,0,this.i]);return e.children},uo.prototype.componentDidUpdate=uo.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(t,n){zs(e,n,t)})};var by=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wy=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,xy=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Cy=/[A-Z0-9]/g,Iy=typeof document<"u",ky=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};Ct.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Ct.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var Ts=se.event;function Sy(){}function Py(){return this.cancelBubble}function Dy(){return this.defaultPrevented}se.event=function(e){return Ts&&(e=Ts(e)),e.persist=Sy,e.isPropagationStopped=Py,e.isDefaultPrevented=Dy,e.nativeEvent=e};var My={enumerable:!1,configurable:!0,get:function(){return this.class}},Es=se.vnode;se.vnode=function(e){typeof e.type=="string"&&(function(t){var n=t.props,o=t.type,i={},r=o.indexOf("-")===-1;for(var a in n){var s=n[a];if(!(a==="value"&&"defaultValue"in n&&s==null||Iy&&a==="children"&&o==="noscript"||a==="class"||a==="className")){var c=a.toLowerCase();a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&s===!0?s="":c==="translate"&&s==="no"?s=!1:c[0]==="o"&&c[1]==="n"?c==="ondoubleclick"?a="ondblclick":c!=="onchange"||o!=="input"&&o!=="textarea"||ky(n.type)?c==="onfocus"?a="onfocusin":c==="onblur"?a="onfocusout":xy.test(a)&&(a=c):c=a="oninput":r&&wy.test(a)?a=a.replace(Cy,"-$&").toLowerCase():s===null&&(s=void 0),c==="oninput"&&i[a=c]&&(a="oninputCapture"),i[a]=s}}o=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=xo(n.children).forEach(function(d){d.props.selected=i.value.indexOf(d.props.value)!=-1})),o=="select"&&i.defaultValue!=null&&(i.value=xo(n.children).forEach(function(d){d.props.selected=i.multiple?i.defaultValue.indexOf(d.props.value)!=-1:i.defaultValue==d.props.value})),n.class&&!n.className?(i.class=n.class,Object.defineProperty(i,"className",My)):(n.className&&!n.class||n.class&&n.className)&&(i.class=i.className=n.className),t.props=i})(e),e.$$typeof=by,Es&&Es(e)};var _s=se.__r;se.__r=function(e){_s&&_s(e),e.__c};var Rs=se.diffed;se.diffed=function(e){Rs&&Rs(e);var t=e.props,n=e.__e;n!=null&&e.type==="textarea"&&"value"in t&&t.value!==n.value&&(n.value=t.value==null?"":t.value)};function Ay(e){var t=e.schema,n=e.documentId,o=e.isOpen,i=e.onClose,r=Ec().getContainer,a=z(function(){var y=r();return!!y&&y.clientWidth<768}),s=$(a,2),c=s[0],d=s[1];T(function(){var y=r();if(y){var b=new ResizeObserver(function(){var x=y.clientWidth;d(x<768)});return b.observe(y),function(){return b.disconnect()}}},[r]);var u=t.position,m=t.content,h=t.width,g=Go().renderCustomComponent,p=r();if(c&&p)return ch(l(zy,{schema:t,documentId:n,isOpen:o,onClose:i,renderCustomComponent:g,content:m,rootElement:p}),p);if(!o)return null;var f=(function(y){switch(y){case"left":return"border-r";case"right":return"border-l";case"top":return"border-b";case"bottom":return"border-t"}})(u.placement),v=h?{width:h}:void 0;return l("div",{className:"".concat(f," border-border-default bg-bg-surface flex flex-col shadow-lg"),style:v,"data-sidebar-id":t.id},l("div",{className:"min-h-0 flex-1"},m.type==="tabs"&&l(dh,{content:m,documentId:n,renderCustomComponent:g}),m.type==="component"&&l(Y,null,g(m.componentId,n,{}))))}function zy(e){var t=e.schema,n=e.documentId,o=e.isOpen,i=e.onClose,r=e.renderCustomComponent,a=e.content,s=e.rootElement,c=$(z("closed"),2),d=c[0],u=c[1],m=$(z(!1),2),h=m[0],g=m[1],p=$(z(0),2),f=p[0],v=p[1],y=$(z(!1),2),b=y[0],x=y[1],w=K(null),C=K({y:0,height:0,time:0,state:"half"}),I=K({y:0,time:0});T(function(){if(!o){u("closed");var F=setTimeout(function(){x(!1)},300);return function(){return clearTimeout(F)}}x(!0),requestAnimationFrame(function(){requestAnimationFrame(function(){u("half")})})},[o]);var k=function(F){switch(F){case"closed":return 0;case"half":return 50;case"full":return 100}},S=te(function(F){if(w.current){var V,de=s.clientHeight,oe=w.current.offsetHeight/de*100;V=oe>=75?"full":oe<=25?"closed":"half",C.current={y:F,height:oe,time:Date.now(),state:V},I.current={y:F,time:Date.now()},v(0),V!==d&&u(V),g(!0)}},[s,d]),M=te(function(F){if(h){var V=s.clientHeight,de=(C.current.y-F)/V*100,oe=Math.max(0,Math.min(100,C.current.height+de));I.current={y:F,time:Date.now()};var he=k(C.current.state);v(oe-he)}},[h,s]),P=te(function(){if(h){if(Math.abs(C.current.y-I.current.y)<5)return g(!1),void v(0);var F=k(C.current.state)+f,V=Date.now()-I.current.time,de=I.current.y-C.current.y,oe=(function(he,me){return Math.abs(me)>.5?me>0?he>50?"half":"closed":he<50?"half":"full":he>=75?"full":he<=25?"closed":"half"})(F,V>0?de/V:0);oe==="closed"?(u("closed"),g(!1),v(0),i()):(g(!1),v(0),u(oe))}},[h,f,i]),E=te(function(F){S(F.touches[0].clientY)},[S]),A=te(function(F){h&&(F.cancelable&&F.preventDefault(),M(F.touches[0].clientY))},[h,M]),j=te(function(){P()},[P]),L=te(function(F){F.preventDefault(),S(F.clientY)},[S]);if(T(function(){if(h){var F=function(de){M(de.clientY)},V=function(){P()};return document.addEventListener("mousemove",F),document.addEventListener("mouseup",V),function(){document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",V)}}},[h,M,P]),!b)return null;var H=k(h?C.current.state:d),R=h?Math.max(0,Math.min(100,H+f)):H,U=.3*Math.min(R/50,1);return l(Y,null,l("div",{className:"bg-bg-overlay absolute inset-0 z-40 transition-opacity duration-300 ".concat(R===0?"pointer-events-none":""),style:{opacity:U},onClick:i}),l("div",{ref:w,className:"bg-bg-surface absolute inset-x-0 bottom-0 z-50 flex flex-col rounded-t-2xl shadow-2xl ".concat(h?"":"transition-[height] duration-300 ease-out"),style:{height:"".concat(R,"%")},"data-sidebar-id":t.id},l("div",{className:"flex flex-shrink-0 cursor-grab touch-none items-center justify-center py-3 active:cursor-grabbing",onTouchStart:E,onTouchMove:A,onTouchEnd:j,onMouseDown:L},l("div",{className:"bg-border-default h-1.5 w-12 rounded-full"})),l("div",{className:"min-h-0 flex-1 overflow-hidden"},a.type==="tabs"&&l(dh,{content:a,documentId:n,renderCustomComponent:r}),a.type==="component"&&l(Y,null,r(a.componentId,n,{})))))}function dh(e){var t,n=e.content,o=e.documentId,i=e.renderCustomComponent,r=$(z(((t=n.tabs[0])===null||t===void 0?void 0:t.id)||""),2),a=r[0],s=r[1];return l("div",{className:"flex h-full flex-1 flex-col"},l("div",{role:"tablist",className:"bg-bg-surface mx-4 my-4 flex flex-shrink-0 overflow-hidden"},n.tabs.map(function(c,d,u){var m=a===c.id,h=d===0,g=d===u.length-1;return l("button",{key:c.id,role:"tab","aria-selected":m,tabIndex:m?0:-1,onClick:function(){return s(c.id)},className:"relative flex h-7 flex-1 cursor-pointer items-center justify-center border outline-none transition-colors ".concat(h?"rounded-l-md":""," ").concat(g?"rounded-r-md":""," ").concat(g?"":"border-r-0"," ").concat(m?"border-accent bg-accent text-fg-on-accent":"border-border-default text-fg-secondary hover:bg-interactive-hover")},c.icon&&l(ae,{icon:c.icon,className:"h-5 w-5"}))})),l("div",{className:"min-h-0 flex-1 overflow-auto"},n.tabs.filter(function(c){return c.id===a}).map(function(c){return l(Y,{key:c.id},i(c.componentId,o,{}))})))}function Ty(e){var t=e.schema,n=e.documentId,o=e.anchorEl,i=e.onClose,r=Ec().getContainer,a=(function(f){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:768,y=$(z(function(){var w=f();return!!w&&w.clientWidth<v}),2),b=y[0],x=y[1];return T(function(){var w=f();if(w){var C=new ResizeObserver(function(){x(w.clientWidth<v)});return C.observe(w),function(){return C.disconnect()}}},[f,v]),b})(r,768),s=r(),c=(()=>{const{provides:f}=cn();return f?.getSchema()??null})(),d=$(z([{menuId:t.id,schema:t,title:void 0}]),2),u=d[0],m=d[1];T(function(){m([{menuId:t.id,schema:t,title:void 0}])},[t]);var h=u[u.length-1],g=te(function(f,v){if(c){var y=c.menus[f];y?m(function(b){return[].concat(Js(b),[{menuId:f,schema:y,title:v}])}):console.warn("Submenu schema not found: ".concat(f))}},[c]),p=te(function(){u.length>1&&m(function(f){return f.slice(0,-1)})},[u.length]);return h?a&&s?ch(l(Ey,{currentMenu:h,menuStack:u,documentId:n,onClose:i,onNavigateBack:p,onNavigateToSubmenu:g,container:s}),s):l(_y,{currentMenu:h,documentId:n,anchorEl:o,onClose:i,onNavigateToSubmenu:g}):null}function Ey(e){var t=e.currentMenu,n=e.menuStack,o=e.documentId,i=e.onClose,r=e.onNavigateBack,a=e.onNavigateToSubmenu,s=e.container,c=$(z(!1),2),d=c[0],u=c[1],m=$(z(!1),2),h=m[0],g=m[1],p=$(z(0),2),f=p[0],v=p[1],y=K(null),b=K(null),x=K({isDragging:!1,startY:0,currentY:0,startTime:0,sheetHeight:0});T(function(){u(!0),requestAnimationFrame(function(){requestAnimationFrame(function(){g(!0)})})},[]);var w=$(z(null),2),C=w[0],I=w[1];T(function(){if(b.current){var R=(n.length>1?60:0)+b.current.scrollHeight+24,U=.8*s.clientHeight;I(Math.min(R,U))}},[t,n.length,s]);var k=te(function(){g(!1),setTimeout(function(){u(!1),i()},300)},[i]),S=te(function(R){y.current&&(x.current={isDragging:!0,startY:R,currentY:R,startTime:Date.now(),sheetHeight:y.current.offsetHeight})},[]),M=te(function(R){if(x.current.isDragging){var U=R-x.current.startY,F=Math.max(0,U);x.current.currentY=R,v(F)}},[]),P=te(function(){if(x.current.isDragging){var R=x.current,U=R.startY,F=R.currentY,V=R.startTime,de=R.sheetHeight,oe=Math.abs(U-F);if(x.current.isDragging=!1,oe<5)v(0);else{var he=F-U,me=he/de*100,G=Date.now()-V;me>30||(G>0?he/G:0)>.5?k():v(0)}}},[k]),E=te(function(R){S(R.touches[0].clientY)},[S]),A=te(function(R){x.current.isDragging&&R.cancelable&&R.preventDefault(),M(R.touches[0].clientY)},[M]),j=te(function(){P()},[P]),L=te(function(R){R.preventDefault(),S(R.clientY)},[S]);if(T(function(){if(x.current.isDragging){var R=function(F){return M(F.clientY)},U=function(){return P()};return document.addEventListener("mousemove",R),document.addEventListener("mouseup",U),function(){document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",U)}}},[M,P]),T(function(){var R=function(U){U.key==="Escape"&&k()};return document.addEventListener("keydown",R),function(){return document.removeEventListener("keydown",R)}},[k]),!d)return null;var H=h?f:C||400;return l(Y,null,l("div",{className:"bg-bg-overlay absolute inset-0 z-40 transition-opacity duration-300 ".concat(h?"opacity-100":"opacity-0"),onClick:k}),l("div",O({ref:y,className:"bg-bg-surface absolute inset-x-0 bottom-0 z-50 flex flex-col rounded-t-2xl shadow-2xl ".concat(x.current.isDragging?"":"transition-transform duration-300 ease-out"),style:{maxHeight:"80%",transform:"translateY(".concat(H,"px)")}},je(t.schema)),l("div",{className:"flex flex-shrink-0 cursor-grab touch-none items-center justify-center py-3 active:cursor-grabbing",onTouchStart:E,onTouchMove:A,onTouchEnd:j,onMouseDown:L},l("div",{className:"bg-border-default h-1.5 w-12 rounded-full"})),n.length>1&&l("div",{className:"border-border-subtle flex items-center gap-3 border-b px-4 pb-3"},l("button",{onClick:r,className:"hover:bg-interactive-hover rounded-full p-1"},l(wr,{className:"h-5 w-5"})),l("h3",{className:"text-fg-primary font-semibold"},t.title||"Menu")),l("div",{ref:b,className:"flex-1 overflow-y-auto py-2"},t.schema.items.map(function(R){return l(Sr,{key:R.id,item:R,documentId:o,onClose:k,isMobile:!0,onNavigateToSubmenu:a})}))))}function _y(e){var t=e.currentMenu,n=e.documentId,o=e.anchorEl,i=e.onClose,r=e.onNavigateToSubmenu,a=K(null),s=$(z(null),2),c=s[0],d=s[1];T(function(){if(o){var m=function(){var h,g=o.getBoundingClientRect(),p=((h=a.current)===null||h===void 0?void 0:h.offsetWidth)||200,f=g.bottom+4,v=g.left;v+p>window.innerWidth&&(v=window.innerWidth-p-8),v<8&&(v=8),d({top:f,left:v})};return m(),window.addEventListener("scroll",m),window.addEventListener("resize",m),function(){window.removeEventListener("scroll",m),window.removeEventListener("resize",m)}}},[o]),T(function(){var m=function(g){if(a.current){var p=g.composedPath(),f=p.includes(a.current),v=o&&p.includes(o);f||v||i()}},h=setTimeout(function(){document.addEventListener("mousedown",m)},0);return function(){clearTimeout(h),document.removeEventListener("mousedown",m)}},[i,o]),T(function(){var m=function(h){h.key==="Escape"&&i()};return document.addEventListener("keydown",m),function(){return document.removeEventListener("keydown",m)}},[i]);var u=c?{position:"fixed",top:"".concat(c.top,"px"),left:"".concat(c.left,"px"),zIndex:1e3}:{display:"none"};return l("div",O(O({ref:a},je(t.schema)),{},{className:"border-border-default bg-bg-elevated min-w-[200px] rounded-lg border py-2 shadow-lg",style:u}),t.schema.items.map(function(m){return l(Sr,{key:m.id,item:m,documentId:n,onClose:i,isMobile:!1,onNavigateToSubmenu:r})}))}function Sr(e){var t=e.item,n=e.documentId,o=e.onClose,i=e.isMobile,r=e.onNavigateToSubmenu;switch(t.type){case"command":return l(Ry,{item:t,documentId:n,onClose:o,isMobile:i});case"submenu":return l(Ny,{item:t,documentId:n,isMobile:i,onNavigateToSubmenu:r});case"divider":return l("div",O({},je(t)),l("hr",{className:"border-border-subtle my-2"}));case"section":return l(Oy,{item:t,documentId:n,onClose:o,isMobile:i,onNavigateToSubmenu:r});default:return null}}function Ry(e){var t,n,o=e.item,i=e.documentId,r=e.onClose,a=e.isMobile,s=Lt(o.commandId,i);if(!s||!s.visible)return null;var c,d,u=function(){s.disabled||(s.execute(),r())};return a?l("button",O(O({},je(o)),{},{onClick:u,disabled:s.disabled,className:"active:bg-interactive-active flex w-full items-center gap-3 px-4 py-3 text-left text-base transition-colors ".concat(s.disabled?"cursor-not-allowed opacity-50":"cursor-pointer"," ").concat(s.active?"bg-interactive-selected text-accent":"text-fg-secondary"),role:"menuitem"}),s.icon&&l(ae,{icon:s.icon,className:"h-5 w-5",primaryColor:(c=s.iconProps)===null||c===void 0?void 0:c.primaryColor,secondaryColor:(d=s.iconProps)===null||d===void 0?void 0:d.secondaryColor}),l("span",{className:"flex-1"},s.label)):l("button",O(O({},je(o)),{},{onClick:u,disabled:s.disabled,className:"flex w-full items-center justify-between gap-2 px-4 py-1 text-left ".concat(s.disabled?"pointer-events-none cursor-not-allowed opacity-50":"cursor-pointer"," ").concat(s.active&&!s.disabled?"bg-accent text-fg-on-accent":"text-fg-muted hover:bg-accent hover:text-fg-on-accent"),role:"menuitem"}),l("div",{className:"flex items-center gap-2"},l("div",{className:"flex h-6 w-6 items-center justify-center"},s.icon&&l(ae,{icon:s.icon,className:"h-6 w-6",primaryColor:(t=s.iconProps)===null||t===void 0?void 0:t.primaryColor,secondaryColor:(n=s.iconProps)===null||n===void 0?void 0:n.secondaryColor})),l("span",{className:"text-sm"},s.label)))}function Ny(e){var t=e.item,n=e.documentId,o=e.isMobile,i=e.onNavigateToSubmenu,r=ke(n).translate,a=t.labelKey?r(t.labelKey):t.label||"",s=function(){return i(t.menuId,a)};return o?l("button",O(O({},je(t)),{},{onClick:s,className:"text-fg-secondary active:bg-interactive-active flex w-full cursor-pointer items-center gap-3 px-4 py-3 text-left text-base transition-colors",role:"menuitem"}),l("span",{className:"flex-1"},a),l(jn,{className:"h-4 w-4"})):l("button",O(O({},je(t)),{},{onClick:s,className:"text-fg-muted hover:bg-accent hover:text-fg-on-accent flex w-full cursor-pointer items-center justify-between gap-2 px-4 py-1 text-left",role:"menuitem"}),l("span",{className:"text-sm"},a),l(jn,{className:"h-6 w-6"}))}function Oy(e){var t=e.item,n=e.documentId,o=e.onClose,i=e.isMobile,r=e.onNavigateToSubmenu,a=ke(n).translate,s=t.labelKey?a(t.labelKey):t.label||"";return l("div",O({},je(t)),l("div",{className:"text-fg-secondary px-4 py-3 text-xs font-medium uppercase"},s),t.items.map(function(c){return l(Sr,{key:c.id,item:c,documentId:n,onClose:o,isMobile:i,onNavigateToSubmenu:r})}))}function Ly(e){var t=e.schema,n=e.documentId,o=e.isOpen,i=e.onClose,r=e.onExited,a=t.content,s=Go().renderCustomComponent;return a.type!=="component"?(console.warn("SchemaModal only supports component content type, got: ".concat(a.type)),null):l(Y,null,s(a.componentId,n,{isOpen:o,onClose:i,onExited:r}))}function $y(e){var t=e.documentId;e.onClose;var n=Zl(t),o=n.state,i=n.provides;return l("div",{className:"flex h-full flex-1 flex-col"},l("div",{className:"flex-1 overflow-hidden"},l(Fp,{documentId:t,style:{width:"100%",height:"100%"}},function(r){return l("div",{key:r.pageIndex,style:{position:"absolute",width:"100%",height:r.wrapperHeight,top:r.top,display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},onClick:function(){var a;i==null||(a=i.scrollToPage)===null||a===void 0||a.call(i,{pageNumber:r.pageIndex+1})}},l("div",{style:{width:r.width,height:r.height,border:"2px solid ".concat(o.currentPage===r.pageIndex+1?"var(--ep-accent-primary)":"var(--ep-border-default)"),borderRadius:"4px",overflow:"hidden",boxShadow:o.currentPage===r.pageIndex+1?"0 0 0 2px var(--ep-interactive-focus-ring)":"none"}},l(jp,{documentId:t,meta:r,style:{width:"100%",height:"100%"}})),l("div",{style:{height:r.labelHeight,display:"flex",alignItems:"center",justifyContent:"center",marginTop:"4px"}},l("span",{className:"text-fg-secondary text-xs"},r.pageIndex+1)))})))}function ht(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:300,n=$(z(e),2),o=n[0],i=n[1];return T(function(){var r=window.setTimeout(function(){return i(e)},t);return function(){return clearTimeout(r)}},[e,t]),o}var Ns=function(e){var t=e.label,n=e.checked,o=e.onChange;return l("label",{className:"text-fg-secondary inline-flex cursor-pointer select-none items-center gap-2 text-xs font-medium"},l("input",{type:"checkbox",checked:n,onChange:function(i){return o(i.target.checked)},className:"border-border-default bg-bg-input checked:border-accent checked:bg-accent peer h-4 w-4 shrink-0 appearance-none rounded-[3px] border transition-all"}),l("svg",{viewBox:"0 0 24 24",className:"/* fine-tune centering */ text-fg-on-accent pointer-events-none absolute h-3.5 w-3.5 translate-x-[1px] translate-y-[1px] opacity-0 peer-checked:opacity-100",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"},l("polyline",{points:"20 6 9 17 4 12"})),t)},Fy=function(e){var t=e.hit,n=e.onClick,o=e.active,i=K(null);return T(function(){o&&i.current&&i.current.scrollIntoView({behavior:"smooth",block:"nearest"})},[o]),l("button",{ref:i,onClick:n,className:"w-full rounded border p-2 text-left text-sm transition-colors ".concat(o?"border-accent bg-accent-light text-fg-primary":"border-border-subtle bg-bg-surface text-fg-secondary hover:bg-interactive-hover")},l("span",null,t.context.truncatedLeft&&" ",t.context.before,l("span",{className:"text-accent font-bold"},t.context.match),t.context.after,t.context.truncatedRight&&" "))};function jy(e){var t=e.documentId;e.onClose;var n=(f=>{const{provides:v}=Cd(),[y,b]=z(Mo),x=X(()=>v?.forDocument(f),[v,f]);return T(()=>{if(x)return b(x.getState()),x.onStateChange(w=>b(w));b(Mo)},[x]),{state:y,provides:x??null}})(t),o=n.state,i=n.provides,r=qn().provides,a=ke(t).translate,s=K(null),c=$(z(""),2),d=c[0],u=c[1];T(function(){},[]),T(function(){o.query&&!d&&u(o.query)},[o.query]),T(function(){o.activeResultIndex!==void 0&&o.activeResultIndex>=0&&g(o.activeResultIndex)},[o.activeResultIndex]);var m=ht(d,300);T(function(){m!==o.query&&i?.searchAllPages(m)},[m,i,o.query]);var h=function(f,v){v?i?.setFlags([].concat(Js(o.flags),[f])):i?.setFlags(o.flags.filter(function(y){return y!==f}))},g=function(f){var v,y=o.results[f];if(y){var b=y.rects.reduce(function(x,w){return{x:Math.min(x.x,w.origin.x),y:Math.min(x.y,w.origin.y)}},{x:1/0,y:1/0});r==null||(v=r.forDocument(t))===null||v===void 0||v.scrollToPage({pageNumber:y.pageIndex+1,pageCoordinates:b,alignX:50,alignY:25})}},p=(function(f){var v={};return f.forEach(function(y,b){v[y.pageIndex]||(v[y.pageIndex]=[]),v[y.pageIndex].push({hit:y,index:b})}),v})(o.results);return l("div",{className:"bg-bg-surface flex h-full flex-col"},l("div",{className:"p-4"},l("div",{className:"relative"},l("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2"},l(Vm,{className:"text-fg-muted h-4 w-4"})),l("input",{ref:s,type:"text",placeholder:a("search.placeholder"),value:d,onInput:function(f){var v=f.target;u(v.value)},className:"border-border-default bg-bg-input focus:border-accent focus:ring-accent w-full rounded-md border py-1 pl-8 pr-9 text-base focus:outline-none focus:ring-1"}),d&&l("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3",onClick:function(){u(""),s.current&&s.current.focus()}},l(Km,{className:"text-fg-muted hover:text-fg-secondary h-4 w-4"}))),l("div",{className:"mt-3 flex flex-col gap-2"},l(Ns,{label:a("search.caseSensitive"),checked:o.flags.includes(_n.MatchCase),onChange:function(f){return h(_n.MatchCase,f)}}),l(Ns,{label:a("search.wholeWord"),checked:o.flags.includes(_n.MatchWholeWord),onChange:function(f){return h(_n.MatchWholeWord,f)}})),l("hr",{className:"border-border-subtle mb-2 mt-5"}),o.active&&l("div",{className:"flex h-[32px] flex-row items-center justify-between"},l("div",{className:"text-fg-muted text-xs"},a("search.resultsFound",{params:{count:o.total}})),o.total>1&&l("div",{className:"flex flex-row"},l(Ge,{onClick:function(){i?.previousResult()}},l(wr,{className:"h-4 w-4"})),l(Ge,{onClick:function(){i?.nextResult()}},l(jn,{className:"h-4 w-4"}))))),l("div",{className:"flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto px-4"},Object.entries(p).map(function(f){var v=$(f,2),y=v[0],b=v[1];return l("div",{key:y,className:"mt-2 first:mt-0"},l("div",{className:"bg-bg-surface/80 text-fg-muted py-2 text-xs backdrop-blur"},a("search.page",{params:{page:Number(y)+1}})),l("div",{className:"flex flex-col gap-2"},b.map(function(x){var w=x.hit,C=x.index;return l(Fy,{key:C,hit:w,active:C===o.activeResultIndex,onClick:function(){i?.goToResult(C)}})})))}),l("div",null)))}function Hy(e){var t=e.documentId,n=Le(im.id).provides,o=qn().provides,i=ke(t).translate,r=Xe(t),a=$(z([]),2),s=a[0],c=a[1],d=$(z(new Set),2),u=d[0],m=d[1],h=$(z(!0),2),g=h[0],p=h[1];T(function(){if(n&&r!=null&&r.document){p(!0);var v=n.getBookmarks();return v.wait(function(y){var b=y.bookmarks;c(b);var x=b.map(function(w,C){return"bookmark-".concat(C)});m(new Set(x)),p(!1)},function(){p(!1)}),function(){v.abort({code:ee.Cancelled,message:"Bookmark task cancelled"})}}},[n,r?.document]);var f=function(v,y){var b,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,w="bookmark-".concat(y),C=v.children&&v.children.length>0,I=u.has(w);return l("div",{key:w,className:"select-none"},l("div",{className:"hover:bg-interactive-hover flex cursor-pointer items-center gap-1 px-2 py-1",style:{paddingLeft:"".concat(16*x+8,"px")},onClick:function(){return(function(k){if(o&&k.target){var S;if(k.target.type==="action"){var M=k.target.action;if(M.type===fo.Goto||M.type===fo.RemoteGoto)S=M.destination;else if(M.type===fo.URI)return void window.open(M.uri,"_blank")}else k.target.type==="destination"&&(S=k.target.destination);if(S)if(S.zoom.mode===Il.XYZ){var P,E=r==null||(P=r.document)===null||P===void 0?void 0:P.pages.find(function(A){return A.index===S.pageIndex});if(!E)return;o.scrollToPage({pageNumber:S.pageIndex+1,pageCoordinates:S.zoom.params?{x:S.zoom.params.x,y:E.size.height-S.zoom.params.y}:void 0,behavior:"smooth"})}else o.scrollToPage({pageNumber:S.pageIndex+1,behavior:"smooth"})}})(v)}},C&&l("button",{onClick:function(k){k.stopPropagation(),(function(S){m(function(M){var P=new Set(M);return P.has(S)?P.delete(S):P.add(S),P})})(w)},className:"flex h-4 w-4 items-center justify-center"},l(I?Gm:jn,{className:"h-3 w-3"})),!C&&l("div",{className:"w-4"}),l("span",{className:"text-fg-secondary text-sm"},v.title)),C&&I&&l("div",null,(b=v.children)===null||b===void 0?void 0:b.map(function(k,S){return f(k,S,x+1)})))};return r==null||!r.document||g?l("div",{className:"text-fg-secondary flex h-full flex-col gap-3 p-4 text-sm"},l("div",{className:"text-fg-primary font-medium"},i("outline.title")),l("p",null,i("outline.loading"))):s.length===0?l("div",{className:"flex h-full items-center justify-center p-6"},l("div",{className:"text-fg-muted text-center"},l("div",{className:"text-sm"},i("outline.noOutline")),l("div",{className:"mt-1 text-xs"},i("outline.noBookmarks")))):l("div",{className:"bg-bg-surface flex h-full flex-col"},l("div",{className:"flex-1 overflow-y-auto"},l("div",{className:"outline-tree"},s.map(function(v,y){return f(v,y)}))))}function Fi(e){var t=e.size,n=t===void 0?"md":t,o=e.text,i=e.className,r={sm:"w-6 h-6",md:"w-10 h-10",lg:"w-16 h-16"};return l("div",{className:"flex flex-col items-center justify-center gap-3 ".concat(i===void 0?"":i)},l("div",{className:"relative"},l("div",{className:"".concat(r[n]," border-border-default animate-spin rounded-full border-4")}),l("div",{className:"".concat(r[n]," border-r-accent border-t-accent absolute left-0 top-0 animate-spin rounded-full border-4 border-transparent")})),o&&l("p",{className:"".concat({sm:"text-sm",md:"text-base",lg:"text-lg"}[n]," text-fg-secondary animate-pulse font-medium")},o))}function wn(e){var t=e.size,n=t===void 0?"md":t,o=e.className,i=o===void 0?"":o;return l("div",{className:"".concat({sm:"w-4 h-4 border-2",md:"w-6 h-6 border-2",lg:"w-8 h-8 border-3"}[n]," border-border-default border-t-accent animate-spin rounded-full ").concat(i)})}var Os,Uy=function(e){var t=e.documentId,n=Fn().provides,o=$(z({show:!1,mode:null,isAnimating:!1}),2),i=o[0],r=o[1],a=ke(t).translate;if(T(function(){if(n)return n.onModeChange(function(d){var u=d.activeMode;if(u==="marqueeZoom"||u==="marqueeCapture"){r({show:!0,mode:u,isAnimating:!0});var m=setTimeout(function(){r(function(h){return O(O({},h),{},{show:!1})})},3e3);return function(){return clearTimeout(m)}}r({show:!1,mode:null,isAnimating:!1})})},[n]),!i.show&&!i.isAnimating)return null;var s=i.mode==="marqueeZoom"?a("zoom.dragTip"):a("capture.dragTip"),c=i.mode==="marqueeZoom"?"rgba(33,150,243,0.8)":"rgba(76,175,80,0.8)";return l("div",{className:"hint-overlay ".concat(i.show?"hint-show":"hint-hide"),onAnimationEnd:function(){i.show||r(function(d){return O(O({},d),{},{isAnimating:!1,mode:null})})},style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"20px"}},l("div",{className:"hint-text",style:{background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",textAlign:"center",maxWidth:"250px"}},s),l("div",{className:"drag-demo",style:{position:"relative",width:"150px",height:"100px"}},l("div",{style:{position:"absolute",top:"20px",left:"20px",width:"110px",height:"60px",border:"2px dashed ".concat(c),borderRadius:"4px",opacity:.6}}),l("div",{className:"animated-rect",style:{position:"absolute",top:"20px",left:"20px",border:"2px solid ".concat(c),backgroundColor:"".concat(c.replace("0.8","0.15")),borderRadius:"4px"}}),l("div",{className:"cursor-demo",style:{position:"absolute",width:"20px",height:"20px"}},l("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l("path",{d:"M3.5 2.5L16.5 10L10 11.5L7.5 16.5L3.5 2.5Z",fill:"rgba(0,0,0,0.3)",transform:"translate(1,1)"}),l("path",{d:"M3 2L16 10L10 11.5L7.5 16L3 2Z",fill:"white",stroke:"black",strokeWidth:"1"}),l("path",{d:"M4 3.5L13.5 9.5L9.5 10.5L7.5 14L4 3.5Z",fill:"rgba(255,255,255,0.8)"})))),l("style",{jsx:!0},`
        .hint-overlay {
          animation-duration: 0.3s;
          animation-fill-mode: both;
        }

        .hint-show {
          animation-name: hintFadeIn;
        }

        .hint-hide {
          animation-name: hintFadeOut;
        }

        @keyframes hintFadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes hintFadeOut {
          from {
            opacity: 1;
            transform: translateY(0);
          }
          to {
            opacity: 0;
            transform: translateY(-10px);
          }
        }

        .animated-rect {
          animation: rectGrow 2s ease-in-out infinite;
        }

        @keyframes rectGrow {
          0% {
            width: 0;
            height: 0;
          }
          50% {
            width: 110px;
            height: 60px;
          }
          100% {
            width: 110px;
            height: 60px;
            opacity: 0.7;
          }
        }

        .cursor-demo {
          animation: cursorMove 2s ease-in-out infinite;
        }

        @keyframes cursorMove {
          0% {
            top: 20px;
            left: 20px;
          }
          50% {
            top: 50px;
            left: 80px;
          }
          100% {
            top: 80px;
            left: 130px;
          }
        }

        .hint-text {
          animation: textPulse 0.6s ease-in-out;
        }

        @keyframes textPulse {
          0% {
            transform: scale(0.9);
          }
          50% {
            transform: scale(1.05);
          }
          100% {
            transform: scale(1);
          }
        }
      `))},Wy=function(e){var t=e.placeholder,n=e.onSubmit,o=e.inputRef,i=e.isFocused,r=$(z(""),2),a=r[0],s=r[1];return l("form",{className:"border-border-subtle mt-4 flex items-end space-x-2 border-t pt-4",onClick:function(c){return c.stopPropagation()},onSubmit:function(c){c?.preventDefault(),a.trim()&&(n(a),s(""))}},l("input",{ref:o,type:"text",placeholder:t,value:a,onInput:function(c){return s(c.currentTarget.value)},className:"bg-bg-input text-fg-primary placeholder-fg-muted w-full rounded-lg border px-3 py-1 text-base transition-colors focus:border-transparent focus:outline-none focus:ring-2 ".concat(i?"border-accent focus:ring-accent":"border-border-default focus:ring-accent")}),l("button",{type:"submit",disabled:!a.trim(),className:"bg-accent text-fg-on-accent hover:bg-accent-hover disabled:bg-interactive-disabled rounded-lg p-2 transition-colors disabled:cursor-not-allowed"},l("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},l("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"}))))},hi=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500"],By=function(e){if(!e)return hi[0];var t=e.length>0?e.charCodeAt(0)%hi.length:0;return hi[t]},Ls=function(e){var t=e.name,n=e.className,o=n===void 0?"":n;return l("div",{className:"flex h-8 w-8 items-center justify-center rounded-full text-sm font-medium text-white ".concat(By(t)," ").concat(o)},(function(i){return i?i.split(" ").map(function(r){return r[0]}).join("").toUpperCase().slice(0,2):"G"})(t))},uh=function(e){var t,n,o=e.onEdit,i=e.onDelete,r=e.onClose,a=e.documentId,s=K(null),c=ke(a).translate;return T(function(){var d=function(u){t.current&&!t.current.contains(u.target)&&n()};return document.addEventListener("click",d),function(){document.removeEventListener("click",d)}},[t=s,n=r]),l("div",{ref:s,className:"bg-bg-elevated ring-border-default absolute right-0 top-6 z-10 w-32 rounded-md shadow-lg ring-1"},l("div",{className:"py-1"},l("button",{onClick:function(d){d.preventDefault(),d.stopPropagation(),o(),r()},className:"text-fg-secondary hover:bg-interactive-hover block w-full px-4 py-2 text-left text-sm"},c("comments.edit")),l("button",{onClick:function(d){d.preventDefault(),d.stopPropagation(),i(),r()},className:"text-state-error hover:bg-interactive-hover block w-full px-4 py-2 text-left text-sm"},c("comments.delete"))))},mh=function(e){var t=e.initialText,n=e.onSave,o=e.onCancel,i=e.autoFocus,r=i!==void 0&&i,a=e.documentId,s=$(z(t),2),c=s[0],d=s[1],u=K(null),m=ke(a).translate;return T(function(){r&&u.current&&(u.current.focus(),u.current.setSelectionRange(c.length,c.length))},[r,c.length]),l("div",{className:"flex-1 space-y-2"},l("textarea",{ref:u,value:c,onInput:function(h){return d(h.currentTarget.value)},className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 text-base focus:outline-none focus:ring-1",rows:3}),l("div",{className:"flex flex-wrap gap-2"},l("button",{onClick:function(h){h.stopPropagation(),n(c)},className:"bg-accent text-fg-on-accent hover:bg-accent-hover whitespace-nowrap rounded-md px-3 py-1 text-sm"},m("comments.save")),l("button",{onClick:function(h){h.stopPropagation(),o()},className:"bg-interactive-hover text-fg-secondary hover:bg-border-default whitespace-nowrap rounded-md px-3 py-1 text-sm"},m("comments.cancel"))))},hh=function(e){if(!e)return"(no date)";try{return(e instanceof Date?e:new Date(e)).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}catch{return typeof e=="string"?e:"(no date)"}},qy=function(e){var t=e.annotation,n=e.onSave,o=e.onDelete,i=e.isReply,r=i!==void 0&&i,a=e.documentId,s=e.isReadOnly,c=s!==void 0&&s,d=$(z(!1),2),u=d[0],m=d[1],h=$(z(!1),2),g=h[0],p=h[1],f=t.author||"Guest";return g?l("div",{className:"flex w-full items-start space-x-3",onClick:function(v){return v.stopPropagation()}},r&&l(Ls,{name:f,className:"h-8 w-8"}),l(mh,{initialText:t.contents||"",onSave:function(v){n(v),p(!1)},onCancel:function(){p(!1)},autoFocus:!0,documentId:a})):l("div",{className:"flex items-start space-x-3"},r&&l(Ls,{name:f,className:"h-8 w-8"}),l("div",{className:"min-w-0 flex-1"},r&&l("div",{className:"flex items-center justify-between"},l("div",{className:"leading-none"},l("h5",{className:"text-fg-primary text-sm font-medium"},f),l("span",{className:"text-fg-muted text-xs"},hh(t.modified||t.created))),!c&&l("div",{className:"relative"},l("button",{onClick:function(v){v.stopPropagation(),m(!0)},className:"text-fg-muted hover:bg-interactive-hover rounded-md p-1"},l("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},l("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"}))),u&&l(uh,{onEdit:function(){return p(!0)},onDelete:o,onClose:function(){return m(!1)},documentId:a}))),l("p",{className:"text-fg-primary mt-2 text-sm"},t.contents)))},Gy=(q(q(q(q(q(q(q(q(q(q(Os={},_.HIGHLIGHT,{label:"Highlight",labelKey:"annotation.highlight",icon:"highlight",iconProps:function(e){return{primaryColor:e.color||"#ffff00"}}}),_.CIRCLE,{label:"Circle",labelKey:"annotation.circle",icon:"circle",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000",secondaryColor:e.color}}}),_.SQUARE,{label:"Square",labelKey:"annotation.square",icon:"square",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000",secondaryColor:e.color}}}),_.LINE,{label:"Line",labelKey:"annotation.line",icon:"line",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000"}}}),_.UNDERLINE,{label:"Underline",labelKey:"annotation.underline",icon:"underline",iconProps:function(e){return{primaryColor:e.color||"#000000"}}}),_.SQUIGGLY,{label:"Squiggly",labelKey:"annotation.squiggly",icon:"squiggly",iconProps:function(e){return{primaryColor:e.color||"#000000"}}}),_.STRIKEOUT,{label:"Strikethrough",labelKey:"annotation.strikeout",icon:"strikethrough",iconProps:function(e){return{primaryColor:e.color||"#000000"}}}),_.INK,{label:"Ink",labelKey:"annotation.ink",icon:"pencilMarker",iconProps:function(e){return{primaryColor:e.color||"#000000"}}}),_.FREETEXT,{label:"Text",labelKey:"annotation.freeText",icon:"text",iconProps:function(e){return{primaryColor:e.fontColor||"#000000"}}}),_.POLYGON,{label:"Polygon",labelKey:"annotation.polygon",icon:"polygon",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000",secondaryColor:e.color}}}),q(q(Os,_.POLYLINE,{label:"Polyline",labelKey:"annotation.polyline",icon:"zigzag",iconProps:function(e){return{primaryColor:e.strokeColor||"#000000"}}}),_.STAMP,{label:"Stamp",labelKey:"annotation.stamp",icon:"deviceFloppy",iconProps:function(){return{primaryColor:"#dc2626"}}})),Vy=function(e){var t=e.text,n=e.maxWords,o=n===void 0?16:n,i=e.className,r=i===void 0?"":i,a=e.documentId,s=$(z(!1),2),c=s[0],d=s[1],u=ke(a).translate,m=t.split(" ");return m.length>o?l("div",{className:r},c?t:m.slice(0,o).join(" ")+"..."," ",l("button",{onClick:function(h){h.stopPropagation(),d(!c)},className:"text-accent hover:text-accent-hover text-sm font-medium focus:outline-none"},u(c?"comments.showLess":"comments.showMore"))):l("div",{className:r},t)},Ky=function(e){var t=e.annotation,n=e.config,o=e.className,i=o===void 0?"":o,r=e.title,a=n.iconProps(t.object);return l("div",{className:"bg-bg-surface-alt flex items-center justify-center rounded-full ".concat(i),title:r},l(ae,O({icon:n.icon},a)))},Zy=function(e){var t,n=e.entry,o=e.isSelected,i=e.onSelect,r=e.onUpdate,a=e.onDelete,s=e.onReply,c=e.documentId,d=e.isReadOnly,u=d!==void 0&&d,m=n.annotation,h=n.replies,g=$(z(!1),2),p=g[0],f=g[1],v=$(z(!1),2),y=v[0],b=v[1],x=ke(c).translate,w=(function(P){return Cu(P)?Gy[P.object.type]:null})(m),C=!!m.object.contents,I=h.length>0,k=!C&&!I,S=K(null),M=m.object.author||"Guest";return T(function(){var P;o&&((P=S.current)===null||P===void 0||P.focus({preventScroll:!0}))},[o,n]),w?l("div",{onClick:i,className:"bg-bg-surface cursor-pointer rounded-lg border shadow-sm transition-all hover:shadow-md ".concat(o?"border-accent ring-interactive-focus-ring ring-2":"border-border-subtle")},l("div",{className:"p-4"},l("div",{className:"flex items-start space-x-3"},l(Ky,{annotation:m,config:w,title:x(w.labelKey,{fallback:w.label}),className:"h-8 w-8"}),l("div",{className:"min-w-0 flex-1"},l("div",{className:"flex items-center justify-between"},l("div",{className:"leading-none"},l("h4",{className:"text-fg-primary text-sm font-medium"},M),l("span",{className:"text-fg-disabled text-xs"},hh(m.object.modified||m.object.created))),!u&&l("div",{className:"relative"},l("button",{onClick:function(P){P.stopPropagation(),f(!0)},className:"text-fg-disabled hover:bg-interactive-hover hover:text-fg-secondary rounded-md p-1"},l("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20"},l("path",{d:"M6 10a2 2 0 11-4 0 2 2 0 014 0zM12 10a2 2 0 11-4 0 2 2 0 014 0zM16 12a2 2 0 100-4 2 2 0 000 4z"}))),p&&l(uh,{onEdit:function(){return b(!0)},onDelete:function(){return a(m)},onClose:function(){return f(!1)},documentId:c}))),((t=m.object.custom)===null||t===void 0?void 0:t.text)&&l(Vy,{text:m.object.custom.text,maxWords:14,className:"text-fg-muted mt-2 text-sm",documentId:c}),y?l("div",{className:"mt-2"},l(mh,{initialText:m.object.contents||"",onSave:function(P){r(m.object.id,P),b(!1)},onCancel:function(){b(!1)},autoFocus:!0,documentId:c})):C?l("p",{className:"text-fg-primary mt-2 text-sm"},m.object.contents):null)),I&&l("div",{className:"border-border-subtle mt-4 space-y-4 border-t pt-4"},h.map(function(P){return l(qy,{key:P.object.id,annotation:P.object,onSave:function(E){return r(P.object.id,E)},onDelete:function(){return a(P)},isReply:!0,documentId:c,isReadOnly:u})})),!y&&!u&&l(Wy,{inputRef:S,isFocused:o,placeholder:x(k?"comments.addComment":"comments.addReply"),onSubmit:function(P){k?r(m.object.id,P):s(m.object.id,P)}}))):null},Yy=function(e){var t=e.documentId,n=ke(t).translate;return l("div",{class:"text-fg-muted flex flex-col items-center gap-2 p-4"},l(ae,{icon:"comment",className:"h-18 w-18 text-fg-muted"}),l("div",{className:"text-fg-muted max-w-[150px] text-center text-sm"},n("comments.emptyState")))},Xy=function(e){var t=e.documentId,n=at().provides,o=Fu(t).state,i=qn().provides,r=ke(t).translate,a=Ml(t).canModifyAnnotations,s=K({}),c=K(null),d=!a,u=o.selectedUid?gr(o,o.selectedUid):null,m=(y=>{const b={};for(const w of Object.values(y.pages))for(const C of w){const I=y.byUid[C];if(I&&Up(I)){const k=I.object.inReplyToId;k&&(b[k]||(b[k]=[])).push(I)}}const x={};for(const[w,C]of Object.entries(y.pages)){const I=Number(w),k=[];for(const S of C){const M=y.byUid[S];M&&Cu(M)&&k.push({page:I,annotation:M,replies:b[M.object.id]??[]})}k.length>0&&(x[I]=k)}return x})(o);T(function(){if(u&&c.current){var y=s.current[u.object.id];if(y&&c.current){var b=c.current,x=b.getBoundingClientRect(),w=y.getBoundingClientRect(),C=w.top-x.top+b.scrollTop-b.clientHeight/2+w.height/2;b.scrollTo({top:C,behavior:"smooth"})}}},[u]);var h=function(y,b){var x=v(y);x&&n?.updateAnnotation(x.object.pageIndex,y,{contents:b,modified:new Date})},g=function(y){n?.deleteAnnotation(y.object.pageIndex,y.object.id)},p=function(y,b){var x=v(y);x&&n?.createAnnotation(x.object.pageIndex,{id:Ne(),rect:{origin:{x:x.object.rect.origin.x,y:x.object.rect.origin.y},size:{width:24,height:24}},pageIndex:x.object.pageIndex,created:new Date,modified:new Date,type:_.TEXT,contents:b,inReplyToId:x.object.id,flags:["noRotate","noZoom","print"],icon:Zi.Comment})},f=Object.keys(m).map(Number).sort(function(y,b){return y-b}),v=function(y){var b,x=Xt(f);try{for(x.s();!(b=x.n()).done;){var w,C=b.value,I=Xt(m[C]);try{for(I.s();!(w=I.n()).done;){var k=w.value;if(k.annotation.object.id===y)return k.annotation;var S=k.replies.find(function(M){return M.object.id===y});if(S)return S}}catch(M){I.e(M)}finally{I.f()}}}catch(M){x.e(M)}finally{x.f()}};return f.length===0?l(Yy,{documentId:t}):l("div",{ref:c,className:"h-full overflow-y-auto"},l("div",{className:"space-y-6 p-3"},f.map(function(y){return l("div",{key:y,className:"space-y-3"},l("div",{className:"bg-bg-surface sticky top-0 z-10 px-1"},l("div",{className:"border-border-subtle border-b py-2"},l("h3",{className:"text-md text-fg-primary font-semibold"},r("comments.page",{params:{page:y+1}})),l("p",{className:"text-fg-muted text-sm"},m[y].length===1?r("comments.commentCount",{params:{count:1}}):r("comments.commentCountPlural",{params:{count:m[y].length}})))),l("div",{className:"space-y-3 px-1"},m[y].map(function(b){return l("div",{key:b.annotation.object.id,ref:function(x){x&&(s.current[b.annotation.object.id]=x)}},l(Zy,{entry:b,isSelected:u?.object.id===b.annotation.object.id,onSelect:function(){return x=b.annotation,n?.selectAnnotation(x.object.pageIndex,x.object.id),void(i==null||i.scrollToPage({pageNumber:x.object.pageIndex+1,pageCoordinates:{x:x.object.rect.origin.x,y:x.object.rect.origin.y},alignX:50,alignY:25,behavior:"smooth"}));var x},onUpdate:h,onDelete:g,onReply:p,documentId:t,isReadOnly:d}))})))})))};function Qy(e){var t=e.documentId,n=(d=>{const{provides:u}=dr(),[m,h]=z(Jc);return T(()=>{if(!u)return;const g=u.forDocument(d);return h(g.getState()),g.onStateChange(p=>{h(p)})},[u,d]),{state:m,provides:u?.forDocument(d)??null}})(t),o=n.state,i=n.provides,r=$(z(""),2),a=r[0],s=r[1];if(!i)return null;var c=Math.round(100*o.currentZoomLevel);return T(function(){s(c.toString())},[c]),l("div",{className:"relative"},l("div",{className:"bg-interactive-hover flex items-center rounded"},l("form",{onSubmit:function(d){d.preventDefault();var u=d.target,m=new FormData(u),h=parseFloat(m.get("zoom")||a);!isNaN(h)&&h>0&&i.requestZoom(h/100)},className:"block"},l("input",{name:"zoom",type:"text",inputMode:"numeric",pattern:"\\d*",className:"h-6 w-8 border-0 bg-transparent p-0 text-right text-sm outline-none focus:outline-none","aria-label":"Set zoom",autoFocus:!1,value:a,onInput:function(d){var u=d.target.value.replace(/[^0-9]/g,"");s(u)},onBlur:function(){(!a||parseFloat(a)<=0)&&s(c.toString())}}),l("span",{className:"text-sm"},"%")),l(Jt,{commandId:"zoom:toggle-menu",documentId:t,itemId:"zoom-menu-button"}),l(Jt,{commandId:"zoom:out",documentId:t}),l(Jt,{commandId:"zoom:in",documentId:t})))}var $s,Jy=["position"],gh=function(){var e=$(z(!1),2),t=e[0],n=e[1],o=K(null),i=K(null);return T(function(){if(t){var r=function(a){o.current&&!o.current.contains(a.target)&&n(!1)};return document.addEventListener("click",r),function(){return document.removeEventListener("click",r)}}},[t]),T(function(){t&&i.current&&i.current.scrollIntoView({block:"center",inline:"start"})},[t]),{open:t,setOpen:n,rootRef:o,selectedItemRef:i}},Pr=function(e){var t=e.value,n=e.onChange,o=e.options,i=e.getOptionKey,r=e.renderValue,a=e.renderOption,s=e.triggerClass,c=s===void 0?"px-3 py-2":s,d=gh(),u=d.open,m=d.setOpen,h=d.rootRef,g=d.selectedItemRef;return l("div",{ref:h,class:"relative inline-block w-full"},l("button",{type:"button",class:"border-border-default bg-bg-input flex w-full items-center justify-between gap-2 rounded border ".concat(c),onClick:function(){return m(function(p){return!p})}},r(t),l("svg",{class:"text-fg-secondary h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},l("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"}))),u&&l("div",{class:"border-border-default bg-bg-elevated absolute z-10 mt-1 max-h-60 w-full overflow-y-auto rounded border p-1 shadow-lg"},o.map(function(p){var f=i(p)===i(t);return l("button",{ref:f?g:null,key:i(p),class:"hover:bg-interactive-hover block w-full rounded text-left ".concat(f?"bg-interactive-hover":""),onClick:function(){n(p),m(!1)}},a(p,f))})))},be=function(e){var t=e.children,n=e.className;return l("label",{class:"text-fg-primary mb-2 block text-sm font-medium ".concat(n===void 0?"":n)},t)},wt=function(e){var t=e.children,n=e.className;return l("span",{class:"text-fg-muted text-xs ".concat(n===void 0?"":n)},t)},xe=function(e){var t=e.children,n=e.className;return l("section",{class:"mb-6 ".concat(n===void 0?"":n)},t)},xt=function(e){var t=e.value,n=e.min,o=n===void 0?0:n,i=e.max,r=i===void 0?1:i,a=e.step,s=a===void 0?.1:a,c=e.onChange;return l("input",{type:"range",class:"range-sm bg-border-subtle mb-2 h-1 w-full cursor-pointer appearance-none rounded-lg",value:t,min:o,max:r,step:s,onInput:function(d){return c(parseFloat(d.target.value))}})},Ze=function(e){var t=e.color,n=e.active,o=e.onSelect,i=(function(r){return r==="transparent"||/^rgba\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*0\s*\)$/i.test(r)||/^#([0-9a-f]{8})$/i.test(r)&&r.slice(-2).toLowerCase()==="00"||/^#([0-9a-f]{4})$/i.test(r)&&r.slice(-1).toLowerCase()==="0"})(t)?{backgroundColor:"#fff",backgroundImage:"linear-gradient(45deg, transparent 40%, red 40%, red 60%, transparent 60%)",backgroundSize:"100% 100%"}:{backgroundColor:t};return l("button",{title:t,class:"border-border-strong h-5 w-5 rounded-full border ".concat(n?"outline-accent outline outline-2 outline-offset-2":""),style:i,onClick:function(){return o(t)}})},e0=[{id:Ie.SOLID},{id:Ie.DASHED,dash:[6,2]},{id:Ie.DASHED,dash:[8,4]},{id:Ie.DASHED,dash:[3,3]},{id:Ie.DASHED,dash:[1,2]},{id:Ie.DASHED,dash:[4,2,1,2]},{id:Ie.DASHED,dash:[8,4,1,4]}],Fs=function(e){return l("svg",{width:"80",height:"8",viewBox:"0 0 80 8"},l("line",{x1:"0",y1:"4",x2:"80",y2:"4",style:{strokeDasharray:e?.join(" "),stroke:"currentColor",strokeWidth:"2"}}))},Dr=function(e){return l(Pr,O(O({},e),{},{options:e0,getOptionKey:function(t){var n;return t.id+(((n=t.dash)===null||n===void 0?void 0:n.join("-"))||"")},renderValue:function(t){return Fs(t.dash)},renderOption:function(t){return l("div",{class:"px-1 py-2"},Fs(t.dash))}}))},t0=[Q.None,Q.Square,Q.Circle,Q.Diamond,Q.OpenArrow,Q.ClosedArrow,Q.ROpenArrow,Q.RClosedArrow,Q.Butt,Q.Slash],js=function(e){var t,n=e.ending,o=e.position,i=q(q(q(q(q(q(q(q(q({},Q.Square,l("path",{d:"M68 -4 L76 -4 L76 4 L68 4 Z"})),Q.Circle,l("circle",{cx:"72",cy:"0",r:"4"})),Q.Diamond,l("path",{d:"M72 -5 L77 0 L72 5 L67 0 Z"})),Q.OpenArrow,l("path",{d:"M67 -5 L77 0 L67 5",fill:"none"})),Q.ClosedArrow,l("path",{d:"M67 -5 L77 0 L67 5 Z"})),Q.ROpenArrow,l("path",{d:"M77 -5 L67 0 L77 5",fill:"none"})),Q.RClosedArrow,l("path",{d:"M77 -5 L67 0 L77 5 Z"})),Q.Butt,l("path",{d:"M72 -5 L72 5",fill:"none"})),Q.Slash,l("path",{d:"M67 -5 L77 5",fill:"none"})),r=q(q(q(q(q(q(q(q(q({},Q.Square,68),Q.Circle,68),Q.Diamond,67),Q.OpenArrow,76),Q.ClosedArrow,67),Q.ROpenArrow,67),Q.RClosedArrow,67),Q.Butt,72),Q.Slash,72),a=i[n];return l("svg",{width:"80",height:"20",viewBox:"0 0 80 20",class:"text-fg-primary"},l("g",{transform:o==="start"?"rotate(180 40 10)":""},l("line",{x1:"4",y1:"10",x2:(t=r[n])!==null&&t!==void 0?t:77,y2:"10",stroke:"currentColor","stroke-width":"1.5"}),a&&l("g",{transform:"translate(0, 10)",fill:"currentColor",stroke:"currentColor","stroke-width":"1.5"},a)))},Hs=function(e){var t=e.position,n=Oo(e,Jy);return l(Pr,O(O({},n),{},{options:t0,getOptionKey:function(o){return o},triggerClass:"px-3 py-1",renderValue:function(o){return l(js,{ending:o,position:t})},renderOption:function(o){return l("div",{class:"px-1 py-1"},l(js,{ending:o,position:t}))}}))},n0=function(e){return l(Pr,O(O({},e),{},{options:eg,getOptionKey:function(t){return t},triggerClass:"px-2 py-1 text-sm",renderValue:function(t){return l("span",null,qr(t))},renderOption:function(t){return l("div",{class:"px-2 py-1"},qr(t))}}))},o0=function(e){var t=e.value,n=e.onChange,o=e.options,i=o===void 0?[8,9,10,11,12,14,16,18,24,36,48,72]:o,r=gh(),a=r.open,s=r.setOpen,c=r.rootRef,d=r.selectedItemRef;return l("div",{ref:c,class:"relative w-full"},l("input",{type:"number",min:"1",class:"border-border-default bg-bg-input w-full rounded border px-2 py-1 pr-7 text-sm",value:t,onInput:function(u){var m=parseInt(u.target.value,10);Number.isFinite(m)&&m>0&&n(m)},onClick:function(){return s(!0)}}),l("button",{type:"button",class:"absolute inset-y-0 right-1 flex items-center",onClick:function(){return s(function(u){return!u})},tabIndex:-1},l("svg",{class:"text-fg-secondary h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},l("path",{"fill-rule":"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.24a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z","clip-rule":"evenodd"}))),a&&l("div",{class:"border-border-default bg-bg-elevated absolute z-10 mt-1 max-h-48 w-full overflow-y-auto rounded border shadow-lg"},i.map(function(u){var m=u===t;return l("button",{ref:m?d:null,key:u,class:"hover:bg-interactive-hover block w-full px-2 py-1 text-left text-sm ".concat(m?"bg-interactive-hover":""),onClick:function(){n(u),s(!1)}},u)})))},i0=(q(q(q(q(q(q(q(q(q(q($s={},Z.Normal,"blendMode.normal"),Z.Multiply,"blendMode.multiply"),Z.Screen,"blendMode.screen"),Z.Overlay,"blendMode.overlay"),Z.Darken,"blendMode.darken"),Z.Lighten,"blendMode.lighten"),Z.ColorDodge,"blendMode.colorDodge"),Z.ColorBurn,"blendMode.colorBurn"),Z.HardLight,"blendMode.hardLight"),Z.SoftLight,"blendMode.softLight"),q(q(q(q(q(q($s,Z.Difference,"blendMode.difference"),Z.Exclusion,"blendMode.exclusion"),Z.Hue,"blendMode.hue"),Z.Saturation,"blendMode.saturation"),Z.Color,"blendMode.color"),Z.Luminosity,"blendMode.luminosity")),mo=function(e){var t,n,o,i,r=e.documentId,a=e.selected,s=e.activeTool,c=e.colorPresets,d=at().provides,u=ke(r).translate;if(!d)return null;var m=a?.object,h=s?.defaults,g=!!m,p=g?m.color:(t=h?.color)!==null&&t!==void 0?t:"#FFFF00",f=g?m.opacity:(n=h?.opacity)!==null&&n!==void 0?n:1,v=g?(o=m.blendMode)!==null&&o!==void 0?o:Z.Normal:(i=h?.blendMode)!==null&&i!==void 0?i:Z.Normal,y=$(z(p),2),b=y[0],x=y[1],w=$(z(f),2),C=w[0],I=w[1],k=$(z(v),2),S=k[0],M=k[1];T(function(){return x(p)},[p]),T(function(){return I(f)},[f]),T(function(){return M(v)},[v]);var P=ht(C,300);T(function(){return A({opacity:P})},[P]);var E=function(j){x(j),A({color:j})};function A(j){d&&(g?d.updateAnnotation(m.pageIndex,m.id,j):s&&d.setToolDefaults(s.id,j))}return l(Y,null,l(xe,null,l(be,{className:"mb-3"},u("annotation.color")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},c.map(function(j){return l(Ze,{key:j,color:j,active:j===b,onSelect:E})}))),l(xe,null,l(be,null,u("annotation.opacity")),l(xt,{value:C,min:.1,max:1,step:.05,onChange:I}),l(wt,null,Math.round(100*C),"%")),l(xe,null,l(be,null,u("annotation.blendMode")),l("select",{class:"border-border-default bg-bg-input text-fg-primary w-full rounded border px-2 py-1 text-sm",value:S,onChange:function(j){return L=parseInt(j.target.value,10),M(H=L),void A({blendMode:H});var L,H}},tg.map(function(j){return l("option",{key:j,value:j},u(i0[j]))}))))},Us=function(e){var t,n,o,i,r,a=e.documentId,s=e.selected,c=e.activeTool,d=e.colorPresets,u=at().provides,m=ke(a).translate;if(!u)return null;var h=s?.object,g=c?.defaults,p=!!h,f=p?h.color:(t=g?.color)!==null&&t!==void 0?t:"#000000",v=p?h.strokeColor:(n=g?.strokeColor)!==null&&n!==void 0?n:"#000000",y=p?h.opacity:(o=g?.opacity)!==null&&o!==void 0?o:1,b=p?h.strokeWidth:(i=g?.strokeWidth)!==null&&i!==void 0?i:2,x=p?{id:h.strokeStyle,dash:h.strokeDashArray}:{id:(r=g?.strokeStyle)!==null&&r!==void 0?r:Ie.SOLID,dash:g?.strokeDashArray},w=$(z(f),2),C=w[0],I=w[1],k=$(z(v),2),S=k[0],M=k[1],P=$(z(y),2),E=P[0],A=P[1],j=$(z(b),2),L=j[0],H=j[1],R=$(z(x),2),U=R[0],F=R[1];T(function(){return I(f)},[f]),T(function(){return M(v)},[v]),T(function(){return A(y)},[y]),T(function(){return H(b)},[b]),T(function(){return F(x)},[x]);var V=ht(E,300),de=ht(L,300);T(function(){return me({opacity:V})},[V]),T(function(){return me({strokeWidth:de})},[de]);var oe=function(G){I(G),me({color:G})},he=function(G){M(G),me({strokeColor:G})};function me(G){u&&(p?u.updateAnnotation(h.pageIndex,h.id,G):c&&u.setToolDefaults(c.id,G))}return l(Y,null,l(xe,null,l(be,{className:"mb-3"},m("annotation.fillColor")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},d.map(function(G){return l(Ze,{key:G,color:G,active:G===C,onSelect:oe})}),l(Ze,{color:"transparent",active:C==="transparent",onSelect:oe}))),l(xe,null,l(be,null,m("annotation.opacity")),l(xt,{value:E,min:.1,max:1,step:.05,onChange:A}),l(wt,null,Math.round(100*E),"%")),l(xe,null,l(be,{className:"mb-3"},m("annotation.strokeColor")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},d.map(function(G){return l(Ze,{key:G,color:G,active:G===S,onSelect:he})}))),l(xe,null,l(be,{className:"mb-3"},m("annotation.borderStyle")),l(Dr,{value:U,onChange:function(G){F(G),me({strokeStyle:G.id,strokeDashArray:G.dash})}})),l(xe,null,l(be,null,m("annotation.strokeWidth")),l(xt,{value:L,min:1,max:30,step:1,onChange:H}),l(wt,null,L,"px")))},Ws=function(e){var t,n,o,i,r,a,s,c=e.documentId,d=e.selected,u=e.activeTool,m=e.colorPresets,h=at().provides,g=ke(c).translate;if(!h)return null;var p=d?.object,f=u?.defaults,v=!!p,y=v?p.color:(t=f?.color)!==null&&t!==void 0?t:"#000000",b=v?p.strokeColor:(n=f?.strokeColor)!==null&&n!==void 0?n:"#000000",x=v?p.opacity:(o=f?.opacity)!==null&&o!==void 0?o:1,w=v?p.strokeWidth:(i=f?.strokeWidth)!==null&&i!==void 0?i:2,C=v?(r=p.lineEndings)!==null&&r!==void 0?r:{start:Q.None,end:Q.None}:(a=f?.lineEndings)!==null&&a!==void 0?a:{start:Q.None,end:Q.None},I=v?{id:p.strokeStyle,dash:p.strokeDashArray}:{id:(s=f?.strokeStyle)!==null&&s!==void 0?s:Ie.SOLID,dash:f?.strokeDashArray},k=$(z(y),2),S=k[0],M=k[1],P=$(z(b),2),E=P[0],A=P[1],j=$(z(x),2),L=j[0],H=j[1],R=$(z(w),2),U=R[0],F=R[1],V=$(z(I),2),de=V[0],oe=V[1],he=$(z(C.start),2),me=he[0],G=he[1],le=$(z(C.end),2),we=le[0],Ae=le[1];T(function(){return M(y)},[y]),T(function(){return A(b)},[b]),T(function(){return H(x)},[x]),T(function(){return F(w)},[w]),T(function(){return oe(I)},[I]),T(function(){return G(C.start)},[C.start]),T(function(){return Ae(C.end)},[C.end]);var He=ht(L,300),Qe=ht(U,300);T(function(){return Be({opacity:He})},[He]),T(function(){return Be({strokeWidth:Qe})},[Qe]);var Ee=function(ie){M(ie),Be({color:ie})},_e=function(ie){A(ie),Be({strokeColor:ie})};function Be(ie){h&&(v?h.updateAnnotation(p.pageIndex,p.id,ie):u&&h.setToolDefaults(u.id,ie))}return l(Y,null,l(xe,null,l(be,{className:"mb-3"},g("annotation.strokeColor")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},m.map(function(ie){return l(Ze,{key:ie,color:ie,active:ie===E,onSelect:_e})}),l(Ze,{color:"transparent",active:E==="transparent",onSelect:_e}))),l(xe,null,l(be,null,g("annotation.opacity")),l(xt,{value:L,min:.1,max:1,step:.05,onChange:H}),l(wt,null,Math.round(100*L),"%")),l(xe,null,l(be,{className:"mb-3"},g("annotation.borderStyle")),l(Dr,{value:de,onChange:function(ie){oe(ie),Be({strokeStyle:ie.id,strokeDashArray:ie.dash})}})),l(xe,null,l(be,null,g("annotation.strokeWidth")),l(xt,{value:U,min:1,max:10,step:1,onChange:F}),l(wt,null,U)),l(xe,null,l("div",{class:"grid grid-cols-2 gap-4"},l("div",null,l(be,{className:"mb-3"},g("annotation.lineStart")),l(Hs,{value:me,onChange:function(ie){G(ie),Be({lineEndings:{start:ie,end:we}})},position:"start"})),l("div",null,l(be,{className:"mb-3"},g("annotation.lineEnd")),l(Hs,{value:we,onChange:function(ie){Ae(ie),Be({lineEndings:{start:me,end:ie}})},position:"end"})))),l(xe,null,l(be,{className:"mb-3"},g("annotation.fillColor")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},m.map(function(ie){return l(Ze,{key:ie,color:ie,active:ie===S,onSelect:Ee})}),l(Ze,{color:"transparent",active:S==="transparent",onSelect:Ee}))))};function Ot(e){var t=e.active,n=t!==void 0&&t,o=e.disabled,i=o!==void 0&&o,r=e.onClick,a=e.title,s=e.children,c=e.className,d=c===void 0?"":c;return l("button",{type:"button",title:a,disabled:i,onClick:r,className:"h-9 w-9 rounded border px-2 py-1 text-sm transition-colors ".concat(n?"border-accent bg-accent text-fg-on-accent":"border-border-default bg-bg-input text-fg-primary hover:bg-interactive-hover"," disabled:cursor-not-allowed disabled:opacity-40 ").concat(d)},s)}var Bs,r0=(q(q(q(q(q(q(q(q(q(q(Bs={},_.INK,{component:function(e){var t,n,o,i,r,a,s=e.documentId,c=e.selected,d=e.activeTool,u=e.colorPresets,m=at().provides,h=ke(s).translate;if(!m)return null;var g=c?.object,p=d?.defaults,f=(t=(n=g?.color)!==null&&n!==void 0?n:p?.color)!==null&&t!==void 0?t:"#000000",v=(o=(i=g?.opacity)!==null&&i!==void 0?i:p?.opacity)!==null&&o!==void 0?o:1,y=(r=(a=g?.strokeWidth)!==null&&a!==void 0?a:p?.strokeWidth)!==null&&r!==void 0?r:2,b=$(z(f),2),x=b[0],w=b[1],C=$(z(v),2),I=C[0],k=C[1],S=$(z(y),2),M=S[0],P=S[1];T(function(){return w(f)},[f]),T(function(){return k(v)},[v]),T(function(){return P(y)},[y]);var E=ht(I,300),A=ht(M,300);T(function(){return L({opacity:E})},[E]),T(function(){return L({strokeWidth:A})},[A]);var j=function(H){w(H),L({color:H})};function L(H){m&&(g?m.updateAnnotation(g.pageIndex,g.id,H):d&&m.setToolDefaults(d.id,H))}return l(Y,null,l(xe,null,l(be,{className:"mb-3"},h("annotation.color")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},u.map(function(H){return l(Ze,{key:H,color:H,active:H===x,onSelect:j})}))),l(xe,null,l(be,null,h("annotation.opacity")),l(xt,{value:I,min:.1,max:1,step:.05,onChange:k}),l(wt,null,Math.round(100*I),"%")),l(xe,null,l(be,null,h("annotation.strokeWidth")),l(xt,{value:M,min:1,max:30,step:1,onChange:P}),l(wt,null,M,"px")))},titleKey:"annotation.ink"}),_.POLYGON,{component:function(e){var t,n,o,i,r,a=e.documentId,s=e.selected,c=e.activeTool,d=e.colorPresets,u=at().provides,m=ke(a).translate;if(!u)return null;var h=s?.object,g=c?.defaults,p=!!h,f=p?h.color:(t=g?.color)!==null&&t!==void 0?t:"#000000",v=p?h.strokeColor:(n=g?.strokeColor)!==null&&n!==void 0?n:"#000000",y=p?h.opacity:(o=g?.opacity)!==null&&o!==void 0?o:1,b=p?h.strokeWidth:(i=g?.strokeWidth)!==null&&i!==void 0?i:2,x=p?{id:h.strokeStyle,dash:h.strokeDashArray}:{id:(r=g?.strokeStyle)!==null&&r!==void 0?r:Ie.SOLID,dash:g?.strokeDashArray},w=$(z(f),2),C=w[0],I=w[1],k=$(z(v),2),S=k[0],M=k[1],P=$(z(y),2),E=P[0],A=P[1],j=$(z(b),2),L=j[0],H=j[1],R=$(z(x),2),U=R[0],F=R[1];T(function(){return I(f)},[f]),T(function(){return M(v)},[v]),T(function(){return A(y)},[y]),T(function(){return H(b)},[b]),T(function(){return F(x)},[x]);var V=ht(E,300),de=ht(L,300);T(function(){return me({opacity:V})},[V]),T(function(){return me({strokeWidth:de})},[de]);var oe=function(G){I(G),me({color:G})},he=function(G){M(G),me({strokeColor:G})};function me(G){u&&(p?u.updateAnnotation(h.pageIndex,h.id,G):c&&u.setToolDefaults(c.id,G))}return l(Y,null,l(xe,null,l(be,{className:"mb-3"},m("annotation.strokeColor")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},d.map(function(G){return l(Ze,{key:G,color:G,active:G===S,onSelect:he})}),l(Ze,{color:"transparent",active:S==="transparent",onSelect:he}))),l(xe,null,l(be,null,m("annotation.opacity")),l(xt,{value:E,min:.1,max:1,step:.05,onChange:A}),l(wt,null,Math.round(100*E),"%")),l(xe,null,l(be,{className:"mb-3"},m("annotation.borderStyle")),l(Dr,{value:U,onChange:function(G){F(G),me({strokeStyle:G.id,strokeDashArray:G.dash})}})),l(xe,null,l(be,null,m("annotation.strokeWidth")),l(xt,{value:L,min:1,max:10,step:1,onChange:H}),l(wt,null,L)),l(xe,null,l(be,{className:"mb-3"},m("annotation.fillColor")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},d.map(function(G){return l(Ze,{key:G,color:G,active:G===C,onSelect:oe})}),l(Ze,{color:"transparent",active:C==="transparent",onSelect:oe}))))},titleKey:"annotation.polygon"}),_.SQUARE,{component:Us,titleKey:"annotation.square"}),_.CIRCLE,{component:Us,titleKey:"annotation.circle"}),_.LINE,{component:Ws,titleKey:function(e){var t;return((t=e.activeTool)===null||t===void 0?void 0:t.id)==="lineArrow"?"annotation.arrow":"annotation.line"}}),_.POLYLINE,{component:Ws,titleKey:"annotation.polyline"}),_.HIGHLIGHT,{component:mo,titleKey:"annotation.highlight"}),_.UNDERLINE,{component:mo,titleKey:"annotation.underline"}),_.STRIKEOUT,{component:mo,titleKey:"annotation.strikeout"}),_.SQUIGGLY,{component:mo,titleKey:"annotation.squiggly"}),q(q(Bs,_.FREETEXT,{component:function(e){var t,n,o,i,r,a,s,c=e.documentId,d=e.selected,u=e.activeTool,m=e.colorPresets,h=at().provides,g=ke(c).translate;if(!h)return null;var p=d?.object,f=u?.defaults,v=!!p,y=v?p.fontFamily:(t=f?.fontFamily)!==null&&t!==void 0?t:We.Helvetica,b=Fo(y).family,x=Xn(y),w=Qn(y),C=v?p.fontColor:(n=f?.fontColor)!==null&&n!==void 0?n:"#000000",I=v?p.opacity:(o=f?.opacity)!==null&&o!==void 0?o:1,k=v?p.backgroundColor:(i=f?.backgroundColor)!==null&&i!==void 0?i:"#000000",S=v?p.fontSize:(r=f?.fontSize)!==null&&r!==void 0?r:12,M=v?p.textAlign:(a=f?.textAlign)!==null&&a!==void 0?a:it.Left,P=v?p.verticalAlign:(s=f?.verticalAlign)!==null&&s!==void 0?s:mt.Top,E=$(z(b),2),A=E[0],j=E[1],L=$(z(S),2),H=L[0],R=L[1],U=$(z(x),2),F=U[0],V=U[1],de=$(z(w),2),oe=de[0],he=de[1],me=$(z(M),2),G=me[0],le=me[1],we=$(z(P),2),Ae=we[0],He=we[1],Qe=$(z(C),2),Ee=Qe[0],_e=Qe[1],Be=$(z(I),2),ie=Be[0],ne=Be[1],pe=$(z(k),2),fe=pe[0],Se=pe[1];function $e(J){h&&(v?h.updateAnnotation(p.pageIndex,p.id,J):u&&h.setToolDefaults(u.id,J))}T(function(){j(b),V(x),he(w)},[b,x,w]),T(function(){return _e(C)},[C]),T(function(){return ne(I)},[I]),T(function(){return Se(k)},[k]),T(function(){return R(S)},[S]),T(function(){return le(M)},[M]),T(function(){return He(P)},[P]);var bt=ht(ie,300),Ut=ht(fe,300);T(function(){return $e({opacity:bt})},[bt]),T(function(){return $e({backgroundColor:Ut})},[Ut]);var dn=function(J){_e(J),$e({fontColor:J})},_t=function(J){Se(J),$e({backgroundColor:J})},Je=function(J,ft,Wt){$e({fontFamily:qt(J,{bold:ft,italic:Wt})})},pt=function(J){le(J),$e({textAlign:J})},un=function(J){He(J),$e({verticalAlign:J})};return l(Y,null,l(xe,null,l(be,null,g("annotation.font")),l("div",{class:"mb-3 flex gap-2"},l(n0,{value:A,onChange:function(J){var ft=Xn(qt(J,{bold:!0,italic:!1})),Wt=Qn(qt(J,{bold:!1,italic:!0})),mn=!!ft&&F,Zn=!!Wt&&oe;j(J),V(mn),he(Zn),Je(J,mn,Zn)}}),l("div",{class:"w-36"},l(o0,{value:H,onChange:function(J){!Number.isFinite(J)||J<=0||(R(J),$e({fontSize:J}))}}))),l("div",{class:"flex gap-2"},l(Ot,{title:"Bold",active:F,disabled:!Xn(qt(A,{bold:!0,italic:!1})),onClick:function(){if(Xn(qt(A,{bold:!0,italic:!1}))){var J=!F;V(J),Je(A,J,oe)}},className:"font-bold"},l(ae,{icon:"bold",size:18})),l(Ot,{title:"Italic",active:oe,disabled:!Qn(qt(A,{bold:!1,italic:!0})),onClick:function(){if(Qn(qt(A,{bold:!1,italic:!0}))){var J=!oe;he(J),Je(A,F,J)}},className:"italic"},l(ae,{icon:"italic",size:18})))),l(xe,null,l(be,null,g("annotation.textAlign")),l("div",{class:"flex gap-2"},l(Ot,{title:"Align left",active:G===it.Left,onClick:function(){return pt(it.Left)}},l(ae,{icon:"alignLeft",size:18})),l(Ot,{title:"Align center",active:G===it.Center,onClick:function(){return pt(it.Center)}},l(ae,{icon:"alignCenter",size:18})),l(Ot,{title:"Align right",active:G===it.Right,onClick:function(){return pt(it.Right)}},l(ae,{icon:"alignRight",size:18})))),l(xe,null,l(be,null,g("annotation.verticalAlign")),l("div",{class:"flex gap-2"},l(Ot,{title:"Align top",active:Ae===mt.Top,onClick:function(){return un(mt.Top)}},l(ae,{icon:"alignTop",size:18})),l(Ot,{title:"Align middle",active:Ae===mt.Middle,onClick:function(){return un(mt.Middle)}},l(ae,{icon:"alignMiddle",size:18})),l(Ot,{title:"Align bottom",active:Ae===mt.Bottom,onClick:function(){return un(mt.Bottom)}},l(ae,{icon:"alignBottom",size:18})))),l(xe,null,l(be,{className:"mb-3"},g("annotation.fontColor")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},m.map(function(J){return l(Ze,{key:J,color:J,active:J===Ee,onSelect:dn})}))),l(xe,null,l(be,{className:"mb-3"},g("annotation.backgroundColor")),l("div",{class:"grid grid-cols-6 gap-x-1 gap-y-4"},m.map(function(J){return l(Ze,{key:J,color:J,active:J===fe,onSelect:_t})}),l(Ze,{color:"transparent",active:fe==="transparent",onSelect:_t}))),l(xe,null,l(be,null,g("annotation.opacity")),l(xt,{value:ie,min:.1,max:1,step:.05,onChange:ne}),l(wt,null,Math.round(100*ie),"%")))},titleKey:"annotation.freeText"}),_.STAMP,{component:function(e){var t=e.documentId;return l("div",{className:"text-fg-muted text-sm"},(0,ke(t).translate)("annotation.noStylesStamp"))},titleKey:"annotation.stamp"})),qs=function(e){var t=e.documentId,n=ke(t).translate;return l("div",{class:"text-fg-muted flex flex-col items-center gap-2 p-4"},l(ae,{icon:"palette",className:"h-18 w-18 text-fg-muted"}),l("div",{className:"text-fg-muted max-w-[150px] text-center text-sm"},n("annotation.selectAnnotation")))};function a0(e){var t,n=e.documentId,o=at().provides,i=Fu(n),r=i.provides,a=i.state,s=ke(n).translate;if(!o||!r)return null;var c=(t=o?.getColorPresets())!==null&&t!==void 0?t:[],d=null,u=null,m=a.selectedUid?gr(a,a.selectedUid):null;if(m)d=r.findToolForAnnotation(m.object),u=m.object.type;else if(a.activeToolId){var h,g,p;u=(g=(p=d=(h=r.getActiveTool())!==null&&h!==void 0?h:null)===null||p===void 0?void 0:p.defaults.type)!==null&&g!==void 0?g:null}if(u===null)return D(qs,{documentId:n});var f=r0[u];if(!f)return D(qs,{documentId:n});var v=f.component,y=f.titleKey,b={documentId:n,selected:m,activeTool:d,colorPresets:c},x=typeof y=="function"?y(b):y,w=x?s(x):"",C=w?s(m?"annotation.styles":"annotation.defaults",{params:{type:w}}):"";return D("div",{class:"h-full overflow-y-auto p-4",children:[C&&D("h2",{class:"text-md mb-4 font-medium",children:C}),D(v,O({},b))]})}function s0(e){var t=e.schema,n=e.documentId,o=e.props,i=o.menuWrapperProps,r=o.rect,a=o.placement,s={position:"absolute",pointerEvents:"auto",cursor:"default",left:"50%",transform:"translateX(-50%)"};return a!=null&&a.suggestTop?s.top=-48:s.top=r.size.height+8,l("div",O(O({},i),je(t)),l("div",{style:s,className:"border-border-subtle bg-bg-elevated rounded-lg border shadow-lg"},l("div",{className:"flex items-center gap-1 p-1"},t.items.map(function(c){return l(ph,{key:c.id,item:c,documentId:n,props:o})}))))}function ph(e){var t,n=e.item,o=e.documentId,i=e.props;switch(n.type){case"command-button":return l("div",O({},je(n)),l(Jt,{commandId:n.commandId,documentId:o,variant:n.variant}));case"divider":return l("div",O({},je(n)),l("div",{className:"bg-border-default h-6 w-px","aria-hidden":"true"}));case"group":return l("div",O({className:"flex items-center gap-".concat((t=n.gap)!==null&&t!==void 0?t:1)},je(n)),n.items.map(function(r){return l(ph,{key:r.id,item:r,documentId:o,props:i})}));default:return null}}function l0(e){var t,n,o=e.schema,i=e.documentId,r=e.className,a=o.content,s=o.position,c=Go().renderCustomComponent,d=(t=s.anchor,(n={"top-left":"top-0 left-0","top-center":"top-0 left-1/2 -translate-x-1/2","top-right":"top-0 right-0","center-left":"top-1/2 left-0 -translate-y-1/2",center:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2","center-right":"top-1/2 right-0 -translate-y-1/2","bottom-left":"bottom-0 left-0","bottom-center":"bottom-0 left-1/2 -translate-x-1/2","bottom-right":"bottom-0 right-0"})[t]||n["bottom-center"]),u=(function(m){if(m){var h={};return m.top&&(h.top=m.top),m.right&&(h.right=m.right),m.bottom&&(h.bottom=m.bottom),m.left&&(h.left=m.left),Object.keys(h).length>0?h:void 0}})(s.offset);return l("div",{className:"absolute ".concat(d," ").concat(r||""),style:u,"data-overlay-id":o.id},c(a.componentId,i))}function Xo(e){var t=e.open,n=e.title,o=e.children,i=e.onClose,r=e.onExited,a=e.className,s=e.showCloseButton,c=s===void 0||s,d=K(null),u=$(z(t),2),m=u[0],h=u[1],g=$(z(!1),2),p=g[0],f=g[1];return T(function(){if(t)h(!0),requestAnimationFrame(function(){f(!0)});else if(m){f(!1);var v=setTimeout(function(){h(!1),r?.()},200);return function(){return clearTimeout(v)}}},[t,m,r]),T(function(){if(t){var v=function(y){y.key==="Escape"&&i?.()};return document.addEventListener("keydown",v),function(){return document.removeEventListener("keydown",v)}}},[t,i]),T(function(){return document.body.style.overflow=m?"hidden":"",function(){document.body.style.overflow=""}},[m]),m?D("div",{ref:d,className:"fixed inset-0 z-50 transition-opacity duration-200 md:flex md:items-center md:justify-center ".concat(p&&t?"bg-bg-overlay":"bg-transparent"),onClick:function(v){v.target===d.current&&i?.()},children:D("div",{className:Gn("bg-bg-surface md:border-border-subtle relative flex h-full w-full flex-col transition-all duration-200 md:h-auto md:w-[28rem] md:max-w-[90vw] md:rounded-lg md:border md:shadow-lg",p&&t?"scale-100 opacity-100":"scale-95 opacity-0",a),onClick:function(v){return v.stopPropagation()},children:[(n||c)&&D("div",{className:"border-border-subtle flex flex-shrink-0 items-center justify-between border-b px-6 py-4",children:[n&&D("h2",{className:"text-fg-primary text-lg font-semibold",children:n}),c&&D(Ge,{onClick:i,className:"hover:bg-interactive-hover p-1",children:D(ae,{icon:"x",className:"h-5 w-5"})})]}),D("div",{className:"flex-1 overflow-y-auto px-6 py-4 md:max-h-[80vh] md:flex-none",children:o})]})}):null}function c0(e){var t=e.documentId,n=e.isOpen,o=e.onClose,i=e.onExited,r=qn().provides,a=Qu().provides,s=ke(t).translate,c=$(z("all"),2),d=c[0],u=c[1],m=$(z(""),2),h=m[0],g=m[1],p=$(z(!0),2),f=p[0],v=p[1],y=$(z(!1),2),b=y[0],x=y[1],w=$(z(""),2),C=w[0],I=w[1],k=r?.forDocument(t).getMetrics(),S=k?.currentPage||1,M=r?.forDocument(t).getTotalPages()||0;T(function(){n&&(u("all"),g(""),v(!0),x(!1),I(""))},[n]);var P=(d!=="custom"||h.trim().length>0)&&!b;return l(Xo,{open:n!=null&&n,title:s("print.title"),onClose:o,onExited:i,className:"md:w-[32rem]"},l("div",{className:"space-y-6"},l("div",null,l("label",{className:"text-fg-secondary mb-3 block text-sm font-medium"},s("print.pages")),l("div",{className:"space-y-2"},l("label",{className:"flex items-center"},l("input",{type:"radio",name:"pageRange",value:"all",checked:d==="all",onChange:function(){return u("all")},disabled:b,className:"accent-accent mr-2"}),l("span",{className:"text-fg-primary text-sm"},s("print.all"))),l("label",{className:"flex items-center"},l("input",{type:"radio",name:"pageRange",value:"current",checked:d==="current",onChange:function(){return u("current")},disabled:b,className:"accent-accent mr-2"}),l("span",{className:"text-fg-primary text-sm"},s("print.current",{params:{currentPage:S}}))),l("label",{className:"flex items-start"},l("input",{type:"radio",name:"pageRange",value:"custom",checked:d==="custom",onChange:function(){return u("custom")},disabled:b,className:"accent-accent mr-2 mt-0.5"}),l("div",{className:"flex-1"},l("span",{className:"text-fg-primary mb-1 block text-sm"},s("print.specify")),l("input",{type:"text",placeholder:s("print.specifyEG"),value:h,onInput:function(E){return g(E.target.value)},disabled:d!=="custom"||b,className:"w-full rounded-md border px-3 py-1 text-base ".concat(d!=="custom"||b?"bg-interactive-disabled text-fg-muted":"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent"," focus:outline-none focus:ring-1")}),d==="custom"&&h.trim()&&M>0&&l("p",{className:"text-fg-muted mt-1 text-xs"},s("print.current",{params:{totalPages:M}})))))),l("div",null,l("label",{className:"flex items-center"},l("input",{type:"checkbox",checked:f,onChange:function(E){return v(E.target.checked)},disabled:b,className:"accent-accent mr-2"}),l("span",{className:"text-fg-secondary text-sm font-medium"},s("print.annotation")))),b&&l("div",{className:"bg-state-info-light flex items-center space-x-3 rounded-md p-3"},l(wn,{className:"text-accent"}),l("span",{className:"text-accent text-sm"},C)),l("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},l(Ge,{onClick:o,disabled:b,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},s("print.cancel")),l(Ge,{onClick:function(){var E;d==="current"?E=String(S):d==="custom"&&(E=h.trim()||void 0);var A={includeAnnotations:f,pageRange:E};try{x(!0),I(s("print.loading"));var j=a?.forDocument(t).print(A);j&&(j.onProgress(function(L){I(L.message)}),j.wait(function(){x(!1),I(""),o?.()},function(L){console.error("Print failed:",L),x(!1),I("")}))}catch(L){console.error("Print failed:",L),x(!1),I("")}},disabled:!P,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},b&&l(wn,{size:"sm"}),l("span",null,s(b?"print.printing":"print.print"))))))}function d0(e){var t=e.documentId,n=Mi().provides,o=Zl(t),i=o.provides,r=o.state,a=r.currentPage,s=r.totalPages,c=$(z(!1),2),d=c[0],u=c[1],m=$(z(!1),2),h=m[0],g=m[1],p=K(null),f=$(z(a.toString()),2),v=f[0],y=f[1],b=K(null);T(function(){y(a.toString())},[a]);var x=te(function(){p.current&&clearTimeout(p.current),p.current=setTimeout(function(){h||u(!1)},4e3)},[h]);return T(function(){if(n)return n.onScrollActivity(function(w){w.documentId===t&&(u(!0),x())})},[n,t,x]),T(function(){return function(){p.current&&clearTimeout(p.current)}},[]),s<=1?null:l("div",{onMouseEnter:function(){g(!0),u(!0),p.current&&clearTimeout(p.current)},onMouseLeave:function(){g(!1),x()},className:"pointer-events-auto"},l("div",{className:"border-border-default bg-bg-surface flex items-center gap-1 rounded-lg border p-1 shadow-lg transition-opacity duration-300 ".concat(d?"opacity-100":"opacity-0")},l(Jt,{commandId:"scroll:previous-page",documentId:t,variant:"icon"}),l("div",{className:"flex items-center gap-1 px-1"},l("input",{ref:b,type:"text",inputMode:"numeric",pattern:"[0-9]*",value:v,onChange:function(w){var C=w.target.value.replace(/[^0-9]/g,"");y(C)},onFocus:function(){setTimeout(function(){var w;return(w=b.current)===null||w===void 0?void 0:w.select()},0)},onBlur:function(){var w,C=parseInt(v,10);!isNaN(C)&&C>=1&&C<=s?i==null||(w=i.scrollToPage)===null||w===void 0||w.call(i,{pageNumber:C}):y(a.toString())},onKeyDown:function(w){w.key==="Enter"?w.target.blur():w.key==="Escape"&&(y(a.toString()),w.target.blur())},className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent h-7 w-10 rounded border px-1 text-center text-base focus:outline-none focus:ring-1"}),l("span",{className:"text-fg-secondary text-sm"}," ",s)),l(Jt,{commandId:"scroll:next-page",documentId:t,variant:"icon"})))}var ze=function(e,t,n){return!(function(o,i,r){return ko(o.core,i,r)})(e,t,n)},u0={"zoom:in":{id:"zoom:in",labelKey:"zoom.in",icon:"zoomIn",shortcuts:["Ctrl+=","Meta+=","Ctrl+NumpadAdd","Meta+NumpadAdd"],categories:["zoom","zoom-in"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).zoomIn()}},"zoom:out":{id:"zoom:out",labelKey:"zoom.out",icon:"zoomOut",shortcuts:["Ctrl+-","Meta+-","Ctrl+NumpadSubtract","Meta+NumpadSubtract"],categories:["zoom","zoom-out"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).zoomOut()}},"zoom:fit-page":{id:"zoom:fit-page",labelKey:"zoom.fitPage",icon:"fitToPage",shortcuts:["Ctrl+0","Meta+0"],categories:["zoom","zoom-fit-page"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(qe.FitPage)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===qe.FitPage}},"zoom:fit-width":{id:"zoom:fit-width",labelKey:"zoom.fitWidth",icon:"fitToWidth",shortcuts:["Ctrl+1","Meta+1"],categories:["zoom","zoom-fit-width"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(qe.FitWidth)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===qe.FitWidth}},"zoom:marquee":{id:"zoom:marquee",labelKey:"zoom.marquee",icon:"zoomInArea",shortcuts:["Ctrl+M","Meta+M"],categories:["zoom","zoom-marquee"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).toggleMarqueeZoom()},active:function(e){var t,n,o=e.state,i=e.documentId;return(t=(n=o.plugins.zoom)===null||n===void 0||(n=n.documents[i])===null||n===void 0?void 0:n.isMarqueeZoomActive)!==null&&t!==void 0&&t}},"zoom:25":{id:"zoom:25",label:"25%",categories:["zoom","zoom-level","zoom-level-25"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(.25)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===.25}},"zoom:50":{id:"zoom:50",label:"50%",categories:["zoom","zoom-level","zoom-level-50"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(.5)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===.5}},"zoom:100":{id:"zoom:100",label:"100%",categories:["zoom","zoom-level","zoom-level-100"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(1)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===1}},"zoom:125":{id:"zoom:125",label:"125%",categories:["zoom","zoom-level","zoom-level-125"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(1.25)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===1.25}},"zoom:150":{id:"zoom:150",label:"150%",categories:["zoom","zoom-level","zoom-level-150"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(1.5)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===1.5}},"zoom:200":{id:"zoom:200",label:"200%",categories:["zoom","zoom-level","zoom-level-200"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(2)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===2}},"zoom:400":{id:"zoom:400",label:"400%",categories:["zoom","zoom-level","zoom-level-400"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(4)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===4}},"zoom:800":{id:"zoom:800",label:"800%",categories:["zoom","zoom-level","zoom-level-800"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(8)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===8}},"zoom:1600":{id:"zoom:1600",label:"1600%",categories:["zoom","zoom-level","zoom-level-1600"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("zoom"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).requestZoom(16)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.zoom)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.zoomLevel)===16}},"zoom:toggle-menu":{id:"zoom:toggle-menu",labelKey:"zoom.menu",icon:"chevronDown",iconProps:{className:"h-3.5 w-3.5"},categories:["zoom","zoom-menu"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).toggleMenu("zoom-menu","zoom:toggle-menu","zoom-menu-button")},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["zoom-menu"]!==void 0}},"zoom:toggle-menu-mobile":{id:"zoom:toggle-menu-mobile",labelKey:"zoom.menu",icon:"zoomIn",categories:["zoom","zoom-menu"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).toggleMenu("zoom-menu","zoom:toggle-menu-mobile","zoom-menu-button")},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["zoom-menu"]!==void 0}},"pan:toggle":{id:"pan:toggle",labelKey:"pan.toggle",icon:"hand",shortcuts:["h"],categories:["tools","pan"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("pan"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).togglePan()},active:function(e){var t,n,o=e.state,i=e.documentId;return(t=(n=o.plugins.pan)===null||n===void 0||(n=n.documents[i])===null||n===void 0?void 0:n.isPanMode)!==null&&t!==void 0&&t}},"pointer:toggle":{id:"pointer:toggle",labelKey:"pointer.toggle",icon:"pointer",shortcuts:["p"],categories:["tools","pointer"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("interaction-manager"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).activate("pointerMode")},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins["interaction-manager"])===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.activeMode)==="pointerMode"}},"left-action-menu:overflow-menu":{id:"left-action-menu:overflow-menu",labelKey:"menu.moreOptions",icon:"dots",categories:["ui","ui-menu"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.toggleMenu("left-action-menu","left-action-menu:overflow-menu","overflow-left-action-menu-button",o)},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["left-action-menu"]!==void 0}},"capture:screenshot":{id:"capture:screenshot",labelKey:"capture.screenshot",icon:"screenshot",shortcuts:["Ctrl+Shift+S","Meta+Shift+S"],categories:["tools","capture","capture-screenshot"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("capture"))===null||t===void 0?void 0:t.provides();if(i){var r=i.forDocument(o);r.isMarqueeCaptureActive()?r.disableMarqueeCapture():r.enableMarqueeCapture()}},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins["interaction-manager"].documents[o])===null||t===void 0?void 0:t.activeMode)==="marqueeCapture"}},"document:menu":{id:"document:menu",labelKey:"document.menu",icon:"menu",categories:["document","document-menu"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(At);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleMenu("document-menu","document:menu","document-menu-button")}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["document-menu"]!==void 0}},"document:open":{id:"document:open",labelKey:"document.open",icon:"fileImport",shortcuts:["Ctrl+O","Meta+O"],categories:["document","document-open"],action:function(e){var t,n=(t=e.registry.getPlugin("document-manager"))===null||t===void 0?void 0:t.provides();n?.openFileDialog()}},"document:close":{id:"document:close",labelKey:"document.close",icon:"x",shortcuts:["Ctrl+W","Meta+W"],categories:["document","document-close"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("document-manager"))===null||t===void 0?void 0:t.provides();i?.closeDocument(o)}},"document:print":{id:"document:print",labelKey:"document.print",icon:"print",shortcuts:["Ctrl+P","Meta+P"],categories:["document","document-print"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(At);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).openModal("print-modal")}},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.Print)}},"document:protect":{id:"document:protect",labelKey:"document.protect",icon:"lock",categories:["document","document-protect"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).openModal("protect-modal")}},"document:export":{id:"document:export",labelKey:"document.export",icon:"download",categories:["document","document-export"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("export"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).download()}},"document:capture":{id:"document:capture",labelKey:"capture.screenshot",icon:"screenshot",categories:["document","document-capture"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("capture"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).toggleMarqueeCapture()},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins["interaction-manager"])===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.activeMode)==="marqueeCapture"}},"document:fullscreen":{id:"document:fullscreen",labelKey:"document.fullscreen",icon:function(e){var t;return(t=e.state.plugins.fullscreen)!==null&&t!==void 0&&t.isFullscreen?"fullscreenExit":"fullscreen"},shortcuts:["F11"],categories:["document","document-fullscreen"],action:function(e){var t,n=(t=e.registry.getPlugin("fullscreen"))===null||t===void 0?void 0:t.provides();n&&(n.isFullscreen()?n.exitFullscreen():n.enableFullscreen())},active:function(e){var t,n;return(t=(n=e.state.plugins.fullscreen)===null||n===void 0?void 0:n.isFullscreen)!==null&&t!==void 0&&t}},"panel:toggle-sidebar":{id:"panel:toggle-sidebar",labelKey:"panel.sidebar",icon:"sidebar",categories:["panel","panel-sidebar"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(At);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("left","main","sidebar-panel")}},active:function(e){var t=e.state,n=e.documentId;return oo(t.plugins,n,"left","main","sidebar-panel")}},"panel:toggle-search":{id:"panel:toggle-search",labelKey:"panel.search",icon:"search",shortcuts:["Ctrl+F","Meta+F"],categories:["panel","panel-search"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(At);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("right","main","search-panel")}},active:function(e){var t=e.state,n=e.documentId;return oo(t.plugins,n,"right","main","search-panel")}},"panel:toggle-comment":{id:"panel:toggle-comment",labelKey:"panel.comment",icon:"comment",categories:["panel","panel-comment"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(At);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("right","main","comment-panel")}},active:function(e){var t=e.state,n=e.documentId;return oo(t.plugins,n,"right","main","comment-panel")}},"panel:toggle-annotation-style":{id:"panel:toggle-annotation-style",labelKey:"panel.annotationStyle",icon:"palette",categories:["panel","panel-annotation-style"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(At);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleSidebar("left","main","annotation-panel")}},active:function(e){var t=e.state,n=e.documentId;return oo(t.plugins,n,"left","main","annotation-panel")},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"page:settings":{id:"page:settings",labelKey:"page.settings",icon:"viewSettings",categories:["page","page-settings"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin(At);if(o&&o.provides){var i=o.provides();i&&i.forDocument(n).toggleMenu("page-settings-menu","page:settings","page-settings-button")}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["page-settings-menu"]!==void 0}},"spread:none":{id:"spread:none",labelKey:"page.single",icon:"singlePage",categories:["page","spread","spread-none"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("spread"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setSpreadMode(rt.None)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.spread)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.spreadMode)===rt.None}},"spread:odd":{id:"spread:odd",labelKey:"page.twoOdd",icon:"doublePage",categories:["page","spread","spread-odd"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("spread"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setSpreadMode(rt.Odd)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.spread)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.spreadMode)===rt.Odd}},"spread:even":{id:"spread:even",labelKey:"page.twoEven",icon:"book2",categories:["page","spread","spread-even"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("spread"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setSpreadMode(rt.Even)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.spread)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.spreadMode)===rt.Even}},"rotate:clockwise":{id:"rotate:clockwise",labelKey:"rotate.clockwise",icon:"rotateClockwise",shortcuts:["Ctrl+]","Meta+]"],categories:["page","rotate","rotate-clockwise"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("rotate"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).rotateForward()}},"rotate:counter-clockwise":{id:"rotate:counter-clockwise",labelKey:"rotate.counterClockwise",icon:"rotateCounterClockwise",shortcuts:["Ctrl+[","Meta+["],categories:["page","rotate","rotate-counter-clockwise"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("rotate"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).rotateBackward()}},"scroll:vertical":{id:"scroll:vertical",labelKey:"page.vertical",icon:"vertical",categories:["page","scroll","scroll-vertical"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("scroll"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setScrollStrategy(ct.Vertical)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.scroll)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.strategy)===ct.Vertical}},"scroll:horizontal":{id:"scroll:horizontal",labelKey:"page.horizontal",icon:"horizontal",categories:["page","scroll","scroll-horizontal"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("scroll"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).setScrollStrategy(ct.Horizontal)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.scroll)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.strategy)===ct.Horizontal}},"scroll:next-page":{id:"scroll:next-page",labelKey:"page.next",icon:"chevronRight",categories:["page","navigation","navigation-next"],shortcuts:["Ctrl+]","Meta+]","ArrowRight"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("scroll"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).scrollToNextPage()},disabled:function(e){var t,n,o=e.state,i=e.documentId;return((t=o.plugins.scroll)===null||t===void 0||(t=t.documents[i])===null||t===void 0?void 0:t.currentPage)>=((n=o.plugins.scroll)===null||n===void 0||(n=n.documents[i])===null||n===void 0?void 0:n.totalPages)}},"scroll:previous-page":{id:"scroll:previous-page",labelKey:"page.previous",icon:"chevronLeft",categories:["page","navigation","navigation-previous"],shortcuts:["Ctrl+[","Meta+[","ArrowLeft"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("scroll"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).scrollToPreviousPage()},disabled:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.scroll)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.currentPage)<=1}},"mode:view":{id:"mode:view",labelKey:"mode.view",categories:["mode","mode-view"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin("ui"))===null||t===void 0?void 0:t.provides(),a=(n=o.getPlugin("interaction-manager"))===null||n===void 0?void 0:n.provides();if(r&&a){var s=a.forDocument(i);s&&(s.activate("pointerMode"),r.forDocument(i).closeToolbarSlot("top","secondary"))}},active:function(e){var t=e.state,n=e.documentId;return!no(t.plugins,n,"top","secondary")}},"mode:annotate":{id:"mode:annotate",labelKey:"mode.annotate",categories:["mode","mode-annotate","annotation"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.setActiveToolbar("top","secondary","annotation-toolbar",o)},active:function(e){var t=e.state,n=e.documentId;return no(t.plugins,n,"top","secondary","annotation-toolbar")}},"mode:shapes":{id:"mode:shapes",labelKey:"mode.shapes",categories:["mode","mode-shapes","annotation"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.setActiveToolbar("top","secondary","shapes-toolbar",o)},active:function(e){var t=e.state,n=e.documentId;return no(t.plugins,n,"top","secondary","shapes-toolbar")}},"mode:redact":{id:"mode:redact",labelKey:"mode.redact",categories:["mode","mode-redact","redaction"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.setActiveToolbar("top","secondary","redaction-toolbar",o)},active:function(e){var t=e.state,n=e.documentId;return no(t.plugins,n,"top","secondary","redaction-toolbar")}},"tabs:overflow-menu":{id:"tabs:overflow-menu",labelKey:"tabs.overflowMenu",icon:"dots",categories:["ui","ui-menu"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();i&&i.toggleMenu("mode-tabs-overflow-menu","tabs:overflow-menu","overflow-tabs-button",o)},active:function(e){var t,n=e.state,o=e.documentId;return((t=n.plugins.ui)===null||t===void 0||(t=t.documents[o])===null||t===void 0?void 0:t.openMenus["mode-tabs-overflow-menu"])!==void 0}},"annotation:add-highlight":{id:"annotation:add-highlight",labelKey:"annotation.highlight",icon:"highlight",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"highlight"))===null||t===void 0?void 0:t.color}},categories:["annotation","annotation-markup","annotation-highlight"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ye))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin(Yt))===null||n===void 0?void 0:n.provides(),c=(o=i.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&a&&c){var d=a?.forDocument(r),u=s?.forDocument(r);if(d&&u){var m=a.getTool("highlight");if(m&&af(m)){var h=m.defaults,g=u.getFormattedSelection(),p=u.getSelectedText();if(g.length>0){var f,v=Xt(g);try{var y=function(){var x=f.value;p.wait(function(w){var C=Ne();d.createAnnotation(x.pageIndex,{id:C,created:new Date,flags:["print"],type:_.HIGHLIGHT,blendMode:Z.Multiply,color:h.color,opacity:h.opacity,pageIndex:x.pageIndex,rect:x.rect,segmentRects:x.segmentRects,custom:{text:w.join(`
`)}}),d.selectAnnotation(x.pageIndex,C)},Oe)};for(v.s();!(f=v.n()).done;)y()}catch(x){v.e(x)}finally{v.f()}u.clear(),d.setActiveTool("highlight"),c.setActiveToolbar("top","secondary","annotation-toolbar",r)}else{var b;((b=d.getActiveTool())===null||b===void 0?void 0:b.id)==="highlight"?d.setActiveTool(null):d.setActiveTool("highlight")}}}}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="highlight"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-underline":{id:"annotation:add-underline",labelKey:"annotation.underline",icon:"underline",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"underline"))===null||t===void 0?void 0:t.color}},categories:["annotation","annotation-markup","annotation-underline"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ye))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin(Yt))===null||n===void 0?void 0:n.provides(),c=(o=i.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&a&&c){var d=a?.forDocument(r),u=s?.forDocument(r);if(d&&u){var m=a.getTool("underline");if(m&&lf(m)){var h=m.defaults,g=u.getFormattedSelection(),p=u.getSelectedText();if(g.length>0){var f,v=Xt(g);try{var y=function(){var x=f.value;p.wait(function(w){var C=Ne();d.createAnnotation(x.pageIndex,{id:C,created:new Date,flags:["print"],type:_.UNDERLINE,color:h.color,opacity:h.opacity,pageIndex:x.pageIndex,rect:x.rect,segmentRects:x.segmentRects,custom:{text:w.join(`
`)}}),d.selectAnnotation(x.pageIndex,C)},Oe)};for(v.s();!(f=v.n()).done;)y()}catch(x){v.e(x)}finally{v.f()}u.clear(),d.setActiveTool("underline"),c.setActiveToolbar("top","secondary","annotation-toolbar",r)}else{var b;((b=d.getActiveTool())===null||b===void 0?void 0:b.id)==="underline"?d.setActiveTool(null):d.setActiveTool("underline")}}}}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="underline"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-strikeout":{id:"annotation:add-strikeout",labelKey:"annotation.strikeout",icon:"strikethrough",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"strikeout"))===null||t===void 0?void 0:t.color}},categories:["annotation","annotation-markup","annotation-strikeout"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ye))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin(Yt))===null||n===void 0?void 0:n.provides(),c=(o=i.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&a&&c){var d=a?.forDocument(r),u=s?.forDocument(r);if(d&&u){var m=a.getTool("strikeout");if(m&&cf(m)){var h=m.defaults,g=u.getFormattedSelection(),p=u.getSelectedText();if(g.length>0){var f,v=Xt(g);try{var y=function(){var x=f.value;p.wait(function(w){var C=Ne();d.createAnnotation(x.pageIndex,{id:C,created:new Date,flags:["print"],type:_.STRIKEOUT,color:h.color,opacity:h.opacity,pageIndex:x.pageIndex,rect:x.rect,segmentRects:x.segmentRects,custom:{text:w.join(`
`)}}),d.selectAnnotation(x.pageIndex,C)},Oe)};for(v.s();!(f=v.n()).done;)y()}catch(x){v.e(x)}finally{v.f()}u.clear(),d.setActiveTool("strikeout"),c.setActiveToolbar("top","secondary","annotation-toolbar",r)}else{var b;((b=d.getActiveTool())===null||b===void 0?void 0:b.id)==="strikeout"?d.setActiveTool(null):d.setActiveTool("strikeout")}}}}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="strikeout"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-squiggly":{id:"annotation:add-squiggly",labelKey:"annotation.squiggly",icon:"squiggly",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"squiggly"))===null||t===void 0?void 0:t.color}},categories:["annotation","annotation-markup","annotation-squiggly"],action:function(e){var t,n,o,i=e.registry,r=e.documentId,a=(t=i.getPlugin(ye))===null||t===void 0?void 0:t.provides(),s=(n=i.getPlugin(Yt))===null||n===void 0?void 0:n.provides(),c=(o=i.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&a&&c){var d=a?.forDocument(r),u=s?.forDocument(r);if(d&&u){var m=a.getTool("squiggly");if(m&&sf(m)){var h=m.defaults,g=u.getFormattedSelection(),p=u.getSelectedText();if(g.length>0){var f,v=Xt(g);try{var y=function(){var x=f.value;p.wait(function(w){var C=Ne();d.createAnnotation(x.pageIndex,{id:C,created:new Date,flags:["print"],type:_.SQUIGGLY,color:h.color,opacity:h.opacity,pageIndex:x.pageIndex,rect:x.rect,segmentRects:x.segmentRects,custom:{text:w.join(`
`)}}),d.selectAnnotation(x.pageIndex,C)},Oe)};for(v.s();!(f=v.n()).done;)y()}catch(x){v.e(x)}finally{v.f()}u.clear(),d.setActiveTool("squiggly"),c.setActiveToolbar("top","secondary","annotation-toolbar",r)}else{var b;((b=d.getActiveTool())===null||b===void 0?void 0:b.id)==="squiggly"?d.setActiveTool(null):d.setActiveTool("squiggly")}}}}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="squiggly"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-ink":{id:"annotation:add-ink",labelKey:"annotation.ink",icon:"pencilMarker",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"ink"))===null||t===void 0?void 0:t.color}},categories:["annotation","annotation-ink"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="ink"?a.setActiveTool(null):a.setActiveTool("ink"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="ink"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-text":{id:"annotation:add-text",labelKey:"annotation.text",icon:"text",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"freeText"))===null||t===void 0?void 0:t.fontColor}},categories:["annotation","annotation-text"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="freeText"?a.setActiveTool(null):a.setActiveTool("freeText"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="freeText"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-stamp":{id:"annotation:add-stamp",labelKey:"annotation.stamp",icon:"photo",categories:["annotation","annotation-stamp"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="stamp"?a.setActiveTool(null):a.setActiveTool("stamp"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="stamp"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-rectangle":{id:"annotation:add-rectangle",labelKey:"annotation.rectangle",icon:"square",iconProps:function(e){var t,n,o=e.state;return{primaryColor:(t=et(o.plugins.annotation,"square"))===null||t===void 0?void 0:t.strokeColor,secondaryColor:(n=et(o.plugins.annotation,"square"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-rectangle"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="square"?a.setActiveTool(null):a.setActiveTool("square"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="square"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-circle":{id:"annotation:add-circle",labelKey:"annotation.circle",icon:"circle",iconProps:function(e){var t,n,o=e.state;return{primaryColor:(t=et(o.plugins.annotation,"circle"))===null||t===void 0?void 0:t.strokeColor,secondaryColor:(n=et(o.plugins.annotation,"circle"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-circle"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="circle"?a.setActiveTool(null):a.setActiveTool("circle"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="circle"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-line":{id:"annotation:add-line",labelKey:"annotation.line",icon:"line",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"line"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-shape","annotation-line"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="line"?a.setActiveTool(null):a.setActiveTool("line"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="line"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-arrow":{id:"annotation:add-arrow",labelKey:"annotation.arrow",icon:"lineArrow",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"line"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-shape","annotation-arrow"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="lineArrow"?a.setActiveTool(null):a.setActiveTool("lineArrow"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="lineArrow"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-polygon":{id:"annotation:add-polygon",labelKey:"annotation.polygon",icon:"polygon",iconProps:function(e){var t,n,o=e.state;return{primaryColor:(t=et(o.plugins.annotation,"polygon"))===null||t===void 0?void 0:t.strokeColor,secondaryColor:(n=et(o.plugins.annotation,"polygon"))===null||n===void 0?void 0:n.color}},categories:["annotation","annotation-shape","annotation-polygon"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="polygon"?a.setActiveTool(null):a.setActiveTool("polygon"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="polygon"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:add-polyline":{id:"annotation:add-polyline",labelKey:"annotation.polyline",icon:"zigzag",iconProps:function(e){var t;return{primaryColor:(t=et(e.state.plugins.annotation,"polyline"))===null||t===void 0?void 0:t.strokeColor}},categories:["annotation","annotation-shape","annotation-polyline"],action:function(e){var t,n,o=e.registry,i=e.documentId,r=(t=o.getPlugin(ye))===null||t===void 0?void 0:t.provides(),a=r?.forDocument(i);a&&(((n=a.getActiveTool())===null||n===void 0?void 0:n.id)==="polyline"?a.setActiveTool(null):a.setActiveTool("polyline"))},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[ye])===null||t===void 0?void 0:t.documents[o];return i?.activeToolId==="polyline"},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:delete-selected":{id:"annotation:delete-selected",labelKey:"annotation.deleteSelected",icon:"trash",categories:["annotation","annotation-delete"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(ye))===null||t===void 0?void 0:t.provides(),r=i?.forDocument(o);if(r){var a=r.getSelectedAnnotation();a&&r.deleteAnnotation(a.object.pageIndex,a.object.id)}},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:overflow-tools":{id:"annotation:overflow-tools",labelKey:"annotation.moreTools",icon:"dots",categories:["annotation","annotation-overflow"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();if(i){var r=i.forDocument(o);r&&r.toggleMenu("annotation-tools-menu","annotation:overflow-tools","overflow-annotation-tools")}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["annotation-tools-menu"]!==void 0},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"annotation:overflow-shapes":{id:"annotation:overflow-shapes",labelKey:"annotation.moreTools",icon:"dots",categories:["annotation","annotation-shape","annotation-overflow"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("ui"))===null||t===void 0?void 0:t.provides();if(i){var r=i.forDocument(o);r&&r.toggleMenu("shapes-tools-menu","annotation:overflow-shapes","overflow-shapes-tools")}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins.ui)===null||t===void 0?void 0:t.documents[o];return i?.openMenus["shapes-tools-menu"]!==void 0},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyAnnotations)}},"redaction:redact-area":{id:"redaction:redact-area",labelKey:"redaction.area",icon:"redactArea",categories:["redaction","redaction-area"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).toggleMarqueeRedact()},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[vn])===null||t===void 0?void 0:t.documents[o];return i?.activeType===Fe.MarqueeRedact},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyContents)}},"redaction:redact-text":{id:"redaction:redact-text",labelKey:"redaction.text",icon:"redact",categories:["redaction","redaction-text"],action:function(e){var t,n,o,i,r=e.registry,a=e.documentId,s=(t=r.getPlugin("redaction"))===null||t===void 0?void 0:t.provides(),c=(n=r.getPlugin(Yt))===null||n===void 0?void 0:n.provides(),d=(o=r.getPlugin("ui"))===null||o===void 0?void 0:o.provides();if(s&&c&&d){var u=s.forDocument(a),m=c?.forDocument(a);((i=m?.getFormattedSelection())!==null&&i!==void 0?i:[]).length>0?(u.queueCurrentSelectionAsPending(),d.setActiveToolbar("top","secondary","redaction-toolbar",a)):u.toggleRedactSelection()}},active:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[vn])===null||t===void 0?void 0:t.documents[o];return i?.activeType===Fe.RedactSelection},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.ModifyContents)}},"redaction:apply-all":{id:"redaction:apply-all",labelKey:"redaction.applyAll",icon:"check",categories:["redaction","redaction-apply"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).commitAllPending()},disabled:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[vn])===null||t===void 0?void 0:t.documents[o];return i?.pendingCount===0||ze(n,o,N.ModifyContents)}},"redaction:clear-all":{id:"redaction:clear-all",labelKey:"redaction.clearAll",icon:"x",categories:["redaction","redaction-clear"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides();i?.forDocument(o).clearPending()},disabled:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[vn])===null||t===void 0?void 0:t.documents[o];return i?.pendingCount===0||ze(n,o,N.ModifyContents)}},"redaction:delete-selected":{id:"redaction:delete-selected",labelKey:"redaction.deleteSelected",icon:"trash",categories:["redaction","redaction-delete"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides(),r=i?.forDocument(o).getSelectedPending();r&&i?.forDocument(o).removePending(r.page,r.id)}},"redaction:commit-selected":{id:"redaction:commit-selected",labelKey:"redaction.commitSelected",icon:"check",categories:["redaction","redaction-commit"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin("redaction"))===null||t===void 0?void 0:t.provides(),r=i?.forDocument(o).getSelectedPending();r&&i?.forDocument(o).commitPending(r.page,r.id)}},"selection:copy-to-clipboard":{id:"selection:copy-to-clipboard",labelKey:"selection.copyToClipboard",icon:"copy",shortcuts:["Ctrl+C","Meta+C"],categories:["selection","selection-copy-to-clipboard"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin("selection"),i=o?.provides().forDocument(n);i?.copyToClipboard()},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.CopyContents)}},"selection:copy":{id:"selection:copy",labelKey:"selection.copy",icon:"copy",categories:["selection","selection-copy"],action:function(e){var t=e.registry,n=e.documentId,o=t.getPlugin("selection"),i=o?.provides().forDocument(n);i?.copyToClipboard(),i?.clear()},disabled:function(e){var t=e.state,n=e.documentId;return ze(t,n,N.CopyContents)}},"history:undo":{id:"history:undo",labelKey:"history.undo",icon:"arrowBackUp",shortcuts:["Ctrl+Z","Meta+Z"],categories:["history","history-undo"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(fn))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).undo()},disabled:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[fn])===null||t===void 0?void 0:t.documents[o];return!(i!=null&&i.global.canUndo)}},"history:redo":{id:"history:redo",labelKey:"history.redo",icon:"arrowForwardUp",shortcuts:["Ctrl+Y","Meta+Shift+Z"],categories:["history","history-redo"],action:function(e){var t,n=e.registry,o=e.documentId,i=(t=n.getPlugin(fn))===null||t===void 0?void 0:t.provides();i&&i.forDocument(o).redo()},disabled:function(e){var t,n=e.state,o=e.documentId,i=(t=n.plugins[fn])===null||t===void 0?void 0:t.documents[o];return!(i!=null&&i.global.canRedo)}}},m0={"zoom.level":function(e){var t,n,o=e.state,i=e.documentId,r=i&&(t=(n=o.plugins[cr])===null||n===void 0||(n=n.documents[i])===null||n===void 0?void 0:n.currentZoomLevel)!==null&&t!==void 0?t:1;return{level:Math.round(100*r)}}},h0={colors:{background:{app:"#f3f4f6",surface:"#ffffff",surfaceAlt:"#f1f3f5",elevated:"#ffffff",overlay:"rgba(0, 0, 0, 0.5)",input:"#ffffff"},foreground:{primary:"#111827",secondary:"#374151",muted:"#6b7280",disabled:"#9ca3af",onAccent:"#ffffff"},border:{default:"#d1d5db",subtle:"#e5e7eb",strong:"#9ca3af"},accent:{primary:"#3b82f6",primaryHover:"#2563eb",primaryActive:"#1d4ed8",primaryLight:"#eff6ff",primaryForeground:"#ffffff"},interactive:{hover:"#f3f4f6",active:"#e5e7eb",selected:"#eff6ff",focus:"#3b82f6",focusRing:"#bfdbfe"},state:{error:"#ef4444",errorLight:"#fef2f2",warning:"#f59e0b",warningLight:"#fffbeb",success:"#22c55e",successLight:"#f0fdf4",info:"#3b82f6",infoLight:"#eff6ff"},tooltip:{background:"#111827",foreground:"#ffffff"},scrollbar:{track:"#f3f4f6",thumb:"#d1d5db",thumbHover:"#9ca3af"}}},g0={colors:{background:{app:"#111827",surface:"#1f2937",surfaceAlt:"#374151",elevated:"#1f2937",overlay:"rgba(0, 0, 0, 0.7)",input:"#374151"},foreground:{primary:"#f9fafb",secondary:"#e5e7eb",muted:"#9ca3af",disabled:"#6b7280",onAccent:"#111827"},border:{default:"#4b5563",subtle:"#374151",strong:"#6b7280"},accent:{primary:"#60a5fa",primaryHover:"#3b82f6",primaryActive:"#2563eb",primaryLight:"#1e3a5f",primaryForeground:"#111827"},interactive:{hover:"#374151",active:"#4b5563",selected:"#1e3a5f",focus:"#60a5fa",focusRing:"#1e40af"},state:{error:"#f87171",errorLight:"#7f1d1d",warning:"#fbbf24",warningLight:"#78350f",success:"#4ade80",successLight:"#14532d",info:"#60a5fa",infoLight:"#1e3a5f"},tooltip:{background:"#f9fafb",foreground:"#111827"},scrollbar:{track:"#1f2937",thumb:"#4b5563",thumbHover:"#6b7280"}}};function fh(e,t){var n=O({},e);for(var o in t){var i=t[o];i&&bo(i)==="object"&&!Array.isArray(i)?n[o]=fh(e[o]||{},i):i!==void 0&&(n[o]=i)}return n}function p0(e,t){return{colors:fh(e.colors,t)}}function Gs(e){return e==="system"?typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}function Vs(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function f0(e){return`:host {
`.concat((function(t){var n=[];return(function o(i,r){for(var a=0,s=Object.entries(i);a<s.length;a++){var c=$(s[a],2),d=c[0],u=c[1];u&&bo(u)==="object"?o(u,"".concat(r,"-").concat(Vs(d))):u!==void 0&&n.push("  --ep".concat(r,"-").concat(Vs(d),": ").concat(u,";"))}})(t.colors,""),n.join(`
`)})(e),`
}`)}function v0(e){var t=e.documentStates,n=e.activeDocumentId,o=e.visibility,i=o===void 0?"multiple":o,r=e.allowOpenFile,a=r===void 0||r,s=Sn().provides,c=te(function(m){s?.setActiveDocument(m)},[s]),d=te(function(m){s?.closeDocument(m)},[s]),u=te(function(){s?.openFileDialog()},[s]);return i==="always"||i==="multiple"&&t.length>1?l("div",{className:"bg-bg-surface-alt flex items-end pr-2 pt-2"},l("div",{className:"flex flex-1 items-end overflow-x-auto pl-4"},t.map(function(m){var h,g,p=n===m.id;return l("div",{key:m.id,onClick:function(){return c(m.id)},role:"tab",tabIndex:0,"aria-selected":p,onKeyDown:function(f){f.key!=="Enter"&&f.key!==" "||(f.preventDefault(),c(m.id))},className:"group relative flex min-w-[120px] max-w-[240px] cursor-pointer items-center gap-2 rounded-t-lg px-4 py-2 text-sm font-medium transition-all ".concat(p?"bg-bg-surface text-fg-primary z-10":"bg-bg-surface-alt text-fg-secondary hover:bg-interactive-hover hover:text-fg-primary")},l("span",{className:"min-w-0 flex-1 truncate"},(h=m.name)!==null&&h!==void 0?h:"Document ".concat(m.id.slice(0,8))),p&&l("button",{onClick:function(f){f.stopPropagation(),d(m.id)},"aria-label":"Close ".concat((g=m.name)!==null&&g!==void 0?g:"document"),className:"hover:bg-interactive-hover flex-shrink-0 cursor-pointer rounded-full p-1 transition-all ".concat(p?"opacity-100":"opacity-0 group-hover:opacity-100")},l(ae,{icon:"x",size:14})))}),a&&l("button",{onClick:u,className:"text-fg-secondary hover:bg-interactive-hover hover:text-fg-primary mb-1.5 ml-1 flex-shrink-0 cursor-pointer rounded p-1.5 transition-colors","aria-label":"Open File",title:"Open File"},l(ae,{icon:"plus",size:14})))):null}function y0(){var e=Sn().provides,t=ke().translate;return l("div",{className:"bg-bg-app flex h-full w-full items-center justify-center"},l("div",{className:"flex max-w-sm flex-col items-center text-center"},l("div",{className:"bg-accent-light mb-6 rounded-full p-5"},l(ae,{icon:"file",size:48,className:"text-accent"})),l("h2",{className:"text-fg-primary mb-2 text-xl font-semibold"},t("emptyState.title")),l("p",{className:"text-fg-secondary mb-6 text-sm leading-relaxed"},t("emptyState.description"),l("br",null),t("emptyState.descriptionMulti")),l("button",{onClick:function(){e?.openFileDialog()},className:"bg-accent hover:bg-accent-hover text-accent-fg inline-flex cursor-pointer items-center gap-2 rounded-md px-5 py-2.5 text-sm font-medium shadow-sm transition-all"},l(ae,{icon:"plus",size:16}),t("emptyState.openButton")),l("p",{className:"text-fg-muted mt-4 text-xs"},t("emptyState.supportedFormats"))))}function b0(e){var t=e.documentState,n=Sn().provides,o=ke().translate,i=$(z(""),2),r=i[0],a=i[1],s=$(z(!1),2),c=s[0],d=s[1];if(!t)return null;var u=t.name,m=t.errorCode,h=t.passwordProvided,g=m===ee.Password,p=g&&!h,f=g&&h;if(!g)return l("div",{className:"bg-bg-app flex h-full items-center justify-center p-8"},l("div",{className:"bg-bg-surface border-border-default flex max-w-sm flex-col items-center rounded-xl border p-6 text-center shadow-lg"},l("div",{className:"bg-state-error-light mb-4 rounded-full p-4"},l(ae,{icon:"alertTriangle",size:28,className:"text-state-error"})),l("h3",{className:"text-fg-primary text-lg font-semibold"},o("documentError.title")),l("p",{className:"text-fg-secondary mt-2 text-sm"},t.error||o("documentError.unknown")),m&&l("p",{className:"text-fg-muted mt-1 text-xs"},o("documentError.errorCode",{params:{code:String(m)}})),l("button",{onClick:function(){return n?.closeDocument(t.id)},className:"bg-accent hover:bg-accent-hover text-accent-fg mt-5 w-full cursor-pointer rounded-md px-4 py-2.5 text-sm font-medium transition-colors"},o("documentError.close"))));var v=(function(){var y=Zs(On().m(function b(){return On().w(function(x){for(;;)switch(x.n){case 0:if(n&&r.trim()){x.n=1;break}return x.a(2);case 1:d(!0),n.retryDocument(t.id,{password:r}).wait(function(){a(""),d(!1)},function(w){console.error("Retry failed:",w),d(!1)});case 2:return x.a(2)}},b)}));return function(){return y.apply(this,arguments)}})();return l("div",{className:"bg-bg-app flex h-full items-center justify-center p-8"},l("div",{className:"bg-bg-surface border-border-default w-full max-w-sm rounded-xl border p-6 shadow-lg"},l("div",{className:"flex flex-col items-center text-center"},l("div",{className:"bg-accent-light mb-4 rounded-full p-4"},l(ae,{icon:"lock",size:28,className:"text-accent"})),l("h3",{className:"text-fg-primary text-lg font-semibold"},o("passwordPrompt.title")),u&&l("p",{className:"text-fg-muted mt-1 text-sm"},u)),l("p",{className:"text-fg-secondary mt-4 text-center text-sm"},p&&o("passwordPrompt.required"),f&&o("passwordPrompt.incorrect")),l("div",{className:"mt-5"},l("label",{className:"text-fg-primary mb-1.5 block text-sm font-medium"},o("passwordPrompt.label")),l("input",{type:"password",value:r,onInput:function(y){return a(y.target.value)},onKeyDown:function(y){return y.key==="Enter"&&!c&&r.trim()&&v()},disabled:c,placeholder:o("passwordPrompt.placeholder"),className:"bg-bg-input border-border-default focus:border-accent focus:ring-accent text-fg-primary placeholder:text-fg-muted block w-full rounded-md border px-3 py-2.5 text-sm focus:outline-none focus:ring-1 disabled:opacity-50",autoFocus:!0})),f&&l("div",{className:"bg-state-error-light border-state-error mt-3 flex items-center gap-2 rounded-md border p-3"},l(ae,{icon:"alertTriangle",size:16,className:"text-state-error flex-shrink-0"}),l("p",{className:"text-state-error text-sm"},o("passwordPrompt.incorrectWarning"))),l("div",{className:"mt-6 flex gap-3"},l("button",{onClick:function(){return n?.closeDocument(t.id)},disabled:c,className:"border-border-default text-fg-secondary hover:bg-interactive-hover flex-1 cursor-pointer rounded-md border px-4 py-2.5 text-sm font-medium transition-colors disabled:opacity-50"},o("passwordPrompt.cancel")),l("button",{onClick:v,disabled:c||!r.trim(),className:"bg-accent hover:bg-accent-hover text-accent-fg flex-1 cursor-pointer rounded-md px-4 py-2.5 text-sm font-medium transition-colors disabled:cursor-not-allowed disabled:opacity-50"},o(c?"passwordPrompt.opening":"passwordPrompt.open")))))}function w0(e){var t=e.documentId,n=e.className,o=Lt("mode:view",t),i=Lt("mode:annotate",t),r=Lt("mode:shapes",t),a=Lt("mode:redact",t),s=Lt("tabs:overflow-menu",t),c=X(function(){return[o,i,r,a].find(function(m){return m?.active})||o},[o,i,r,a]),d=te(function(m){m.preventDefault(),m.stopPropagation(),s&&!s.disabled&&s.execute()},[s]);if(!s||!s.visible)return null;var u=s.active;return l("div",{style:{maxWidth:"100px",width:"100px"},className:n},l(Ge,{className:"bg-bg-surface col-start-1 row-start-1 !w-full appearance-none rounded-md py-1.5 pl-3 pr-2 text-[13px] ".concat(u?"bg-interactive-selected ring-accent border-none shadow ring":"border-border-default outline-border-default hover:bg-interactive-hover hover:ring-accent outline outline-1 -outline-offset-1 hover:ring"," flex flex-row items-center justify-between gap-2"),onClick:d,disabled:s.disabled,style:{height:34}},l("span",{className:"min-w-0 flex-1 truncate text-left ".concat(u?"text-accent":"text-fg-primary")},c?.label),l(ae,{icon:"chevronDown",className:"h-4 w-4 ".concat(u?"text-accent":"text-fg-secondary")})))}function x0(e){var t=e.documentId,n=fm().provides,o=$(z(!1),2),i=o[0],r=o[1],a=$(z(null),2),s=a[0],c=a[1],d=$(z(null),2),u=d[0],m=d[1],h=$(z(null),2),g=h[0],p=h[1],f=K(null),v=K(null),y=ke(t).translate,b=function(){f.current&&(URL.revokeObjectURL(f.current),f.current=null),g&&(URL.revokeObjectURL(g),p(null)),r(!1),c(null),m(null)};return T(function(){if(n)return n.onCaptureArea(function(x){var w=x.pageIndex,C=x.rect,I=x.blob;c({pageIndex:w,rect:C,blob:I});var k=URL.createObjectURL(I);f.current=k,m(k),r(!0)})},[n]),l(Y,null,l(Xo,{open:i,onClose:b,title:y("capture.title"),className:"md:w-[48rem]"},l("div",{className:"space-y-6"},l("div",{className:"flex justify-center"},u&&l("img",{src:u,onLoad:function(){f.current&&(URL.revokeObjectURL(f.current),f.current=null)},alt:"Captured PDF area",style:{maxWidth:"100%",maxHeight:"400px",border:"1px solid #e5e7eb",borderRadius:"4px",display:"block"}})),l("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},l(Ge,{onClick:b,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},y("capture.cancel")),l(Ge,{onClick:function(){if(s&&v.current){var x=URL.createObjectURL(s.blob);p(x),v.current.href=x,v.current.download="pdf-capture-page-".concat(s.pageIndex+1,".png"),v.current.click(),b()}},disabled:!s,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},y("capture.download"))))),l("a",{ref:v,style:{display:"none"},href:"",download:""}))}var vo=[{flag:N.Print,labelKey:"protect.permissions.print"},{flag:N.PrintHighQuality,labelKey:"protect.permissions.printHighQuality"},{flag:N.CopyContents,labelKey:"protect.permissions.copy"},{flag:N.ExtractForAccessibility,labelKey:"protect.permissions.accessibility"},{flag:N.ModifyContents,labelKey:"protect.permissions.modify"},{flag:N.ModifyAnnotations,labelKey:"protect.permissions.annotations"},{flag:N.FillForms,labelKey:"protect.permissions.fillForms"},{flag:N.AssembleDocument,labelKey:"protect.permissions.assemble"}];function vh(e){var t=e.permissions,n=e.translate,o=e.label;return l("div",null,l("label",{className:"text-fg-secondary mb-2 block text-sm font-medium"},o??n("security.viewPermissions.restrictedActions")),l("div",{className:"grid grid-cols-1 gap-1 sm:grid-cols-2"},vo.map(function(i){var r,a=(r=i.flag,(t&r)!==0);return l("div",{key:i.flag,className:"flex items-center rounded-md p-2 ".concat(a?"text-fg-primary":"text-fg-muted")},l(ae,{icon:a?"check":"x",className:"mr-2 h-4 w-4 flex-shrink-0 ".concat(a?"text-state-success":"text-state-error")}),l("span",{className:"text-sm"},n(i.labelKey)))})))}function C0(e){var t,n,o,i=e.documentId,r=e.isOpen,a=e.onClose,s=e.onExited,c=ke(i).translate,d=Sn().provides,u=Xe(i),m=u?.document,h=(t=m?.isEncrypted)!==null&&t!==void 0&&t,g=(n=m?.isOwnerUnlocked)!==null&&n!==void 0&&n,p=(o=m?.permissions)!==null&&o!==void 0?o:0,f=$(z("edit-protection"),2),v=f[0],y=f[1],b=$(z(""),2),x=b[0],w=b[1],C=$(z(!1),2),I=C[0],k=C[1],S=$(z(!1),2),M=S[0],P=S[1],E=$(z(null),2),A=E[0],j=E[1],L=$(z(!1),2),H=L[0],R=L[1],U=$(z(""),2),F=U[0],V=U[1],de=$(z(""),2),oe=de[0],he=de[1],me=$(z(!1),2),G=me[0],le=me[1],we=$(z(!1),2),Ae=we[0],He=we[1],Qe=$(z(""),2),Ee=Qe[0],_e=Qe[1],Be=$(z(""),2),ie=Be[0],ne=Be[1],pe=$(z(!1),2),fe=pe[0],Se=pe[1],$e=z(new Set(vo.map(function(ue){return ue.flag}))),bt=$($e,2),Ut=bt[0],dn=bt[1],_t=$(z(!1),2),Je=_t[0],pt=_t[1],un=$(z(null),2),J=un[0],ft=un[1];T(function(){r&&(w(""),k(!1),P(!1),j(null),R(!1),V(""),he(""),le(!1),He(!1),_e(""),ne(""),Se(!1),dn(new Set(vo.map(function(ue){return ue.flag}))),pt(!1),ft(null),y(h&&!g?"unlock":h&&g?"choose-action":"edit-protection"))},[r,h,g]);var Wt=F===oe,mn=Ee===ie,Zn=!H||F.length>0&&Wt,yh=!Ae||Ee.length>0&&mn,Mr=(H||Ae)&&Zn&&yh&&!Je,Ar=function(){d&&x&&(P(!0),j(null),d.unlockOwnerPermissions(i,x).wait(function(ue){P(!1),ue?y("choose-action"):j(c("security.unlock.invalidPassword"))},function(ue){var Ve,nt;P(!1),j((Ve=(nt=ue.reason)===null||nt===void 0?void 0:nt.message)!==null&&Ve!==void 0?Ve:c("security.unlock.failed"))}))},bh=function(){if(Mr&&d){var ue=0;if(Ae){var Ve,nt=Xt(Ut);try{for(nt.s();!(Ve=nt.n()).done;)ue|=Ve.value}catch(Mn){nt.e(Mn)}finally{nt.f()}}else ue=N.AllowAll;var Bt=H?F:"",Ch=Ae?Ee:H?F:"";pt(!0),ft(null),d.setDocumentEncryption(i,{userPassword:Bt,ownerPassword:Ch,allowedFlags:ue}).wait(function(Mn){pt(!1),Mn?a?.():ft(c("protect.applyFailed"))},function(Mn){var Qo,Jo;pt(!1),ft((Qo=(Jo=Mn.reason)===null||Jo===void 0?void 0:Jo.message)!==null&&Qo!==void 0?Qo:c("protect.applyFailed"))})}},wh=function(){d&&(pt(!0),ft(null),d.removeEncryption(i).wait(function(ue){pt(!1),ue?a?.():ft(c("protect.removeFailed"))},function(ue){var Ve,nt;pt(!1),ft((Ve=(nt=ue.reason)===null||nt===void 0?void 0:nt.message)!==null&&Ve!==void 0?Ve:c("protect.removeFailed"))}))},xh=function(){return l("div",{className:"space-y-6"},l("div",{className:"bg-bg-subtle rounded-lg"},l("label",{className:"flex cursor-pointer items-start"},l("input",{type:"checkbox",checked:H,onChange:function(ue){return R(ue.target.checked)},className:"accent-accent mr-3 mt-0.5"}),l("div",{className:"flex-1"},l("span",{className:"text-fg-primary block font-medium"},c("protect.openPassword.title")),l("span",{className:"text-fg-muted text-sm"},c("protect.openPassword.description")))),H&&l("div",{className:"mt-4 space-y-3 pl-6"},l("div",null,l("label",{className:"text-fg-secondary mb-1 block text-sm"},c("protect.openPassword.label")),l("div",{className:"relative"},l("input",{type:G?"text":"password",value:F,onInput:function(ue){return V(ue.target.value)},placeholder:c("protect.openPassword.placeholder"),className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1"}),l("button",{type:"button",onClick:function(){return le(!G)},className:"text-fg-muted hover:text-fg-secondary absolute right-2 top-1/2 -translate-y-1/2"},l(ae,{icon:G?"eye-off":"eye",className:"h-4 w-4"})))),l("div",null,l("label",{className:"text-fg-secondary mb-1 block text-sm"},c("protect.openPassword.confirm")),l("input",{type:G?"text":"password",value:oe,onInput:function(ue){return he(ue.target.value)},placeholder:c("protect.openPassword.confirmPlaceholder"),className:"border-border-default bg-bg-input text-fg-primary focus:ring-accent w-full rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-1 ".concat(oe&&!Wt?"border-state-error focus:border-state-error":"focus:border-accent")}),oe&&!Wt&&l("p",{className:"text-state-error mt-1 text-xs"},c("protect.passwordMismatch"))))),l("div",{className:"bg-bg-subtle rounded-lg"},l("label",{className:"flex cursor-pointer items-start"},l("input",{type:"checkbox",checked:Ae,onChange:function(ue){return He(ue.target.checked)},className:"accent-accent mr-3 mt-0.5"}),l("div",{className:"flex-1"},l("span",{className:"text-fg-primary block font-medium"},c("protect.permissions.title")),l("span",{className:"text-fg-muted text-sm"},c("protect.permissions.description")))),Ae&&l("div",{className:"mt-4 space-y-4 pl-6"},l("div",{className:"border-border-subtle border-b pb-4"},l("div",null,l("label",{className:"text-fg-secondary mb-1 block text-sm"},c("protect.ownerPassword.label")),l("div",{className:"relative"},l("input",{type:fe?"text":"password",value:Ee,onInput:function(ue){return _e(ue.target.value)},placeholder:c("protect.ownerPassword.placeholder"),className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1"}),l("button",{type:"button",onClick:function(){return Se(!fe)},className:"text-fg-muted hover:text-fg-secondary absolute right-2 top-1/2 -translate-y-1/2"},l(ae,{icon:fe?"eye-off":"eye",className:"h-4 w-4"})))),l("div",{className:"mt-3"},l("label",{className:"text-fg-secondary mb-1 block text-sm"},c("protect.ownerPassword.confirm")),l("input",{type:fe?"text":"password",value:ie,onInput:function(ue){return ne(ue.target.value)},placeholder:c("protect.ownerPassword.confirmPlaceholder"),className:"border-border-default bg-bg-input text-fg-primary focus:ring-accent w-full rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-1 ".concat(ie&&!mn?"border-state-error focus:border-state-error":"focus:border-accent")}),ie&&!mn&&l("p",{className:"text-state-error mt-1 text-xs"},c("protect.passwordMismatch")))),l("div",null,l("label",{className:"text-fg-secondary mb-2 block text-sm font-medium"},c("protect.permissions.allowedActions")),l("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2"},vo.map(function(ue){return l("label",{key:ue.flag,className:"hover:bg-bg-surface flex cursor-pointer items-center rounded-md p-2 transition-colors"},l("input",{type:"checkbox",checked:Ut.has(ue.flag),onChange:function(){return Ve=ue.flag,void dn(function(nt){var Bt=new Set(nt);return Bt.has(Ve)?Bt.delete(Ve):(Bt.add(Ve),Ve===N.PrintHighQuality&&Bt.add(N.Print)),Bt});var Ve},className:"accent-accent mr-2"}),l("span",{className:"text-fg-primary text-sm"},c(ue.labelKey)))}))))),H&&Ae&&l("div",{className:"bg-state-info-light flex items-start space-x-2 rounded-md p-3"},l(ae,{icon:"info",className:"text-accent mt-0.5 h-4 w-4 flex-shrink-0"}),l("p",{className:"text-fg-secondary text-sm"},c("protect.bothPasswordsNote"))),!H&&!Ae&&!J&&l("div",{className:"bg-state-warning-light flex items-start space-x-2 rounded-md p-3"},l(ae,{icon:"alertTriangle",className:"text-state-warning mt-0.5 h-4 w-4 flex-shrink-0"}),l("p",{className:"text-fg-secondary text-sm"},c("protect.noProtectionSelected"))),J&&l("div",{className:"bg-state-error-light flex items-start space-x-2 rounded-md p-3"},l(ae,{icon:"alertTriangle",className:"text-state-error mt-0.5 h-4 w-4 flex-shrink-0"}),l("p",{className:"text-state-error text-sm"},J)),l("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},h&&g&&l(Ge,{onClick:function(){return y("choose-action")},disabled:Je,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},c("common.back")),l(Ge,{onClick:bh,disabled:!Mr,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},Je&&l(wn,{size:"sm"}),l("span",null,c(Je?"protect.applying":"protect.apply")))))};return l(Xo,{open:r!=null&&r,title:(function(){switch(v){case"unlock":return c("protect.encrypted.title");case"choose-action":return c("protect.modifyProtection.title");case"remove-protection":return c("protect.removeProtection.title");default:return c("protect.title")}})(),onClose:a,onExited:s,className:"md:w-[36rem]"},(function(){switch(v){case"unlock":return l("div",{className:"space-y-5"},l("p",{className:"text-fg-secondary text-sm"},c("protect.encrypted.description")),l("div",null,l("label",{className:"text-fg-primary mb-2 block text-sm font-medium"},c("protect.encrypted.enterOwnerPassword")),l("div",{className:"relative"},l("input",{type:I?"text":"password",value:x,onInput:function(ue){return w(ue.target.value)},placeholder:c("protect.ownerPassword.placeholder"),className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1",onKeyDown:function(ue){ue.key==="Enter"&&x&&Ar()}}),l("button",{type:"button",onClick:function(){return k(!I)},className:"text-fg-muted hover:text-fg-secondary absolute right-2 top-1/2 -translate-y-1/2"},l(ae,{icon:I?"eye-off":"eye",className:"h-4 w-4"}))),A&&l("p",{className:"text-state-error mt-2 text-xs"},A)),l(vh,{permissions:p,translate:c}),l("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},l(Ge,{onClick:Ar,disabled:!x||M,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},M&&l(wn,{size:"sm"}),l("span",null,c("protect.encrypted.unlockAndEdit")))));case"choose-action":return l("div",{className:"space-y-5"},l("p",{className:"text-fg-secondary text-sm"},c("protect.modifyProtection.description")),l("div",{className:"space-y-3"},l("button",{type:"button",onClick:function(){return y("edit-protection")},className:"border-border-default hover:border-accent hover:bg-bg-subtle flex w-full items-center rounded-lg border p-4 text-left transition-colors"},l("div",{className:"bg-accent/10 mr-4 rounded-full p-2"},l(ae,{icon:"lock",size:20,className:"text-accent"})),l("div",null,l("span",{className:"text-fg-primary block font-medium"},c("protect.modifyProtection.changeOption")),l("span",{className:"text-fg-muted text-sm"},c("protect.modifyProtection.changeDescription")))),l("button",{type:"button",onClick:function(){return y("remove-protection")},className:"border-border-default hover:border-state-error hover:bg-state-error-light flex w-full items-center rounded-lg border p-4 text-left transition-colors"},l("div",{className:"bg-state-error-light mr-4 rounded-full p-2"},l(ae,{icon:"unlock",size:20,className:"text-state-error"})),l("div",null,l("span",{className:"text-fg-primary block font-medium"},c("protect.modifyProtection.removeOption")),l("span",{className:"text-fg-muted text-sm"},c("protect.modifyProtection.removeDescription"))))),l("div",{className:"border-border-subtle flex justify-end border-t pt-4"},l(Ge,{onClick:a,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm"},c("protect.cancel"))));case"remove-protection":return l("div",{className:"space-y-5"},l("div",{className:"bg-state-warning-light flex items-start space-x-3 rounded-lg p-4"},l(ae,{icon:"alertTriangle",className:"text-state-warning mt-0.5 h-5 w-5 flex-shrink-0"}),l("div",null,l("p",{className:"text-fg-primary font-medium"},c("protect.removeProtection.warning")),l("p",{className:"text-fg-secondary mt-1 text-sm"},c("protect.removeProtection.description")))),J&&l("div",{className:"bg-state-error-light flex items-start space-x-2 rounded-md p-3"},l(ae,{icon:"alertTriangle",className:"text-state-error mt-0.5 h-4 w-4 flex-shrink-0"}),l("p",{className:"text-state-error text-sm"},J)),l("div",{className:"border-border-subtle flex justify-end space-x-3 border-t pt-4"},l(Ge,{onClick:function(){return y("choose-action")},disabled:Je,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},c("common.back")),l(Ge,{onClick:wh,disabled:Je,className:"bg-state-error text-fg-on-accent hover:bg-state-error/90 flex items-center space-x-2 rounded-md border border-transparent px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},Je&&l(wn,{size:"sm"}),l("span",null,c("protect.removeProtection.confirm")))));default:return xh()}})())}function I0(e){var t,n,o,i=e.documentId,r=ke(i).translate,a=cn().provides,s=Xe(i),c=s?.document,d=(t=c?.isEncrypted)!==null&&t!==void 0&&t,u=(n=c?.isOwnerUnlocked)!==null&&n!==void 0&&n,m=(((o=c?.permissions)!==null&&o!==void 0?o:N.AllowAll)&N.AllowAll)!==N.AllowAll,h=d&&!u&&m,g=te(function(){a?.forDocument(i).disableOverlay("unlock-owner-overlay")},[i,a]),p=te(function(){a?.forDocument(i).disableOverlay("unlock-owner-overlay"),a?.forDocument(i).openModal("view-permissions-modal")},[i,a]);return h?l("div",{className:""},l("div",{className:"bg-bg-surface border-border-default flex max-w-sm items-start gap-3 rounded-lg border p-4 shadow-lg"},l("div",{className:"bg-accent/10 flex-shrink-0 rounded-full p-2"},l(ae,{icon:"lock",size:20,className:"text-accent"})),l("div",{className:"min-w-0 flex-1"},l("h3",{className:"text-fg-primary text-sm font-semibold"},r("security.protected.title")),l("p",{className:"text-fg-secondary mt-1 text-xs leading-relaxed"},r("security.protected.description")),l("button",{type:"button",onClick:p,className:"text-accent hover:text-accent-hover mt-2 text-xs font-medium"},r("security.protected.viewPermissions"))),l("button",{type:"button",onClick:g,className:"text-fg-muted hover:text-fg-secondary -mr-1 -mt-1 flex-shrink-0 p-1","aria-label":r("common.close")},l(ae,{icon:"x",size:16})))):null}function k0(e){var t,n,o=e.documentId,i=e.isOpen,r=e.onClose,a=e.onExited,s=ke(o).translate,c=Xe(o),d=Sn().provides,u=$(z(""),2),m=u[0],h=u[1],g=$(z(!1),2),p=g[0],f=g[1],v=$(z(!1),2),y=v[0],b=v[1],x=$(z(null),2),w=x[0],C=x[1],I=c?.document,k=(t=I?.permissions)!==null&&t!==void 0?t:0,S=(n=I?.isOwnerUnlocked)!==null&&n!==void 0&&n;T(function(){i&&(h(""),f(!1),b(!1),C(null))},[i]);var M=function(){d&&m&&(b(!0),C(null),d.unlockOwnerPermissions(o,m).wait(function(P){b(!1),P?h(""):C(s("security.unlock.invalidPassword"))},function(P){var E,A;b(!1),C((E=(A=P.reason)===null||A===void 0?void 0:A.message)!==null&&E!==void 0?E:s("security.unlock.failed"))}))};return l(Xo,{open:i!=null&&i,title:s("security.viewPermissions.title"),onClose:r,onExited:a,className:"md:w-[32rem]"},l("div",{className:"space-y-5"},l("p",{className:"text-fg-secondary text-sm"},s("security.viewPermissions.description")),!S&&l("div",null,l("label",{className:"text-fg-primary mb-2 block text-sm font-medium"},s("security.unlock.label")),l("div",{className:"relative"},l("input",{type:p?"text":"password",value:m,onInput:function(P){return h(P.target.value)},placeholder:s("security.unlock.placeholder"),className:"border-border-default bg-bg-input text-fg-primary focus:border-accent focus:ring-accent w-full rounded-md border px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-1",onKeyDown:function(P){P.key==="Enter"&&m&&M()}}),l("button",{type:"button",onClick:function(){return f(!p)},className:"text-fg-muted hover:text-fg-secondary absolute right-2 top-1/2 -translate-y-1/2"},l(ae,{icon:p?"eye-off":"eye",className:"h-4 w-4"}))),w&&l("p",{className:"text-state-error mt-2 text-xs"},w),l(Ge,{onClick:M,disabled:!m||y,className:"bg-accent text-fg-on-accent hover:!bg-accent-hover mt-3 flex items-center space-x-2 rounded-md px-4 py-2 text-sm disabled:cursor-not-allowed disabled:opacity-50"},y&&l(wn,{size:"sm"}),l("span",null,s("security.unlock.button")))),S&&l("div",{className:"bg-state-success-light flex items-center space-x-2 rounded-md p-3"},l(ae,{icon:"check",className:"text-state-success h-4 w-4 flex-shrink-0"}),l("p",{className:"text-fg-secondary text-sm"},s("security.unlock.success"))),l(vh,{permissions:k,translate:s}),l("div",{className:"border-border-subtle flex justify-end border-t pt-4"},l(Ge,{onClick:r,className:"border-border-default bg-bg-surface text-fg-secondary hover:bg-interactive-hover rounded-md border px-4 py-2 text-sm"},s("common.close")))))}var De={documentManager:{},commands:{commands:u0},i18n:{defaultLocale:"en",locales:[{code:"en",name:"English",translations:{search:{placeholder:"Search",caseSensitive:"Case sensitive",wholeWord:"Whole word",resultsFound:"{count} results found",page:"Page {page}"},zoom:{in:"Zoom In",out:"Zoom Out",fitWidth:"Fit to Width",fitPage:"Fit to Page",marquee:"Marquee Zoom",menu:"Zoom Menu",level:"Zoom Level ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Toggle Pan Mode"},pointer:{toggle:"Toggle Pointer Mode"},capture:{screenshot:"Screenshot",dragTip:"Drag to select area to capture",title:"Screenshot Preview",download:"Download",cancel:"Cancel"},document:{menu:"Document Menu",open:"Open",close:"Close",print:"Print",protect:"Security",export:"Export",fullscreen:"Fullscreen",loading:"Loading document..."},emptyState:{title:"No Documents Open",description:"Open a PDF document to get started.",descriptionMulti:"You can view multiple documents using tabs.",openButton:"Open Document",supportedFormats:"Supported format: PDF"},passwordPrompt:{title:"Password Required",required:"This document is password protected. Please enter the password to open it.",incorrect:"The password you entered was incorrect. Please try again.",incorrectWarning:"Incorrect password. Please check and try again.",label:"Password",placeholder:"Enter document password",open:"Open",opening:"Opening...",cancel:"Cancel",close:"Close"},documentError:{title:"Error loading document",unknown:"An unknown error occurred",errorCode:"Error Code: {code}",close:"Close Document"},panel:{sidebar:"Sidebar",search:"Search",comment:"Comment",thumbnails:"Thumbnails",outline:"Outline",annotationStyle:"Annotation Style"},menu:{viewControls:"View Controls",zoomControls:"Zoom Controls",moreOptions:"More Options"},outline:{title:"Outline",loading:"Loading outline...",noOutline:"No outline available",noBookmarks:"This document doesn't contain bookmarks"},page:{settings:"Page Settings",single:"Single Page",twoOdd:"Two Page (Odd)",twoEven:"Two Page (Even)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Spread Mode",scrollLayout:"Scroll Layout",rotation:"Page Rotation",next:"Next Page",previous:"Previous Page"},rotate:{clockwise:"Rotate Clockwise",counterClockwise:"Rotate Counter-Clockwise"},selection:{copy:"Copy Selection"},mode:{view:"View",annotate:"Annotate",shapes:"Shapes",redact:"Redact"},annotation:{text:"Text",highlight:"Highlight",strikeout:"Strikethrough",underline:"Underline",squiggly:"Squiggly",rectangle:"Rectangle",circle:"Circle",line:"Line",arrow:"Arrow",polygon:"Polygon",polyline:"Polyline",ink:"Ink",stamp:"Stamp",freeText:"Free Text",square:"Square",styles:"{type} Styles",defaults:"{type} Defaults",color:"Color",opacity:"Opacity",blendMode:"Blend mode",strokeWidth:"Stroke width",strokeColor:"Stroke color",borderStyle:"Border style",fillColor:"Fill color",fontSize:"Font size",fontFamily:"Font",textAlign:"Text alignment",verticalAlign:"Vertical alignment",lineEnding:"Line ending",lineStart:"Line start",lineEnd:"Line end",font:"Font",fontColor:"Font color",backgroundColor:"Background color",noStyles:"There are no styles for this annotation.",noStylesStamp:"There are no styles for stamps.",selectAnnotation:"Select an annotation to see styles",deleteSelected:"Delete selected annotation",moreTools:"More Tools"},redaction:{area:"Redact Area",text:"Redact Text",applyAll:"Apply All",clearAll:"Clear All",deleteSelected:"Delete selected redaction",commitSelected:"Apply selected redaction"},history:{undo:"Undo",redo:"Redo"},comments:{page:"Page {page}",commentCount:"{count} comment",commentCountPlural:"{count} comments",addComment:"Add comment...",addReply:"Add reply...",save:"Save",cancel:"Cancel",edit:"Edit",delete:"Delete",showMore:"more",showLess:"less",emptyState:"Add annotations to be able to comment on them."},blendMode:{normal:"Normal",multiply:"Multiply",screen:"Screen",overlay:"Overlay",darken:"Darken",lighten:"Lighten",colorDodge:"Color Dodge",colorBurn:"Color Burn",hardLight:"Hard Light",softLight:"Soft Light",difference:"Difference",exclusion:"Exclusion",hue:"Hue",saturation:"Saturation",color:"Color",luminosity:"Luminosity"},print:{title:"Print Settings",loading:"Preparing document...",pages:"Pages to print",all:"All pages",current:"Current page ({currentPage})",specify:"Specify pages",specifyEG:"e.g., 1-3, 5, 8-10",total:"Total pages in document: {totalPages}",annotation:"Include annotations",printing:"Printing...",print:"Print",cancel:"Cancel"},protect:{title:"Protect Document",cancel:"Cancel",apply:"Apply Protection",applying:"Applying...",applyFailed:"Failed to apply protection. Please try again.",removeFailed:"Failed to remove protection. Please try again.",passwordMismatch:"Passwords do not match",noProtectionSelected:"Select at least one protection option to apply.",bothPasswordsNote:"Users who open with the document password will have restricted permissions. Use the owner password to unlock full access.",openPassword:{title:"Require password to open",description:"Users must enter a password to view this document.",label:"Document Password",placeholder:"Enter password",confirm:"Confirm Password",confirmPlaceholder:"Confirm password"},ownerPassword:{label:"Owner Password",placeholder:"Enter owner password",confirm:"Confirm Owner Password",confirmPlaceholder:"Confirm owner password"},permissions:{title:"Restrict permissions",description:"Limit what users can do with this document.",allowedActions:"Allowed actions",print:"Print",printHighQuality:"Print high quality",copy:"Copy content",accessibility:"Extract for accessibility",modify:"Modify content",annotations:"Add/modify annotations & comments",fillForms:"Fill forms & sign",assemble:"Assemble & extract pages"},encrypted:{title:"Document is Protected",description:"This document is protected by the owner. Enter the owner password to modify security settings.",enterOwnerPassword:"Enter Owner Password to Modify",unlockAndEdit:"Unlock & Edit"},modifyProtection:{title:"Modify Protection",description:"Choose how you want to modify the document protection.",changeOption:"Change Passwords or Permissions",changeDescription:"Update the document password or permission settings.",removeOption:"Remove All Protection",removeDescription:"Remove password protection from this document."},removeProtection:{title:"Remove Protection",warning:"Are you sure you want to remove protection?",description:"This will remove all password protection from the document. Anyone will be able to open and modify it.",confirm:"Remove Protection"}},security:{protected:{title:"This Document is Protected",description:"This file is protected and some features may be disabled. Go to Security in the document menu to view or unlock permissions.",viewPermissions:"View permissions"},viewPermissions:{title:"Document Permissions",description:"This file is restricted by the owner and requires a password to unlock certain actions.",restrictedActions:"Restricted Actions"},unlock:{label:"Enter Owner Password to Unlock File",placeholder:"Enter owner password",button:"Unlock file",invalidPassword:"Invalid password. Please try again.",failed:"Failed to unlock. Please try again.",success:"Owner permissions unlocked! You now have full access."}},common:{close:"Close",back:"Back"}}},{code:"nl",name:"Nederlands",translations:{search:{placeholder:"Zoeken",caseSensitive:"Hoofdlettergevoelig",wholeWord:"Heel woord",resultsFound:"{count} resultaten gevonden",page:"Pagina {page}"},zoom:{in:"Inzoomen",out:"Uitzoomen",fitWidth:"Aanbreedte aanpassen",fitPage:"Aan pagina aanpassen",marquee:"Lijstzoom",menu:"Zoommenu",level:"Zoomniveau ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Pan-modus wisselen"},pointer:{toggle:"Aanwijzermodus wisselen"},capture:{screenshot:"Schermafbeelding",dragTip:"Sleep om een gebied te selecteren om vast te leggen",title:"Screenshot voorbeeld",download:"Downloaden",cancel:"Annuleren"},document:{menu:"Documentmenu",open:"Openen",close:"Sluiten",print:"Afdrukken",protect:"Beveiliging",export:"Exporteren",fullscreen:"Volledig scherm",loading:"Document laden..."},emptyState:{title:"Geen documenten geopend",description:"Open een PDF-document om te beginnen.",descriptionMulti:"U kunt meerdere documenten bekijken met tabs.",openButton:"Document openen",supportedFormats:"Ondersteund formaat: PDF"},passwordPrompt:{title:"Wachtwoord vereist",required:"Dit document is beveiligd met een wachtwoord. Voer het wachtwoord in om te openen.",incorrect:"Het ingevoerde wachtwoord was onjuist. Probeer het opnieuw.",incorrectWarning:"Onjuist wachtwoord. Controleer en probeer opnieuw.",label:"Wachtwoord",placeholder:"Voer documentwachtwoord in",open:"Openen",opening:"Openen...",cancel:"Annuleren",close:"Sluiten"},documentError:{title:"Fout bij laden van document",unknown:"Er is een onbekende fout opgetreden",errorCode:"Foutcode: {code}",close:"Document sluiten"},panel:{sidebar:"Zijbalk",search:"Zoeken",comment:"Opmerking",thumbnails:"Miniaturen",outline:"Overzicht",annotationStyle:"Annotatiestijl"},menu:{viewControls:"Weergave-instellingen",zoomControls:"Zoom-instellingen",moreOptions:"Meer opties"},outline:{title:"Overzicht",loading:"Overzicht laden...",noOutline:"Geen overzicht beschikbaar",noBookmarks:"Dit document bevat geen bladwijzers"},page:{settings:"Pagina-instellingen",single:"Enkele pagina",twoOdd:"Twee pagina's (Oneven)",twoEven:"Twee pagina's (Even)",vertical:"Verticaal",horizontal:"Horizontaal",spreadMode:"Spreidingsmodus",scrollLayout:"Scrollindeling",rotation:"Paginarotatie",next:"Volgende pagina",previous:"Vorige pagina"},rotate:{clockwise:"Met de klok mee draaien",counterClockwise:"Tegen de klok in draaien"},selection:{copy:"Selectie kopiren"},mode:{view:"Weergave",annotate:"Annoteren",shapes:"Vormen",redact:"Redigeren"},annotation:{text:"Tekst",highlight:"Markeren",strikeout:"Doorhalen",underline:"Onderstrepen",squiggly:"Golflijn",rectangle:"Rechthoek",circle:"Cirkel",line:"Lijn",arrow:"Pijl",polygon:"Veelhoek",polyline:"Polylijn",ink:"Inkt",stamp:"Stempel",freeText:"Vrije tekst",square:"Vierkant",styles:"{type} stijlen",defaults:"{type} standaardwaarden",color:"Kleur",opacity:"Dekking",blendMode:"Overvloeimodus",strokeWidth:"Lijndikte",strokeColor:"Lijnkleur",borderStyle:"Randstijl",fillColor:"Vulkleur",fontSize:"Lettergrootte",fontFamily:"Lettertype",textAlign:"Tekstuitlijning",verticalAlign:"Verticale uitlijning",lineEnding:"Lijneinde",lineStart:"Lijnbegin",lineEnd:"Lijneinde",font:"Lettertype",fontColor:"Tekstkleur",backgroundColor:"Achtergrondkleur",noStyles:"Er zijn geen stijlen voor deze annotatie.",noStylesStamp:"Er zijn geen stijlen voor stempels.",selectAnnotation:"Selecteer een annotatie om stijlen te zien",deleteSelected:"Geselecteerde annotatie verwijderen",moreTools:"Meer gereedschappen"},redaction:{area:"Gebied redigeren",text:"Tekst redigeren",applyAll:"Alles toepassen",clearAll:"Alles wissen",deleteSelected:"Geselecteerde redactie verwijderen",commitSelected:"Geselecteerde redactie toepassen"},history:{undo:"Ongedaan maken",redo:"Opnieuw doen"},comments:{page:"Pagina {page}",commentCount:"{count} opmerking",commentCountPlural:"{count} opmerkingen",addComment:"Opmerking toevoegen...",addReply:"Antwoord toevoegen...",save:"Opslaan",cancel:"Annuleren",edit:"Bewerken",delete:"Verwijderen",showMore:"meer",showLess:"minder",emptyState:"Voeg annotaties toe om erop te kunnen reageren."},blendMode:{normal:"Normaal",multiply:"Vermenigvuldigen",screen:"Bleken",overlay:"Bedekken",darken:"Donkerder",lighten:"Lichter",colorDodge:"Kleur tegenhouden",colorBurn:"Kleur doordrukken",hardLight:"Hard licht",softLight:"Zacht licht",difference:"Verschil",exclusion:"Uitsluiting",hue:"Kleurtoon",saturation:"Verzadiging",color:"Kleur",luminosity:"Helderheid"},print:{title:"Afdrukinstellingen",loading:"Document voorbereiden...",pages:"Af te drukken pagina's",all:"Alle pagina's",current:"Huidige pagina ({currentPage})",specify:"Pagina's",specifyEG:"bijv. 1-3, 5, 8-10",total:"Totaal aantal pagina's in document: {totalPages}",annotation:"Inclusief annotaties",printing:"Afdrukken...",print:"Afdrukken",cancel:"Annuleren"},protect:{title:"Document beveiligen",cancel:"Annuleren",apply:"Beveiliging toepassen",applying:"Bezig met toepassen...",applyFailed:"Beveiliging kon niet worden toegepast. Probeer het opnieuw.",removeFailed:"Beveiliging kon niet worden verwijderd. Probeer het opnieuw.",passwordMismatch:"Wachtwoorden komen niet overeen",noProtectionSelected:"Selecteer minimaal n beveiligingsoptie.",bothPasswordsNote:"Gebruikers die openen met het documentwachtwoord hebben beperkte rechten. Gebruik het eigenaarswachtwoord voor volledige toegang.",openPassword:{title:"Wachtwoord vereist om te openen",description:"Gebruikers moeten een wachtwoord invoeren om dit document te bekijken.",label:"Documentwachtwoord",placeholder:"Wachtwoord invoeren",confirm:"Wachtwoord bevestigen",confirmPlaceholder:"Wachtwoord bevestigen"},ownerPassword:{label:"Eigenaarswachtwoord",placeholder:"Eigenaarswachtwoord invoeren",confirm:"Eigenaarswachtwoord bevestigen",confirmPlaceholder:"Eigenaarswachtwoord bevestigen"},permissions:{title:"Rechten beperken",description:"Beperk wat gebruikers met dit document kunnen doen.",allowedActions:"Toegestane acties",print:"Afdrukken",printHighQuality:"Hoge kwaliteit afdrukken",copy:"Inhoud kopiren",accessibility:"Extraheren voor toegankelijkheid",modify:"Inhoud wijzigen",annotations:"Annotaties & opmerkingen toevoegen/wijzigen",fillForms:"Formulieren invullen & ondertekenen",assemble:"Document samenstellen & pagina's extraheren"},encrypted:{title:"Document is beveiligd",description:"Dit document is beveiligd door de eigenaar. Voer het eigenaarswachtwoord in om beveiligingsinstellingen te wijzigen.",enterOwnerPassword:"Voer eigenaarswachtwoord in om te wijzigen",unlockAndEdit:"Ontgrendelen & Bewerken"},modifyProtection:{title:"Beveiliging wijzigen",description:"Kies hoe u de documentbeveiliging wilt wijzigen.",changeOption:"Wachtwoorden of rechten wijzigen",changeDescription:"Update het documentwachtwoord of rechtinstellingen.",removeOption:"Alle beveiliging verwijderen",removeDescription:"Verwijder wachtwoordbeveiliging van dit document."},removeProtection:{title:"Beveiliging verwijderen",warning:"Weet u zeker dat u de beveiliging wilt verwijderen?",description:"Dit verwijdert alle wachtwoordbeveiliging van het document. Iedereen kan het openen en wijzigen.",confirm:"Beveiliging verwijderen"}},security:{protected:{title:"Dit document is beveiligd",description:"Dit bestand is beveiligd en sommige functies zijn mogelijk uitgeschakeld. Ga naar Beveiliging in het documentmenu om rechten te bekijken of te ontgrendelen.",viewPermissions:"Rechten bekijken"},viewPermissions:{title:"Documentrechten",description:"Dit bestand is beperkt door de eigenaar en vereist een wachtwoord om bepaalde acties te ontgrendelen.",restrictedActions:"Beperkte acties"},unlock:{label:"Voer eigenaarswachtwoord in om te ontgrendelen",placeholder:"Eigenaarswachtwoord invoeren",button:"Bestand ontgrendelen",invalidPassword:"Ongeldig wachtwoord. Probeer het opnieuw.",failed:"Ontgrendelen mislukt. Probeer het opnieuw.",success:"Eigenaarrechten ontgrendeld! U heeft nu volledige toegang."}},common:{close:"Sluiten",back:"Terug"}}},{code:"de",name:"Deutsch",translations:{search:{placeholder:"Suchen",caseSensitive:"Gro-/Kleinschreibung",wholeWord:"Ganzes Wort",resultsFound:"{count} Ergebnisse gefunden",page:"Seite {page}"},zoom:{in:"Vergrern",out:"Verkleinern",fitWidth:"An Breite anpassen",fitPage:"An Seite anpassen",marquee:"Laufrahmen-Zoom",menu:"Zoom-Men",level:"Zoomstufe ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Verschieben-Modus umschalten"},pointer:{toggle:"Zeiger-Modus umschalten"},capture:{screenshot:"Screenshot",dragTip:"Ziehen Sie, um den Bereich zum Erfassen auszuwhlen",title:"Screenshot-Vorschau",download:"Herunterladen",cancel:"Abbrechen"},document:{menu:"Dokument-Men",open:"ffnen",close:"Schlieen",print:"Drucken",protect:"Sicherheit",export:"Exportieren",fullscreen:"Vollbild",loading:"Dokument wird geladen..."},emptyState:{title:"Keine Dokumente geffnet",description:"ffnen Sie ein PDF-Dokument, um zu beginnen.",descriptionMulti:"Sie knnen mehrere Dokumente mit Tabs anzeigen.",openButton:"Dokument ffnen",supportedFormats:"Untersttztes Format: PDF"},passwordPrompt:{title:"Passwort erforderlich",required:"Dieses Dokument ist passwortgeschtzt. Bitte geben Sie das Passwort ein.",incorrect:"Das eingegebene Passwort war falsch. Bitte versuchen Sie es erneut.",incorrectWarning:"Falsches Passwort. Bitte berprfen und erneut versuchen.",label:"Passwort",placeholder:"Dokumentpasswort eingeben",open:"ffnen",opening:"ffnen...",cancel:"Abbrechen",close:"Schlieen"},documentError:{title:"Fehler beim Laden des Dokuments",unknown:"Ein unbekannter Fehler ist aufgetreten",errorCode:"Fehlercode: {code}",close:"Dokument schlieen"},panel:{sidebar:"Seitenleiste",search:"Suchen",comment:"Kommentar",thumbnails:"Miniaturansichten",outline:"Gliederung",annotationStyle:"Anmerkungsstil"},menu:{viewControls:"Ansichtseinstellungen",zoomControls:"Zoom-Einstellungen",moreOptions:"Weitere Optionen"},outline:{title:"Gliederung",loading:"Gliederung wird geladen...",noOutline:"Keine Gliederung verfgbar",noBookmarks:"Dieses Dokument enthlt keine Lesezeichen"},page:{settings:"Seiteneinstellungen",single:"Einzelseite",twoOdd:"Zwei Seiten (Ungerade)",twoEven:"Zwei Seiten (Gerade)",vertical:"Vertikal",horizontal:"Horizontal",spreadMode:"Doppelseiten-Modus",scrollLayout:"Scroll-Layout",rotation:"Seitendrehung",next:"Nchste Seite",previous:"Vorherige Seite"},rotate:{clockwise:"Im Uhrzeigersinn drehen",counterClockwise:"Gegen den Uhrzeigersinn drehen"},selection:{copy:"Auswahl kopieren"},mode:{view:"Ansicht",annotate:"Annotieren",shapes:"Formen",redact:"Schwrzen"},annotation:{text:"Text",highlight:"Markieren",strikeout:"Durchstreichen",underline:"Unterstreichen",squiggly:"Wellenlinie",rectangle:"Rechteck",circle:"Kreis",line:"Linie",arrow:"Pfeil",polygon:"Polygon",polyline:"Polylinie",ink:"Freihand",stamp:"Stempel",freeText:"Freitext",square:"Quadrat",styles:"{type}-Stile",defaults:"{type}-Standardwerte",color:"Farbe",opacity:"Deckkraft",blendMode:"Mischmodus",strokeWidth:"Strichstrke",strokeColor:"Strichfarbe",borderStyle:"Rahmenstil",fillColor:"Fllfarbe",fontSize:"Schriftgre",fontFamily:"Schriftart",textAlign:"Textausrichtung",verticalAlign:"Vertikale Ausrichtung",lineEnding:"Linienende",lineStart:"Linienanfang",lineEnd:"Linienende",font:"Schriftart",fontColor:"Schriftfarbe",backgroundColor:"Hintergrundfarbe",noStyles:"Fr diese Anmerkung gibt es keine Stile.",noStylesStamp:"Fr Stempel gibt es keine Stile.",selectAnnotation:"Whlen Sie eine Anmerkung aus, um Stile anzuzeigen",deleteSelected:"Ausgewhlte Anmerkung lschen",moreTools:"Weitere Werkzeuge"},redaction:{area:"Bereich schwrzen",text:"Text schwrzen",applyAll:"Alle anwenden",clearAll:"Alle lschen",deleteSelected:"Ausgewhlte Schwrzung lschen",commitSelected:"Ausgewhlte Schwrzung anwenden"},history:{undo:"Rckgngig",redo:"Wiederholen"},comments:{page:"Seite {page}",commentCount:"{count} Kommentar",commentCountPlural:"{count} Kommentare",addComment:"Kommentar hinzufgen...",addReply:"Antwort hinzufgen...",save:"Speichern",cancel:"Abbrechen",edit:"Bearbeiten",delete:"Lschen",showMore:"mehr",showLess:"weniger",emptyState:"Fgen Sie Anmerkungen hinzu, um sie kommentieren zu knnen."},blendMode:{normal:"Normal",multiply:"Multiplizieren",screen:"Negativ multiplizieren",overlay:"Ineinanderkopieren",darken:"Abdunkeln",lighten:"Aufhellen",colorDodge:"Farbig abwedeln",colorBurn:"Farbig nachbelichten",hardLight:"Hartes Licht",softLight:"Weiches Licht",difference:"Differenz",exclusion:"Ausschluss",hue:"Farbton",saturation:"Sttigung",color:"Farbe",luminosity:"Luminanz"},print:{title:"Druckeinstellungen",loading:"Dokument wird vorbereitet...",pages:"Zu druckende Seiten",all:"Alle Seiten",current:"Aktuelle Seite ({currentPage})",specify:"Seiten angeben",specifyEG:"z.B. 1-3, 5, 8-10",total:"Gesamtseitenzahl im Dokument: {totalPages}",annotation:"Anmerkungen einbeziehen",printing:"Drucken...",print:"Drucken",cancel:"Abbrechen"},protect:{title:"Dokument schtzen",cancel:"Abbrechen",apply:"Schutz anwenden",applying:"Wird angewendet...",applyFailed:"Schutz konnte nicht angewendet werden. Bitte versuchen Sie es erneut.",removeFailed:"Schutz konnte nicht entfernt werden. Bitte versuchen Sie es erneut.",passwordMismatch:"Passwrter stimmen nicht berein",noProtectionSelected:"Whlen Sie mindestens eine Schutzoption aus.",bothPasswordsNote:"Benutzer, die das Dokumentpasswort eingeben, haben eingeschrnkte Berechtigungen. Verwenden Sie das Eigentmerpasswort fr vollen Zugriff.",openPassword:{title:"Passwort zum ffnen erforderlich",description:"Benutzer mssen ein Passwort eingeben, um dieses Dokument anzuzeigen.",label:"Dokumentpasswort",placeholder:"Passwort eingeben",confirm:"Passwort besttigen",confirmPlaceholder:"Passwort besttigen"},ownerPassword:{label:"Eigentmerpasswort",placeholder:"Eigentmerpasswort eingeben",confirm:"Eigentmerpasswort besttigen",confirmPlaceholder:"Eigentmerpasswort besttigen"},permissions:{title:"Berechtigungen einschrnken",description:"Beschrnken Sie, was Benutzer mit diesem Dokument tun knnen.",allowedActions:"Erlaubte Aktionen",print:"Drucken",printHighQuality:"In hoher Qualitt drucken",copy:"Inhalt kopieren",accessibility:"Fr Barrierefreiheit extrahieren",modify:"Inhalt ndern",annotations:"Anmerkungen & Kommentare hinzufgen/ndern",fillForms:"Formulare ausfllen & unterschreiben",assemble:"Dokument zusammenstellen & Seiten extrahieren"},encrypted:{title:"Dokument ist geschtzt",description:"Dieses Dokument ist vom Eigentmer geschtzt. Geben Sie das Eigentmerpasswort ein, um die Sicherheitseinstellungen zu ndern.",enterOwnerPassword:"Eigentmerpasswort eingeben zum ndern",unlockAndEdit:"Entsperren & Bearbeiten"},modifyProtection:{title:"Schutz ndern",description:"Whlen Sie, wie Sie den Dokumentschutz ndern mchten.",changeOption:"Passwrter oder Berechtigungen ndern",changeDescription:"Aktualisieren Sie das Dokumentpasswort oder die Berechtigungseinstellungen.",removeOption:"Gesamten Schutz entfernen",removeDescription:"Passwortschutz von diesem Dokument entfernen."},removeProtection:{title:"Schutz entfernen",warning:"Sind Sie sicher, dass Sie den Schutz entfernen mchten?",description:"Dadurch wird der gesamte Passwortschutz vom Dokument entfernt. Jeder kann es ffnen und bearbeiten.",confirm:"Schutz entfernen"}},security:{protected:{title:"Dieses Dokument ist geschtzt",description:"Diese Datei ist geschtzt und einige Funktionen sind mglicherweise deaktiviert. Gehen Sie zu Sicherheit im Dokumentmen, um Berechtigungen anzuzeigen oder freizuschalten.",viewPermissions:"Berechtigungen anzeigen"},viewPermissions:{title:"Dokumentberechtigungen",description:"Diese Datei ist vom Eigentmer eingeschrnkt und erfordert ein Passwort, um bestimmte Aktionen freizuschalten.",restrictedActions:"Eingeschrnkte Aktionen"},unlock:{label:"Eigentmerpasswort eingeben zum Entsperren",placeholder:"Eigentmerpasswort eingeben",button:"Datei entsperren",invalidPassword:"Ungltiges Passwort. Bitte versuchen Sie es erneut.",failed:"Entsperren fehlgeschlagen. Bitte versuchen Sie es erneut.",success:"Eigentmerberechtigungen entsperrt! Sie haben jetzt vollen Zugriff."}},common:{close:"Schlieen",back:"Zurck"}}},{code:"fr",name:"Franais",translations:{search:{placeholder:"Rechercher",caseSensitive:"Respecter la casse",wholeWord:"Mot entier",resultsFound:"{count} rsultats trouvs",page:"Page {page}"},zoom:{in:"Zoom avant",out:"Zoom arrire",fitWidth:"Ajuster  la largeur",fitPage:"Ajuster  la page",marquee:"Zoom de slection",menu:"Menu Zoom",level:"Niveau de zoom ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Basculer le mode dplacement"},pointer:{toggle:"Basculer le mode pointeur"},capture:{screenshot:"Capture d'cran",dragTip:"Faites glisser pour slectionner la zone  capturer",title:"Aperu de la capture",download:"Tlcharger",cancel:"Annuler"},document:{menu:"Menu Document",open:"Ouvrir",close:"Fermer",print:"Imprimer",protect:"Scurit",export:"Exporter",fullscreen:"Plein cran",loading:"Chargement du document..."},emptyState:{title:"Aucun document ouvert",description:"Ouvrez un document PDF pour commencer.",descriptionMulti:"Vous pouvez afficher plusieurs documents avec des onglets.",openButton:"Ouvrir un document",supportedFormats:"Format pris en charge : PDF"},passwordPrompt:{title:"Mot de passe requis",required:"Ce document est protg par mot de passe. Veuillez entrer le mot de passe.",incorrect:"Le mot de passe saisi est incorrect. Veuillez ressayer.",incorrectWarning:"Mot de passe incorrect. Veuillez vrifier et ressayer.",label:"Mot de passe",placeholder:"Entrer le mot de passe du document",open:"Ouvrir",opening:"Ouverture...",cancel:"Annuler",close:"Fermer"},documentError:{title:"Erreur lors du chargement du document",unknown:"Une erreur inconnue est survenue",errorCode:"Code erreur : {code}",close:"Fermer le document"},panel:{sidebar:"Barre latrale",search:"Rechercher",comment:"Commentaire",thumbnails:"Miniatures",outline:"Plan",annotationStyle:"Style d'annotation"},menu:{viewControls:"Contrles d'affichage",zoomControls:"Contrles de zoom",moreOptions:"Plus d'options"},outline:{title:"Plan",loading:"Chargement du plan...",noOutline:"Aucun plan disponible",noBookmarks:"Ce document ne contient pas de signets"},page:{settings:"Paramtres de page",single:"Page unique",twoOdd:"Deux pages (Impair)",twoEven:"Deux pages (Pair)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Mode double page",scrollLayout:"Disposition de dfilement",rotation:"Rotation de page",next:"Page suivante",previous:"Page prcdente"},rotate:{clockwise:"Tourner dans le sens horaire",counterClockwise:"Tourner dans le sens antihoraire"},selection:{copy:"Copier la slection"},mode:{view:"Affichage",annotate:"Annoter",shapes:"Formes",redact:"Caviarder"},annotation:{text:"Texte",highlight:"Surligner",strikeout:"Barrer",underline:"Souligner",squiggly:"Ondul",rectangle:"Rectangle",circle:"Cercle",line:"Ligne",arrow:"Flche",polygon:"Polygone",polyline:"Polyligne",ink:"Encre",stamp:"Tampon",freeText:"Texte libre",square:"Carr",styles:"Styles de {type}",defaults:"Valeurs par dfaut de {type}",color:"Couleur",opacity:"Opacit",blendMode:"Mode de fusion",strokeWidth:"paisseur du trait",strokeColor:"Couleur du trait",borderStyle:"Style de bordure",fillColor:"Couleur de remplissage",fontSize:"Taille de police",fontFamily:"Police",textAlign:"Alignement du texte",verticalAlign:"Alignement vertical",lineEnding:"Fin de ligne",lineStart:"Dbut de ligne",lineEnd:"Fin de ligne",font:"Police",fontColor:"Couleur du texte",backgroundColor:"Couleur de fond",noStyles:"Il n'y a pas de styles pour cette annotation.",noStylesStamp:"Il n'y a pas de styles pour les tampons.",selectAnnotation:"Slectionnez une annotation pour voir les styles",deleteSelected:"Supprimer l'annotation slectionne",moreTools:"Plus d'outils"},redaction:{area:"Caviarder la zone",text:"Caviarder le texte",applyAll:"Tout appliquer",clearAll:"Tout effacer",deleteSelected:"Supprimer la rdaction slectionne",commitSelected:"Appliquer la rdaction slectionne"},history:{undo:"Annuler",redo:"Refaire"},comments:{page:"Page {page}",commentCount:"{count} commentaire",commentCountPlural:"{count} commentaires",addComment:"Ajouter un commentaire...",addReply:"Ajouter une rponse...",save:"Enregistrer",cancel:"Annuler",edit:"Modifier",delete:"Supprimer",showMore:"plus",showLess:"moins",emptyState:"Ajoutez des annotations pour pouvoir les commenter."},blendMode:{normal:"Normal",multiply:"Produit",screen:"Superposition",overlay:"Incrustation",darken:"Obscurcir",lighten:"claircir",colorDodge:"Densit couleur -",colorBurn:"Densit couleur +",hardLight:"Lumire crue",softLight:"Lumire tamise",difference:"Diffrence",exclusion:"Exclusion",hue:"Teinte",saturation:"Saturation",color:"Couleur",luminosity:"Luminosit"},print:{title:"Paramtres d'impression",loading:"Prparation du document...",pages:"Pages  imprimer",all:"Toutes les pages",current:"Page actuelle ({currentPage})",specify:"Spcifier les pages",specifyEG:"ex : 1-3, 5, 8-10",total:"Nombre total de pages dans le document : {totalPages}",annotation:"Inclure les annotations",printing:"Impression...",print:"Imprimer",cancel:"Annuler"},protect:{title:"Protger le document",cancel:"Annuler",apply:"Appliquer la protection",applying:"Application en cours...",applyFailed:"chec de l'application de la protection. Veuillez ressayer.",removeFailed:"chec de la suppression de la protection. Veuillez ressayer.",passwordMismatch:"Les mots de passe ne correspondent pas",noProtectionSelected:"Slectionnez au moins une option de protection.",bothPasswordsNote:"Les utilisateurs qui ouvrent avec le mot de passe du document auront des permissions limites. Utilisez le mot de passe propritaire pour un accs complet.",openPassword:{title:"Mot de passe requis pour l'ouverture",description:"Les utilisateurs doivent entrer un mot de passe pour voir ce document.",label:"Mot de passe du document",placeholder:"Entrer le mot de passe",confirm:"Confirmer le mot de passe",confirmPlaceholder:"Confirmer le mot de passe"},ownerPassword:{label:"Mot de passe propritaire",placeholder:"Entrer le mot de passe propritaire",confirm:"Confirmer le mot de passe propritaire",confirmPlaceholder:"Confirmer le mot de passe propritaire"},permissions:{title:"Restreindre les permissions",description:"Limitez ce que les utilisateurs peuvent faire avec ce document.",allowedActions:"Actions autorises",print:"Imprimer",printHighQuality:"Imprimer en haute qualit",copy:"Copier le contenu",accessibility:"Extraire pour l'accessibilit",modify:"Modifier le contenu",annotations:"Ajouter/modifier les annotations et commentaires",fillForms:"Remplir les formulaires et signer",assemble:"Assembler le document et extraire les pages"},encrypted:{title:"Document protg",description:"Ce document est protg par le propritaire. Entrez le mot de passe propritaire pour modifier les paramtres de scurit.",enterOwnerPassword:"Entrer le mot de passe propritaire pour modifier",unlockAndEdit:"Dverrouiller & Modifier"},modifyProtection:{title:"Modifier la protection",description:"Choisissez comment vous voulez modifier la protection du document.",changeOption:"Modifier les mots de passe ou les permissions",changeDescription:"Mettre  jour le mot de passe du document ou les paramtres de permissions.",removeOption:"Supprimer toute la protection",removeDescription:"Supprimer la protection par mot de passe de ce document."},removeProtection:{title:"Supprimer la protection",warning:"tes-vous sr de vouloir supprimer la protection ?",description:"Cela supprimera toute la protection par mot de passe du document. Tout le monde pourra l'ouvrir et le modifier.",confirm:"Supprimer la protection"}},security:{protected:{title:"Ce document est protg",description:"Ce fichier est protg et certaines fonctionnalits peuvent tre dsactives. Allez dans Scurit dans le menu document pour afficher ou dverrouiller les permissions.",viewPermissions:"Voir les permissions"},viewPermissions:{title:"Permissions du document",description:"Ce fichier est restreint par le propritaire et ncessite un mot de passe pour dbloquer certaines actions.",restrictedActions:"Actions restreintes"},unlock:{label:"Entrer le mot de passe propritaire pour dverrouiller",placeholder:"Entrer le mot de passe propritaire",button:"Dverrouiller le fichier",invalidPassword:"Mot de passe invalide. Veuillez ressayer.",failed:"chec du dverrouillage. Veuillez ressayer.",success:"Permissions propritaire dverrouilles ! Vous avez maintenant un accs complet."}},common:{close:"Fermer",back:"Retour"}}},{code:"es",name:"Espaol",translations:{search:{placeholder:"Buscar",caseSensitive:"Distinguir maysculas",wholeWord:"Palabra completa",resultsFound:"{count} resultados encontrados",page:"Pgina {page}"},zoom:{in:"Acercar",out:"Alejar",fitWidth:"Ajustar al ancho",fitPage:"Ajustar a la pgina",marquee:"Zoom de seleccin",menu:"Men de zoom",level:"Nivel de zoom ({level}%)",dragTip:"Drag to select area to zoom"},pan:{toggle:"Alternar modo desplazamiento"},pointer:{toggle:"Alternar modo puntero"},capture:{screenshot:"Captura de pantalla",dragTip:"Arrastre para seleccionar el rea a capturar",title:"Vista previa de la captura",download:"Descargar",cancel:"Cancelar"},document:{menu:"Men del documento",open:"Abrir",close:"Cerrar",print:"Imprimir",protect:"Seguridad",export:"Exportar",fullscreen:"Pantalla completa",loading:"Cargando documento..."},emptyState:{title:"No hay documentos abiertos",description:"Abra un documento PDF para comenzar.",descriptionMulti:"Puede ver varios documentos usando pestaas.",openButton:"Abrir documento",supportedFormats:"Formato compatible: PDF"},passwordPrompt:{title:"Contrasea requerida",required:"Este documento est protegido con contrasea. Por favor, ingrese la contrasea para abrirlo.",incorrect:"La contrasea ingresada es incorrecta. Por favor, intntelo de nuevo.",incorrectWarning:"Contrasea incorrecta. Por favor, verifique e intntelo de nuevo.",label:"Contrasea",placeholder:"Ingrese la contrasea del documento",open:"Abrir",opening:"Abriendo...",cancel:"Cancelar",close:"Cerrar"},documentError:{title:"Error al cargar el documento",unknown:"Ha ocurrido un error desconocido",errorCode:"Cdigo de error: {code}",close:"Cerrar documento"},panel:{sidebar:"Barra lateral",search:"Buscar",comment:"Comentario",thumbnails:"Miniaturas",outline:"Esquema",annotationStyle:"Estilo de anotacin"},menu:{viewControls:"Controles de vista",zoomControls:"Controles de zoom",moreOptions:"Ms opciones"},outline:{title:"Esquema",loading:"Cargando esquema...",noOutline:"No hay esquema disponible",noBookmarks:"Este documento no contiene marcadores"},page:{settings:"Configuracin de pgina",single:"Pgina nica",twoOdd:"Dos pginas (Impar)",twoEven:"Dos pginas (Par)",vertical:"Vertical",horizontal:"Horizontal",spreadMode:"Modo de doble pgina",scrollLayout:"Diseo de desplazamiento",rotation:"Rotacin de pgina",next:"Pgina siguiente",previous:"Pgina anterior"},rotate:{clockwise:"Rotar en sentido horario",counterClockwise:"Rotar en sentido antihorario"},selection:{copy:"Copiar seleccin"},mode:{view:"Ver",annotate:"Anotar",shapes:"Formas",redact:"Redactar"},annotation:{text:"Texto",highlight:"Resaltar",strikeout:"Tachar",underline:"Subrayar",squiggly:"Ondulado",rectangle:"Rectngulo",circle:"Crculo",line:"Lnea",arrow:"Flecha",polygon:"Polgono",polyline:"Polilnea",ink:"Tinta",stamp:"Sello",freeText:"Texto libre",square:"Cuadrado",styles:"Estilos de {type}",defaults:"Valores predeterminados de {type}",color:"Color",opacity:"Opacidad",blendMode:"Modo de fusin",strokeWidth:"Grosor del trazo",strokeColor:"Color del trazo",borderStyle:"Estilo del borde",fillColor:"Color de relleno",fontSize:"Tamao de fuente",fontFamily:"Fuente",textAlign:"Alineacin del texto",verticalAlign:"Alineacin vertical",lineEnding:"Final de lnea",lineStart:"Inicio de lnea",lineEnd:"Final de lnea",font:"Fuente",fontColor:"Color de fuente",backgroundColor:"Color de fondo",noStyles:"No hay estilos para esta anotacin.",noStylesStamp:"No hay estilos para los sellos.",selectAnnotation:"Seleccione una anotacin para ver los estilos",deleteSelected:"Eliminar anotacin seleccionada",moreTools:"Ms herramientas"},redaction:{area:"Redactar rea",text:"Redactar texto",applyAll:"Aplicar todo",clearAll:"Borrar todo",deleteSelected:"Eliminar redaccin seleccionada",commitSelected:"Aplicar redaccin seleccionada"},history:{undo:"Deshacer",redo:"Rehacer"},comments:{page:"Pgina {page}",commentCount:"{count} comentario",commentCountPlural:"{count} comentarios",addComment:"Aadir comentario...",addReply:"Aadir respuesta...",save:"Guardar",cancel:"Cancelar",edit:"Editar",delete:"Eliminar",showMore:"ms",showLess:"menos",emptyState:"Aada anotaciones para poder comentarlas."},blendMode:{normal:"Normal",multiply:"Multiplicar",screen:"Trama",overlay:"Superponer",darken:"Oscurecer",lighten:"Aclarar",colorDodge:"Sobreexponer color",colorBurn:"Subexponer color",hardLight:"Luz fuerte",softLight:"Luz suave",difference:"Diferencia",exclusion:"Exclusin",hue:"Tono",saturation:"Saturacin",color:"Color",luminosity:"Luminosidad"},print:{title:"Configuracin de impresin",loading:"Preparando documento...",pages:"Pginas a imprimir",all:"Todas las pginas",current:"Pgina actual ({currentPage})",specify:"Especificar pginas",specifyEG:"ej: 1-3, 5, 8-10",total:"Total de pginas en el documento: {totalPages}",annotation:"Incluir anotaciones",printing:"Imprimiendo...",print:"Imprimir",cancel:"Cancelar"},protect:{title:"Proteger documento",cancel:"Cancelar",apply:"Aplicar proteccin",applying:"Aplicando...",applyFailed:"No se pudo aplicar la proteccin. Por favor, intntelo de nuevo.",removeFailed:"No se pudo eliminar la proteccin. Por favor, intntelo de nuevo.",passwordMismatch:"Las contraseas no coinciden",noProtectionSelected:"Seleccione al menos una opcin de proteccin.",bothPasswordsNote:"Los usuarios que abran con la contrasea del documento tendrn permisos restringidos. Use la contrasea de propietario para acceso completo.",openPassword:{title:"Contrasea requerida para abrir",description:"Los usuarios deben ingresar una contrasea para ver este documento.",label:"Contrasea del documento",placeholder:"Ingresar contrasea",confirm:"Confirmar contrasea",confirmPlaceholder:"Confirmar contrasea"},ownerPassword:{label:"Contrasea de propietario",placeholder:"Ingresar contrasea de propietario",confirm:"Confirmar contrasea de propietario",confirmPlaceholder:"Confirmar contrasea de propietario"},permissions:{title:"Restringir permisos",description:"Limite lo que los usuarios pueden hacer con este documento.",allowedActions:"Acciones permitidas",print:"Imprimir",printHighQuality:"Imprimir alta calidad",copy:"Copiar contenido",accessibility:"Extraer para accesibilidad",modify:"Modificar contenido",annotations:"Aadir/modificar anotaciones y comentarios",fillForms:"Rellenar formularios y firmar",assemble:"Ensamblar documento y extraer pginas"},encrypted:{title:"Documento protegido",description:"Este documento est protegido por el propietario. Ingrese la contrasea de propietario para modificar la configuracin de seguridad.",enterOwnerPassword:"Ingrese la contrasea de propietario para modificar",unlockAndEdit:"Desbloquear y Editar"},modifyProtection:{title:"Modificar proteccin",description:"Elija cmo desea modificar la proteccin del documento.",changeOption:"Cambiar contraseas o permisos",changeDescription:"Actualizar la contrasea del documento o la configuracin de permisos.",removeOption:"Eliminar toda la proteccin",removeDescription:"Eliminar la proteccin por contrasea de este documento."},removeProtection:{title:"Eliminar proteccin",warning:"Est seguro de que desea eliminar la proteccin?",description:"Esto eliminar toda la proteccin por contrasea del documento. Cualquiera podr abrirlo y modificarlo.",confirm:"Eliminar proteccin"}},security:{protected:{title:"Este documento est protegido",description:"Este archivo est protegido y algunas funciones pueden estar deshabilitadas. Vaya a Seguridad en el men del documento para ver o desbloquear los permisos.",viewPermissions:"Ver permisos"},viewPermissions:{title:"Permisos del documento",description:"Este archivo est restringido por el propietario y requiere una contrasea para desbloquear ciertas acciones.",restrictedActions:"Acciones restringidas"},unlock:{label:"Ingrese la contrasea de propietario para desbloquear",placeholder:"Ingresar contrasea de propietario",button:"Desbloquear archivo",invalidPassword:"Contrasea invlida. Por favor, intntelo de nuevo.",failed:"Error al desbloquear. Por favor, intntelo de nuevo.",success:"Permisos de propietario desbloqueados! Ahora tiene acceso completo."}},common:{close:"Cerrar",back:"Atrs"}}},{code:"zh-CN",name:"",translations:{search:{placeholder:"",caseSensitive:"",wholeWord:"",resultsFound:"{count} ",page:"{page}"},zoom:{in:"",out:"",fitWidth:"",fitPage:"",marquee:"",menu:"",level:" ({level}%)",dragTip:""},pan:{toggle:""},pointer:{toggle:""},capture:{screenshot:"",dragTip:"",title:"PDF",download:"",cancel:""},document:{menu:"",open:"",close:"",print:"",protect:"",export:"",fullscreen:"",loading:"..."},emptyState:{title:"",description:"+ PDF",descriptionMulti:"",openButton:"",supportedFormats:": PDF"},passwordPrompt:{title:"",required:"",incorrect:"",incorrectWarning:"",label:"",placeholder:"",open:"",opening:"...",cancel:"",close:""},documentError:{title:"",unknown:"",errorCode:": {code}",close:""},panel:{sidebar:"",search:"",comment:"",thumbnails:"",outline:"",annotationStyle:""},menu:{viewControls:"",zoomControls:"",moreOptions:""},outline:{title:"",loading:"...",noOutline:"",noBookmarks:""},page:{settings:"",single:"",twoOdd:"",twoEven:"",vertical:"",horizontal:"",spreadMode:"",scrollLayout:"",rotation:"",next:"",previous:""},rotate:{clockwise:"",counterClockwise:""},selection:{copy:""},mode:{view:"",annotate:"",shapes:"",redact:""},annotation:{text:"",highlight:"",strikeout:"",underline:"",squiggly:"",rectangle:"",circle:"",line:"",arrow:"",polygon:"",polyline:"",ink:"",stamp:"",freeText:"",square:"",styles:"{type} ",defaults:"{type} ",color:"",opacity:"",blendMode:"",strokeWidth:"",strokeColor:"",borderStyle:"",fillColor:"",fontSize:"",fontFamily:"",textAlign:"",verticalAlign:"",lineEnding:"",lineStart:"",lineEnd:"",font:"",fontColor:"",backgroundColor:"",noStyles:"",noStylesStamp:"",selectAnnotation:"",deleteSelected:"",moreTools:""},redaction:{area:"",text:"",applyAll:"",clearAll:"",deleteSelected:"",commitSelected:""},history:{undo:"",redo:""},comments:{page:"{page}",commentCount:"{count}",commentCountPlural:"{count}",addComment:"...",addReply:"...",save:"",cancel:"",edit:"",delete:"",showMore:"",showLess:"",emptyState:""},blendMode:{normal:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"",colorDodge:"",colorBurn:"",hardLight:"",softLight:"",difference:"",exclusion:"",hue:"",saturation:"",color:"",luminosity:""},print:{title:"",loading:"...",pages:"",all:"",current:"{currentPage}",specify:"",specifyEG:"1-3, 5, 8-10",total:"{totalPages}",annotation:"",printing:"...",print:"",cancel:""},protect:{title:"",cancel:"",apply:"",applying:"...",applyFailed:"",removeFailed:"",passwordMismatch:"",noProtectionSelected:"",bothPasswordsNote:"",openPassword:{title:"",description:"",label:"",placeholder:"",confirm:"",confirmPlaceholder:""},ownerPassword:{label:"",placeholder:"",confirm:"",confirmPlaceholder:""},permissions:{title:"",description:"",allowedActions:"",print:"",printHighQuality:"",copy:"",accessibility:"",modify:"",annotations:"/",fillForms:"",assemble:""},encrypted:{title:"",description:"",enterOwnerPassword:"",unlockAndEdit:""},modifyProtection:{title:"",description:"",changeOption:"",changeDescription:"",removeOption:"",removeDescription:""},removeProtection:{title:"",warning:"",description:"",confirm:""}},security:{protected:{title:"",description:'""',viewPermissions:""},viewPermissions:{title:"",description:"",restrictedActions:""},unlock:{label:"",placeholder:"",button:"",invalidPassword:"",failed:"",success:""}},common:{close:"",back:""}}}],paramResolvers:m0},ui:{schema:{id:"pdf-viewer-ui",version:"1.0.0",toolbars:{"main-toolbar":{id:"main-toolbar",position:{placement:"top",slot:"main",order:0},permanent:!0,responsive:{localeOverrides:{groups:[{id:"chinese-languages",locales:["zh-CN"],breakpoints:{sm:{replaceHide:["zoom-toolbar","mode-select-button","overflow-tabs-button"],replaceShow:["view-mode","annotate-mode","shapes-mode","redact-mode","pan-button","pointer-button","divider-3"]},md:{replaceShow:["view-mode","annotate-mode","shapes-mode","redact-mode","zoom-toolbar","pan-button","pointer-button","divider-3"],replaceHide:["zoom-menu-button","mode-select-button","overflow-tabs-button"]}}},{id:"germanic-languages",locales:["de","nl"],breakpoints:{md:{replaceShow:["view-mode","annotate-mode","zoom-toolbar","pan-button","pointer-button","divider-3","overflow-tabs-button"]}}}]},breakpoints:{xxxs:{maxWidth:400,hide:["annotate-mode","view-mode","shapes-mode","redact-mode","zoom-toolbar","pan-button","pointer-button","divider-3","page-settings-button","zoom-menu-button","divider-2","overflow-tabs-button"],show:["mode-select-button"]},xxs:{minWidth:400,show:["page-settings-button","zoom-menu-button","divider-2"],hide:["overflow-left-action-menu-button"]},xs:{minWidth:500,maxWidth:640,show:["pan-button","pointer-button","divider-3"]},sm:{minWidth:640,maxWidth:768,hide:["shapes-mode","redact-mode","zoom-toolbar","mode-select-button"],show:["view-mode","annotate-mode","overflow-tabs-button","pan-button","pointer-button","divider-3"]},md:{minWidth:768,show:["view-mode","annotate-mode","shapes-mode","zoom-toolbar","pan-button","pointer-button","divider-3","overflow-tabs-button"],hide:["zoom-menu-button","mode-select-button"]},lg:{minWidth:1024,show:["shapes-mode","redact-mode"],hide:["overflow-tabs-button"]}}},items:[{type:"group",id:"left-group",alignment:"start",gap:2,items:[{type:"command-button",id:"document-menu-button",commandId:"document:menu",variant:"icon",categories:["document","document-menu"]},{type:"divider",id:"divider-1",orientation:"vertical"},{type:"command-button",id:"sidebar-button",commandId:"panel:toggle-sidebar",variant:"icon",categories:["panel","panel-sidebar"]},{type:"command-button",id:"overflow-left-action-menu-button",commandId:"left-action-menu:overflow-menu",variant:"icon",categories:["ui","ui-menu"]},{type:"command-button",id:"page-settings-button",commandId:"page:settings",variant:"icon",categories:["page","page-settings"]}]},{type:"divider",id:"divider-2",orientation:"vertical"},{type:"group",id:"center-group",alignment:"center",gap:2,items:[{type:"command-button",id:"zoom-menu-button",commandId:"zoom:toggle-menu-mobile",variant:"icon",categories:["zoom","zoom-menu"]},{type:"custom",id:"zoom-toolbar",componentId:"zoom-toolbar",categories:["zoom"]},{type:"divider",id:"divider-3",orientation:"vertical",visibilityDependsOn:{itemIds:["zoom-toolbar","zoom-menu-button"]}},{type:"command-button",id:"pan-button",commandId:"pan:toggle",variant:"icon",categories:["tools","pan"]},{type:"command-button",id:"pointer-button",commandId:"pointer:toggle",variant:"icon",categories:["tools","pointer"]}]},{type:"spacer",id:"spacer-1",flex:!0},{type:"custom",id:"mode-select-button",componentId:"mode-select-button",categories:["mode"],visibilityDependsOn:{menuId:"mode-tabs-overflow-menu"}},{type:"tab-group",id:"mode-tabs",tabs:[{id:"view-mode",commandId:"mode:view",variant:"text",categories:["mode","mode-view"],visibilityDependsOn:{itemIds:["annotate-mode","shapes-mode","redact-mode"]}},{id:"annotate-mode",commandId:"mode:annotate",variant:"text",categories:["mode","mode-annotate","annotation"]},{id:"shapes-mode",commandId:"mode:shapes",variant:"text",categories:["mode","mode-shapes","annotation"]},{id:"redact-mode",commandId:"mode:redact",variant:"text",categories:["mode","mode-redact","redaction"]},{id:"overflow-tabs-button",commandId:"tabs:overflow-menu",variant:"icon",categories:["ui","ui-menu"],visibilityDependsOn:{menuId:"mode-tabs-overflow-menu"}}]},{type:"spacer",id:"spacer-2",flex:!0},{type:"group",id:"right-group",alignment:"end",gap:2,items:[{type:"command-button",id:"search-button",commandId:"panel:toggle-search",variant:"icon",categories:["panel","panel-search"]},{type:"command-button",id:"comment-button",commandId:"panel:toggle-comment",variant:"icon",categories:["panel","panel-comment"]}]}]},"annotation-toolbar":{id:"annotation-toolbar",position:{placement:"top",slot:"secondary",order:0},responsive:{breakpoints:{sm:{maxWidth:640,hide:["add-text","add-stamp"],show:["overflow-annotation-tools"]},md:{minWidth:640,hide:["overflow-annotation-tools"],show:["add-text","add-stamp"]}}},permanent:!1,categories:["annotation"],items:[{type:"spacer",id:"spacer-3",flex:!0},{type:"group",id:"annotation-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"add-highlight",commandId:"annotation:add-highlight",variant:"icon",categories:["annotation","annotation-markup","annotation-highlight"]},{type:"command-button",id:"add-strikeout",commandId:"annotation:add-strikeout",variant:"icon",categories:["annotation","annotation-markup","annotation-strikeout"]},{type:"command-button",id:"add-underline",commandId:"annotation:add-underline",variant:"icon",categories:["annotation","annotation-markup","annotation-underline"]},{type:"command-button",id:"add-ink",commandId:"annotation:add-ink",variant:"icon",categories:["annotation","annotation-ink"]},{type:"command-button",id:"add-text",commandId:"annotation:add-text",variant:"icon",categories:["annotation","annotation-text"]},{type:"command-button",id:"add-stamp",commandId:"annotation:add-stamp",variant:"icon",categories:["annotation","annotation-stamp"]},{type:"command-button",id:"overflow-annotation-tools",commandId:"annotation:overflow-tools",variant:"icon",categories:["annotation","annotation-overflow"]},{type:"divider",id:"annotation-tools-divider-1",orientation:"vertical"},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"divider",id:"annotation-tools-divider-2",orientation:"vertical",visibilityDependsOn:{itemIds:["toggle-annotation-style"]}},{type:"command-button",id:"undo-button",commandId:"history:undo",variant:"icon",categories:["history","history-undo"]},{type:"command-button",id:"redo-button",commandId:"history:redo",variant:"icon",categories:["history","history-redo"]}]},{type:"spacer",id:"spacer-4",flex:!0}]},"shapes-toolbar":{id:"shapes-toolbar",position:{placement:"top",slot:"secondary",order:0},responsive:{breakpoints:{sm:{maxWidth:640,hide:["add-polygon","add-polyline"],show:["overflow-shapes-tools"]},md:{minWidth:640,hide:["overflow-shapes-tools"],show:["add-polygon","add-polyline"]}}},permanent:!1,categories:["annotation","annotation-shape"],items:[{type:"spacer",id:"spacer-5",flex:!0},{type:"group",id:"shapes-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"add-rectangle",commandId:"annotation:add-rectangle",variant:"icon",categories:["annotation","annotation-shape","annotation-rectangle"]},{type:"command-button",id:"add-circle",commandId:"annotation:add-circle",variant:"icon",categories:["annotation","annotation-shape","annotation-circle"]},{type:"command-button",id:"add-line",commandId:"annotation:add-line",variant:"icon",categories:["annotation","annotation-shape","annotation-line"]},{type:"command-button",id:"add-arrow",commandId:"annotation:add-arrow",variant:"icon",categories:["annotation","annotation-shape","annotation-arrow"]},{type:"command-button",id:"add-polygon",commandId:"annotation:add-polygon",variant:"icon",categories:["annotation","annotation-shape","annotation-polygon"]},{type:"command-button",id:"add-polyline",commandId:"annotation:add-polyline",variant:"icon",categories:["annotation","annotation-shape","annotation-polyline"]},{type:"command-button",id:"overflow-shapes-tools",commandId:"annotation:overflow-shapes",variant:"icon",categories:["annotation","annotation-shape","annotation-overflow"]},{type:"divider",id:"shapes-tools-divider-1",orientation:"vertical"},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"divider",id:"shapes-tools-divider-2",orientation:"vertical",visibilityDependsOn:{itemIds:["toggle-annotation-style"]}},{type:"command-button",id:"undo-button",commandId:"history:undo",variant:"icon",categories:["history","history-undo"]},{type:"command-button",id:"redo-button",commandId:"history:redo",variant:"icon",categories:["history","history-redo"]}]},{type:"spacer",id:"spacer-6",flex:!0}]},"redaction-toolbar":{id:"redaction-toolbar",position:{placement:"top",slot:"secondary",order:0},permanent:!1,categories:["redaction"],items:[{type:"spacer",id:"spacer-7",flex:!0},{type:"group",id:"redaction-tools",alignment:"start",gap:2,items:[{type:"command-button",id:"redact-text",commandId:"redaction:redact-text",variant:"icon",categories:["redaction","redaction-text"]},{type:"command-button",id:"redact-area",commandId:"redaction:redact-area",variant:"icon",categories:["redaction","redaction-area"]},{type:"divider",id:"divider-5",orientation:"vertical"},{type:"command-button",id:"apply-redactions",commandId:"redaction:apply-all",variant:"icon",categories:["redaction","redaction-apply"]},{type:"command-button",id:"clear-redactions",commandId:"redaction:clear-all",variant:"icon",categories:["redaction","redaction-clear"]}]},{type:"spacer",id:"spacer-8",flex:!0}]}},menus:{"left-action-menu":{id:"left-action-menu",categories:["ui"],items:[{type:"submenu",id:"page-settings-submenu",labelKey:"menu.viewControls",label:"View Controls",icon:"viewSettings",menuId:"page-settings-menu",categories:["page"]},{type:"submenu",id:"zoom-submenu",labelKey:"menu.zoomControls",label:"Zoom Controls",icon:"zoomIn",menuId:"zoom-menu",categories:["zoom"]},{type:"divider",id:"divider-15"},{type:"command",id:"pan-button-menu",commandId:"pan:toggle",categories:["tools","pan"]},{type:"command",id:"pointer-button-menu",commandId:"pointer:toggle",categories:["tools","pointer"]}]},"mode-tabs-overflow-menu":{id:"mode-tabs-overflow-menu",items:[{type:"command",id:"mode:view",commandId:"mode:view",categories:["mode","mode-view"]},{type:"command",id:"mode:annotate",commandId:"mode:annotate",categories:["mode","mode-annotate","annotation"]},{type:"command",id:"mode:shapes",commandId:"mode:shapes",categories:["mode","mode-shapes","annotation"]},{type:"command",id:"mode:redact",commandId:"mode:redact",categories:["mode","mode-redact","redaction"]}],responsive:{breakpoints:{xs:{maxWidth:640,show:["mode:view","mode:annotate","mode:shapes","mode:redact"]},sm:{minWidth:640,maxWidth:768,hide:["mode:view","mode:annotate"]},md:{minWidth:768,hide:["mode:view","mode:annotate","mode:shapes"]}},localeOverrides:{groups:[{id:"germanic-languages",locales:["de","nl"],breakpoints:{md:{replaceHide:["mode:view","mode:annotate"]}}}]}}},"zoom-levels-menu":{id:"zoom-levels-menu",categories:["zoom","zoom-level"],items:[{type:"command",id:"zoom-levels-menu:25",commandId:"zoom:25",categories:["zoom","zoom-level","zoom-level-25"]},{type:"command",id:"zoom-levels-menu:50",commandId:"zoom:50",categories:["zoom","zoom-level","zoom-level-50"]},{type:"command",id:"zoom-levels-menu:100",commandId:"zoom:100",categories:["zoom","zoom-level","zoom-level-100"]},{type:"command",id:"zoom-levels-menu:125",commandId:"zoom:125",categories:["zoom","zoom-level","zoom-level-125"]},{type:"command",id:"zoom-levels-menu:150",commandId:"zoom:150",categories:["zoom","zoom-level","zoom-level-150"]},{type:"command",id:"zoom-levels-menu:200",commandId:"zoom:200",categories:["zoom","zoom-level","zoom-level-200"]},{type:"command",id:"zoom-levels-menu:400",commandId:"zoom:400",categories:["zoom","zoom-level","zoom-level-400"]},{type:"command",id:"zoom-levels-menu:800",commandId:"zoom:800",categories:["zoom","zoom-level","zoom-level-800"]},{type:"command",id:"zoom-levels-menu:1600",commandId:"zoom:1600",categories:["zoom","zoom-level","zoom-level-1600"]}]},"zoom-menu":{id:"zoom-menu",categories:["zoom"],items:[{type:"command",id:"zoom-menu:25",commandId:"zoom:25",categories:["zoom","zoom-level","zoom-level-25"]},{type:"command",id:"zoom-menu:50",commandId:"zoom:50",categories:["zoom","zoom-level","zoom-level-50"]},{type:"command",id:"zoom-menu:100",commandId:"zoom:100",categories:["zoom","zoom-level","zoom-level-100"]},{type:"command",id:"zoom-menu:125",commandId:"zoom:125",categories:["zoom","zoom-level","zoom-level-125"]},{type:"command",id:"zoom-menu:150",commandId:"zoom:150",categories:["zoom","zoom-level","zoom-level-150"]},{type:"command",id:"zoom-menu:200",commandId:"zoom:200",categories:["zoom","zoom-level","zoom-level-200"]},{type:"command",id:"zoom-menu:400",commandId:"zoom:400",categories:["zoom","zoom-level","zoom-level-400"]},{type:"command",id:"zoom-menu:800",commandId:"zoom:800",categories:["zoom","zoom-level","zoom-level-800"]},{type:"command",id:"zoom-menu:1600",commandId:"zoom:1600",categories:["zoom","zoom-level","zoom-level-1600"]},{type:"submenu",id:"zoom-levels-submenu",labelKey:"zoom.level",label:"Zoom Levels",menuId:"zoom-levels-menu",categories:["zoom","zoom-level"]},{type:"divider",id:"divider-zoom-in-out"},{type:"command",id:"zoom-menu:in",commandId:"zoom:in",categories:["zoom","zoom-in"]},{type:"command",id:"zoom-menu:out",commandId:"zoom:out",categories:["zoom","zoom-out"]},{type:"divider",id:"divider-8"},{type:"command",id:"zoom:fit-page",commandId:"zoom:fit-page",categories:["zoom","zoom-fit-page"]},{type:"command",id:"zoom:fit-width",commandId:"zoom:fit-width",categories:["zoom","zoom-fit-width"]},{type:"divider",id:"divider-9"},{type:"command",id:"zoom:marquee",commandId:"zoom:marquee",categories:["zoom","zoom-marquee"]}],responsive:{breakpoints:{xs:{maxWidth:640,show:["zoom-levels-submenu","divider-zoom-in-out"],hide:["zoom-menu:25","zoom-menu:50","zoom-menu:100","zoom-menu:125","zoom-menu:150","zoom-menu:200","zoom-menu:400","zoom-menu:800","zoom-menu:1600"]},md:{minWidth:768,show:["zoom-menu:25","zoom-menu:50","zoom-menu:100","zoom-menu:125","zoom-menu:150","zoom-menu:200","zoom-menu:400","zoom-menu:800","zoom-menu:1600"],hide:["zoom-levels-submenu","divider-zoom-in-out","zoom-menu:in","zoom-menu:out"]}}}},"document-menu":{id:"document-menu",categories:["document"],items:[{type:"command",id:"document:open",commandId:"document:open",categories:["document","document-open"]},{type:"command",id:"document:close",commandId:"document:close",categories:["document","document-close"]},{type:"divider",id:"divider-10"},{type:"command",id:"document:print",commandId:"document:print",categories:["document","document-print"]},{type:"command",id:"document:protect",commandId:"document:protect",categories:["document","document-protect"]},{type:"command",id:"document:capture",commandId:"document:capture",categories:["document","document-capture"]},{type:"command",id:"document:export",commandId:"document:export",categories:["document","document-export"]},{type:"divider",id:"divider-11",visibilityDependsOn:{itemIds:["document:export","document:print","document:capture","document:protect"]}},{type:"command",id:"document:fullscreen",commandId:"document:fullscreen",categories:["document","document-fullscreen"]}]},"annotation-tools-menu":{id:"annotation-tools-menu",categories:["annotation"],items:[{type:"command",id:"annotation:add-text",commandId:"annotation:add-text",categories:["annotation","annotation-text"]},{type:"command",id:"annotation:add-stamp",commandId:"annotation:add-stamp",categories:["annotation","annotation-stamp"]}]},"shapes-tools-menu":{id:"shapes-tools-menu",categories:["annotation","annotation-shape"],items:[{type:"command",id:"annotation:add-polygon",commandId:"annotation:add-polygon",categories:["annotation","annotation-shape","annotation-polygon"]},{type:"command",id:"annotation:add-polyline",commandId:"annotation:add-polyline",categories:["annotation","annotation-shape","annotation-polyline"]}]},"page-settings-menu":{id:"page-settings-menu",categories:["page"],items:[{type:"section",id:"spread-mode-section",labelKey:"page.spreadMode",label:"Spread Mode",categories:["page","spread"],items:[{type:"command",id:"spread:none",commandId:"spread:none",categories:["page","spread","spread-none"]},{type:"command",id:"spread:odd",commandId:"spread:odd",categories:["page","spread","spread-odd"]},{type:"command",id:"spread:even",commandId:"spread:even",categories:["page","spread","spread-even"]}]},{type:"divider",id:"divider-13"},{type:"section",id:"scroll-layout-section",labelKey:"page.scrollLayout",label:"Scroll Layout",categories:["page","scroll"],items:[{type:"command",id:"scroll:vertical",commandId:"scroll:vertical",categories:["page","scroll","scroll-vertical"]},{type:"command",id:"scroll:horizontal",commandId:"scroll:horizontal",categories:["page","scroll","scroll-horizontal"]}]},{type:"divider",id:"divider-14"},{type:"section",id:"page-rotation-section",labelKey:"page.rotation",label:"Page Rotation",categories:["page","rotate"],items:[{type:"command",id:"rotate:clockwise",commandId:"rotate:clockwise",categories:["page","rotate","rotate-clockwise"]},{type:"command",id:"rotate:counter-clockwise",commandId:"rotate:counter-clockwise",categories:["page","rotate","rotate-counter-clockwise"]}]},{type:"divider",id:"divider-15"},{type:"command",id:"document:fullscreen",commandId:"document:fullscreen",categories:["document","document-fullscreen"]}]}},sidebars:{"sidebar-panel":{id:"sidebar-panel",position:{placement:"left",slot:"main",order:0},content:{type:"tabs",tabs:[{id:"thumbnails",labelKey:"panel.thumbnails",label:"Thumbnails",icon:"squares",componentId:"thumbnails-sidebar"},{id:"outline",labelKey:"panel.outline",label:"Outline",icon:"listTree",componentId:"outline-sidebar"}]},width:"250px",collapsible:!0,defaultOpen:!1},"annotation-panel":{id:"annotation-panel",position:{placement:"left",slot:"main",order:0},content:{type:"component",componentId:"annotation-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1},"search-panel":{id:"search-panel",position:{placement:"right",slot:"main",order:0},content:{type:"component",componentId:"search-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1},"comment-panel":{id:"comment-panel",position:{placement:"right",slot:"main",order:0},content:{type:"component",componentId:"comment-sidebar"},width:"250px",collapsible:!0,defaultOpen:!1}},modals:{"print-modal":{id:"print-modal",content:{type:"component",componentId:"print-modal"},maxWidth:"28rem",closeOnClickOutside:!0,closeOnEscape:!0},"protect-modal":{id:"protect-modal",content:{type:"component",componentId:"protect-modal"},maxWidth:"28rem",closeOnClickOutside:!0,closeOnEscape:!0},"view-permissions-modal":{id:"view-permissions-modal",content:{type:"component",componentId:"view-permissions-modal"},maxWidth:"28rem",closeOnClickOutside:!0,closeOnEscape:!0}},overlays:{"page-controls":{id:"page-controls",position:{anchor:"bottom-center",offset:{bottom:"1.5rem"}},content:{type:"component",componentId:"page-controls"},defaultEnabled:!0},"unlock-owner-overlay":{id:"unlock-owner-overlay",position:{anchor:"bottom-right",offset:{bottom:"1.5rem",right:"1.5rem"}},content:{type:"component",componentId:"unlock-owner-overlay"},defaultEnabled:!0}},selectionMenus:{annotation:{id:"annotation",categories:["annotation"],items:[{type:"command-button",id:"delete-annotation",commandId:"annotation:delete-selected",variant:"icon",categories:["annotation","annotation-delete"]},{type:"command-button",id:"toggle-annotation-style",commandId:"panel:toggle-annotation-style",variant:"icon",categories:["panel","panel-annotation-style"]},{type:"command-button",id:"comment-button",commandId:"panel:toggle-comment",variant:"icon",categories:["panel","panel-comment"]}]},redaction:{id:"redaction",categories:["redaction"],items:[{type:"command-button",id:"delete-redaction",commandId:"redaction:delete-selected",variant:"icon",categories:["redaction","redaction-delete"]},{type:"command-button",id:"commit-redaction",commandId:"redaction:commit-selected",variant:"icon",categories:["redaction","redaction-commit"]}]},selection:{id:"selection",visibilityDependsOn:{itemIds:["copy-selection","add-highlight","add-strikeout","add-underline","add-squiggly","redact-text"]},items:[{type:"command-button",id:"copy-selection",commandId:"selection:copy",variant:"icon",categories:["selection","selection-copy"]},{type:"command-button",id:"add-highlight",commandId:"annotation:add-highlight",variant:"icon",categories:["annotation","annotation-markup","annotation-highlight"]},{type:"command-button",id:"add-strikeout",commandId:"annotation:add-strikeout",variant:"icon",categories:["annotation","annotation-markup","annotation-strikeout"]},{type:"command-button",id:"add-underline",commandId:"annotation:add-underline",variant:"icon",categories:["annotation","annotation-markup","annotation-underline"]},{type:"command-button",id:"add-squiggly",commandId:"annotation:add-squiggly",variant:"icon",categories:["annotation","annotation-markup","annotation-squiggly"]},{type:"command-button",id:"redact-text",commandId:"redaction:redact-text",variant:"icon",categories:["redaction","redaction-text"]}]}}}},viewport:{viewportGap:10},scroll:{defaultStrategy:ct.Vertical},zoom:{defaultZoomLevel:qe.FitPage},spread:{defaultSpreadMode:rt.None},rotation:{defaultRotation:sn.Degree0},pan:{},render:{defaultImageType:"image/png"},tiling:{tileSize:768,overlapPx:2.5,extraRings:0},thumbnails:{width:150,gap:10,buffer:3,labelHeight:30},annotations:{},search:{},selection:{},bookmarks:{},attachments:{},capture:{scale:2,imageType:"image/png"},redaction:{drawBlackBoxes:!0},print:{},export:{defaultFileName:"document.pdf"},fullscreen:{},history:{},interactionManager:{}};function S0(e){var t=e.documentId,n=e.tabBarVisibility,o=n===void 0?"multiple":n,i=(function(f){const v=lr(),{provides:y}=cn(),b=y?.getSchema(),x=zc(f);return{renderToolbar:(w,C)=>{const I=`${w}-${C}`;if(!b||!y||!x)return null;const k=x.activeToolbars[I],S=k?b.toolbars[k.toolbarId]:null;k&&!S&&console.warn(`Toolbar "${k.toolbarId}" not found in schema`);const M=S&&!S.permanent?()=>y.forDocument(f).closeToolbarSlot(w,C):void 0,P=v.toolbar;return D(Y,{children:k&&S&&D(P,{schema:S,documentId:f,isOpen:k.isOpen,onClose:M})},`toolbar-slot-${I}`)},renderSidebar:(w,C)=>{var I;const k=`${w}-${C}`;if(!b||!y||!x)return null;const S=x.activeSidebars[k],M=S?(I=b.sidebars)==null?void 0:I[S.sidebarId]:null;S&&!M&&console.warn(`Sidebar "${S.sidebarId}" not found in schema`);const P=v.sidebar;return D(Y,{children:S&&M&&D(P,{schema:M,documentId:f,isOpen:S.isOpen,onClose:()=>{y.forDocument(f).closeSidebarSlot(w,C)}})},`sidebar-slot-${k}`)},renderModal:()=>{var w;if(!b||!y||!x)return null;const C=v.modal;if(!C)return null;const I=x.activeModal,k=I?(w=b.modals)==null?void 0:w[I.modalId]:null;return I&&!k&&console.warn(`Modal "${I.modalId}" not found in schema`),D(Y,{children:I&&k&&D(C,{schema:k,documentId:f,isOpen:I.isOpen,onClose:()=>{y.forDocument(f).closeModal()},onExited:()=>{y.forDocument(f).clearModal()}})},"modal-slot")},getActiveToolbars:()=>x?Object.entries(x.activeToolbars).map(([w,C])=>{const[I,k]=w.split("-");return{placement:I,slot:k,toolbarId:C.toolbarId,isOpen:C.isOpen}}):[],getActiveSidebars:()=>x?Object.entries(x.activeSidebars).map(([w,C])=>{const[I,k]=w.split("-");return{placement:I,slot:k,sidebarId:C.sidebarId,isOpen:C.isOpen}}):[],renderOverlays:()=>{if(!b||!y||!x)return null;const w=v.overlay;return w?D(Y,{children:(b.overlays?Object.values(b.overlays):[]).filter(C=>x.enabledOverlays[C.id]!==!1).map(C=>D(w,{schema:C,documentId:f},C.id))},"overlays-slot"):null}}})(t),r=i.renderToolbar,a=i.renderSidebar,s=i.renderModal,c=i.renderOverlays,d=ke(t).translate,u=oi("selection",t),m=oi("annotation",t),h=oi("redaction",t),g=(f=>{const v=Po();return X(()=>v?v.documentOrder.map(y=>v.documents[y]).filter(y=>y!=null):[],[v,f])})(),p=(()=>{const f=Po();return X(()=>{if(!f)return{activeDocumentId:null,activeDocument:null};const v=f.activeDocumentId;return{activeDocumentId:v,activeDocument:v?f.documents[v]??null:null}},[f])})();return l(Y,null,l(v0,{documentStates:g,activeDocumentId:p.activeDocumentId,visibility:o}),r("top","main"),r("top","secondary"),l("div",{id:"document-content",className:"bg-bg-surface flex flex-1 overflow-hidden"},a("left","main"),l("div",{className:"flex-1 overflow-hidden"},l(ep,{documentId:t},function(f){var v=f.documentState,y=f.isLoading,b=f.isError,x=f.isLoaded;return l(Y,null,y&&l("div",{className:"flex h-full items-center justify-center"},l(Fi,{size:"lg",text:d("document.loading")})),b&&l(b0,{documentState:v}),x&&l("div",{className:"relative h-full w-full"},l(hf,{documentId:t},l(Sg,{className:"bg-bg-app",documentId:t},l(cp,{documentId:t},l(zg,{documentId:t,renderPage:function(w){var C=w.pageIndex;return l(pp,{documentId:t,pageIndex:C,style:{backgroundColor:"#fff"}},l(gf,{documentId:t,pageIndex:C},l(mp,{documentId:t,pageIndex:C,scale:.5,style:{pointerEvents:"none"}}),l(Np,{documentId:t,pageIndex:C,style:{pointerEvents:"none"}}),l(vp,{documentId:t,pageIndex:C}),l(dp,{documentId:t,pageIndex:C}),l(Of,{documentId:t,pageIndex:C}),l(Ap,{documentId:t,pageIndex:C,selectionMenu:u}),l(Gf,{documentId:t,pageIndex:C,selectionMenu:h}),l(If,{documentId:t,pageIndex:C,selectionMenu:m})))}})))),c()))})),a("right","main")),s())}var Ks=new Cl([new wl,new xl]);function P0(e){var t,n=e.config,o=e.onRegistryReady,i=(function(d){const{wasmUrl:u=wg,worker:m=!0,logger:h,encoderPoolSize:g,fontFallback:p}=d??{},[f,v]=z(null),[y,b]=z(!0),[x,w]=z(null),C=K(null);return T(()=>{let I=!1;return(async()=>{try{const{createPdfiumEngine:k}=m?await zr(()=>import("./worker-engine-Ch3J8jLj-Biw_9ENV.js"),__vite__mapDeps([0,1,2,3,4])):await zr(()=>import("./direct-engine-m4-HnUa2-B7YafoK6.js"),__vite__mapDeps([5,1,2,3,4])),S=await k(u,{logger:h,encoderPoolSize:g,fontFallback:p});C.current=S,v(S),b(!1)}catch(k){I||(w(k),b(!1))}})(),()=>{var k,S;I=!0,(S=(k=C.current)==null?void 0:k.closeAllDocuments)==null||S.call(k).wait(()=>{var M,P;(P=(M=C.current)==null?void 0:M.destroy)==null||P.call(M),C.current=null},Oe)}},[u,m,h,p]),{engine:f,isLoading:y,error:x}})(O(O({},n.wasmUrl&&{wasmUrl:n.wasmUrl}),{},{worker:n.worker,logger:n.log?Ks:void 0})),r=i.engine,a=i.isLoading,s=X(function(){return{"thumbnails-sidebar":$y,"annotation-sidebar":a0,"zoom-toolbar":Qy,"search-sidebar":jy,"outline-sidebar":Hy,"comment-sidebar":Xy,"print-modal":c0,"protect-modal":C0,"unlock-owner-overlay":I0,"page-controls":d0,"mode-select-button":w0,"view-permissions-modal":k0}},[]),c=X(function(){return{toolbar:ly,sidebar:Ay,modal:Ly,overlay:l0,menu:Ty,selectionMenu:s0}},[]);return l(Y,null,l("style",null,Th),!r||a?l("div",{className:"flex h-full w-full items-center justify-center"},l(Fi,{size:"lg",text:"Initializing PDF engine..."})):l(vg,{config:{logger:n.log?Ks:void 0,permissions:n.permissions},onInitialized:(t=Zs(On().m(function d(u){return On().w(function(m){for(;;)switch(m.n){case 0:o&&u&&o(u);case 1:return m.a(2)}},d)})),function(d){return t.apply(this,arguments)}),engine:r,plugins:[Pe(tp,O(O(O({},De.documentManager),n.src&&{initialDocuments:[{url:n.src}]}),n.documentManager)),Pe(op,O(O(O({},De.commands),n.disabledCategories&&{disabledCategories:n.disabledCategories}),n.commands)),Pe(rp,O(O({},De.i18n),n.i18n)),Pe(Vg,O(O(O({},De.ui),n.disabledCategories&&{disabledCategories:n.disabledCategories}),n.ui)),Pe(Ig,O(O({},De.viewport),n.viewport)),Pe(Ag,O(O({},De.scroll),n.scroll)),Pe(sp,O(O({},De.zoom),n.zoom)),Pe(_g,O(O({},De.spread),n.spread)),Pe(gp,O(O({},De.rotation),n.rotation)),Pe(Ef,O(O({},De.pan),n.pan)),Pe(up,O(O({},De.render),n.render)),Pe(_p,O(O({},De.tiling),n.tiling)),Pe($p,O(O({},De.thumbnails),n.thumbnails)),Pe(df,O(O({},De.annotations),n.annotations)),Pe(fp,O(O({},De.search),n.search)),Pe(zp,O(O({},De.selection),n.selection)),Pe(zf,O(O({},De.bookmarks),n.bookmarks)),Pe(Kf,O(O({},De.attachments),n.attachments)),Pe(Nf,O(O({},De.capture),n.capture)),Pe(Uf,O(O({},De.redaction),n.redaction)),Pe(Sf,O(O({},De.print),n.print)),Pe(Tf,O(O({},De.export),n.export)),Pe(Mf,O(O({},De.fullscreen),n.fullscreen)),Pe(jf,O(O({},De.history),n.history)),Pe(uf,O(O({},De.interactionManager),n.interactionManager))]},function(d){var u=d.pluginsReady,m=d.activeDocumentId;return l(Y,null,u?l(Y,null,m?l(Jg,{documentId:m,components:s,renderers:c,className:"relative flex h-full w-full select-none flex-col"},l(S0,{documentId:m,tabBarVisibility:n.tabBar}),l(x0,{documentId:m}),l(Uy,{documentId:m})):l(y0,null)):l("div",{className:"flex h-full items-center justify-center"},l(Fi,{size:"lg",text:"Initializing plugins..."})))}))}var D0=typeof HTMLElement<"u"?HTMLElement:Hi(function e(){ji(this,e)}),M0=(function(){function e(){var t;return ji(this,e),q(t=Ys(this,e),"_resolveRegistry",null),q(t,"themeStyleEl",null),q(t,"systemPreferenceCleanup",null),q(t,"handleRegistryReady",function(n){t._resolveRegistry&&(t._resolveRegistry(n),t._resolveRegistry=null)}),t.root=t.attachShadow({mode:"open"}),t._registryPromise=new Promise(function(n){t._resolveRegistry=n}),t}return Xs(e,D0),Hi(e,[{key:"connectedCallback",value:function(){this._config||(this._config={src:this.getAttribute("src")||"/demo.pdf",worker:this.getAttribute("worker")!=="false",theme:this.parseThemeAttribute()}),this.setupTheme(),this.renderViewer()}},{key:"disconnectedCallback",value:function(){var t;(t=this.systemPreferenceCleanup)===null||t===void 0||t.call(this),this.systemPreferenceCleanup=null}},{key:"parseThemeAttribute",value:function(){var t=this.getAttribute("theme");if(t)return["light","dark","system"].includes(t)?{preference:t}:void 0}},{key:"config",get:function(){return this._config},set:function(t){this._config=t,t.icons&&ps(t.icons),this.isConnected&&(this.setupTheme(),this.renderViewer())}},{key:"registry",get:function(){return this._registryPromise}},{key:"themePreference",get:function(){var t;return((t=this._config)===null||t===void 0||(t=t.theme)===null||t===void 0?void 0:t.preference)||"system"}},{key:"activeColorScheme",get:function(){return Gs(this.themePreference)}},{key:"activeTheme",get:function(){return this.resolveActiveTheme()}},{key:"resolveActiveTheme",value:function(){var t,n,o,i=(t=this._config)===null||t===void 0?void 0:t.theme,r=Gs(i?.preference||"system"),a=r==="dark"?g0:h0,s=i?.[r];return o=a,(n=s)?p0(o,n):o}},{key:"setupTheme",value:function(){var t,n,o=this;(t=this.systemPreferenceCleanup)===null||t===void 0||t.call(this),this.systemPreferenceCleanup=null,(((n=this._config)===null||n===void 0||(n=n.theme)===null||n===void 0?void 0:n.preference)||"system")==="system"&&(this.systemPreferenceCleanup=(function(i){if(typeof window>"u")return function(){};var r=window.matchMedia("(prefers-color-scheme: dark)"),a=function(s){return i(s.matches?"dark":"light")};return r.addEventListener("change",a),function(){return r.removeEventListener("change",a)}})(function(i){o.injectTheme(),o.dispatchEvent(new CustomEvent("themechange",{detail:{preference:"system",colorScheme:i,theme:o.activeTheme},bubbles:!0}))})),this.injectTheme()}},{key:"injectTheme",value:function(){var t=f0(this.resolveActiveTheme()),n=this.root.querySelector("style[data-embedpdf-theme]");n||((n=document.createElement("style")).setAttribute("data-embedpdf-theme",""),this.root.appendChild(n)),this.themeStyleEl=n,this.themeStyleEl.textContent=t,this.setAttribute("data-color-scheme",this.activeColorScheme)}},{key:"setTheme",value:function(t){this._config&&(this._config.theme=typeof t=="string"?O(O({},this._config.theme),{},{preference:t}):O(O({},this._config.theme),t),this.setupTheme(),this.dispatchEvent(new CustomEvent("themechange",{detail:{preference:this.themePreference,colorScheme:this.activeColorScheme,theme:this.activeTheme},bubbles:!0})))}},{key:"registerIcon",value:function(t,n){Zm(t,n)}},{key:"registerIcons",value:function(t){ps(t)}},{key:"renderViewer",value:function(){this._config&&(xi(l(P0,{config:this._config,onRegistryReady:this.handleRegistryReady}),this.root),this.injectTheme())}}])})(),A0=["type","target"],z0="2.2.0";typeof customElements>"u"||customElements.get("embedpdf-container")||customElements.define("embedpdf-container",M0);var T0={version:z0,init:function(e){if(e.type==="container")return(function(t){t.type,t.target;var n=Oo(t,A0),o=document.createElement("embedpdf-container");return o.config=n,t.target.appendChild(o),o})(e)}};const E0=An.forwardRef(function(t,n){const{config:o={},className:i,style:r,onInit:a,onReady:s}=t,c=An.useRef(null),d=An.useRef(null);return An.useImperativeHandle(n,()=>({get container(){return d.current},get registry(){var u;return((u=d.current)==null?void 0:u.registry)??null}})),An.useEffect(()=>{if(!c.current)return;let u=!0;const m=c.current,h=T0.init({type:"container",target:m,...o});return h&&(d.current=h,a?.(h),s&&h.registry.then(g=>{u&&s(g)})),()=>{u=!1,m.innerHTML="",d.current=null}},[]),gi.jsx("div",{ref:c,className:i,style:r})});function _0(){const e=Ih.c(4),{pdf_url:t}=kh().props;console.log("url",t);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n={height:"100vh"},e[0]=n):n=e[0];let o;e[1]===Symbol.for("react.memo_cache_sentinel")?(o={preference:"light"},e[1]=o):o=e[1];let i;return e[2]!==t?(i=gi.jsx("div",{style:n,children:gi.jsx(E0,{config:{src:t,theme:o}})}),e[2]=t,e[3]=i):i=e[3],i}const Z0=Object.freeze(Object.defineProperty({__proto__:null,default:_0},Symbol.toStringTag,{value:"Module"}));export{Kh as $,Q as A,ge as B,Wh as D,Ie as E,W0 as G,q0 as K,H0 as L,Zi as M,j0 as O,_ as P,fo as S,qh as T,Yh as U,B0 as V,ee as W,V0 as Y,G0 as Z,Gh as _,bl as a,K0 as b,F0 as c,Hh as d,O0 as e,L0 as f,Ce as g,We as h,sn as i,N0 as j,Uh as k,Nh as o,Z0 as p,U0 as q,$0 as r,Vr as v,Ne as w,Rn as x,Il as y,Bh as z};
