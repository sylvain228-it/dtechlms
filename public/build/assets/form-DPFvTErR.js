import{c as Ke,u as Ue,b as We,r as Xe,j as t,a as $e}from"./app-BOmU1wmL.js";import{I as ee,T as Ve,S as Ge,C as te}from"./form-Cdl3Pe45.js";import{B as Pe}from"./button-BXeYMGgI.js";import{S as He}from"./spinner--AHlGxP7.js";import{T as Ye}from"./teacher-layouts-Ur2cbxUY.js";import{I as Ze,E as et}from"./type-DDACwUq3.js";import{u as tt,a as st}from"./index-C4OL-TuX.js";import"./app-VvtKnDwK.js";import"./index-sq8JxwLA.js";import"./index-CtUadT9n.js";import"./index-CyaJm5Nq.js";import"./utils-e8IeQt0G.js";import"./createLucideIcon-DUOuwx2-.js";import"./page-banner-C7OHPqMr.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-fxZgv_cA.js";import"./iconBase-CPalTnLO.js";import"./arrow-left-CgAHiiqU.js";import"./app-logo-icon-CK9aNDB_.js";import"./user-profile-trigger-BYgeGczA.js";import"./sun-B3Xv17I3.js";import"./avatar-CufrlqXh.js";import"./index-DdNxHDY2.js";import"./index-BdIQ-kbR.js";import"./index-C6gdkV91.js";import"./avatar-fallback-BjXZxSaF.js";import"./use-initials-GDEZD6-s.js";import"./divider-BBgeuDb2.js";import"./profile-svg-Bwy5UQEi.js";import"./dropdown-menu-DRIWHMxB.js";import"./index-BwiOEFi6.js";import"./index-XA1OJB6Q.js";import"./index-B-fAkSq4.js";import"./index-DTrOkFw6.js";import"./index-1aSE4XS9.js";import"./index-CXwkwjvO.js";import"./check-D2RIYBP2.js";import"./logout-user-HcNmiAIC.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-BmohMvgA.js";import"./index-8GFiKN7D.js";import"./index-DMEIf3eg.js";import"./index-B5Wz6g3U.js";import"./index-088ta_6r.js";import"./index-BhKAPyE2.js";import"./index-D-fKvoRm.js";import"./index-DH9SVvWg.js";import"./index-CJeVcETn.js";import"./index-CU8SWGOj.js";import"./index-BD3HuK-g.js";import"./index-D_EaEfK3.js";import"./index-oCkK5fXa.js";import"./index-CKQT5-Tp.js";import"./gauge-04CtoFE8.js";import"./calendar-B0CvDZ_G.js";import"./settings-Ch-IO4g_.js";import"./x-Cxqud0xV.js";import"./menu-VI9xwiLb.js";import"./index-Bwrcs2qz.js";import"./index-DerrCcFj.js";function ps(){const e=Ke.c(158),{activity:n,quize:o}=Ue().props,c=!!o,{errors:r}=Ue().props,oe=o?.title??"",ne=o?.description??"",ae=o?.quize_instructions??"",me=o?.note_unit??"",ce=o?.quiz_type??"formative",ue=o?.time_limit_minutes??null,de=o?.max_attempts??1,pe=o?.is_mandatory??!1,he=o?.shuffle_questions??!0,fe=o?.shuffle_answers??!0,_e=o?.show_results_immediately??!0,xe=o?.show_correct_answers??!1,be=o?.max_score??null,je=o?.success_threshold??null;let se;e[0]!==n.id||e[1]!==oe||e[2]!==ne||e[3]!==_e||e[4]!==xe||e[5]!==be||e[6]!==je||e[7]!==ae||e[8]!==me||e[9]!==ce||e[10]!==ue||e[11]!==de||e[12]!==pe||e[13]!==he||e[14]!==fe?(se={activity_id:n.id,title:oe,description:ne,quize_instructions:ae,note_unit:me,quiz_type:ce,time_limit_minutes:ue,max_attempts:de,is_mandatory:pe,shuffle_questions:he,shuffle_answers:fe,show_results_immediately:_e,show_correct_answers:xe,max_score:be,success_threshold:je},e[0]=n.id,e[1]=oe,e[2]=ne,e[3]=_e,e[4]=xe,e[5]=be,e[6]=je,e[7]=ae,e[8]=me,e[9]=ce,e[10]=ue,e[11]=de,e[12]=pe,e[13]=he,e[14]=fe,e[15]=se):se=e[15];const{data:l,setData:s,reset:ge}=We(se),[m,Oe]=Xe.useState(!1);let a;if(e[16]!==n.id||e[17]!==l||e[18]!==c||e[19]!==o||e[20]!==ge){let i=function(){c||ge(),Oe(!1)};a=Je=>{Je.preventDefault(),Oe(!0);const Re={...l,_method:c?"put":"post"};c&&o?.id?$e.put(tt([n.id,o.id]),Re,{onFinish:i}):$e.post(st(n.id),Re,{onFinish:i})},e[16]=n.id,e[17]=l,e[18]=c,e[19]=o,e[20]=ge,e[21]=a}else a=e[21];const Qe=!!(l.title&&l.quiz_type),ye=c?"Modifier le quiz":"Nouveau quiz",qe=c?"Modifier le quiz":"Créer un quiz";let u;e[22]!==qe?(u=t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-800",children:qe}),e[22]=qe,e[23]=u):u=e[23];const ve=!Qe||m;let d;e[24]!==a?(d=i=>{i.preventDefault(),a(i)},e[24]=a,e[25]=d):d=e[25];let p;e[26]!==m?(p=m&&t.jsx(He,{}),e[26]=m,e[27]=p):p=e[27];let h;e[28]!==ve||e[29]!==d||e[30]!==p?(h=t.jsxs(Pe,{className:"btn-primary",disabled:ve,onClick:d,children:[p,"Enregistrer"]}),e[28]=ve,e[29]=d,e[30]=p,e[31]=h):h=e[31];let f;e[32]!==u||e[33]!==h?(f=t.jsxs("div",{className:"mb-5 flex items-center justify-between border-b p-3",children:[u,h]}),e[32]=u,e[33]=h,e[34]=f):f=e[34];let ie;e[35]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx("span",{className:"capitalize",children:"Quiz"}),e[35]=ie):ie=e[35];let _;e[36]!==n.title?(_=t.jsx("div",{className:"my-4 border-l-2 border-cblue p-3",children:t.jsxs("h4",{className:" ",children:[ie," pour l'activité"," ",t.jsx("b",{children:t.jsx("i",{children:n.title})})]})}),e[36]=n.title,e[37]=_):_=e[37];let x;e[38]!==s?(x=i=>s("title",i),e[38]=s,e[39]=x):x=e[39];let b;e[40]!==l.title||e[41]!==r.title||e[42]!==x?(b=t.jsx("div",{className:"mb-4",children:t.jsx(ee,{label:"Titre",value:l.title,onChange:x,required:!0,error:r.title,placeholder:"Titre du quiz"})}),e[40]=l.title,e[41]=r.title,e[42]=x,e[43]=b):b=e[43];const ze=l.description??"";let j;e[44]!==s?(j=i=>s("description",i),e[44]=s,e[45]=j):j=e[45];let g;e[46]!==r.description||e[47]!==ze||e[48]!==j?(g=t.jsx("div",{className:"mb-4",children:t.jsx(Ve,{label:"Description",value:ze,onChange:j,rows:4,placeholder:"Courte description du quiz",error:r.description})}),e[46]=r.description,e[47]=ze,e[48]=j,e[49]=g):g=e[49];const Ne=l.quiz_type??"";let y;e[50]!==s?(y=i=>s("quiz_type",i),e[50]=s,e[51]=y):y=e[51];let q;e[52]!==r.quiz_type||e[53]!==Ne||e[54]!==y?(q=t.jsx("div",{className:"mb-4",children:t.jsx(Ge,{label:"Type de quiz",value:Ne,onChange:y,options:Ze,required:!0,error:r.quiz_type})}),e[52]=r.quiz_type,e[53]=Ne,e[54]=y,e[55]=q):q=e[55];const we=l.time_limit_minutes??"";let v;e[56]!==s?(v=i=>s("time_limit_minutes",i?Number(i):null),e[56]=s,e[57]=v):v=e[57];let z;e[58]!==r.time_limit_minutes||e[59]!==we||e[60]!==v?(z=t.jsx(ee,{label:"Durée (minutes)",type:"number",value:we,onChange:v,error:r.time_limit_minutes,placeholder:"ex: 30"}),e[58]=r.time_limit_minutes,e[59]=we,e[60]=v,e[61]=z):z=e[61];const Ce=l.max_attempts??1;let N;e[62]!==s?(N=i=>s("max_attempts",i?Number(i):1),e[62]=s,e[63]=N):N=e[63];let w;e[64]!==r.max_attempts||e[65]!==Ce||e[66]!==N?(w=t.jsx(ee,{label:"Tentatives max",type:"number",value:Ce,onChange:N,error:r.max_attempts,placeholder:"ex: 3"}),e[64]=r.max_attempts,e[65]=Ce,e[66]=N,e[67]=w):w=e[67];let C;e[68]!==z||e[69]!==w?(C=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[z,w]}),e[68]=z,e[69]=w,e[70]=C):C=e[70];const Se=!!l.is_mandatory;let S;e[71]!==s?(S=i=>s("is_mandatory",i),e[71]=s,e[72]=S):S=e[72];let T;e[73]!==Se||e[74]!==S?(T=t.jsx("div",{children:t.jsx(te,{label:"Obligatoire",checked:Se,onChange:S})}),e[73]=Se,e[74]=S,e[75]=T):T=e[75];const Te=!!l.shuffle_questions;let k;e[76]!==s?(k=i=>s("shuffle_questions",i),e[76]=s,e[77]=k):k=e[77];let F;e[78]!==Te||e[79]!==k?(F=t.jsx("div",{children:t.jsx(te,{label:"Mélanger les questions",checked:Te,onChange:k})}),e[78]=Te,e[79]=k,e[80]=F):F=e[80];let E;e[81]!==T||e[82]!==F?(E=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[T,F]}),e[81]=T,e[82]=F,e[83]=E):E=e[83];const ke=!!l.shuffle_answers;let D;e[84]!==s?(D=i=>s("shuffle_answers",i),e[84]=s,e[85]=D):D=e[85];let I;e[86]!==ke||e[87]!==D?(I=t.jsx("div",{children:t.jsx(te,{label:"Mélanger les réponses",checked:ke,onChange:D})}),e[86]=ke,e[87]=D,e[88]=I):I=e[88];const Fe=!!l.show_results_immediately;let L;e[89]!==s?(L=i=>s("show_results_immediately",i),e[89]=s,e[90]=L):L=e[90];let M;e[91]!==Fe||e[92]!==L?(M=t.jsx("div",{children:t.jsx(te,{label:"Afficher résultats immédiatement",checked:Fe,onChange:L})}),e[91]=Fe,e[92]=L,e[93]=M):M=e[93];let A;e[94]!==I||e[95]!==M?(A=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[I,M]}),e[94]=I,e[95]=M,e[96]=A):A=e[96];const Ee=l.note_unit??"fr";let B;e[97]!==s?(B=i=>s("note_unit",i),e[97]=s,e[98]=B):B=e[98];let P;e[99]!==r.note_unit||e[100]!==Ee||e[101]!==B?(P=t.jsx(Ge,{label:"Unité de notation",value:Ee,onChange:B,options:et,required:!0,error:r.note_unit}),e[99]=r.note_unit,e[100]=Ee,e[101]=B,e[102]=P):P=e[102];const De=l.max_score??"";let O;e[103]!==s?(O=i=>s("max_score",i?Number(i):null),e[103]=s,e[104]=O):O=e[104];let Q;e[105]!==r.max_score||e[106]!==De||e[107]!==O?(Q=t.jsx(ee,{label:"Score max",type:"number",value:De,onChange:O,error:r.max_score,placeholder:"ex: 100"}),e[105]=r.max_score,e[106]=De,e[107]=O,e[108]=Q):Q=e[108];let R;e[109]!==P||e[110]!==Q?(R=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[P,Q]}),e[109]=P,e[110]=Q,e[111]=R):R=e[111];const Ie=!!l.show_correct_answers;let U;e[112]!==s?(U=i=>s("show_correct_answers",i),e[112]=s,e[113]=U):U=e[113];let $;e[114]!==Ie||e[115]!==U?($=t.jsx("div",{children:t.jsx(te,{label:"Afficher réponses correctes",checked:Ie,onChange:U})}),e[114]=Ie,e[115]=U,e[116]=$):$=e[116];const Le=`Seuil de réussite (${l.note_unit??""})`,Me=l.success_threshold??"";let V;e[117]!==s?(V=i=>s("success_threshold",i?Number(i):null),e[117]=s,e[118]=V):V=e[118];let G;e[119]!==r.success_threshold||e[120]!==Le||e[121]!==Me||e[122]!==V?(G=t.jsx("div",{children:t.jsx(ee,{label:Le,type:"number",value:Me,onChange:V,error:r.success_threshold,placeholder:"ex: 60"})}),e[119]=r.success_threshold,e[120]=Le,e[121]=Me,e[122]=V,e[123]=G):G=e[123];let H;e[124]!==$||e[125]!==G?(H=t.jsxs("div",{className:"mb-4 grid gap-3 sm:grid-cols-2",children:[$,G]}),e[124]=$,e[125]=G,e[126]=H):H=e[126];const Ae=l.quize_instructions??"";let J;e[127]!==s?(J=i=>s("quize_instructions",i),e[127]=s,e[128]=J):J=e[128];let K;e[129]!==r.quize_instructions||e[130]!==Ae||e[131]!==J?(K=t.jsx("div",{className:"mb-4",children:t.jsx(Ve,{label:"Instructions",value:Ae,onChange:J,rows:4,placeholder:"Les instructions du quiz",error:r.quize_instructions})}),e[129]=r.quize_instructions,e[130]=Ae,e[131]=J,e[132]=K):K=e[132];let re;e[133]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(Pe,{variant:"ghost",onClick:it,className:"border",children:"Annuler"}),e[133]=re):re=e[133];const Be=!Qe||m;let W;e[134]!==m?(W=m&&t.jsx(He,{}),e[134]=m,e[135]=W):W=e[135];let X;e[136]!==Be||e[137]!==W?(X=t.jsxs("div",{className:"mt-6 flex items-center justify-end gap-3",children:[re,t.jsxs(Pe,{type:"submit",className:"btn-primary",disabled:Be,children:[W,"Enregistrer"]})]}),e[136]=Be,e[137]=W,e[138]=X):X=e[138];let Y;e[139]!==a||e[140]!==b||e[141]!==g||e[142]!==q||e[143]!==C||e[144]!==E||e[145]!==A||e[146]!==R||e[147]!==H||e[148]!==K||e[149]!==X?(Y=t.jsxs("form",{onSubmit:a,className:"rounded-lg border bg-white p-6 shadow",method:"POST",children:[b,g,q,C,E,A,R,H,K,X]}),e[139]=a,e[140]=b,e[141]=g,e[142]=q,e[143]=C,e[144]=E,e[145]=A,e[146]=R,e[147]=H,e[148]=K,e[149]=X,e[150]=Y):Y=e[150];let Z;e[151]!==f||e[152]!==_||e[153]!==Y?(Z=t.jsxs("div",{className:"mx-auto mt-8 max-w-3xl",children:[f,_,Y]}),e[151]=f,e[152]=_,e[153]=Y,e[154]=Z):Z=e[154];let le;return e[155]!==ye||e[156]!==Z?(le=t.jsx(Ye,{title:ye,children:Z}),e[155]=ye,e[156]=Z,e[157]=le):le=e[157],le}function it(){return history.back()}export{ps as default};
