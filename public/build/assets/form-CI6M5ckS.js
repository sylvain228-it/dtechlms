import{c as He,u as Be,r as Re,b as Oe,j as t,a as Le,L as We}from"./app-BzXwBPBx.js";import{I as se,S as qe,C as Xe,T as Ge}from"./form-B-fdkg48.js";import{B as Pe}from"./button-DpCkL2lj.js";import{S as Ve}from"./spinner-CIZwnsdn.js";import{T as Je}from"./teacher-layouts-C7E0jZE8.js";import{W as Ke,X as Qe,s as Ue}from"./type-DhUEUhhk.js";import{i as $e,u as Ye,k as Ze}from"./index-Ch72Gdeg.js";import{c as et}from"./createLucideIcon-BboBuA9R.js";import"./app-BlAWqAGg.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./utils-e8IeQt0G.js";import"./page-banner-CF78MDYO.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./index-DF2umSuw.js";import"./iconBase-BH9TG5R0.js";import"./arrow-left-AHTPeAno.js";import"./app-logo-icon-C2LaG9_Q.js";import"./user-profile-trigger-Dk_TTr5J.js";import"./sun-D7S3RfEj.js";import"./avatar-BR3sBMG9.js";import"./index-BWbkfBfC.js";import"./index-BZwf-zK1.js";import"./index-B2cDW95s.js";import"./avatar-fallback-D5NPW7a4.js";import"./use-initials-GDEZD6-s.js";import"./divider-B09NDvil.js";import"./profile-svg-DwoHoZ6q.js";import"./dropdown-menu-DlZS67It.js";import"./index-VdYImSg5.js";import"./index-CJlYDfk2.js";import"./index-DAHL75PX.js";import"./index-BQPF0Rq9.js";import"./index-BucdvD4Q.js";import"./index-BRTuzqyl.js";import"./check-BHZKRPmL.js";import"./logout-user-Ce_sIJue.js";import"./index-wHDUIrgA.js";import"./index-v3lNCs8j.js";import"./index-DGvaH1zc.js";import"./log-out-BkvcRscv.js";import"./index-Vl0f8Y-f.js";import"./index-DMEIf3eg.js";import"./index-BemDBUNW.js";import"./index-CQybyuYf.js";import"./index-B_X-8rh8.js";import"./index-D-fKvoRm.js";import"./index-BGGtLgwn.js";import"./index-DXuqG7by.js";import"./gauge-Cjf8cet3.js";import"./calendar-BjFjFj4e.js";import"./book-open-DAOtQgtK.js";import"./settings-NUZ-cO65.js";import"./x-BWOBLZ9u.js";import"./menu-CWhsNS-k.js";import"./index-DH9SVvWg.js";import"./index-CJeVcETn.js";import"./index-CU8SWGOj.js";import"./index-BD3HuK-g.js";import"./index-C4OL-TuX.js";import"./index-Bwrcs2qz.js";import"./index-DerrCcFj.js";import"./index-DqzhMcYD.js";const tt=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ze=et("Save",tt);function ui(){const e=He.c(141),{activity:l,criteria:o}=Be().props,c=!!o,{errors:n}=Be().props,[m,De]=Re.useState(!1),re=o?.skill_id??null,le=o?.title??"",oe=o?.description??"",ae=o?.weight??1,ne=o?.max_score??null,me=o?.success_threshold??null,ce=o?.is_mandatory??!1,de=o?.criterion_type??"knowledge",pe=o?.evaluation_method??"points",ue=o?.status??"draft";let K;e[0]!==l.id||e[1]!==re||e[2]!==le||e[3]!==oe||e[4]!==ae||e[5]!==ne||e[6]!==me||e[7]!==ce||e[8]!==de||e[9]!==pe||e[10]!==ue?(K={activity_id:l.id,skill_id:re,title:le,description:oe,weight:ae,max_score:ne,success_threshold:me,is_mandatory:ce,criterion_type:de,evaluation_method:pe,status:ue},e[0]=l.id,e[1]=re,e[2]=le,e[3]=oe,e[4]=ae,e[5]=ne,e[6]=me,e[7]=ce,e[8]=de,e[9]=pe,e[10]=ue,e[11]=K):K=e[11];const{data:i,setData:s,reset:he}=Oe(K);let a;if(e[12]!==l.id||e[13]!==l.slug||e[14]!==o||e[15]!==i||e[16]!==c||e[17]!==he){let r=function(){De(!1),he(),Le.visit($e(l.slug))};a=Ae=>{Ae.preventDefault(),De(!0),c&&o?Le.put(Ye([l.id,o.id]),i,{onFinish:r}):Le.post(Ze(l.id),i,{onFinish:r})},e[12]=l.id,e[13]=l.slug,e[14]=o,e[15]=i,e[16]=c,e[17]=he,e[18]=a}else a=e[18];const Ie=!!(i.title&&i.criterion_type&&i.evaluation_method&&i.status&&i.weight),fe=c?`Modifier le critère - ${l.title}`:`Créer un critère - ${l.title}`,xe=c?"Modifier le critère":"Créer un critère";let d;e[19]!==xe?(d=t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:xe}),e[19]=xe,e[20]=d):d=e[20];let p;e[21]!==l.title?(p=t.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Activité:"," ",t.jsx("span",{className:"font-medium",children:l.title})]}),e[21]=l.title,e[22]=p):p=e[22];let u;e[23]!==d||e[24]!==p?(u=t.jsxs("div",{children:[d,p]}),e[23]=d,e[24]=p,e[25]=u):u=e[25];let h;e[26]!==a?(h=r=>{r.preventDefault(),a(r)},e[26]=a,e[27]=h):h=e[27];const ge=!Ie||m;let f;e[28]!==m?(f=m&&t.jsx(Ve,{}),e[28]=m,e[29]=f):f=e[29];let Q;e[30]===Symbol.for("react.memo_cache_sentinel")?(Q=t.jsx(ze,{className:"h-4 w-4"}),e[30]=Q):Q=e[30];const be=c?"Mettre à jour":"Créer";let x;e[31]!==h||e[32]!==ge||e[33]!==f||e[34]!==be?(x=t.jsx("div",{className:"flex items-center gap-2",children:t.jsxs(Pe,{onClick:h,disabled:ge,className:"btn-primary inline-flex items-center gap-2",children:[f,Q,be]})}),e[31]=h,e[32]=ge,e[33]=f,e[34]=be,e[35]=x):x=e[35];let g;e[36]!==u||e[37]!==x?(g=t.jsxs("div",{className:"mb-6 flex items-center justify-between border-b pb-4",children:[u,x]}),e[36]=u,e[37]=x,e[38]=g):g=e[38];let U;e[39]===Symbol.for("react.memo_cache_sentinel")?(U=t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Identification"}),e[39]=U):U=e[39];let b;e[40]!==s?(b=r=>s("title",r),e[40]=s,e[41]=b):b=e[41];const ve=n.title;let v;e[42]!==i.title||e[43]!==b||e[44]!==ve?(v=t.jsx(se,{label:"Titre du critère",value:i.title,onChange:b,required:!0,error:ve,placeholder:"Ex: Clarté de la présentation"}),e[42]=i.title,e[43]=b,e[44]=ve,e[45]=v):v=e[45];let _;e[46]!==s?(_=r=>s("criterion_type",r),e[46]=s,e[47]=_):_=e[47];const _e=n.criterion_type;let y;e[48]!==i.criterion_type||e[49]!==_||e[50]!==_e?(y=t.jsx(qe,{label:"Type de critère",value:i.criterion_type,options:Ke,onChange:_,required:!0,error:_e}),e[48]=i.criterion_type,e[49]=_,e[50]=_e,e[51]=y):y=e[51];let j;e[52]!==v||e[53]!==y?(j=t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[v,y]}),e[52]=v,e[53]=y,e[54]=j):j=e[54];const ye=i.description??"";let N;e[55]!==s?(N=r=>s("description",r),e[55]=s,e[56]=N):N=e[56];const je=n.description;let w;e[57]!==ye||e[58]!==N||e[59]!==je?(w=t.jsx("div",{className:"mt-4",children:t.jsx(Ge,{label:"Description",value:ye,onChange:N,rows:3,placeholder:"Description détaillée du critère d'évaluation",error:je})}),e[57]=ye,e[58]=N,e[59]=je,e[60]=w):w=e[60];let C;e[61]!==j||e[62]!==w?(C=t.jsxs("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[U,j,w]}),e[61]=j,e[62]=w,e[63]=C):C=e[63];let Y;e[64]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Configuration d'évaluation"}),e[64]=Y):Y=e[64];let S;e[65]!==s?(S=r=>s("evaluation_method",r),e[65]=s,e[66]=S):S=e[66];const Ne=n.evaluation_method;let F;e[67]!==i.evaluation_method||e[68]!==S||e[69]!==Ne?(F=t.jsx(qe,{label:"Méthode d'évaluation",value:i.evaluation_method,options:Qe,onChange:S,required:!0,error:Ne}),e[67]=i.evaluation_method,e[68]=S,e[69]=Ne,e[70]=F):F=e[70];let k;e[71]!==s?(k=r=>s("weight",r?parseFloat(r):0),e[71]=s,e[72]=k):k=e[72];const we=n.weight;let M;e[73]!==i.weight||e[74]!==k||e[75]!==we?(M=t.jsx(se,{label:"Pondération (%)",type:"number",value:i.weight,onChange:k,required:!0,error:we,placeholder:"1-100"}),e[73]=i.weight,e[74]=k,e[75]=we,e[76]=M):M=e[76];let E;e[77]!==s?(E=r=>s("status",r),e[77]=s,e[78]=E):E=e[78];const Ce=n.status;let T;e[79]!==i.status||e[80]!==E||e[81]!==Ce?(T=t.jsx(qe,{label:"Statut",value:i.status,options:Ue,onChange:E,required:!0,error:Ce}),e[79]=i.status,e[80]=E,e[81]=Ce,e[82]=T):T=e[82];let L;e[83]!==F||e[84]!==M||e[85]!==T?(L=t.jsxs("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[Y,t.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[F,M,T]})]}),e[83]=F,e[84]=M,e[85]=T,e[86]=L):L=e[86];let Z;e[87]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Notation"}),e[87]=Z):Z=e[87];const Se=i.max_score??"";let q;e[88]!==s?(q=r=>s("max_score",r?parseFloat(r):null),e[88]=s,e[89]=q):q=e[89];const Fe=n.max_score;let D;e[90]!==Se||e[91]!==q||e[92]!==Fe?(D=t.jsx(se,{label:"Note maximum",type:"number",value:Se,onChange:q,error:Fe,placeholder:"Ex: 20"}),e[90]=Se,e[91]=q,e[92]=Fe,e[93]=D):D=e[93];const ke=i.success_threshold??"";let I;e[94]!==s?(I=r=>s("success_threshold",r?parseFloat(r):null),e[94]=s,e[95]=I):I=e[95];const Me=n.success_threshold;let B;e[96]!==ke||e[97]!==I||e[98]!==Me?(B=t.jsx(se,{label:"Seuil de réussite",type:"number",value:ke,onChange:I,error:Me,placeholder:"Ex: 10"}),e[96]=ke,e[97]=I,e[98]=Me,e[99]=B):B=e[99];let P;e[100]!==D||e[101]!==B?(P=t.jsxs("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[Z,t.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[D,B]})]}),e[100]=D,e[101]=B,e[102]=P):P=e[102];let ee;e[103]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("h2",{className:"mb-4 text-lg font-semibold text-gray-900",children:"Options"}),e[103]=ee):ee=e[103];let V;e[104]!==s?(V=r=>s("is_mandatory",r),e[104]=s,e[105]=V):V=e[105];let $;e[106]!==i.is_mandatory||e[107]!==V?($=t.jsx(Xe,{label:"Critère obligatoire",checked:i.is_mandatory,onChange:V}),e[106]=i.is_mandatory,e[107]=V,e[108]=$):$=e[108];let z;e[109]!==i.evaluation_method?(z=i.evaluation_method==="points"&&t.jsx("div",{className:"rounded bg-blue-50 p-3 text-sm text-blue-800",children:"Conseil: Configurez la note maximum et le seuil de réussite pour une évaluation précise."}),e[109]=i.evaluation_method,e[110]=z):z=e[110];let A;e[111]!==$||e[112]!==z?(A=t.jsxs("div",{className:"rounded-lg border bg-white p-6 shadow-sm",children:[ee,t.jsxs("div",{className:"space-y-3",children:[$,z]})]}),e[111]=$,e[112]=z,e[113]=A):A=e[113];const Ee=!Ie||m;let H;e[114]!==m?(H=m&&t.jsx(Ve,{}),e[114]=m,e[115]=H):H=e[115];let te;e[116]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(ze,{className:"h-4 w-4"}),e[116]=te):te=e[116];const Te=c?"Mettre à jour":"Créer";let R;e[117]!==Ee||e[118]!==H||e[119]!==Te?(R=t.jsxs(Pe,{type:"submit",disabled:Ee,className:"btn-primary inline-flex items-center gap-2",children:[H,te,Te]}),e[117]=Ee,e[118]=H,e[119]=Te,e[120]=R):R=e[120];let O;e[121]!==l.slug?(O=$e(l.slug),e[121]=l.slug,e[122]=O):O=e[122];let W;e[123]!==O?(W=t.jsx(We,{href:O,className:"inline-flex items-center gap-2 rounded-md border border-gray-200 bg-white px-4 py-2 text-sm font-medium hover:bg-gray-50",children:"Annuler"}),e[123]=O,e[124]=W):W=e[124];let X;e[125]!==R||e[126]!==W?(X=t.jsxs("div",{className:"flex items-center gap-3 border-t pt-6",children:[R,W]}),e[125]=R,e[126]=W,e[127]=X):X=e[127];let G;e[128]!==a||e[129]!==C||e[130]!==L||e[131]!==P||e[132]!==A||e[133]!==X?(G=t.jsxs("form",{onSubmit:a,className:"space-y-6",children:[C,L,P,A,X]}),e[128]=a,e[129]=C,e[130]=L,e[131]=P,e[132]=A,e[133]=X,e[134]=G):G=e[134];let J;e[135]!==g||e[136]!==G?(J=t.jsxs("div",{className:"mx-auto mt-6 max-w-4xl px-4",children:[g,G]}),e[135]=g,e[136]=G,e[137]=J):J=e[137];let ie;return e[138]!==fe||e[139]!==J?(ie=t.jsx(Je,{title:fe,children:J}),e[138]=fe,e[139]=J,e[140]=ie):ie=e[140],ie}export{ui as default};
