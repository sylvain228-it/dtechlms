import{c as We,r as R,j as t,L as $e}from"./app-BzXwBPBx.js";import{S as ge}from"./form-B-fdkg48.js";import{B as pe}from"./badge-fo3-CsRB.js";import{s as _e}from"./tasks-BTAmnlgm.js";import{q as Ye,t as Ze,u as et,v as tt,m as Ve,w as st,a as Ee,x as lt}from"./type-DhUEUhhk.js";import{d as Oe,f as Pe}from"./utils-e8IeQt0G.js";import{d as ze}from"./index-BemDBUNW.js";import{X as at}from"./x-BWOBLZ9u.js";import{C as fe}from"./calendar-BjFjFj4e.js";import{C as Se}from"./clock-BtWjw7tR.js";import{A as Be}from"./arrow-right-Cxn6oFcZ.js";import{V as qe,G as it,M as rt}from"./video-C1sVKcO6.js";import{S as De}from"./search-N_1dfqU-.js";import{C as nt}from"./chevron-down-eKEbewAb.js";import{L as ct}from"./list-DzzLKJvF.js";import{M as Re}from"./map-pin-_ft6a9sQ.js";import"./app-BlAWqAGg.js";import"./index-D1DaFm8C.js";import"./index-CmvPZPYG.js";import"./index-CyaJm5Nq.js";import"./index-BqTge0le.js";import"./index-CMWG4mbA.js";import"./lexical-headless-DaF8M3S2.js";import"./nodes-CSrlFqt9.js";import"./index-CQybyuYf.js";import"./createLucideIcon-BboBuA9R.js";function It(i){const e=We.c(126),{activities:n,isAssessment:ke}=i,Ce=ke===void 0?!1:ke;let I;e[0]===Symbol.for("react.memo_cache_sentinel")?(I={search:"",activityType:"",status:"",activity_status:"",visibility:"",modality:""},e[0]=I):I=e[0];const[l,Te]=R.useState(I),[m,Le]=R.useState("grid"),[d,Ge]=R.useState(!1);let X;if(e[1]!==n||e[2]!==l.activityType||e[3]!==l.activity_status||e[4]!==l.modality||e[5]!==l.search||e[6]!==l.status||e[7]!==l.visibility){let s;e[9]!==l.activityType||e[10]!==l.activity_status||e[11]!==l.modality||e[12]!==l.search||e[13]!==l.status||e[14]!==l.visibility?(s=o=>{const we=o.title.toLowerCase().includes(l.search.toLowerCase())||o.description?.toLowerCase().includes(l.search.toLowerCase()),He=!l.activityType||o.activity_type===l.activityType,Je=!l.status||o.status===l.status,Ke=!l.activity_status||o.activity_status===l.activity_status,Qe=!l.visibility||o.visibility===l.visibility,Ue=!l.modality||o.modality===l.modality;return we&&He&&Je&&Ke&&Qe&&Ue},e[9]=l.activityType,e[10]=l.activity_status,e[11]=l.modality,e[12]=l.search,e[13]=l.status,e[14]=l.visibility,e[15]=s):s=e[15],X=n.filter(s),e[1]=n,e[2]=l.activityType,e[3]=l.activity_status,e[4]=l.modality,e[5]=l.search,e[6]=l.status,e[7]=l.visibility,e[8]=X}else X=e[8];const a=X;let H;e[16]===Symbol.for("react.memo_cache_sentinel")?(H=(s,o)=>{Te(we=>({...we,[s]:o}))},e[16]=H):H=e[16];const q=H;let J;e[17]===Symbol.for("react.memo_cache_sentinel")?(J=()=>{Te({search:"",activityType:"",status:"",activity_status:"",visibility:"",modality:""})},e[17]=J):J=e[17];const Ie=J,c=Object.values(l).some(ft),Ae=pt,Me=gt,Fe=ut,[x,K]=R.useState(1),[r,Xe]=R.useState(9);let Q,U;e[18]!==a.length||e[19]!==r?(Q=()=>{const s=Math.max(1,Math.ceil(a.length/r));K(o=>o>s?s:o)},U=[a.length,r],e[18]=a.length,e[19]=r,e[20]=Q,e[21]=U):(Q=e[20],U=e[21]),R.useEffect(Q,U);const G=Math.max(1,Math.ceil(a.length/r)),W=(x-1)*r;let Y;e[22]!==a||e[23]!==r||e[24]!==W?(Y=a.slice(W,W+r),e[22]=a,e[23]=r,e[24]=W,e[25]=Y):Y=e[25];const Z=Y,be=Ce?"Évaluations":"Activités pédagogiques";let h;e[26]!==be?(h=t.jsx("h1",{className:"text-xl font-bold text-gray-900 sm:text-2xl dark:text-gray-300",children:be}),e[26]=be,e[27]=h):h=e[27];const ye=Ce?" d'évaluation":"";let u;e[28]!==ye?(u=t.jsxs("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:["Consultez et gérez vos activités",ye," ici."]}),e[28]=ye,e[29]=u):u=e[29];let g;e[30]!==h||e[31]!==u?(g=t.jsx("div",{className:"mb-8 flex items-center justify-between",children:t.jsxs("div",{children:[h,u]})}),e[30]=h,e[31]=u,e[32]=g):g=e[32];let ee;e[33]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx("p",{className:"text-sm font-medium",children:"Total"}),e[33]=ee):ee=e[33];let p;e[34]!==n.length?(p=t.jsxs("div",{children:[ee,t.jsx("p",{className:"mt-2 text-3xl font-bold",children:n.length})]}),e[34]=n.length,e[35]=p):p=e[35];let te;e[36]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(fe,{className:"h-10 w-10 text-blue-400"}),e[36]=te):te=e[36];let f;e[37]!==p?(f=t.jsx("div",{className:"rounded-lg bg-white p-6 shadow-md transition-shadow hover:shadow-lg dark:bg-cdcard",children:t.jsxs("div",{className:"flex items-center justify-between",children:[p,te]})}),e[37]=p,e[38]=f):f=e[38];let se;e[39]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx("p",{className:"text-sm font-medium",children:"À venir"}),e[39]=se):se=e[39];let b;e[40]!==n?(b=n.filter(ht),e[40]=n,e[41]=b):b=e[41];let y;e[42]!==b.length?(y=t.jsxs("div",{children:[se,t.jsx("p",{className:"mt-2 text-3xl font-bold text-blue-600",children:b.length})]}),e[42]=b.length,e[43]=y):y=e[43];let le;e[44]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(Se,{className:"h-10 w-10 text-blue-400"}),e[44]=le):le=e[44];let v;e[45]!==y?(v=t.jsx("div",{className:"rounded-lg bg-white p-6 shadow-md transition-shadow hover:shadow-lg dark:bg-cdcard",children:t.jsxs("div",{className:"flex items-center justify-between",children:[y,le]})}),e[45]=y,e[46]=v):v=e[46];let ae;e[47]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx("p",{className:"text-sm font-medium",children:"En cours"}),e[47]=ae):ae=e[47];let j;e[48]!==n?(j=n.filter(xt),e[48]=n,e[49]=j):j=e[49];let N;e[50]!==j.length?(N=t.jsxs("div",{children:[ae,t.jsx("p",{className:"mt-2 text-3xl font-bold text-green-600",children:j.length})]}),e[50]=j.length,e[51]=N):N=e[51];let ie;e[52]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(qe,{className:"h-10 w-10 text-green-400"}),e[52]=ie):ie=e[52];let w;e[53]!==N?(w=t.jsx("div",{className:"rounded-lg bg-white p-6 shadow-md transition-shadow hover:shadow-lg dark:bg-cdcard",children:t.jsxs("div",{className:"flex items-center justify-between",children:[N,ie]})}),e[53]=N,e[54]=w):w=e[54];let re;e[55]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("p",{className:"text-sm font-medium",children:"Filtrés"}),e[55]=re):re=e[55];let _;e[56]!==a.length?(_=t.jsxs("div",{children:[re,t.jsx("p",{className:"mt-2 text-3xl font-bold text-purple-600",children:a.length})]}),e[56]=a.length,e[57]=_):_=e[57];let ne;e[58]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(De,{className:"h-10 w-10 text-purple-400"}),e[58]=ne):ne=e[58];let S;e[59]!==_?(S=t.jsx("div",{className:"rounded-lg bg-white p-6 shadow-md transition-shadow hover:shadow-lg dark:bg-cdcard",children:t.jsxs("div",{className:"flex items-center justify-between",children:[_,ne]})}),e[59]=_,e[60]=S):S=e[60];let k;e[61]!==f||e[62]!==v||e[63]!==w||e[64]!==S?(k=t.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:[f,v,w,S]}),e[61]=f,e[62]=v,e[63]=w,e[64]=S,e[65]=k):k=e[65];let ce;e[66]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(De,{className:"absolute top-3 left-3 h-5 w-5 text-gray-400"}),e[66]=ce):ce=e[66];let oe;e[67]===Symbol.for("react.memo_cache_sentinel")?(oe=s=>q("search",s.target.value),e[67]=oe):oe=e[67];let C;e[68]!==l.search?(C=t.jsx("div",{className:"mb-6",children:t.jsxs("div",{className:"relative",children:[ce,t.jsx("input",{type:"text",placeholder:"Rechercher un événement...",value:l.search,onChange:oe,className:"w-full rounded-lg border border-gray-300 py-3 pr-4 pl-10 transition-all focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none dark:border-gray-400"})]})}),e[68]=l.search,e[69]=C):C=e[69];let T;e[70]!==d?(T=()=>Ge(!d),e[70]=d,e[71]=T):T=e[71];const ve=`h-4 w-4 transition-transform ${d?"rotate-180":""}`;let L;e[72]!==ve?(L=t.jsx(nt,{className:ve}),e[72]=ve,e[73]=L):L=e[73];let A;e[74]!==l||e[75]!==c?(A=c&&t.jsx("span",{className:"ml-2 inline-block rounded-full bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-600",children:Object.values(l).filter(mt).length}),e[74]=l,e[75]=c,e[76]=A):A=e[76];let M;e[77]!==T||e[78]!==L||e[79]!==A?(M=t.jsxs("button",{onClick:T,className:"flex items-center gap-2 rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 dark:text-gray-400",children:[L,"Filtres avancés",A]}),e[77]=T,e[78]=L,e[79]=A,e[80]=M):M=e[80];let de;e[81]===Symbol.for("react.memo_cache_sentinel")?(de=()=>Le("grid"),e[81]=de):de=e[81];const je=`rounded-md px-3 py-2 transition-all ${m==="grid"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100"}`;let me;e[82]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(it,{className:"h-5 w-5"}),e[82]=me):me=e[82];let F;e[83]!==je?(F=t.jsx("button",{onClick:de,className:je,title:"Vue grille",children:me}),e[83]=je,e[84]=F):F=e[84];let xe;e[85]===Symbol.for("react.memo_cache_sentinel")?(xe=()=>Le("list"),e[85]=xe):xe=e[85];const Ne=`rounded-md px-3 py-2 transition-all ${m==="list"?"bg-blue-100 text-blue-600":"text-gray-600 hover:bg-gray-100 dark:text-gray-400"}`;let he;e[86]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(ct,{className:"h-5 w-5"}),e[86]=he):he=e[86];let $;e[87]!==Ne?($=t.jsx("button",{onClick:xe,className:Ne,title:"Vue liste",children:he}),e[87]=Ne,e[88]=$):$=e[88];let V;e[89]!==F||e[90]!==$?(V=t.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-gray-300 p-1",children:[F,$]}),e[89]=F,e[90]=$,e[91]=V):V=e[91];let E;e[92]!==M||e[93]!==V?(E=t.jsxs("div",{className:"mb-4 flex flex-wrap items-center justify-between gap-4",children:[M,V]}),e[92]=M,e[93]=V,e[94]=E):E=e[94];let O;e[95]!==d||e[96]!==l.activityType||e[97]!==l.activity_status||e[98]!==l.modality||e[99]!==l.visibility||e[100]!==c?(O=d&&t.jsxs("div",{className:"space-y-4 border-t border-gray-200 pt-4",children:[t.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[t.jsx(ge,{label:"Type d'activité",value:l.activityType,emptyOption:"Tous les types",options:Ye,onChange:s=>q("activityType",s)}),t.jsx(ge,{label:"Statut de l'activité",value:l.activity_status,emptyOption:"Tous les statuts d'activité",options:Ze,onChange:s=>q("activity_status",s)}),t.jsx(ge,{label:"Visibilité",value:l.visibility,emptyOption:"Toutes les visibilités",options:et,onChange:s=>q("visibility",s)}),t.jsx(ge,{label:"Type de lieu",value:l.modality,emptyOption:"Tous les lieux",options:tt,onChange:s=>q("modality",s)})]}),c&&t.jsxs("button",{onClick:Ie,className:"flex items-center gap-2 rounded-lg border border-red-300 px-4 py-2 text-sm font-medium text-red-600 transition-colors hover:bg-red-50",children:[t.jsx(at,{className:"h-4 w-4"}),"Réinitialiser les filtres"]})]}),e[95]=d,e[96]=l.activityType,e[97]=l.activity_status,e[98]=l.modality,e[99]=l.visibility,e[100]=c,e[101]=O):O=e[101];let P;e[102]!==C||e[103]!==E||e[104]!==O?(P=t.jsxs("div",{className:"mb-8 rounded-xl border border-gray-400 p-6 shadow-md",children:[C,E,O]}),e[102]=C,e[103]=E,e[104]=O,e[105]=P):P=e[105];let z;e[106]!==a.length||e[107]!==c||e[108]!==Z||e[109]!==m?(z=a.length===0?t.jsxs("div",{className:"rounded-xl p-12 text-center shadow-md",children:[t.jsx(fe,{className:"mx-auto mb-4 h-16 w-16"}),t.jsx("h3",{className:"text-lg font-semibold",children:"Aucun événement trouvé"}),t.jsx("p",{className:"mt-2",children:c?"Essayez de modifier vos critères de filtrage":"Créez votre premier événement pour commencer"})]}):t.jsxs(t.Fragment,{children:[m==="grid"&&t.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:Z.map(s=>t.jsxs("div",{className:"group overflow-hidden rounded-xl bg-white shadow-md transition-all duration-300 hover:shadow-lg dark:bg-cdcard",children:[t.jsx("div",{className:"h-1",style:{backgroundColor:"#3B82F6"}}),t.jsxs("div",{className:"p-3 sm:p-6",children:[t.jsx("h3",{className:"mb-3 line-clamp-2 text-lg font-semibold text-gray-900 transition-colors group-hover:text-blue-600 dark:text-gray-200",children:s.title}),s.description&&t.jsx("p",{className:"mb-4 line-clamp-2 text-sm text-gray-600 dark:text-gray-300",children:s.description}),t.jsxs("div",{className:"mb-4 flex flex-wrap gap-2",children:[t.jsx(pe,{className:`inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold ${Me(s.activity_type)}`,children:_e(Ve(s.activity_type),0,37)}),t.jsx("span",{className:`inline-flex items-center rounded-full border px-3 py-1 text-xs font-semibold ${Ae(s.status)}`,children:st(s.status)})]}),t.jsxs("div",{className:"mb-4 space-y-2 border-t border-gray-200 pt-4",children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-400",children:[t.jsx(fe,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{children:Oe(s.start_at??"")})]}),s.duration_minutes&&t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-400",children:[t.jsx(Se,{className:"h-4 w-4 text-gray-400"}),t.jsxs("span",{children:["Durée:"," ",Pe(s.duration_minutes)]})]}),t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-400",children:[Fe(s),t.jsx(pe,{children:_e(Ee(s.modality),0,35)})]})]}),t.jsx("div",{className:"flex gap-2 pt-4",children:t.jsxs($e,{href:ze(s.slug),className:"flex items-center gap-2 font-medium text-blue-600 transition-colors hover:text-blue-800",children:[t.jsx(Be,{className:"h-4 w-4"}),"Détails"]})})]})]},s.id))}),m==="list"&&t.jsx("div",{className:"space-y-2 overflow-hidden rounded-xl shadow-md",children:Z.map(s=>t.jsxs("div",{className:"group flex flex-col gap-4 border-b border-gray-200 bg-white p-4 transition-colors last:border-b-0 hover:bg-gray-50 sm:p-6 lg:flex-row lg:items-center lg:justify-between dark:bg-cdcard dark:hover:bg-gray-800",children:[t.jsxs("div",{className:"flex flex-1 items-start gap-3 sm:gap-4",children:[t.jsx("div",{className:"h-12 w-1 flex-shrink-0 rounded-full",style:{backgroundColor:"#3B82F6"}}),t.jsxs("div",{className:"min-w-0 flex-1",children:[t.jsxs("div",{className:"mb-2 flex flex-col gap-2 sm:flex-row sm:items-center sm:gap-3",children:[t.jsx("h3",{className:"line-clamp-1 text-sm font-semibold text-gray-900 group-hover:text-blue-600 sm:text-base dark:text-gray-200",children:s.title}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.jsx(pe,{className:`text-xs font-semibold whitespace-nowrap ${Me(s.activity_type)}`,children:_e(Ve(s.activity_type),0,37)}),t.jsx(pe,{className:`text-xs font-semibold whitespace-nowrap ${Ae(s.status)}`,children:lt(s.activity_status)})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-600 sm:gap-4 sm:text-sm dark:text-gray-400",children:[t.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[t.jsx(fe,{className:"h-4 w-4 flex-shrink-0"}),t.jsx("span",{className:"line-clamp-1",children:Oe(s.start_at??"")})]}),s.duration_minutes&&t.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[t.jsx(Se,{className:"h-4 w-4 flex-shrink-0"}),t.jsx("span",{children:Pe(s.duration_minutes)})]}),t.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[Fe(s),t.jsx("span",{className:"line-clamp-1",children:Ee(s.modality)})]})]})]})]}),t.jsx("div",{className:"flex flex-shrink-0 items-center pt-2 sm:pt-0 lg:ml-4",children:t.jsxs($e,{href:ze(s.slug),className:"flex items-center gap-2 text-sm font-medium whitespace-nowrap text-blue-600 transition-colors hover:text-blue-800 sm:text-base",children:[t.jsx(Be,{className:"h-4 w-4"}),"Détails"]})})]},s.id))})]}),e[106]=a.length,e[107]=c,e[108]=Z,e[109]=m,e[110]=z):z=e[110];let B;e[111]!==x||e[112]!==a.length||e[113]!==r||e[114]!==G?(B=a.length>r&&t.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>K(dt),disabled:x===1,className:"rounded border px-3 py-1 text-sm disabled:opacity-50",children:"Préc"}),t.jsx("div",{className:"hidden items-center gap-1 sm:flex",children:Array.from({length:G},ot).map(s=>t.jsx("button",{onClick:()=>K(s),className:`rounded px-2 py-1 text-sm ${s===x?"bg-blue-600 text-white":"hover:bg-gray-100"}`,children:s},s))}),t.jsx("button",{onClick:()=>K(s=>Math.min(G,s+1)),disabled:x===G,className:"rounded border px-3 py-1 text-sm disabled:opacity-50",children:"Suiv"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm text-gray-700",children:"Afficher"}),t.jsxs("select",{value:r,onChange:s=>Xe(Number(s.target.value)),className:"rounded border px-2 py-1 text-sm",children:[t.jsx("option",{value:6,children:"6"}),t.jsx("option",{value:9,children:"9"}),t.jsx("option",{value:12,children:"12"}),t.jsx("option",{value:24,children:"24"})]})]})]}),e[111]=x,e[112]=a.length,e[113]=r,e[114]=G,e[115]=B):B=e[115];let D;e[116]!==a.length||e[117]!==c?(D=a.length>0&&t.jsx("div",{className:"mt-8 rounded-lg border border-blue-200 bg-blue-50 p-4 text-center dark:bg-blue-200",children:t.jsxs("p",{className:"text-sm text-blue-800",children:["Affichage de"," ",t.jsx("span",{className:"font-semibold",children:a.length})," ","activité",a.length>1?"s":""," ",c&&"correspondant aux critères"]})}),e[116]=a.length,e[117]=c,e[118]=D):D=e[118];let ue;return e[119]!==g||e[120]!==k||e[121]!==P||e[122]!==z||e[123]!==B||e[124]!==D?(ue=t.jsx("div",{className:"min-h-screen py-8",children:t.jsxs("div",{className:"mx-auto max-w-7xl px-4",children:[g,k,P,z,B,D]})}),e[119]=g,e[120]=k,e[121]=P,e[122]=z,e[123]=B,e[124]=D,e[125]=ue):ue=e[125],ue}function ot(i,e){return e+1}function dt(i){return Math.max(1,i-1)}function mt(i){return i!==""}function xt(i){return i.activity_status==="live"}function ht(i){return i.status==="scheduled"}function ut(i){return i.is_synchronous?i.modality==="onsite"?t.jsx(Re,{className:"h-4 w-4 text-orange-500"}):i.modality==="online"?t.jsx(qe,{className:"h-4 w-4 text-blue-500"}):t.jsx(Re,{className:"h-4 w-4 text-purple-500"}):t.jsx(rt,{className:"h-4 w-4 text-gray-500"})}function gt(i){switch(i){case"formative":return"text-blue-600 bg-blue-50";case"summative":return"text-purple-600 bg-purple-50";case"certifying":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}}function pt(i){switch(i){case"upcoming":return"bg-blue-100 text-blue-800 border-blue-300";case"ongoing":return"bg-green-100 text-green-800 border-green-300";case"completed":return"bg-gray-100 text-gray-800 border-gray-300";case"canceled":return"bg-red-100 text-red-800 border-red-300";default:return"bg-gray-100 text-gray-800"}}function ft(i){return i!==""}export{It as default};
